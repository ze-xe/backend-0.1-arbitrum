{"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\ALimitOrder.script.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\ALimitOrder.script.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":17},"end":{"line":15,"column":51}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"17":{"start":{"line":17,"column":15},"end":{"line":17,"column":30}},"18":{"start":{"line":18,"column":20},"end":{"line":18,"column":57}},"19":{"start":{"line":19,"column":17},"end":{"line":19,"column":34}},"20":{"start":{"line":20,"column":13},"end":{"line":20,"column":35}},"21":{"start":{"line":21,"column":16},"end":{"line":21,"column":45}},"22":{"start":{"line":22,"column":16},"end":{"line":22,"column":44}},"23":{"start":{"line":23,"column":27},"end":{"line":23,"column":54}},"24":{"start":{"line":24,"column":20},"end":{"line":24,"column":55}},"25":{"start":{"line":25,"column":19},"end":{"line":25,"column":51}},"26":{"start":{"line":26,"column":0},"end":{"line":26,"column":37}},"27":{"start":{"line":28,"column":0},"end":{"line":28,"column":27}},"28":{"start":{"line":29,"column":15},"end":{"line":29,"column":66}},"29":{"start":{"line":30,"column":0},"end":{"line":32,"column":3}},"30":{"start":{"line":31,"column":4},"end":{"line":31,"column":36}},"31":{"start":{"line":33,"column":0},"end":{"line":35,"column":3}},"32":{"start":{"line":34,"column":4},"end":{"line":34,"column":37}},"33":{"start":{"line":36,"column":0},"end":{"line":248,"column":4}},"34":{"start":{"line":36,"column":92},"end":{"line":248,"column":2}},"35":{"start":{"line":38,"column":18},"end":{"line":38,"column":26}},"36":{"start":{"line":39,"column":19},"end":{"line":39,"column":52}},"37":{"start":{"line":40,"column":19},"end":{"line":40,"column":67}},"38":{"start":{"line":41,"column":14},"end":{"line":41,"column":57}},"39":{"start":{"line":42,"column":15},"end":{"line":42,"column":59}},"40":{"start":{"line":43,"column":16},"end":{"line":43,"column":86}},"41":{"start":{"line":44,"column":16},"end":{"line":44,"column":86}},"42":{"start":{"line":45,"column":21},"end":{"line":45,"column":23}},"43":{"start":{"line":46,"column":17},"end":{"line":46,"column":19}},"44":{"start":{"line":47,"column":23},"end":{"line":47,"column":75}},"45":{"start":{"line":48,"column":16},"end":{"line":48,"column":18}},"46":{"start":{"line":49,"column":18},"end":{"line":49,"column":20}},"47":{"start":{"line":50,"column":15},"end":{"line":50,"column":50}},"48":{"start":{"line":51,"column":17},"end":{"line":51,"column":65}},"49":{"start":{"line":52,"column":20},"end":{"line":52,"column":21}},"50":{"start":{"line":53,"column":20},"end":{"line":53,"column":22}},"51":{"start":{"line":54,"column":25},"end":{"line":54,"column":28}},"52":{"start":{"line":55,"column":4},"end":{"line":58,"column":8}},"53":{"start":{"line":55,"column":17},"end":{"line":58,"column":6}},"54":{"start":{"line":56,"column":8},"end":{"line":56,"column":38}},"55":{"start":{"line":59,"column":4},"end":{"line":77,"column":8}},"56":{"start":{"line":59,"column":86},"end":{"line":77,"column":6}},"57":{"start":{"line":60,"column":33},"end":{"line":60,"column":80}},"58":{"start":{"line":61,"column":34},"end":{"line":61,"column":82}},"59":{"start":{"line":62,"column":26},"end":{"line":62,"column":75}},"60":{"start":{"line":63,"column":18},"end":{"line":63,"column":73}},"61":{"start":{"line":65,"column":22},"end":{"line":65,"column":110}},"62":{"start":{"line":66,"column":8},"end":{"line":66,"column":97}},"63":{"start":{"line":67,"column":27},"end":{"line":67,"column":80}},"64":{"start":{"line":68,"column":18},"end":{"line":68,"column":75}},"65":{"start":{"line":70,"column":23},"end":{"line":70,"column":112}},"66":{"start":{"line":71,"column":8},"end":{"line":71,"column":98}},"67":{"start":{"line":72,"column":8},"end":{"line":72,"column":31}},"68":{"start":{"line":73,"column":34},"end":{"line":73,"column":81}},"69":{"start":{"line":74,"column":35},"end":{"line":74,"column":83}},"70":{"start":{"line":75,"column":8},"end":{"line":75,"column":152}},"71":{"start":{"line":76,"column":8},"end":{"line":76,"column":155}},"72":{"start":{"line":78,"column":4},"end":{"line":146,"column":8}},"73":{"start":{"line":78,"column":92},"end":{"line":146,"column":6}},"74":{"start":{"line":80,"column":23},"end":{"line":85,"column":9}},"75":{"start":{"line":87,"column":22},"end":{"line":99,"column":9}},"76":{"start":{"line":101,"column":22},"end":{"line":111,"column":9}},"77":{"start":{"line":112,"column":8},"end":{"line":112,"column":27}},"78":{"start":{"line":114,"column":32},"end":{"line":114,"column":80}},"79":{"start":{"line":115,"column":8},"end":{"line":115,"column":41}},"80":{"start":{"line":116,"column":8},"end":{"line":118,"column":11}},"81":{"start":{"line":119,"column":30},"end":{"line":119,"column":131}},"82":{"start":{"line":120,"column":26},"end":{"line":120,"column":166}},"83":{"start":{"line":121,"column":18},"end":{"line":137,"column":10}},"84":{"start":{"line":138,"column":31},"end":{"line":138,"column":132}},"85":{"start":{"line":139,"column":8},"end":{"line":139,"column":30}},"86":{"start":{"line":140,"column":8},"end":{"line":140,"column":52}},"87":{"start":{"line":141,"column":8},"end":{"line":141,"column":62}},"88":{"start":{"line":142,"column":8},"end":{"line":142,"column":56}},"89":{"start":{"line":143,"column":8},"end":{"line":143,"column":90}},"90":{"start":{"line":144,"column":8},"end":{"line":144,"column":60}},"91":{"start":{"line":145,"column":8},"end":{"line":145,"column":197}},"92":{"start":{"line":147,"column":4},"end":{"line":153,"column":8}},"93":{"start":{"line":147,"column":48},"end":{"line":153,"column":6}},"94":{"start":{"line":148,"column":19},"end":{"line":148,"column":80}},"95":{"start":{"line":149,"column":8},"end":{"line":149,"column":52}},"96":{"start":{"line":150,"column":8},"end":{"line":150,"column":57}},"97":{"start":{"line":151,"column":8},"end":{"line":151,"column":77}},"98":{"start":{"line":152,"column":8},"end":{"line":152,"column":26}},"99":{"start":{"line":154,"column":4},"end":{"line":211,"column":8}},"100":{"start":{"line":154,"column":47},"end":{"line":211,"column":6}},"101":{"start":{"line":157,"column":33},"end":{"line":157,"column":61}},"102":{"start":{"line":158,"column":33},"end":{"line":158,"column":61}},"103":{"start":{"line":159,"column":34},"end":{"line":159,"column":63}},"104":{"start":{"line":160,"column":34},"end":{"line":160,"column":63}},"105":{"start":{"line":161,"column":22},"end":{"line":161,"column":123}},"106":{"start":{"line":162,"column":8},"end":{"line":162,"column":51}},"107":{"start":{"line":163,"column":8},"end":{"line":163,"column":51}},"108":{"start":{"line":164,"column":8},"end":{"line":164,"column":52}},"109":{"start":{"line":165,"column":8},"end":{"line":165,"column":52}},"110":{"start":{"line":167,"column":30},"end":{"line":167,"column":131}},"111":{"start":{"line":168,"column":8},"end":{"line":168,"column":166}},"112":{"start":{"line":169,"column":8},"end":{"line":169,"column":71}},"113":{"start":{"line":170,"column":22},"end":{"line":170,"column":140}},"114":{"start":{"line":171,"column":8},"end":{"line":171,"column":28}},"115":{"start":{"line":172,"column":34},"end":{"line":172,"column":62}},"116":{"start":{"line":173,"column":35},"end":{"line":173,"column":64}},"117":{"start":{"line":174,"column":35},"end":{"line":174,"column":64}},"118":{"start":{"line":175,"column":34},"end":{"line":175,"column":62}},"119":{"start":{"line":176,"column":23},"end":{"line":176,"column":128}},"120":{"start":{"line":177,"column":8},"end":{"line":177,"column":53}},"121":{"start":{"line":178,"column":8},"end":{"line":178,"column":54}},"122":{"start":{"line":179,"column":8},"end":{"line":179,"column":54}},"123":{"start":{"line":180,"column":8},"end":{"line":180,"column":53}},"124":{"start":{"line":181,"column":18},"end":{"line":181,"column":50}},"125":{"start":{"line":182,"column":29},"end":{"line":182,"column":133}},"126":{"start":{"line":183,"column":29},"end":{"line":183,"column":137}},"127":{"start":{"line":184,"column":8},"end":{"line":184,"column":153}},"128":{"start":{"line":185,"column":8},"end":{"line":189,"column":66}},"129":{"start":{"line":190,"column":8},"end":{"line":190,"column":197}},"130":{"start":{"line":191,"column":8},"end":{"line":194,"column":66}},"131":{"start":{"line":195,"column":19},"end":{"line":205,"column":9}},"132":{"start":{"line":196,"column":12},"end":{"line":204,"column":15}},"133":{"start":{"line":197,"column":32},"end":{"line":199,"column":25}},"134":{"start":{"line":198,"column":20},"end":{"line":198,"column":46}},"135":{"start":{"line":200,"column":16},"end":{"line":203,"column":19}},"136":{"start":{"line":201,"column":20},"end":{"line":201,"column":44}},"137":{"start":{"line":202,"column":20},"end":{"line":202,"column":46}},"138":{"start":{"line":206,"column":18},"end":{"line":206,"column":30}},"139":{"start":{"line":207,"column":8},"end":{"line":207,"column":52}},"140":{"start":{"line":208,"column":8},"end":{"line":210,"column":12}},"141":{"start":{"line":208,"column":43},"end":{"line":210,"column":10}},"142":{"start":{"line":209,"column":12},"end":{"line":209,"column":41}},"143":{"start":{"line":212,"column":4},"end":{"line":223,"column":8}},"144":{"start":{"line":212,"column":58},"end":{"line":223,"column":6}},"145":{"start":{"line":214,"column":27},"end":{"line":214,"column":83}},"146":{"start":{"line":215,"column":27},"end":{"line":215,"column":128}},"147":{"start":{"line":216,"column":27},"end":{"line":216,"column":75}},"148":{"start":{"line":217,"column":8},"end":{"line":217,"column":196}},"149":{"start":{"line":218,"column":8},"end":{"line":218,"column":56}},"150":{"start":{"line":219,"column":8},"end":{"line":219,"column":132}},"151":{"start":{"line":220,"column":8},"end":{"line":220,"column":137}},"152":{"start":{"line":221,"column":8},"end":{"line":221,"column":56}},"153":{"start":{"line":222,"column":8},"end":{"line":222,"column":192}},"154":{"start":{"line":224,"column":4},"end":{"line":247,"column":8}},"155":{"start":{"line":224,"column":73},"end":{"line":247,"column":6}},"156":{"start":{"line":225,"column":30},"end":{"line":225,"column":131}},"157":{"start":{"line":226,"column":20},"end":{"line":226,"column":114}},"158":{"start":{"line":227,"column":8},"end":{"line":227,"column":28}},"159":{"start":{"line":228,"column":19},"end":{"line":238,"column":9}},"160":{"start":{"line":229,"column":12},"end":{"line":237,"column":15}},"161":{"start":{"line":230,"column":32},"end":{"line":232,"column":25}},"162":{"start":{"line":231,"column":20},"end":{"line":231,"column":46}},"163":{"start":{"line":233,"column":16},"end":{"line":236,"column":19}},"164":{"start":{"line":234,"column":20},"end":{"line":234,"column":44}},"165":{"start":{"line":235,"column":20},"end":{"line":235,"column":46}},"166":{"start":{"line":239,"column":18},"end":{"line":239,"column":30}},"167":{"start":{"line":240,"column":8},"end":{"line":240,"column":52}},"168":{"start":{"line":241,"column":20},"end":{"line":241,"column":68}},"169":{"start":{"line":242,"column":31},"end":{"line":242,"column":132}},"170":{"start":{"line":243,"column":8},"end":{"line":243,"column":53}},"171":{"start":{"line":244,"column":8},"end":{"line":244,"column":105}},"172":{"start":{"line":245,"column":8},"end":{"line":245,"column":64}},"173":{"start":{"line":246,"column":8},"end":{"line":246,"column":323}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":30,"column":45},"end":{"line":30,"column":46}},"loc":{"start":{"line":30,"column":55},"end":{"line":32,"column":1}},"line":30},"9":{"name":"(anonymous_9)","decl":{"start":{"line":33,"column":47},"end":{"line":33,"column":48}},"loc":{"start":{"line":33,"column":57},"end":{"line":35,"column":1}},"line":33},"10":{"name":"(anonymous_10)","decl":{"start":{"line":36,"column":86},"end":{"line":36,"column":87}},"loc":{"start":{"line":36,"column":92},"end":{"line":248,"column":2}},"line":36},"11":{"name":"(anonymous_11)","decl":{"start":{"line":36,"column":126},"end":{"line":36,"column":127}},"loc":{"start":{"line":36,"column":139},"end":{"line":248,"column":1}},"line":36},"12":{"name":"(anonymous_12)","decl":{"start":{"line":55,"column":11},"end":{"line":55,"column":12}},"loc":{"start":{"line":55,"column":17},"end":{"line":58,"column":6}},"line":55},"13":{"name":"(anonymous_13)","decl":{"start":{"line":55,"column":51},"end":{"line":55,"column":52}},"loc":{"start":{"line":55,"column":64},"end":{"line":58,"column":5}},"line":55},"14":{"name":"(anonymous_14)","decl":{"start":{"line":59,"column":80},"end":{"line":59,"column":81}},"loc":{"start":{"line":59,"column":86},"end":{"line":77,"column":6}},"line":59},"15":{"name":"(anonymous_15)","decl":{"start":{"line":59,"column":120},"end":{"line":59,"column":121}},"loc":{"start":{"line":59,"column":133},"end":{"line":77,"column":5}},"line":59},"16":{"name":"(anonymous_16)","decl":{"start":{"line":78,"column":86},"end":{"line":78,"column":87}},"loc":{"start":{"line":78,"column":92},"end":{"line":146,"column":6}},"line":78},"17":{"name":"(anonymous_17)","decl":{"start":{"line":78,"column":126},"end":{"line":78,"column":127}},"loc":{"start":{"line":78,"column":139},"end":{"line":146,"column":5}},"line":78},"18":{"name":"(anonymous_18)","decl":{"start":{"line":147,"column":42},"end":{"line":147,"column":43}},"loc":{"start":{"line":147,"column":48},"end":{"line":153,"column":6}},"line":147},"19":{"name":"(anonymous_19)","decl":{"start":{"line":147,"column":82},"end":{"line":147,"column":83}},"loc":{"start":{"line":147,"column":95},"end":{"line":153,"column":5}},"line":147},"20":{"name":"(anonymous_20)","decl":{"start":{"line":154,"column":41},"end":{"line":154,"column":42}},"loc":{"start":{"line":154,"column":47},"end":{"line":211,"column":6}},"line":154},"21":{"name":"(anonymous_21)","decl":{"start":{"line":154,"column":81},"end":{"line":154,"column":82}},"loc":{"start":{"line":154,"column":94},"end":{"line":211,"column":5}},"line":154},"22":{"name":"(anonymous_22)","decl":{"start":{"line":195,"column":19},"end":{"line":195,"column":20}},"loc":{"start":{"line":195,"column":25},"end":{"line":205,"column":9}},"line":195},"23":{"name":"(anonymous_23)","decl":{"start":{"line":196,"column":31},"end":{"line":196,"column":32}},"loc":{"start":{"line":196,"column":52},"end":{"line":204,"column":13}},"line":196},"24":{"name":"(anonymous_24)","decl":{"start":{"line":197,"column":43},"end":{"line":197,"column":44}},"loc":{"start":{"line":197,"column":49},"end":{"line":199,"column":17}},"line":197},"25":{"name":"(anonymous_25)","decl":{"start":{"line":200,"column":63},"end":{"line":200,"column":64}},"loc":{"start":{"line":200,"column":73},"end":{"line":203,"column":17}},"line":200},"26":{"name":"(anonymous_26)","decl":{"start":{"line":208,"column":33},"end":{"line":208,"column":34}},"loc":{"start":{"line":208,"column":43},"end":{"line":210,"column":10}},"line":208},"27":{"name":"(anonymous_27)","decl":{"start":{"line":208,"column":77},"end":{"line":208,"column":78}},"loc":{"start":{"line":208,"column":90},"end":{"line":210,"column":9}},"line":208},"28":{"name":"(anonymous_28)","decl":{"start":{"line":212,"column":52},"end":{"line":212,"column":53}},"loc":{"start":{"line":212,"column":58},"end":{"line":223,"column":6}},"line":212},"29":{"name":"(anonymous_29)","decl":{"start":{"line":212,"column":92},"end":{"line":212,"column":93}},"loc":{"start":{"line":212,"column":105},"end":{"line":223,"column":5}},"line":212},"30":{"name":"(anonymous_30)","decl":{"start":{"line":224,"column":67},"end":{"line":224,"column":68}},"loc":{"start":{"line":224,"column":73},"end":{"line":247,"column":6}},"line":224},"31":{"name":"(anonymous_31)","decl":{"start":{"line":224,"column":107},"end":{"line":224,"column":108}},"loc":{"start":{"line":224,"column":120},"end":{"line":247,"column":5}},"line":224},"32":{"name":"(anonymous_32)","decl":{"start":{"line":228,"column":19},"end":{"line":228,"column":20}},"loc":{"start":{"line":228,"column":25},"end":{"line":238,"column":9}},"line":228},"33":{"name":"(anonymous_33)","decl":{"start":{"line":229,"column":31},"end":{"line":229,"column":32}},"loc":{"start":{"line":229,"column":52},"end":{"line":237,"column":13}},"line":229},"34":{"name":"(anonymous_34)","decl":{"start":{"line":230,"column":43},"end":{"line":230,"column":44}},"loc":{"start":{"line":230,"column":49},"end":{"line":232,"column":17}},"line":230},"35":{"name":"(anonymous_35)","decl":{"start":{"line":233,"column":63},"end":{"line":233,"column":64}},"loc":{"start":{"line":233,"column":73},"end":{"line":236,"column":17}},"line":233}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":120,"column":26},"end":{"line":120,"column":166}},"type":"cond-expr","locations":[{"start":{"line":120,"column":158},"end":{"line":120,"column":160}},{"start":{"line":120,"column":163},"end":{"line":120,"column":166}}],"line":120},"9":{"loc":{"start":{"line":120,"column":26},"end":{"line":120,"column":155}},"type":"binary-expr","locations":[{"start":{"line":120,"column":26},"end":{"line":120,"column":138}},{"start":{"line":120,"column":142},"end":{"line":120,"column":155}}],"line":120},"10":{"loc":{"start":{"line":120,"column":32},"end":{"line":120,"column":128}},"type":"cond-expr","locations":[{"start":{"line":120,"column":89},"end":{"line":120,"column":95}},{"start":{"line":120,"column":98},"end":{"line":120,"column":128}}],"line":120},"11":{"loc":{"start":{"line":120,"column":32},"end":{"line":120,"column":86}},"type":"binary-expr","locations":[{"start":{"line":120,"column":32},"end":{"line":120,"column":56}},{"start":{"line":120,"column":60},"end":{"line":120,"column":86}}],"line":120},"12":{"loc":{"start":{"line":145,"column":27},"end":{"line":145,"column":126}},"type":"cond-expr","locations":[{"start":{"line":145,"column":86},"end":{"line":145,"column":92}},{"start":{"line":145,"column":95},"end":{"line":145,"column":126}}],"line":145},"13":{"loc":{"start":{"line":145,"column":27},"end":{"line":145,"column":83}},"type":"binary-expr","locations":[{"start":{"line":145,"column":27},"end":{"line":145,"column":52}},{"start":{"line":145,"column":56},"end":{"line":145,"column":83}}],"line":145},"14":{"loc":{"start":{"line":168,"column":25},"end":{"line":168,"column":165}},"type":"cond-expr","locations":[{"start":{"line":168,"column":157},"end":{"line":168,"column":159}},{"start":{"line":168,"column":162},"end":{"line":168,"column":165}}],"line":168},"15":{"loc":{"start":{"line":168,"column":25},"end":{"line":168,"column":154}},"type":"binary-expr","locations":[{"start":{"line":168,"column":25},"end":{"line":168,"column":137}},{"start":{"line":168,"column":141},"end":{"line":168,"column":154}}],"line":168},"16":{"loc":{"start":{"line":168,"column":31},"end":{"line":168,"column":127}},"type":"cond-expr","locations":[{"start":{"line":168,"column":88},"end":{"line":168,"column":94}},{"start":{"line":168,"column":97},"end":{"line":168,"column":127}}],"line":168},"17":{"loc":{"start":{"line":168,"column":31},"end":{"line":168,"column":85}},"type":"binary-expr","locations":[{"start":{"line":168,"column":31},"end":{"line":168,"column":55}},{"start":{"line":168,"column":59},"end":{"line":168,"column":85}}],"line":168},"18":{"loc":{"start":{"line":182,"column":51},"end":{"line":182,"column":105}},"type":"cond-expr","locations":[{"start":{"line":182,"column":84},"end":{"line":182,"column":90}},{"start":{"line":182,"column":93},"end":{"line":182,"column":105}}],"line":182},"19":{"loc":{"start":{"line":182,"column":51},"end":{"line":182,"column":81}},"type":"binary-expr","locations":[{"start":{"line":182,"column":51},"end":{"line":182,"column":63}},{"start":{"line":182,"column":67},"end":{"line":182,"column":81}}],"line":182},"20":{"loc":{"start":{"line":217,"column":27},"end":{"line":217,"column":113}},"type":"cond-expr","locations":[{"start":{"line":217,"column":78},"end":{"line":217,"column":84}},{"start":{"line":217,"column":87},"end":{"line":217,"column":113}}],"line":217},"21":{"loc":{"start":{"line":217,"column":27},"end":{"line":217,"column":75}},"type":"binary-expr","locations":[{"start":{"line":217,"column":27},"end":{"line":217,"column":48}},{"start":{"line":217,"column":52},"end":{"line":217,"column":75}}],"line":217},"22":{"loc":{"start":{"line":219,"column":27},"end":{"line":219,"column":110}},"type":"cond-expr","locations":[{"start":{"line":219,"column":78},"end":{"line":219,"column":84}},{"start":{"line":219,"column":87},"end":{"line":219,"column":110}}],"line":219},"23":{"loc":{"start":{"line":219,"column":27},"end":{"line":219,"column":75}},"type":"binary-expr","locations":[{"start":{"line":219,"column":27},"end":{"line":219,"column":48}},{"start":{"line":219,"column":52},"end":{"line":219,"column":75}}],"line":219},"24":{"loc":{"start":{"line":220,"column":27},"end":{"line":220,"column":112}},"type":"cond-expr","locations":[{"start":{"line":220,"column":78},"end":{"line":220,"column":84}},{"start":{"line":220,"column":87},"end":{"line":220,"column":112}}],"line":220},"25":{"loc":{"start":{"line":220,"column":27},"end":{"line":220,"column":75}},"type":"binary-expr","locations":[{"start":{"line":220,"column":27},"end":{"line":220,"column":48}},{"start":{"line":220,"column":52},"end":{"line":220,"column":75}}],"line":220},"26":{"loc":{"start":{"line":222,"column":27},"end":{"line":222,"column":114}},"type":"cond-expr","locations":[{"start":{"line":222,"column":78},"end":{"line":222,"column":84}},{"start":{"line":222,"column":87},"end":{"line":222,"column":114}}],"line":222},"27":{"loc":{"start":{"line":222,"column":27},"end":{"line":222,"column":75}},"type":"binary-expr","locations":[{"start":{"line":222,"column":27},"end":{"line":222,"column":48}},{"start":{"line":222,"column":52},"end":{"line":222,"column":75}}],"line":222},"28":{"loc":{"start":{"line":244,"column":27},"end":{"line":244,"column":88}},"type":"cond-expr","locations":[{"start":{"line":244,"column":64},"end":{"line":244,"column":70}},{"start":{"line":244,"column":73},"end":{"line":244,"column":88}}],"line":244},"29":{"loc":{"start":{"line":244,"column":27},"end":{"line":244,"column":61}},"type":"binary-expr","locations":[{"start":{"line":244,"column":27},"end":{"line":244,"column":41}},{"start":{"line":244,"column":45},"end":{"line":244,"column":61}}],"line":244},"30":{"loc":{"start":{"line":246,"column":27},"end":{"line":246,"column":126}},"type":"cond-expr","locations":[{"start":{"line":246,"column":86},"end":{"line":246,"column":92}},{"start":{"line":246,"column":95},"end":{"line":246,"column":126}}],"line":246},"31":{"loc":{"start":{"line":246,"column":27},"end":{"line":246,"column":83}},"type":"binary-expr","locations":[{"start":{"line":246,"column":27},"end":{"line":246,"column":52}},{"start":{"line":246,"column":56},"end":{"line":246,"column":83}}],"line":246},"32":{"loc":{"start":{"line":246,"column":159},"end":{"line":246,"column":255}},"type":"cond-expr","locations":[{"start":{"line":246,"column":216},"end":{"line":246,"column":222}},{"start":{"line":246,"column":225},"end":{"line":246,"column":255}}],"line":246},"33":{"loc":{"start":{"line":246,"column":159},"end":{"line":246,"column":213}},"type":"binary-expr","locations":[{"start":{"line":246,"column":159},"end":{"line":246,"column":183}},{"start":{"line":246,"column":187},"end":{"line":246,"column":213}}],"line":246}},"s":{"0":1,"1":34,"2":13,"3":9,"4":34,"5":34,"6":1,"7":0,"8":0,"9":0,"10":42,"11":9,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":13,"31":1,"32":4,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":1,"126":1,"127":1,"128":1,"129":1,"130":1,"131":1,"132":1,"133":1,"134":0,"135":1,"136":4,"137":4,"138":1,"139":1,"140":1,"141":1,"142":1,"143":1,"144":1,"145":1,"146":1,"147":1,"148":1,"149":1,"150":1,"151":1,"152":1,"153":1,"154":1,"155":1,"156":1,"157":1,"158":1,"159":1,"160":1,"161":1,"162":1,"163":1,"164":6,"165":6,"166":1,"167":1,"168":1,"169":1,"170":1,"171":1,"172":0,"173":0},"f":{"0":9,"1":34,"2":13,"3":9,"4":34,"5":0,"6":42,"7":2,"8":13,"9":4,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":4,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":6},"b":{"0":[1,1,1],"1":[21,13],"2":[9,9],"3":[8,34],"4":[9,9],"5":[1,1,1],"6":[0,2],"7":[2,2],"8":[1,0],"9":[1,1],"10":[0,1],"11":[1,1],"12":[0,1],"13":[1,1],"14":[1,0],"15":[1,1],"16":[0,1],"17":[1,1],"18":[0,1],"19":[1,1],"20":[0,1],"21":[1,1],"22":[0,1],"23":[1,1],"24":[0,1],"25":[1,1],"26":[0,1],"27":[1,1],"28":[0,1],"29":[1,1],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/ALimitOrder.script.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/ALimitOrder.script.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport Big from \"big.js\";\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { ethers } from \"ethers\";\r\nimport { connect, Order, OrderExecuted, Sync, User } from \"../../DB/db\";\r\nimport { getExchangeAddress } from \"../../helper/chain\";\r\nimport { ifOrderCreated } from \"../../helper/interface\";\r\nimport {  getProvider, parseEther } from \"../../utils/utils\";\r\nimport { io } from \"socket.io-client\";\r\nimport path from \"path\";\r\nimport { EVENT_NAME } from \"../../socketIo/socket.io\";\r\nimport { getConfig, getContract } from \"../../helper/constant\";\r\nuse(chaiHttp);\r\n\r\n\r\n// require(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\nrequire(\"dotenv\").config();\r\nconst socket = io(\"http://localhost:3010\");\r\n\r\n\r\nsocket.on(EVENT_NAME.PAIR_ORDER, (data) => {\r\n    console.log(\"pairOrders\", data)\r\n});\r\n\r\nsocket.on(EVENT_NAME.PAIR_HISTORY, (data) => {\r\n    console.log(\"pairHistory\", data)\r\n})\r\n\r\ndescribe(\"Limit Order Sell => Mint token, create order, execute order, cancel order\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let provider = getProvider(chainId);\r\n    let exchange = getContract(\"Exchange\", chainId);\r\n    let btc = getContract(\"BTC\", chainId)\r\n    let usdc = getContract(\"USDC\", chainId)\r\n    let user1 = new ethers.Wallet(process.env.PRIVATE_KEY1! as string).connect(provider); //1\r\n    let user2 = new ethers.Wallet(process.env.PRIVATE_KEY2! as string).connect(provider); //2\r\n    let signatures: any[] = [];\r\n    let orders: any[] = [];\r\n    let exchangeRate = ethers.utils.parseEther('20000').toString();\r\n    let txnId = \"\";\r\n    let orderId = \"\";\r\n    let salt = Math.floor(Math.random() * 9000000);\r\n    let amount = ethers.utils.parseEther('1').toString();\r\n    let orderType = 1; // 1 for sell 0 for buy\r\n    let btcAmount = \"\"\r\n    let userInOrderPre = '0';\r\n    before(async () => { \r\n        await require('../../../app')\r\n        // await connect()\r\n    });\r\n\r\n    it('mint 10 btc to user1, 200000 usdt to user2, approve exchange contract', async () => {\r\n\r\n        let user1BtcBalancePre = (await btc.balanceOf(user1.address)).toString();\r\n        let user2UsdcBalancePre = (await usdc.balanceOf(user2.address)).toString();\r\n\r\n        const btcAmount = ethers.utils.parseEther('10').toString();\r\n        let tx1 = await btc.connect(user1).mint(user1.address, btcAmount);\r\n\r\n        // approve for exchange\r\n        let approve = await btc.connect(user1).approve(exchange.address, ethers.constants.MaxUint256);\r\n        await btc.connect(user2).approve(exchange.address, ethers.constants.MaxUint256)\r\n\r\n        const usdcAmount = ethers.utils.parseEther('200000').toString();\r\n        let tx2 = await usdc.connect(user2).mint(user2.address, usdcAmount);\r\n\r\n        // approve for exchange\r\n        let approve1 = await usdc.connect(user2).approve(exchange.address, ethers.constants.MaxUint256);\r\n        await usdc.connect(user1).approve(exchange.address, ethers.constants.MaxUint256);\r\n        await approve1.wait(1)\r\n        let user1BtcBalancePost = (await btc.balanceOf(user1.address)).toString();\r\n        let user2UsdcBalancePost = (await usdc.balanceOf(user2.address)).toString();\r\n\r\n        expect(user1BtcBalancePost).to.equal(parseEther(Big(btcAmount).plus(user1BtcBalancePre).toString()));\r\n        expect(user2UsdcBalancePost).to.equal(parseEther(Big(usdcAmount).plus(user2UsdcBalancePre).toString()));\r\n\r\n\r\n    });\r\n\r\n\r\n    it(`user1 creates limit order to sell 1 btc @ 20000, check user inOrder Balance`, async () => {\r\n\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getConfig(\"version\"),\r\n            chainId: chainId.toString(),\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Order: [\r\n                { name: 'maker', type: 'address' },\r\n                { name: 'token0', type: 'address' },\r\n                { name: 'token1', type: 'address' },\r\n                { name: 'amount', type: 'uint256' },\r\n                { name: 'orderType', type: 'uint8' },\r\n                { name: 'salt', type: 'uint32' },\r\n                { name: 'exchangeRate', type: 'uint176' },\r\n                { name: 'borrowLimit', type: 'uint32' },\r\n                { name: 'loops', type: 'uint8' }\r\n            ]\r\n        };\r\n\r\n        // The data to sign\r\n        const value = {\r\n            maker: user1.address.toLowerCase(),\r\n            token0: btc.address.toLowerCase(),\r\n            token1: usdc.address.toLowerCase(),\r\n            amount: amount,\r\n            orderType: orderType,\r\n            salt: salt,\r\n            exchangeRate: exchangeRate,\r\n            borrowLimit: 0,\r\n            loops: 0\r\n        };\r\n\r\n        orders.push(value);\r\n        // sign typed data\r\n        const storedSignature = await user1._signTypedData(\r\n            domain,\r\n            types,\r\n            value\r\n        );\r\n        signatures.push(storedSignature);\r\n        console.log([\r\n            value, storedSignature\r\n        ]);\r\n\r\n        let userPositionPre = await User.findOne({ token: btc.address.toLowerCase(), id: user1.address.toLowerCase() }).lean();\r\n\r\n        let userInOrder = userPositionPre?.inOrderBalance ?? '0';\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .post(`/v/${getConfig(\"version\")}/order/create`)\r\n            .send(\r\n                {\r\n                    \"data\": {\r\n                        \"maker\": user1.address.toLowerCase(),\r\n                        \"token0\": btc.address.toLowerCase(),\r\n                        \"token1\": usdc.address.toLowerCase(),\r\n                        \"amount\": amount,\r\n                        \"orderType\": orderType,\r\n                        \"salt\": salt,\r\n                        \"exchangeRate\": exchangeRate,\r\n                        borrowLimit: 0,\r\n                        loops: 0\r\n                    },\r\n                    \"signature\": storedSignature.toLowerCase(),\r\n                    \"chainId\": chainId\r\n                }\r\n            );\r\n\r\n        let userPositionPost = await User.findOne({ token: btc.address.toLowerCase(), id: user1.address.toLowerCase() }).lean()\r\n        console.log(res.body)\r\n        expect(res).to.have.status(201);\r\n        expect(res.body.status).to.be.equal(true);\r\n        expect(res.body).to.be.an('object');\r\n        expect(res.body.message).to.have.string('Order created successfully');\r\n        expect(userPositionPost).not.to.be.null;\r\n        expect(userPositionPost?.inOrderBalance).to.equal(Big(userInOrder).plus(amount).toString())\r\n\r\n    });\r\n\r\n    it(`find created order in data base`, async () => {\r\n\r\n        let data = await Order.findOne({ signature: signatures[0] }).lean()! as ifOrderCreated;\r\n        expect(data).to.be.an('object');\r\n        expect(data.amount).to.equal(amount);\r\n        expect(data.maker).to.equal(user1.address.toLowerCase());\r\n        orderId = data.id\r\n    })\r\n\r\n\r\n    it(`user2 buy user1s 0.8 btc order`, async () => {\r\n        // balances\r\n        let user1BtcBalancePre = btc.balanceOf(user1.address);\r\n        let user2BtcBalancePre = btc.balanceOf(user2.address);\r\n        let user2UsdcBalancePre = usdc.balanceOf(user2.address);\r\n        let user1UsdcBalancePre = usdc.balanceOf(user1.address);\r\n        let promise = await Promise.all([user1BtcBalancePre, user2BtcBalancePre, user2UsdcBalancePre, user1UsdcBalancePre])\r\n        user1BtcBalancePre = promise[0].toString();\r\n        user2BtcBalancePre = promise[1].toString()\r\n        user2UsdcBalancePre = promise[2].toString()\r\n        user1UsdcBalancePre = promise[3].toString()\r\n\r\n        // inOrder Balance\r\n        let userPositionPre = await User.findOne({ token: btc.address.toLowerCase(), id: user1.address.toLowerCase() }).lean();\r\n\r\n        userInOrderPre = userPositionPre?.inOrderBalance ?? '0';\r\n\r\n        btcAmount = ethers.utils.parseEther(`0.8`).toString();\r\n\r\n        const exTxn = await exchange.connect(user2).executeT0LimitOrders(\r\n            [signatures[0]],\r\n            [orders[0]],\r\n            btcAmount,\r\n            { gasLimit: \"100000000\" }\r\n        );\r\n\r\n        await exTxn.wait(1)\r\n        let user1BtcBalancePost = btc.balanceOf(user1.address);\r\n        let user1UsdcBalancePost = usdc.balanceOf(user1.address);\r\n        let user2UsdcBalancePost = usdc.balanceOf(user2.address);\r\n        let user2BtcBalancePost = btc.balanceOf(user2.address);\r\n\r\n        let promise1 = await Promise.all([user1BtcBalancePost, user1UsdcBalancePost, user2UsdcBalancePost, user2BtcBalancePost]);\r\n        user1BtcBalancePost = promise1[0].toString();\r\n        user1UsdcBalancePost = promise1[1].toString();\r\n        user2UsdcBalancePost = promise1[2].toString();\r\n        user2BtcBalancePost = promise1[3].toString();\r\n\r\n        let fee = await Sync.findOne().lean()! as any;\r\n        let makerFeeAmount = Big(fee?.makerFee).div(1e18).times(btcAmount);\r\n        let takerFeeAmount = Big(Big(fee.takerFee).div(1e18)).times(Big(btcAmount));\r\n\r\n        expect(user1BtcBalancePost).to.equal(parseEther(Big(user1BtcBalancePre).minus(btcAmount).toString()));\r\n        expect(user1UsdcBalancePost).to.equal(parseEther(\r\n            Big(user1UsdcBalancePre)\r\n                .plus((Big(btcAmount)\r\n                    .minus(makerFeeAmount))\r\n                    .times(exchangeRate)\r\n                    .div(Big(10).pow(18))).toString()\r\n        ));\r\n        expect(user2BtcBalancePost).to.equal(parseEther(Big(user2BtcBalancePre).plus(Big(btcAmount).minus(takerFeeAmount)).toString()))\r\n        expect(user2UsdcBalancePost).to.equal(parseEther(\r\n            Big(user2UsdcBalancePre)\r\n                .minus(Big(btcAmount)\r\n                    .times(exchangeRate)\r\n                    .div(Big(10).pow(18))).toString()\r\n        ));\r\n\r\n\r\n        let wait = () => {\r\n            return new Promise((resolve, reject) => {\r\n\r\n                let timeOutId = setTimeout(() => {\r\n                    return resolve(\"Success\")\r\n                }, 10000)\r\n\r\n                socket.on(EVENT_NAME.PAIR_HISTORY, (data) => {\r\n                    clearTimeout(timeOutId)\r\n                    return resolve(\"Success\")\r\n                })\r\n            })\r\n        }\r\n\r\n        let res = await wait()\r\n        expect(res).to.equal(\"Success\")\r\n\r\n        await exTxn.wait(1).then(async (resp: any) => {\r\n\r\n            txnId = resp.transactionHash\r\n\r\n        })\r\n    });\r\n\r\n\r\n    it(`find executed Order, check inOrderBalance`, async () => {\r\n        // console.log(\"txnId=\",txnId, \"orderId\", orderId)\r\n        let executeOrder = await OrderExecuted.findOne({ id: orderId }).lean();\r\n        let userPosition = await User.findOne({ id: user1.address.toLowerCase(), token: btc.address.toLowerCase() }).lean()! as any;\r\n        let orderCreated = await Order.findOne({ id: orderId }).lean()! as any;\r\n\r\n        expect(orderCreated?.balanceAmount).to.equal(Big(orderCreated.amount).minus(btcAmount).toString())\r\n        expect(executeOrder).not.to.be.null;\r\n        expect(executeOrder?.fillAmount).to.equal(btcAmount);\r\n        expect(executeOrder?.exchangeRate).to.equal(exchangeRate);\r\n        expect(userPosition).not.to.be.null;\r\n        expect(userPosition?.inOrderBalance).to.equal(Big(userInOrderPre).minus(btcAmount).toString())\r\n\r\n    })\r\n\r\n\r\n\r\n\r\n    it(`user1 cancel order 0.2 btc, check order, inOrderbalance `, async () => {\r\n\r\n        let userPositionPre = await User.findOne({ id: user1.address.toLowerCase(), token: btc.address.toLowerCase() }).lean()\r\n\r\n        let exTxn = await exchange.connect(user1).cancelOrder(\r\n            signatures[0],\r\n            orders[0],\r\n            { gasLimit: \"100000000\" }\r\n        )\r\n\r\n        await exTxn.wait(1);\r\n\r\n        let wait = () => {\r\n            return new Promise((resolve, reject) => {\r\n\r\n                let timeOutId = setTimeout(() => {\r\n                    return resolve(\"Success\")\r\n                }, 15000)\r\n\r\n                socket.on(EVENT_NAME.CANCEL_ORDER, (data) => {\r\n                    clearTimeout(timeOutId)\r\n                    return resolve(\"Success\")\r\n                })\r\n            })\r\n        }\r\n        let res = await wait()\r\n        expect(res).to.equal(\"Success\")\r\n        let order = await Order.findOne({ id: orderId }).lean();\r\n        let userPositionPost = await User.findOne({ id: user1.address.toLowerCase(), token: btc.address.toLowerCase() }).lean()\r\n        expect(order).to.be.an('object');\r\n        expect(order?.cancelled).to.equal(true);\r\n        expect(userPositionPost).to.be.an('object');\r\n        expect(userPositionPost?.inOrderBalance).to.equal(Big(userPositionPre?.inOrderBalance! as string).minus(Big(amount).minus(btcAmount)).toString());\r\n\r\n\r\n    })\r\n\r\n    \r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cb56881e68f5d913d7c3a9745b5b1dd50a9fabeb","contentHash":"60878122933d2cbd760b1e634f9127c0b6016e1de81c4688931461d8c16a3669"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\DB\\db.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\DB\\db.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":155}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":15},"end":{"line":17,"column":47}},"18":{"start":{"line":18,"column":15},"end":{"line":18,"column":58}},"19":{"start":{"line":19,"column":15},"end":{"line":19,"column":58}},"20":{"start":{"line":20,"column":16},"end":{"line":20,"column":60}},"21":{"start":{"line":21,"column":24},"end":{"line":21,"column":76}},"22":{"start":{"line":22,"column":16},"end":{"line":22,"column":60}},"23":{"start":{"line":23,"column":15},"end":{"line":23,"column":58}},"24":{"start":{"line":24,"column":16},"end":{"line":24,"column":42}},"25":{"start":{"line":26,"column":0},"end":{"line":26,"column":84}},"26":{"start":{"line":27,"column":0},"end":{"line":27,"column":49}},"27":{"start":{"line":28,"column":8},"end":{"line":28,"column":64}},"28":{"start":{"line":29,"column":0},"end":{"line":29,"column":8}},"29":{"start":{"line":30,"column":15},"end":{"line":30,"column":26}},"30":{"start":{"line":31,"column":25},"end":{"line":31,"column":141}},"31":{"start":{"line":32,"column":27},"end":{"line":32,"column":75}},"32":{"start":{"line":33,"column":0},"end":{"line":33,"column":48}},"33":{"start":{"line":34,"column":13},"end":{"line":34,"column":61}},"34":{"start":{"line":35,"column":0},"end":{"line":35,"column":20}},"35":{"start":{"line":36,"column":13},"end":{"line":36,"column":61}},"36":{"start":{"line":37,"column":0},"end":{"line":37,"column":20}},"37":{"start":{"line":38,"column":14},"end":{"line":38,"column":64}},"38":{"start":{"line":39,"column":0},"end":{"line":39,"column":22}},"39":{"start":{"line":40,"column":22},"end":{"line":40,"column":88}},"40":{"start":{"line":41,"column":0},"end":{"line":41,"column":38}},"41":{"start":{"line":42,"column":14},"end":{"line":42,"column":64}},"42":{"start":{"line":43,"column":0},"end":{"line":43,"column":22}},"43":{"start":{"line":44,"column":13},"end":{"line":44,"column":61}},"44":{"start":{"line":45,"column":0},"end":{"line":45,"column":20}},"45":{"start":{"line":47,"column":4},"end":{"line":56,"column":7}},"46":{"start":{"line":48,"column":8},"end":{"line":54,"column":11}},"47":{"start":{"line":50,"column":12},"end":{"line":50,"column":48}},"48":{"start":{"line":53,"column":12},"end":{"line":53,"column":29}},"49":{"start":{"line":55,"column":8},"end":{"line":55,"column":25}},"50":{"start":{"line":58,"column":0},"end":{"line":58,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"connect","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":16}},"loc":{"start":{"line":46,"column":19},"end":{"line":57,"column":1}},"line":46},"9":{"name":"(anonymous_9)","decl":{"start":{"line":47,"column":43},"end":{"line":47,"column":44}},"loc":{"start":{"line":47,"column":56},"end":{"line":56,"column":5}},"line":47},"10":{"name":"(anonymous_10)","decl":{"start":{"line":49,"column":18},"end":{"line":49,"column":19}},"loc":{"start":{"line":49,"column":24},"end":{"line":51,"column":9}},"line":49},"11":{"name":"(anonymous_11)","decl":{"start":{"line":52,"column":19},"end":{"line":52,"column":20}},"loc":{"start":{"line":52,"column":26},"end":{"line":54,"column":9}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":1,"13":8,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":0,"49":1,"50":1},"f":{"0":1,"1":0,"2":0,"3":1,"4":0,"5":0,"6":1,"7":8,"8":1,"9":1,"10":1,"11":0},"b":{"0":[1,1,1],"1":[0,0],"2":[1,1],"3":[1,0],"4":[1,1],"5":[1,1,1],"6":[6,2],"7":[8,8]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/DB/db.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/DB/db.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,wDAAgC;AAEhC,gDAAwB;AACxB,2DAAyC;AACzC,2DAAyC;AACzC,6DAA2C;AAC3C,6EAA2D;AAC3D,6DAA2C;AAC3C,2DAAyC;AACzC,2CAA6C;AAE7C,kIAAkI;AAClI,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,cAAI,CAAC,OAAO,CAAC,SAAS,EAAE,YAAY,CAAC,EAAE,CAAC,CAAA;AACzE,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAC,aAAa,CAAC,CAAA;AAC/C,IAAI,CAAC,GAAG,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;AACpD,CAAC,CAAC,GAAG,EAAE,CAAA;AACP,IAAI,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AAE1B,MAAM,gBAAgB,GAAG,kBAAQ,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,GAAG,gBAAgB,QAAQ,8BAAyC,CAAC,CAAC;AAE/I,MAAM,kBAAkB,GAAQ,gBAAgB,CAAC,KAAK,CAAC,OAAO,EAAE,eAAW,CAAC,CAAC;AA8BZ,gDAAkB;AA7BnF,MAAM,IAAI,GAAG,kBAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,cAAU,CAAC,CAAC;AA6BvC,oBAAI;AA5Bb,MAAM,IAAI,GAAG,kBAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,cAAU,CAAC,CAAC;AA4BxB,oBAAI;AA3B5B,MAAM,KAAK,GAAG,kBAAQ,CAAC,KAAK,CAAC,OAAO,EAAE,eAAW,CAAC,CAAC;AA2BrB,sBAAK;AA1BnC,MAAM,aAAa,GAAG,kBAAQ,CAAC,KAAK,CAAC,eAAe,EAAE,uBAAmB,CAAC,CAAC;AA0BtC,sCAAa;AAzBlD,MAAM,KAAK,GAAG,kBAAQ,CAAC,KAAK,CAAC,OAAO,EAAE,eAAW,CAAC,CAAC;AAyBC,sBAAK;AAxBzD,MAAM,IAAI,GAAG,kBAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,cAAU,CAAC,CAAC;AAwBW,oBAAI;AAlB/D,SAAe,OAAO;;QAElB,kBAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,QAAQ,8BAAyC,CAAC;aAC/F,IAAI,CAAC,GAAG,EAAE;YACP,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAA;QACvC,CAAC,CAAC;aACD,KAAK,CAAC,GAAG,CAAC,EAAE;YACT,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;QACpB,CAAC,CACA,CAAC;QACN,gBAAgB,CAAA;IACpB,CAAC;CAAA;AAOc,0BAAO","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nimport path from 'path';\r\nimport SyncSchema from \"../schemas/Sync\";\r\nimport PairSchema from \"../schemas/Pair\";\r\nimport OrderSchema from \"../schemas/Order\";\r\nimport OrderExecutedSchema from \"../schemas/OrderExecuted\";\r\nimport TokenSchema from \"../schemas/Token\";\r\nimport UserSchema from \"../schemas/User\";\r\nimport { getVersion } from \"../helper/chain\";\r\n\r\n// require(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\nrequire('dotenv').config({ path: path.resolve(__dirname, '../../.env') })\r\nconsole.log(process.env.NODE_ENV,\"ENV from DB\")\r\nlet a = getVersion(process.env.NODE_ENV!).split('.')\r\na.pop()\r\nlet _version = a.join(\"_\")\r\n\r\nconst backupConnection = mongoose.createConnection(process.env.MONGO_URL1 + `-backup-zexe-${_version}?retryWrites=true&w=majority`! as string);\r\n\r\nconst OrderCreatedBackup: any = backupConnection.model(\"Order\", OrderSchema);\r\nconst Sync = mongoose.model(\"Sync\", SyncSchema);\r\nconst Pair = mongoose.model(\"Pair\", PairSchema);\r\nconst Order = mongoose.model(\"Order\", OrderSchema);\r\nconst OrderExecuted = mongoose.model(\"OrderExecuted\", OrderExecutedSchema);\r\nconst Token = mongoose.model(\"Token\", TokenSchema);\r\nconst User = mongoose.model(\"User\", UserSchema);\r\n\r\n\r\n\r\n\r\n\r\nasync function connect() {\r\n\r\n    mongoose.connect(process.env.MONGO_URL + `-zexe-${_version}?retryWrites=true&w=majority`! as string)\r\n        .then(() => {\r\n            console.log(\"MongoDb is connected\")\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        }\r\n        );\r\n    backupConnection\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport { Sync, connect, Pair, Order, OrderExecuted, Token, User, OrderCreatedBackup };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6ee6e0d491bb296f51161598eb8dc27e04a8f9fe","contentHash":"cc0337d45cf4beeb68995e5462e4e1ba0f840302b688f566c8e814a786ac2d45"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Sync.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Sync.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":27},"end":{"line":13,"column":24}},"5":{"start":{"line":14,"column":0},"end":{"line":14,"column":37}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Sync.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Sync.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAEhC,MAAM,kBAAkB,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IAE3C,mBAAmB,EAAE,MAAM;IAC3B,kBAAkB,EAAE,MAAM;IAC1B,OAAO,EAAE,MAAM;IACf,QAAQ,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAC;IACrC,QAAQ,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAC;CAExC,EACG,EAAE,UAAU,EAAE,IAAI,EAAE,CACvB,CAAC;AAEF,kBAAe,kBAAkB,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst exchangeSyncSchema = new mongoose.Schema({\r\n\r\n    blockNumberExchange: Number,\r\n    pageNumberExchange: Number,\r\n    chainId: String,\r\n    makerFee: {type:String, default: '0'},\r\n    takerFee: {type:String, default: '0'}\r\n\r\n},\r\n    { timestamps: true }\r\n);\r\n\r\nexport default exchangeSyncSchema;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"de7b66410b2e3a034d1e8a4986fb7bfa9a5d595b","contentHash":"8da8cf6c98f1dcce4262636dcf7f37378cc21297b836d5b581f7ec83a3c670da"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Pair.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Pair.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":19},"end":{"line":19,"column":24}},"5":{"start":{"line":20,"column":0},"end":{"line":20,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Pair.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Pair.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAEhC,MAAM,UAAU,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IACnC,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAChD,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACpD,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACpD,oBAAoB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACtD,cAAc,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAChD,YAAY,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC9C,SAAS,EAAE,MAAM;IACjB,OAAO,EAAE,MAAM;IACf,MAAM,EAAE,MAAM;IACd,aAAa,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;IAChD,MAAM,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;CAE3C,EACG,EAAE,UAAU,EAAE,IAAI,EAAE,CACvB,CAAC;AAGF,kBAAe,UAAU,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst PairSchema = new mongoose.Schema({\r\n    id: { type: String, required: true, trim: true },\r\n    token0: { type: String, required: true, trim: true },\r\n    token1: { type: String, required: true, trim: true },\r\n    exchangeRateDecimals: { type: String, required: true },\r\n    minToken0Order: { type: String, required: true },\r\n    exchangeRate: { type: String, required: true },\r\n    priceDiff: String,\r\n    chainId: String,\r\n    symbol: String,\r\n    marginEnabled: { type: Boolean, default: false },\r\n    active: { type: Boolean, default: true }\r\n\r\n},\r\n    { timestamps: true }\r\n);\r\n\r\n\r\nexport default PairSchema;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"32831d09c969c3785fba350e03b06c35400b1a98","contentHash":"a1510a66a38e55da3c59a3e241dbb6e7ed482d5bb0cb02bbc52513c20476b2f3"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Order.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Order.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":20},"end":{"line":30,"column":24}},"5":{"start":{"line":31,"column":0},"end":{"line":31,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Order.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Order.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAEhC,MAAM,WAAW,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IACpC,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAChD,SAAS,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACvD,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAClD,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACnD,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACpD,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACpD,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAClD,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACpD,YAAY,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAC1D,oBAAoB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAClE,aAAa,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAC3D,OAAO,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC1C,MAAM,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE;IACzC,OAAO,EAAE,MAAM;IACf,GAAG,EAAE,MAAM;IACX,SAAS,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;IAC5C,SAAS,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAC;IACvC,WAAW,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAC;IACxC,KAAK,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAC;IAClC,iBAAiB,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAC;IAC9C,iBAAiB,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAC;IAC9C,UAAU,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,GAAG,EAAC;CAC1C,EACG,EAAE,UAAU,EAAE,IAAI,EAAE,CACvB,CAAC;AAGF,kBAAe,WAAW,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst OrderSchema = new mongoose.Schema({\r\n    id: { type: String, required: true, trim: true },\r\n    signature: { type: String, required: true, trim: true },\r\n    pair: { type: String, required: true, trim: true },\r\n    maker: { type: String, required: true, trim: true },\r\n    token0: { type: String, required: true, trim: true },\r\n    token1: { type: String, required: true, trim: true },\r\n    salt: { type: String, required: true, trim: true },\r\n    amount: { type: String, required: true, trim: true },\r\n    exchangeRate: { type: String, required: true, trim: true },\r\n    exchangeRateDecimals: { type: String, required: true, trim: true },\r\n    balanceAmount: { type: String, required: true, trim: true },\r\n    deleted: { type: Boolean, required: true },\r\n    active: { type: Boolean, required: true },\r\n    chainId: String,\r\n    cid: String,\r\n    cancelled: { type: Boolean, default: false },\r\n    orderType: {type:Number, require: true},\r\n    borrowLimit: {type:String, default: '0'},\r\n    loops: {type:String, default: '0'},\r\n    lastInOrderToken0: {type:String, default: '0'},\r\n    lastInOrderToken1: {type:String, default: '0'},\r\n    fillAmount: {type:String, default: '0'}, \r\n},\r\n    { timestamps: true }\r\n);\r\n\r\n\r\nexport default OrderSchema;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7feb4a5d3acf2302ad3f1471c0480b9c289d3453","contentHash":"ebb1917a3d908bff94362ae8ab95a5b194db3faf9db5e4ed38b98fc73f89d365"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\OrderExecuted.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\OrderExecuted.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":28},"end":{"line":20,"column":24}},"5":{"start":{"line":21,"column":0},"end":{"line":21,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/OrderExecuted.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/OrderExecuted.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAEhC,MAAM,mBAAmB,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IAC5C,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,WAAW,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAC7C,cAAc,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IAChD,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAChD,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACnD,UAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IACxD,IAAI,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAClD,YAAY,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAC1D,oBAAoB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;IAClE,SAAS,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,OAAO,EAAE,IAAI,EAAC;IACvC,OAAO,EAAE,MAAM;IACf,QAAQ,EAAE,MAAM;CAEnB,EACG,EAAE,UAAU,EAAE,IAAI,EAAE,CACvB,CAAC;AAGF,kBAAe,mBAAmB,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst OrderExecutedSchema = new mongoose.Schema({\r\n    txnId: { type: String, required: true },\r\n    blockNumber: { type: Number, required: true },\r\n    blockTimestamp: { type: Number, required: true },\r\n    id: { type: String, required: true, trim: true },\r\n    taker: { type: String, required: true, trim: true },\r\n    fillAmount: { type: String, required: true, trim: true },\r\n    pair: { type: String, required: true, trim: true },\r\n    exchangeRate: { type: String, required: true, trim: true },\r\n    exchangeRateDecimals: { type: Number, required: true, trim: true },\r\n    orderType: {type:Number, require: true},\r\n    chainId: String,\r\n    logIndex: Number\r\n\r\n},\r\n    { timestamps: true }\r\n);\r\n\r\n\r\nexport default OrderExecutedSchema;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5e7ed6ec22551d3006e42a412b869b5f8277e00c","contentHash":"c0630133bf6c9e1cfebc7fa2a318172d2cdc021b538523411ba125cea228841a"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Token.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\Token.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":20},"end":{"line":18,"column":24}},"5":{"start":{"line":19,"column":0},"end":{"line":19,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Token.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/Token.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAEhC,MAAM,WAAW,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IAEpC,EAAE,EAAE,MAAM;IACV,IAAI,EAAE,MAAM;IACZ,MAAM,EAAE,MAAM;IACd,KAAK,EAAE,MAAM;IACb,QAAQ,EAAE,MAAM;IAChB,OAAO,EAAE,MAAM;IACf,aAAa,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;IAChD,GAAG,EAAE,MAAM;IACX,cAAc,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,aAAa,EAAE;IACxD,MAAM,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE;CAE3C,EACG,EAAE,UAAU,EAAE,IAAI,EAAE,CACvB,CAAC;AAGF,kBAAe,WAAW,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst TokenSchema = new mongoose.Schema({\r\n\r\n    id: String,\r\n    name: String,\r\n    symbol: String,\r\n    price: Number,\r\n    decimals: Number,\r\n    chainId: String,\r\n    marginEnabled: { type: Boolean, default: false },\r\n    cId: String,\r\n    minTokenAmount: { type: String, default: \"10000000000\" },\r\n    active: { type: Boolean, default: true }\r\n\r\n},\r\n    { timestamps: true }\r\n);\r\n\r\n\r\nexport default TokenSchema;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8a4858e605dc6b83a8914f742503d67c7756efaa","contentHash":"1ce6783cd1f3c35e4eb7fc816600c54b00e346e6123f4c46052fa128049ea44f"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\User.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\schemas\\User.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":19},"end":{"line":6,"column":55}},"4":{"start":{"line":7,"column":19},"end":{"line":12,"column":24}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/User.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/schemas/User.ts"],"names":[],"mappings":";;;;;AAAA,wDAAgC;AAEhC,MAAM,UAAU,GAAG,IAAI,kBAAQ,CAAC,MAAM,CAAC;IAEnC,EAAE,EAAE,EAAC,IAAI,EAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAC;IACjC,KAAK,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAC;IACrC,cAAc,EAAE,EAAC,IAAI,EAAC,MAAM,EAAC,OAAO,EAAE,GAAG,EAAC;IAC1C,OAAO,EAAE,MAAM;CAElB,EACG,EAAE,UAAU,EAAE,IAAI,EAAE,CACvB,CAAC;AAGF,kBAAe,UAAU,CAAC","sourcesContent":["import mongoose from \"mongoose\";\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n\r\n    id: {type:String, required: true},\r\n    token: {type: String, required: true},\r\n    inOrderBalance: {type:String,default: '0'},\r\n    chainId: String\r\n\r\n},\r\n    { timestamps: true }\r\n);\r\n\r\n\r\nexport default UserSchema;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d19c393b963d0bf890cf10e8aed14e042f6200e5","contentHash":"33344b4463800847fb412e2ffa1edb39c84e94b5aa045bd1a805ec2be31f6833"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\chain.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\chain.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":154}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":55}},"3":{"start":{"line":5,"column":19},"end":{"line":5,"column":40}},"4":{"start":{"line":7,"column":14},"end":{"line":14,"column":5}},"5":{"start":{"line":15,"column":4},"end":{"line":15,"column":24}},"6":{"start":{"line":17,"column":0},"end":{"line":17,"column":32}},"7":{"start":{"line":19,"column":14},"end":{"line":22,"column":5}},"8":{"start":{"line":23,"column":4},"end":{"line":23,"column":24}},"9":{"start":{"line":25,"column":0},"end":{"line":25,"column":48}},"10":{"start":{"line":27,"column":14},"end":{"line":30,"column":5}},"11":{"start":{"line":31,"column":4},"end":{"line":31,"column":20}},"12":{"start":{"line":33,"column":0},"end":{"line":33,"column":32}},"13":{"start":{"line":35,"column":14},"end":{"line":38,"column":5}},"14":{"start":{"line":39,"column":4},"end":{"line":39,"column":20}},"15":{"start":{"line":41,"column":0},"end":{"line":41,"column":30}},"16":{"start":{"line":43,"column":14},"end":{"line":46,"column":5}},"17":{"start":{"line":47,"column":4},"end":{"line":47,"column":24}},"18":{"start":{"line":49,"column":0},"end":{"line":49,"column":42}},"19":{"start":{"line":51,"column":14},"end":{"line":55,"column":5}},"20":{"start":{"line":56,"column":4},"end":{"line":56,"column":24}},"21":{"start":{"line":58,"column":0},"end":{"line":58,"column":50}}},"fnMap":{"0":{"name":"getRpcLink","decl":{"start":{"line":6,"column":9},"end":{"line":6,"column":19}},"loc":{"start":{"line":6,"column":29},"end":{"line":16,"column":1}},"line":6},"1":{"name":"getExchangeAddress","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":27}},"loc":{"start":{"line":18,"column":37},"end":{"line":24,"column":1}},"line":18},"2":{"name":"getVersion","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":19}},"loc":{"start":{"line":26,"column":25},"end":{"line":32,"column":1}},"line":26},"3":{"name":"getLatest","decl":{"start":{"line":34,"column":9},"end":{"line":34,"column":18}},"loc":{"start":{"line":34,"column":24},"end":{"line":40,"column":1}},"line":34},"4":{"name":"getLeverAddress","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":24}},"loc":{"start":{"line":42,"column":34},"end":{"line":48,"column":1}},"line":42},"5":{"name":"getMulticallAddress","decl":{"start":{"line":50,"column":9},"end":{"line":50,"column":28}},"loc":{"start":{"line":50,"column":38},"end":{"line":57,"column":1}},"line":50}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":34,"5":34,"6":1,"7":21,"8":21,"9":1,"10":43,"11":43,"12":1,"13":0,"14":0,"15":1,"16":2,"17":2,"18":1,"19":4,"20":4,"21":1},"f":{"0":34,"1":21,"2":43,"3":0,"4":2,"5":4},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/chain.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/chain.ts"],"names":[],"mappings":";;;AAAA,wDAAkF;AAClF,yCAA2D;AAI3D,SAAgB,UAAU,CAAC,OAAe;IAEtC,IAAI,GAAG,GAAQ;QACX,YAAY,EAAE,2BAA2B;QACzC,qFAAqF;QACrF,kFAAkF;QAClF,QAAQ,EAAE,sEAAsE;QAChF,YAAY,EAAE,4BAA4B;QAC1C,OAAO,EAAE,uBAAuB;KACnC,CAAC;IAEF,OAAO,GAAG,CAAC,OAAO,CAAC,CAAC;AACxB,CAAC;AAZD,gCAYC;AAED,SAAgB,kBAAkB,CAAC,OAAe;IAC9C,IAAI,GAAG,GAAQ;QACX,QAAQ,EAAE,IAAA,6BAAkB,EAAC,UAAU,CAAC;QACxC,OAAO,EAAE,IAAA,kCAAsB,EAAC,UAAU,CAAC;KAC9C,CAAA;IAED,OAAO,GAAG,CAAC,OAAO,CAAC,CAAA;AACvB,CAAC;AAPD,gDAOC;AAED,SAAgB,UAAU,CAAC,GAAW;IAClC,IAAI,GAAG,GAAQ;QACX,KAAK,EAAE,IAAA,oBAAS,EAAC,SAAS,CAAC;QAC3B,MAAM,EAAE,IAAA,yBAAa,EAAC,SAAS,CAAC;KACnC,CAAA;IACD,OAAO,GAAG,CAAC,GAAG,CAAC,CAAA;AACnB,CAAC;AAND,gCAMC;AAED,SAAgB,SAAS,CAAC,GAAW;IACjC,IAAI,GAAG,GAAQ;QACX,KAAK,EAAE,IAAA,oBAAS,EAAC,QAAQ,CAAC;QAC1B,MAAM,EAAE,IAAA,yBAAa,EAAC,QAAQ,CAAC;KAClC,CAAA;IACD,OAAO,GAAG,CAAC,GAAG,CAAC,CAAA;AACnB,CAAC;AAND,8BAMC;AAGD,SAAgB,eAAe,CAAC,OAAe;IAC3C,IAAI,GAAG,GAAQ;QACX,QAAQ,EAAE,IAAA,6BAAkB,EAAC,OAAO,CAAC;QACrC,OAAO,EAAE,IAAA,kCAAsB,EAAC,OAAO,CAAC;KAC3C,CAAA;IAED,OAAO,GAAG,CAAC,OAAO,CAAC,CAAA;AACvB,CAAC;AAPD,0CAOC;AAGD,SAAgB,mBAAmB,CAAC,OAAe;IAC/C,IAAI,GAAG,GAAQ;QACX,YAAY,EAAE,4CAA4C;QAC1D,QAAQ,EAAE,IAAA,6BAAkB,EAAC,YAAY,CAAC;QAC1C,OAAO,EAAE,IAAA,kCAAsB,EAAC,YAAY,CAAC;KAChD,CAAA;IAED,OAAO,GAAG,CAAC,OAAO,CAAC,CAAA;AACvB,CAAC;AARD,kDAQC","sourcesContent":["import { getTestConfig, getTestContractAddress, } from \"../test/helper/addresses\";\r\nimport { getConfig, getContractAddress } from \"./constant\";\r\n\r\n\r\n\r\nexport function getRpcLink(chainId: string): string {\r\n\r\n    let map: any = {\r\n        \"1666700000\": \"https://api.s0.b.hmny.io/\",\r\n        // \"421613\": \"https://arbitrum-goerli.infura.io/v3/bb621c9372d048979f8677ba78fe41d7\",\r\n        // \"421613\": \"https://nd-389-970-162.p2pify.com/17b0fbe8312c9ff963057d537b9c7864\",\r\n        \"421613\": \"https://arb-goerli.g.alchemy.com/v2/HyNaane88yHFsK8Yrn4gf2OOzHkd6GAJ\",\r\n        \"1313161555\": \"https://testnet.aurora.dev\",\r\n        \"31337\": \"http://localhost:8545\"\r\n    };\r\n\r\n    return map[chainId];\r\n}\r\n\r\nexport function getExchangeAddress(chainId: string): string {\r\n    let map: any = {\r\n        \"421613\": getContractAddress(\"Exchange\"),\r\n        \"31337\": getTestContractAddress(\"Exchange\")\r\n    }\r\n\r\n    return map[chainId]\r\n}\r\n\r\nexport function getVersion(env: string): string {\r\n    let map: any = {\r\n        \"dev\": getConfig(\"version\"),\r\n        \"test\": getTestConfig(\"version\")\r\n    }\r\n    return map[env]\r\n}\r\n\r\nexport function getLatest(env: string){\r\n    let map: any = {\r\n        \"dev\": getConfig(\"latest\"),\r\n        \"test\": getTestConfig(\"latest\")\r\n    }\r\n    return map[env]\r\n}\r\n\r\n\r\nexport function getLeverAddress(chainId: string) {\r\n    let map: any = {\r\n        \"421613\": getContractAddress(\"Lever\"),\r\n        \"31337\": getTestContractAddress(\"Lever\")\r\n    }\r\n\r\n    return map[chainId]\r\n}\r\n\r\n\r\nexport function getMulticallAddress(chainId: string) {\r\n    let map: any = {\r\n        \"1313161555\": \"0x266CCfe718EAac46ABF8589Dc8833f3A73a0Bd1c\",\r\n        \"421613\": getContractAddress(\"Multicall2\"),\r\n        \"31337\": getTestContractAddress(\"Multicall2\")\r\n    }\r\n\r\n    return map[chainId]\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ced9d9db97ec6c3fd0033623de61e35f90b99720","contentHash":"530280a9b379773bfacd353131d39366df366ed97f1de0572c471065827ddb3d"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\helper\\addresses.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\helper\\addresses.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":83}},"4":{"start":{"line":7,"column":13},"end":{"line":7,"column":43}},"5":{"start":{"line":8,"column":0},"end":{"line":11,"column":2}},"6":{"start":{"line":13,"column":19},"end":{"line":13,"column":108}},"7":{"start":{"line":14,"column":4},"end":{"line":14,"column":24}},"8":{"start":{"line":16,"column":0},"end":{"line":16,"column":38}},"9":{"start":{"line":18,"column":22},"end":{"line":18,"column":115}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":67}},"11":{"start":{"line":21,"column":0},"end":{"line":21,"column":56}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"getTestConfig","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":22}},"loc":{"start":{"line":12,"column":29},"end":{"line":15,"column":1}},"line":12},"2":{"name":"getTestContractAddress","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":31}},"loc":{"start":{"line":17,"column":38},"end":{"line":20,"column":1}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":43,"7":43,"8":1,"9":27,"10":27,"11":1},"f":{"0":1,"1":43,"2":27},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/helper/addresses.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/helper/addresses.ts"],"names":[],"mappings":";;;;;;AACA,4CAAoB;AAGP,QAAA,QAAQ,GAAG;IACpB,KAAK,EAAE,EAAE;IACT,MAAM,EAAE,EAAE;CACb,CAAC;AAKF,SAAgB,aAAa,CAAC,IAAS;IAEnC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAE,CAAC,YAAY,CAAE,SAAS,GAAE,yBAAyB,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;IAC/F,OAAO,MAAM,CAAC,IAAI,CAAC,CAAA;AACvB,CAAC;AAJD,sCAIC;AAED,SAAgB,sBAAsB,CAAC,IAAY;IAC/C,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAE,CAAC,YAAY,CAAC,SAAS,GAAG,6BAA6B,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;IACtG,OAAO,WAAW,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAA;AAClE,CAAC;AAHD,wDAGC","sourcesContent":["\r\nimport fs from \"fs\";\r\n\r\n\r\nexport const Decimals = {\r\n    token: 18,\r\n    amount: 18\r\n};\r\n\r\n\r\n\r\n\r\nexport function getTestConfig(name: any) {\r\n\r\n    const Config = JSON.parse((fs.readFileSync( __dirname+ \"/deployment/config.json\")).toString());\r\n    return Config[name]\r\n}\r\n\r\nexport function getTestContractAddress(name: string) {\r\n    let Deployments = JSON.parse((fs.readFileSync(__dirname + \"/deployment/deployment.json\")).toString());\r\n    return Deployments[\"contracts\"][name][\"address\"].toLowerCase()\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6b3c5be9d2ceb872cc0d1f575bef883781a892a6","contentHash":"4852fcd85a8a6c24d1e76ef1012de9afc3c0fb123b3c31b7ae8ab837fbbc182c"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\constant.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\constant.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":97}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":34}},"5":{"start":{"line":8,"column":13},"end":{"line":8,"column":43}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":47}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":41}},"8":{"start":{"line":11,"column":0},"end":{"line":14,"column":2}},"9":{"start":{"line":16,"column":17},"end":{"line":16,"column":135}},"10":{"start":{"line":17,"column":4},"end":{"line":17,"column":24}},"11":{"start":{"line":19,"column":0},"end":{"line":19,"column":30}},"12":{"start":{"line":21,"column":22},"end":{"line":21,"column":145}},"13":{"start":{"line":22,"column":4},"end":{"line":22,"column":67}},"14":{"start":{"line":24,"column":0},"end":{"line":24,"column":48}},"15":{"start":{"line":26,"column":19},"end":{"line":26,"column":52}},"16":{"start":{"line":27,"column":14},"end":{"line":27,"column":46}},"17":{"start":{"line":28,"column":4},"end":{"line":33,"column":5}},"18":{"start":{"line":29,"column":8},"end":{"line":29,"column":46}},"19":{"start":{"line":31,"column":9},"end":{"line":33,"column":5}},"20":{"start":{"line":32,"column":8},"end":{"line":32,"column":43}},"21":{"start":{"line":34,"column":4},"end":{"line":34,"column":81}},"22":{"start":{"line":36,"column":0},"end":{"line":36,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"getConfig","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":18}},"loc":{"start":{"line":15,"column":25},"end":{"line":18,"column":1}},"line":15},"2":{"name":"getContractAddress","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":27}},"loc":{"start":{"line":20,"column":34},"end":{"line":23,"column":1}},"line":20},"3":{"name":"getContract","decl":{"start":{"line":25,"column":9},"end":{"line":25,"column":20}},"loc":{"start":{"line":25,"column":36},"end":{"line":35,"column":1}},"line":25}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":28,"column":4},"end":{"line":33,"column":5}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":33,"column":5}},{"start":{"line":28,"column":4},"end":{"line":33,"column":5}}],"line":28},"4":{"loc":{"start":{"line":31,"column":9},"end":{"line":33,"column":5}},"type":"if","locations":[{"start":{"line":31,"column":9},"end":{"line":33,"column":5}},{"start":{"line":31,"column":9},"end":{"line":33,"column":5}}],"line":31}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":71,"10":71,"11":1,"12":53,"13":53,"14":1,"15":21,"16":21,"17":21,"18":4,"19":17,"20":2,"21":21,"22":1},"f":{"0":2,"1":71,"2":53,"3":21},"b":{"0":[1,1,1],"1":[0,2],"2":[2,2],"3":[4,17],"4":[2,15]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/constant.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/constant.ts"],"names":[],"mappings":";;;;;;AACA,mCAAgC;AAChC,4CAAoB;AACpB,gDAAwB;AACxB,0CAAqD;AAQxC,QAAA,QAAQ,GAAG;IACpB,KAAK,EAAE,EAAE;IACT,MAAM,EAAE,EAAE;CACb,CAAC;AAEF,SAAgB,SAAS,CAAC,IAAS;IAC/B,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAE,CAAC,YAAY,CAAC,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,aAAa,EAAE,aAAa,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;IAChH,OAAO,MAAM,CAAC,IAAI,CAAC,CAAA;AACvB,CAAC;AAHD,8BAGC;AAGD,SAAgB,kBAAkB,CAAC,IAAY;IAC3C,IAAI,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAE,CAAC,YAAY,CAAC,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,aAAa,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC;IAC1H,OAAO,WAAW,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAA;AAClE,CAAC;AAHD,gDAGC;AAGD,SAAgB,WAAW,CAAC,IAAY,EAAE,OAAY;IAElD,IAAI,QAAQ,GAAG,IAAA,mBAAW,EAAC,OAAO,CAAC,CAAC;IACpC,IAAI,GAAG,GAAG,IAAA,cAAM,EAAC,WAAW,CAAC,CAAC;IAC9B,IAAI,IAAI,IAAI,UAAU,EAAE;QACpB,GAAG,GAAG,IAAA,cAAM,EAAC,UAAU,CAAC,CAAC;KAC5B;SACI,IAAI,IAAI,IAAI,OAAO,EAAE;QACtB,GAAG,GAAG,IAAA,cAAM,EAAC,OAAO,CAAC,CAAC;KACzB;IACD,OAAO,IAAI,eAAM,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAA;AACvE,CAAC;AAXD,kCAWC","sourcesContent":["\r\nimport { ethers } from \"ethers\";\r\nimport fs from \"fs\";\r\nimport path from \"path\";\r\nimport { getABI, getProvider } from \"../utils/utils\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const Decimals = {\r\n    token: 18,\r\n    amount: 18\r\n};\r\n\r\nexport function getConfig(name: any) {\r\n    let Config = JSON.parse((fs.readFileSync(path.join(__dirname, '..', 'deployments', 'config.json'))).toString());\r\n    return Config[name]\r\n}\r\n\r\n\r\nexport function getContractAddress(name: string) {\r\n    let Deployments = JSON.parse((fs.readFileSync(path.join(__dirname, '..', 'deployments', 'deployments.json'))).toString());\r\n    return Deployments[\"contracts\"][name][\"address\"].toLowerCase()\r\n}\r\n\r\n\r\nexport function getContract(name: string, chainId: any) {\r\n\r\n    let provider = getProvider(chainId);\r\n    let abi = getABI(\"TestERC20\");\r\n    if (name == \"Exchange\") {\r\n        abi = getABI(\"Exchange\");\r\n    }\r\n    else if (name == \"Lever\") {\r\n        abi = getABI(\"Lever\");\r\n    }\r\n    return new ethers.Contract(getContractAddress(name), abi, provider)\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1629023e031e601d1074de19b1db1c6f39e0ada9","contentHash":"47b4cc4ecaae1923bb28b141a6e0cd612b3ceb21912452f5381c3f4b13e1d1c1"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\utils.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\utils.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":90}},"4":{"start":{"line":7,"column":13},"end":{"line":7,"column":43}},"5":{"start":{"line":8,"column":17},"end":{"line":8,"column":34}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":51}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":42}},"8":{"start":{"line":11,"column":19},"end":{"line":11,"column":48}},"9":{"start":{"line":12,"column":15},"end":{"line":12,"column":47}},"10":{"start":{"line":14,"column":24},"end":{"line":14,"column":158}},"11":{"start":{"line":15,"column":15},"end":{"line":15,"column":51}},"12":{"start":{"line":16,"column":4},"end":{"line":21,"column":5}},"13":{"start":{"line":17,"column":8},"end":{"line":17,"column":78}},"14":{"start":{"line":19,"column":9},"end":{"line":21,"column":5}},"15":{"start":{"line":20,"column":8},"end":{"line":20,"column":33}},"16":{"start":{"line":22,"column":4},"end":{"line":22,"column":37}},"17":{"start":{"line":23,"column":4},"end":{"line":23,"column":14}},"18":{"start":{"line":25,"column":0},"end":{"line":25,"column":24}},"19":{"start":{"line":27,"column":4},"end":{"line":27,"column":129}},"20":{"start":{"line":29,"column":0},"end":{"line":29,"column":32}},"21":{"start":{"line":31,"column":18},"end":{"line":31,"column":58}},"22":{"start":{"line":32,"column":4},"end":{"line":32,"column":17}},"23":{"start":{"line":34,"column":0},"end":{"line":34,"column":36}},"24":{"start":{"line":36,"column":21},"end":{"line":36,"column":100}},"25":{"start":{"line":37,"column":4},"end":{"line":37,"column":20}},"26":{"start":{"line":39,"column":0},"end":{"line":39,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"getABI","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":15}},"loc":{"start":{"line":13,"column":22},"end":{"line":24,"column":1}},"line":13},"2":{"name":"parseEther","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":19}},"loc":{"start":{"line":26,"column":27},"end":{"line":28,"column":1}},"line":26},"3":{"name":"getInterface","decl":{"start":{"line":30,"column":9},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":27},"end":{"line":33,"column":1}},"line":30},"4":{"name":"getProvider","decl":{"start":{"line":35,"column":9},"end":{"line":35,"column":20}},"loc":{"start":{"line":35,"column":30},"end":{"line":38,"column":1}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":16,"column":4},"end":{"line":21,"column":5}},"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":21,"column":5}},{"start":{"line":16,"column":4},"end":{"line":21,"column":5}}],"line":16},"4":{"loc":{"start":{"line":19,"column":9},"end":{"line":21,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":9},"end":{"line":21,"column":5}},{"start":{"line":19,"column":9},"end":{"line":21,"column":5}}],"line":19}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":38,"11":38,"12":38,"13":5,"14":33,"15":33,"16":0,"17":0,"18":1,"19":10,"20":1,"21":5,"22":5,"23":1,"24":34,"25":34,"26":1},"f":{"0":3,"1":38,"2":10,"3":5,"4":34},"b":{"0":[1,1,1],"1":[0,3],"2":[3,3],"3":[5,33],"4":[33,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/utils.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/utils.ts"],"names":[],"mappings":";;;;;;AAAA,4CAAoB;AACpB,mCAAgC;AAChC,oDAAyB;AACzB,2CAA4C;AAC5C,iDAA+C;AAC/C,gDAAwB;AAKxB,SAAgB,MAAM,CAAC,IAAS;IAC5B,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,YAAE,CAAC,YAAY,CAAC,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE,aAAa,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC;IACvI,IAAI,IAAI,GAAG,CAAC,OAAO,EAAE,WAAW,EAAC,YAAY,CAAC,CAAA;IAC9C,IAAI,IAAI,IAAI,UAAU,EAAE;QACpB,OAAO,WAAW,CAAC,YAAY,IAAA,oBAAS,EAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;KACzD;SACI,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;QAC1B,OAAO,WAAW,CAAC,IAAI,CAAC,CAAA;KAC3B;IACD,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAA;IAChC,OAAO,EAAE,CAAA;AACb,CAAC;AAXD,wBAWC;AAED,SAAgB,UAAU,CAAC,KAAsB;IAE7C,OAAO,eAAM,CAAC,KAAK,CAAC,UAAU,CAAC,GAAG,IAAA,gBAAG,EAAC,KAAK,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC;AACpF,CAAC;AAHD,gCAGC;AAED,SAAgB,YAAY,CAAC,GAAa;IACtC,MAAM,KAAK,GAAG,IAAI,eAAM,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;IAC9C,OAAO,KAAK,CAAC;AACjB,CAAC;AAHD,oCAGC;AAED,SAAgB,WAAW,CAAC,OAAe;IACvC,MAAM,QAAQ,GAAG,IAAI,eAAM,CAAC,SAAS,CAAC,eAAe,CAAC,IAAA,kBAAU,EAAC,OAAO,CAAC,CAAC,CAAC;IAC3E,OAAO,QAAQ,CAAC;AACpB,CAAC;AAHD,kCAGC","sourcesContent":["import fs from \"fs\";\r\nimport { ethers } from \"ethers\";\r\nimport Big from \"big.js\";\r\nimport { getRpcLink} from \"../helper/chain\";\r\nimport { getConfig } from \"../helper/constant\";\r\nimport path from \"path\";\r\n\r\n\r\n\r\n\r\nexport function getABI(name: any) {\r\n    const Deployments = JSON.parse((fs.readFileSync(path.join(__dirname, '..', 'deployments', 'deployments.json'))).toString())[\"sources\"];\r\n    let abis = [\"Lever\", \"TestERC20\",\"Multicall2\"]\r\n    if (name == \"Exchange\") {\r\n        return Deployments[`Exchange_${getConfig(\"latest\")}`];\r\n    }\r\n    else if (abis.includes(name)) {\r\n        return Deployments[name]\r\n    }  \r\n    console.log(`request not valid`)\r\n    return []\r\n}\r\n\r\nexport function parseEther(value: number | string): string {\r\n\r\n    return ethers.utils.parseEther(`${Big(value).div(Big(10).pow(18))}`).toString();\r\n}\r\n\r\nexport function getInterface(abi: object[]): ethers.utils.Interface {\r\n    const iface = new ethers.utils.Interface(abi);\r\n    return iface;\r\n}\r\n\r\nexport function getProvider(chainId: string): ethers.providers.JsonRpcProvider {\r\n    const provider = new ethers.providers.JsonRpcProvider(getRpcLink(chainId));\r\n    return provider;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e39e39ccedd7e7b8a2995fb370f66a9833245c73","contentHash":"10eaacdb90aa0fcffbea1b0f122ea270c36ad19c6e99b0a5387173f19b6be8f5"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\socketIo\\socket.io.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\socketIo\\socket.io.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":52}},"2":{"start":{"line":4,"column":20},"end":{"line":4,"column":40}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":43}},"4":{"start":{"line":10,"column":8},"end":{"line":14,"column":11}},"5":{"start":{"line":15,"column":8},"end":{"line":15,"column":38}},"6":{"start":{"line":16,"column":8},"end":{"line":19,"column":11}},"7":{"start":{"line":17,"column":12},"end":{"line":17,"column":59}},"8":{"start":{"line":18,"column":12},"end":{"line":18,"column":89}},"9":{"start":{"line":18,"column":42},"end":{"line":18,"column":87}},"10":{"start":{"line":22,"column":8},"end":{"line":22,"column":40}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":38}},"12":{"start":{"line":28,"column":0},"end":{"line":32,"column":2}},"13":{"start":{"line":33,"column":0},"end":{"line":33,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":18},"end":{"line":8,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":17},"end":{"line":20,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":30},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":42},"end":{"line":19,"column":9}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":36},"end":{"line":18,"column":37}},"loc":{"start":{"line":18,"column":42},"end":{"line":18,"column":87}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":28},"end":{"line":23,"column":5}},"line":21},"5":{"name":"(anonymous_5)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":26},"end":{"line":26,"column":5}},"line":24}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":23,"12":1,"13":1},"f":{"0":1,"1":1,"2":1,"3":0,"4":1,"5":23},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/socketIo/socket.io.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/socketIo/socket.io.ts"],"names":[],"mappings":";;;AACA,yCAAgC;AAEhC,MAAM,aAAa;IAAnB;QACY,OAAE,GAAW,IAAI,kBAAM,EAAE,CAAC;IAuBtC,CAAC;IArBU,IAAI,CAAC,MAAW;QACnB,IAAI,CAAC,EAAE,GAAG,IAAI,kBAAM,CAAC,MAAM,EAAE;YACzB,IAAI,EAAE;gBACJ,MAAM,EAAE,GAAG;aACZ;SACF,CAAC,CAAC;QACL,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAE9B,IAAI,CAAC,EAAE,CAAC,YAAY,EAAE,CAAC,MAAW,EAAE,EAAE;YAClC,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC;YAC/C,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAC,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;QAEhF,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,EAAE,CAAC,SAAiB,EAAE,QAAyB;QAClD,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IACpC,CAAC;IACM,IAAI,CAAC,SAAiB,EAAE,IAAS;QACpC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IAClC,CAAC;CACJ;AAIa,QAAA,UAAU,GAAI;IACxB,UAAU,EAAE,YAAY;IACxB,YAAY,EAAE,cAAc;IAC5B,YAAY,EAAE,cAAc;CAC/B,CAAA;AAEY,QAAA,aAAa,GAAG,IAAI,aAAa,EAAE,CAAC","sourcesContent":["\r\nimport {Server} from \"socket.io\"\r\n\r\nclass SocketService{\r\n    private io: Server = new Server();\r\n    \r\n    public init(server: any){\r\n        this.io = new Server(server, {\r\n            cors: {\r\n              origin: \"*\"\r\n            }\r\n          });\r\n        console.log(\"WS Initialized\");\r\n\r\n        this.on(\"connection\", (socket: any) => {\r\n            console.log(\"New client connected\", socket.id);\r\n            socket.on(\"disconnect\", () => console.log(\"Client disconnected\",socket.id));\r\n            \r\n        });\r\n    }\r\n\r\n    public on(eventName: string, callback: (x:any) => void){\r\n        this.io.on(eventName, callback);\r\n    }\r\n    public emit(eventName: string, data: any){\r\n        this.io.emit(eventName, data);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const  EVENT_NAME  = {\r\n    PAIR_ORDER: \"PAIR_ORDER\",\r\n    PAIR_HISTORY: \"PAIR_HISTORY\",\r\n    CANCEL_ORDER: \"CANCEL_ORDER\"\r\n}\r\n\r\nexport const socketService = new SocketService();\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d438ed7f48a32b172365065d7ec439c07c958e73","contentHash":"5dc01bc6ac2b38b4b90c3a384236b3284c6a8252847642a04468be0fd473bced"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\BmarginOrderLong.script.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\BmarginOrderLong.script.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":62}},"15":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"16":{"start":{"line":17,"column":15},"end":{"line":17,"column":30}},"17":{"start":{"line":18,"column":20},"end":{"line":18,"column":57}},"18":{"start":{"line":19,"column":0},"end":{"line":19,"column":37}},"19":{"start":{"line":20,"column":17},"end":{"line":20,"column":34}},"20":{"start":{"line":21,"column":17},"end":{"line":21,"column":51}},"21":{"start":{"line":22,"column":20},"end":{"line":22,"column":55}},"22":{"start":{"line":23,"column":16},"end":{"line":23,"column":44}},"23":{"start":{"line":24,"column":16},"end":{"line":24,"column":45}},"24":{"start":{"line":25,"column":27},"end":{"line":25,"column":54}},"25":{"start":{"line":26,"column":15},"end":{"line":26,"column":47}},"26":{"start":{"line":27,"column":13},"end":{"line":27,"column":35}},"27":{"start":{"line":28,"column":19},"end":{"line":28,"column":51}},"28":{"start":{"line":29,"column":0},"end":{"line":29,"column":185}},"29":{"start":{"line":30,"column":15},"end":{"line":30,"column":90}},"30":{"start":{"line":31,"column":0},"end":{"line":195,"column":4}},"31":{"start":{"line":31,"column":93},"end":{"line":195,"column":2}},"32":{"start":{"line":33,"column":18},"end":{"line":33,"column":26}},"33":{"start":{"line":34,"column":19},"end":{"line":34,"column":52}},"34":{"start":{"line":35,"column":19},"end":{"line":35,"column":67}},"35":{"start":{"line":36,"column":14},"end":{"line":36,"column":57}},"36":{"start":{"line":37,"column":15},"end":{"line":37,"column":59}},"37":{"start":{"line":38,"column":16},"end":{"line":38,"column":61}},"38":{"start":{"line":39,"column":16},"end":{"line":39,"column":68}},"39":{"start":{"line":40,"column":15},"end":{"line":40,"column":66}},"40":{"start":{"line":41,"column":16},"end":{"line":41,"column":86}},"41":{"start":{"line":42,"column":16},"end":{"line":42,"column":86}},"42":{"start":{"line":43,"column":21},"end":{"line":43,"column":23}},"43":{"start":{"line":44,"column":17},"end":{"line":44,"column":19}},"44":{"start":{"line":45,"column":23},"end":{"line":45,"column":25}},"45":{"start":{"line":46,"column":23},"end":{"line":46,"column":75}},"46":{"start":{"line":47,"column":15},"end":{"line":47,"column":50}},"47":{"start":{"line":48,"column":17},"end":{"line":48,"column":65}},"48":{"start":{"line":49,"column":16},"end":{"line":49,"column":17}},"49":{"start":{"line":50,"column":20},"end":{"line":50,"column":21}},"50":{"start":{"line":51,"column":4},"end":{"line":54,"column":7}},"51":{"start":{"line":52,"column":8},"end":{"line":52,"column":28}},"52":{"start":{"line":53,"column":8},"end":{"line":53,"column":15}},"53":{"start":{"line":55,"column":4},"end":{"line":67,"column":8}},"54":{"start":{"line":55,"column":35},"end":{"line":67,"column":6}},"55":{"start":{"line":56,"column":26},"end":{"line":56,"column":66}},"56":{"start":{"line":57,"column":27},"end":{"line":57,"column":71}},"57":{"start":{"line":59,"column":8},"end":{"line":59,"column":91}},"58":{"start":{"line":60,"column":8},"end":{"line":60,"column":93}},"59":{"start":{"line":62,"column":8},"end":{"line":62,"column":94}},"60":{"start":{"line":63,"column":8},"end":{"line":63,"column":96}},"61":{"start":{"line":65,"column":8},"end":{"line":65,"column":124}},"62":{"start":{"line":66,"column":8},"end":{"line":66,"column":125}},"63":{"start":{"line":68,"column":4},"end":{"line":130,"column":8}},"64":{"start":{"line":68,"column":57},"end":{"line":130,"column":6}},"65":{"start":{"line":69,"column":23},"end":{"line":74,"column":9}},"66":{"start":{"line":76,"column":22},"end":{"line":88,"column":9}},"67":{"start":{"line":89,"column":22},"end":{"line":99,"column":9}},"68":{"start":{"line":101,"column":8},"end":{"line":101,"column":27}},"69":{"start":{"line":103,"column":32},"end":{"line":103,"column":80}},"70":{"start":{"line":104,"column":8},"end":{"line":104,"column":41}},"71":{"start":{"line":105,"column":8},"end":{"line":107,"column":11}},"72":{"start":{"line":108,"column":18},"end":{"line":124,"column":10}},"73":{"start":{"line":125,"column":8},"end":{"line":125,"column":30}},"74":{"start":{"line":126,"column":8},"end":{"line":126,"column":52}},"75":{"start":{"line":127,"column":8},"end":{"line":127,"column":62}},"76":{"start":{"line":128,"column":8},"end":{"line":128,"column":56}},"77":{"start":{"line":129,"column":8},"end":{"line":129,"column":90}},"78":{"start":{"line":131,"column":4},"end":{"line":138,"column":8}},"79":{"start":{"line":131,"column":48},"end":{"line":138,"column":6}},"80":{"start":{"line":132,"column":19},"end":{"line":132,"column":80}},"81":{"start":{"line":133,"column":8},"end":{"line":133,"column":52}},"82":{"start":{"line":134,"column":8},"end":{"line":134,"column":57}},"83":{"start":{"line":135,"column":8},"end":{"line":135,"column":77}},"84":{"start":{"line":136,"column":8},"end":{"line":136,"column":63}},"85":{"start":{"line":137,"column":8},"end":{"line":137,"column":32}},"86":{"start":{"line":139,"column":4},"end":{"line":173,"column":8}},"87":{"start":{"line":139,"column":79},"end":{"line":173,"column":6}},"88":{"start":{"line":140,"column":33},"end":{"line":140,"column":61}},"89":{"start":{"line":141,"column":33},"end":{"line":141,"column":61}},"90":{"start":{"line":142,"column":34},"end":{"line":142,"column":63}},"91":{"start":{"line":143,"column":34},"end":{"line":143,"column":63}},"92":{"start":{"line":144,"column":22},"end":{"line":144,"column":123}},"93":{"start":{"line":145,"column":8},"end":{"line":145,"column":51}},"94":{"start":{"line":146,"column":8},"end":{"line":146,"column":51}},"95":{"start":{"line":147,"column":8},"end":{"line":147,"column":52}},"96":{"start":{"line":148,"column":8},"end":{"line":148,"column":52}},"97":{"start":{"line":150,"column":26},"end":{"line":150,"column":74}},"98":{"start":{"line":151,"column":8},"end":{"line":151,"column":79}},"99":{"start":{"line":152,"column":8},"end":{"line":152,"column":79}},"100":{"start":{"line":153,"column":20},"end":{"line":153,"column":138}},"101":{"start":{"line":154,"column":8},"end":{"line":154,"column":28}},"102":{"start":{"line":155,"column":34},"end":{"line":155,"column":62}},"103":{"start":{"line":156,"column":35},"end":{"line":156,"column":64}},"104":{"start":{"line":157,"column":35},"end":{"line":157,"column":64}},"105":{"start":{"line":158,"column":34},"end":{"line":158,"column":62}},"106":{"start":{"line":159,"column":23},"end":{"line":159,"column":128}},"107":{"start":{"line":160,"column":8},"end":{"line":160,"column":53}},"108":{"start":{"line":161,"column":8},"end":{"line":161,"column":54}},"109":{"start":{"line":162,"column":8},"end":{"line":162,"column":54}},"110":{"start":{"line":163,"column":8},"end":{"line":163,"column":53}},"111":{"start":{"line":165,"column":18},"end":{"line":165,"column":50}},"112":{"start":{"line":166,"column":29},"end":{"line":166,"column":133}},"113":{"start":{"line":167,"column":29},"end":{"line":167,"column":137}},"114":{"start":{"line":168,"column":8},"end":{"line":168,"column":153}},"115":{"start":{"line":169,"column":8},"end":{"line":172,"column":66}},"116":{"start":{"line":174,"column":4},"end":{"line":194,"column":8}},"117":{"start":{"line":174,"column":34},"end":{"line":194,"column":6}},"118":{"start":{"line":175,"column":20},"end":{"line":175,"column":114}},"119":{"start":{"line":176,"column":8},"end":{"line":176,"column":28}},"120":{"start":{"line":177,"column":19},"end":{"line":187,"column":9}},"121":{"start":{"line":178,"column":12},"end":{"line":186,"column":15}},"122":{"start":{"line":179,"column":32},"end":{"line":181,"column":25}},"123":{"start":{"line":180,"column":20},"end":{"line":180,"column":46}},"124":{"start":{"line":182,"column":16},"end":{"line":185,"column":19}},"125":{"start":{"line":183,"column":20},"end":{"line":183,"column":44}},"126":{"start":{"line":184,"column":20},"end":{"line":184,"column":46}},"127":{"start":{"line":188,"column":18},"end":{"line":188,"column":30}},"128":{"start":{"line":189,"column":8},"end":{"line":189,"column":52}},"129":{"start":{"line":190,"column":19},"end":{"line":190,"column":80}},"130":{"start":{"line":191,"column":8},"end":{"line":191,"column":52}},"131":{"start":{"line":192,"column":8},"end":{"line":192,"column":48}},"132":{"start":{"line":193,"column":8},"end":{"line":193,"column":58}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":31,"column":87},"end":{"line":31,"column":88}},"loc":{"start":{"line":31,"column":93},"end":{"line":195,"column":2}},"line":31},"9":{"name":"(anonymous_9)","decl":{"start":{"line":31,"column":127},"end":{"line":31,"column":128}},"loc":{"start":{"line":31,"column":140},"end":{"line":195,"column":1}},"line":31},"10":{"name":"(anonymous_10)","decl":{"start":{"line":51,"column":10},"end":{"line":51,"column":11}},"loc":{"start":{"line":51,"column":20},"end":{"line":54,"column":5}},"line":51},"11":{"name":"(anonymous_11)","decl":{"start":{"line":55,"column":29},"end":{"line":55,"column":30}},"loc":{"start":{"line":55,"column":35},"end":{"line":67,"column":6}},"line":55},"12":{"name":"(anonymous_12)","decl":{"start":{"line":55,"column":69},"end":{"line":55,"column":70}},"loc":{"start":{"line":55,"column":82},"end":{"line":67,"column":5}},"line":55},"13":{"name":"(anonymous_13)","decl":{"start":{"line":68,"column":51},"end":{"line":68,"column":52}},"loc":{"start":{"line":68,"column":57},"end":{"line":130,"column":6}},"line":68},"14":{"name":"(anonymous_14)","decl":{"start":{"line":68,"column":91},"end":{"line":68,"column":92}},"loc":{"start":{"line":68,"column":104},"end":{"line":130,"column":5}},"line":68},"15":{"name":"(anonymous_15)","decl":{"start":{"line":131,"column":42},"end":{"line":131,"column":43}},"loc":{"start":{"line":131,"column":48},"end":{"line":138,"column":6}},"line":131},"16":{"name":"(anonymous_16)","decl":{"start":{"line":131,"column":82},"end":{"line":131,"column":83}},"loc":{"start":{"line":131,"column":95},"end":{"line":138,"column":5}},"line":131},"17":{"name":"(anonymous_17)","decl":{"start":{"line":139,"column":73},"end":{"line":139,"column":74}},"loc":{"start":{"line":139,"column":79},"end":{"line":173,"column":6}},"line":139},"18":{"name":"(anonymous_18)","decl":{"start":{"line":139,"column":113},"end":{"line":139,"column":114}},"loc":{"start":{"line":139,"column":126},"end":{"line":173,"column":5}},"line":139},"19":{"name":"(anonymous_19)","decl":{"start":{"line":174,"column":28},"end":{"line":174,"column":29}},"loc":{"start":{"line":174,"column":34},"end":{"line":194,"column":6}},"line":174},"20":{"name":"(anonymous_20)","decl":{"start":{"line":174,"column":68},"end":{"line":174,"column":69}},"loc":{"start":{"line":174,"column":81},"end":{"line":194,"column":5}},"line":174},"21":{"name":"(anonymous_21)","decl":{"start":{"line":177,"column":19},"end":{"line":177,"column":20}},"loc":{"start":{"line":177,"column":25},"end":{"line":187,"column":9}},"line":177},"22":{"name":"(anonymous_22)","decl":{"start":{"line":178,"column":31},"end":{"line":178,"column":32}},"loc":{"start":{"line":178,"column":52},"end":{"line":186,"column":13}},"line":178},"23":{"name":"(anonymous_23)","decl":{"start":{"line":179,"column":43},"end":{"line":179,"column":44}},"loc":{"start":{"line":179,"column":49},"end":{"line":181,"column":17}},"line":179},"24":{"name":"(anonymous_24)","decl":{"start":{"line":182,"column":63},"end":{"line":182,"column":64}},"loc":{"start":{"line":182,"column":73},"end":{"line":185,"column":17}},"line":182}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":71},"end":{"line":29,"column":180}},"type":"cond-expr","locations":[{"start":{"line":29,"column":160},"end":{"line":29,"column":171}},{"start":{"line":29,"column":174},"end":{"line":29,"column":180}}],"line":29},"9":{"loc":{"start":{"line":29,"column":72},"end":{"line":29,"column":156}},"type":"cond-expr","locations":[{"start":{"line":29,"column":128},"end":{"line":29,"column":134}},{"start":{"line":29,"column":137},"end":{"line":29,"column":156}}],"line":29},"10":{"loc":{"start":{"line":29,"column":72},"end":{"line":29,"column":125}},"type":"binary-expr","locations":[{"start":{"line":29,"column":72},"end":{"line":29,"column":108}},{"start":{"line":29,"column":112},"end":{"line":29,"column":125}}],"line":29},"11":{"loc":{"start":{"line":166,"column":51},"end":{"line":166,"column":105}},"type":"cond-expr","locations":[{"start":{"line":166,"column":84},"end":{"line":166,"column":90}},{"start":{"line":166,"column":93},"end":{"line":166,"column":105}}],"line":166},"12":{"loc":{"start":{"line":166,"column":51},"end":{"line":166,"column":81}},"type":"binary-expr","locations":[{"start":{"line":166,"column":51},"end":{"line":166,"column":63}},{"start":{"line":166,"column":67},"end":{"line":166,"column":81}}],"line":166}},"s":{"0":1,"1":20,"2":4,"3":6,"4":20,"5":20,"6":0,"7":0,"8":0,"9":0,"10":26,"11":6,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"125":0,"126":0,"127":1,"128":1,"129":1,"130":1,"131":1,"132":1},"f":{"0":6,"1":20,"2":4,"3":6,"4":20,"5":0,"6":26,"7":3,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0},"b":{"0":[1,1,1],"1":[16,4],"2":[6,6],"3":[6,20],"4":[6,6],"5":[1,1,1],"6":[0,3],"7":[3,3],"8":[0,1],"9":[0,1],"10":[1,1],"11":[0,1],"12":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/BmarginOrderLong.script.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/BmarginOrderLong.script.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nuse(chaiHttp);\r\nimport { ethers } from \"ethers\";\r\nimport Big from \"big.js\";\r\nimport { EVENT_NAME } from \"../../socketIo/socket.io\";\r\nimport {  getProvider, parseEther } from \"../../utils/utils\";\r\nimport { getExchangeAddress } from \"../../helper/chain\";\r\nimport { io } from \"socket.io-client\";\r\nimport path from \"path\";\r\nimport { connect, Order, Sync } from \"../../DB/db\";\r\nimport { ifOrderCreated } from \"../../helper/interface\";\r\nimport { getConfig, getContract } from \"../../helper/constant\";\r\n\r\n\r\n\r\nrequire(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\n\r\n\r\n\r\nconst socket = io(\"http://localhost:3010\", { autoConnect: false });\r\n\r\ndescribe(\"Margin Order Long => Mint token, create order, execute order, cancel order\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let provider = getProvider(chainId);\r\n\r\n    let exchange = getContract(\"Exchange\", chainId)\r\n    let btc = getContract(\"BTC\",chainId)\r\n    let usdc = getContract(\"USDC\", chainId)\r\n    let lever = getContract(\"Lever\", chainId)\r\n    let cUsdc = getContract(\"lUSDC_Market\", chainId)\r\n    let cBtc = getContract(\"lBTC_Market\", chainId)\r\n    let user1 = new ethers.Wallet(process.env.PRIVATE_KEY1! as string).connect(provider); //2\r\n    let user2 = new ethers.Wallet(process.env.PRIVATE_KEY2! as string).connect(provider); //1\r\n\r\n\r\n    let signatures: any[] = [];\r\n    let orders: any[] = [];\r\n    let orderCreated: any[] = []\r\n    let exchangeRate = ethers.utils.parseEther('20000').toString();\r\n\r\n    let salt = Math.floor(Math.random() * 9000000);\r\n    let amount = ethers.utils.parseEther('1').toString();\r\n    let loops = 5;\r\n    let orderType = 2 // long\r\n\r\n    after((done) => {\r\n        socket.disconnect()\r\n        done()\r\n    })\r\n    it(\"make market liquid\", async () => {\r\n\r\n        const btcAmount = ethers.utils.parseEther('1000');\r\n        const usdcAmount = ethers.utils.parseEther('20000000');\r\n\r\n        // mint\r\n\r\n        await btc.connect(user1).mint(user1.address, btcAmount, { gasLimit: \"100000000\" });\r\n        await usdc.connect(user2).mint(user2.address, usdcAmount, { gasLimit: \"100000000\" });\r\n\r\n        // to market\r\n        await exchange.connect(user1).mint(btc.address, btcAmount, { gasLimit: \"100000000\" });\r\n        await exchange.connect(user2).mint(usdc.address, usdcAmount, { gasLimit: \"100000000\" });\r\n\r\n\r\n        // Approval \r\n\r\n        await btc.connect(user1).approve(exchange.address, ethers.constants.MaxUint256, { gasLimit: \"100000000\" });\r\n        await usdc.connect(user2).approve(exchange.address, ethers.constants.MaxUint256, { gasLimit: \"100000000\" });\r\n\r\n    })\r\n\r\n\r\n\r\n    it(`user1 create margin order 1 btc @ 20000}`, async () => {\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getConfig(\"version\"),\r\n            chainId: chainId.toString(),\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Order: [\r\n                { name: 'maker', type: 'address' },\r\n                { name: 'token0', type: 'address' },\r\n                { name: 'token1', type: 'address' },\r\n                { name: 'amount', type: 'uint256' },\r\n                { name: 'orderType', type: 'uint8' },\r\n                { name: 'salt', type: 'uint32' },\r\n                { name: 'exchangeRate', type: 'uint176' },\r\n                { name: 'borrowLimit', type: 'uint32' },\r\n                { name: 'loops', type: 'uint8' }\r\n            ]\r\n        };\r\n\r\n        const value = {\r\n            maker: user1.address.toLowerCase(),\r\n            token0: btc.address.toLowerCase(),\r\n            token1: usdc.address.toLowerCase(),\r\n            amount: amount,\r\n            orderType: orderType,\r\n            salt: salt,\r\n            exchangeRate: exchangeRate,\r\n            borrowLimit: Big(0.75).times(Big(10).pow(6)).toNumber(),\r\n            loops: loops\r\n        };\r\n        // The data to sign\r\n\r\n\r\n        orders.push(value);\r\n        // sign typed data\r\n        const storedSignature = await user1._signTypedData(\r\n            domain,\r\n            types,\r\n            value\r\n        );\r\n        signatures.push(storedSignature);\r\n        console.log([\r\n            value, storedSignature\r\n        ]);\r\n        let res = await request(\"http://localhost:3010\")\r\n            .post(`/v/${getConfig(\"version\")}/order/create`)\r\n            .send(\r\n                {\r\n                    \"data\": {\r\n                        \"maker\": user1.address.toLowerCase(),\r\n                        \"token0\": btc.address.toLowerCase(),\r\n                        \"token1\": usdc.address.toLowerCase(),\r\n                        \"amount\": amount,\r\n                        \"orderType\": orderType,\r\n                        \"salt\": salt,\r\n                        \"exchangeRate\": exchangeRate,\r\n                        borrowLimit: Big(0.75).times(Big(10).pow(6)).toNumber(),\r\n                        loops: loops\r\n\r\n                    },\r\n                    \"signature\": storedSignature,\r\n                    \"chainId\": chainId\r\n                }\r\n            );\r\n        console.log(res.body)\r\n        expect(res).to.have.status(201);\r\n        expect(res.body.status).to.be.equal(true);\r\n        expect(res.body).to.be.an('object');\r\n        expect(res.body.message).to.have.string('Order created successfully');\r\n\r\n    });\r\n\r\n    it(`find created order in data base`, async () => {\r\n\r\n        let data = await Order.findOne({ signature: signatures[0] }).lean()! as ifOrderCreated;\r\n        expect(data).to.be.an('object');\r\n        expect(data.amount).to.equal(amount);\r\n        expect(data.maker).to.equal(user1.address.toLowerCase());\r\n        expect(Number(data.loops)).to.equal(loops)\r\n        orderCreated.push(data)\r\n    })\r\n\r\n    it(`user1 sell usdc got from market to user2 and got 2 btc @ 20000`, async () => {\r\n        let user1BtcBalancePre = btc.balanceOf(user1.address);\r\n        let user2BtcBalancePre = btc.balanceOf(user2.address);\r\n        let user2UsdcBalancePre = usdc.balanceOf(user2.address);\r\n        let user1UsdcBalancePre = usdc.balanceOf(user1.address);\r\n        let promise = await Promise.all([user1BtcBalancePre, user2BtcBalancePre, user2UsdcBalancePre, user1UsdcBalancePre])\r\n        user1BtcBalancePre = promise[0].toString();\r\n        user2BtcBalancePre = promise[1].toString()\r\n        user2UsdcBalancePre = promise[2].toString()\r\n        user1UsdcBalancePre = promise[3].toString()\r\n        // console.log(user1BtcBalancePre)\r\n        const btcAmount = ethers.utils.parseEther('2').toString();\r\n        await lever.connect(user1).enterMarkets([cBtc.address, cUsdc.address]);\r\n        await lever.connect(user2).enterMarkets([cBtc.address, cUsdc.address]);\r\n\r\n        let exTxn = await exchange.connect(user2).executeT0LimitOrders(\r\n            [signatures[0]],\r\n            [orders[0]],\r\n            btcAmount,\r\n            { gasLimit: \"100000000\" }\r\n        );\r\n\r\n        await exTxn.wait(1)\r\n        let user1BtcBalancePost = btc.balanceOf(user1.address);\r\n        let user1UsdcBalancePost = usdc.balanceOf(user1.address);\r\n        let user2UsdcBalancePost = usdc.balanceOf(user2.address);\r\n        let user2BtcBalancePost = btc.balanceOf(user2.address);\r\n\r\n        let promise1 = await Promise.all([user1BtcBalancePost, user1UsdcBalancePost, user2UsdcBalancePost, user2BtcBalancePost]);\r\n        user1BtcBalancePost = promise1[0].toString();\r\n        user1UsdcBalancePost = promise1[1].toString();\r\n        user2UsdcBalancePost = promise1[2].toString();\r\n        user2BtcBalancePost = promise1[3].toString();\r\n        // console.log(user2UsdcBalancePost,btcAmount );\r\n\r\n        let fee = await Sync.findOne().lean()! as any;\r\n        let makerFeeAmount = Big(fee?.makerFee).div(1e18).times(btcAmount);\r\n\r\n        let takerFeeAmount = Big(Big(fee.takerFee).div(1e18)).times(Big(btcAmount));\r\n\r\n        expect(user2BtcBalancePost).to.equal(parseEther(Big(user2BtcBalancePre).minus(btcAmount).toString()));\r\n        expect(user2UsdcBalancePost).to.equal(\r\n            parseEther(\r\n                Big(user2UsdcBalancePre)\r\n                    .plus(\r\n                        Big(btcAmount).minus(takerFeeAmount)\r\n                            .times(exchangeRate)\r\n                            .div(Big(10).pow(18))).toString()))\r\n\r\n    });\r\n\r\n    it(`cancelled  order `, async () => {\r\n\r\n\r\n\r\n        let exTxn = await exchange.connect(user1).cancelOrder(\r\n            signatures[0],\r\n            orders[0],\r\n            { gasLimit: \"100000000\" }\r\n        )\r\n        await exTxn.wait(1);\r\n\r\n        let wait = () => {\r\n            return new Promise((resolve, reject) => {\r\n\r\n                let timeOutId = setTimeout(() => {\r\n                    return resolve(\"Success\")\r\n                }, 15000)\r\n\r\n                socket.on(EVENT_NAME.CANCEL_ORDER, (data) => {\r\n                    clearTimeout(timeOutId)\r\n                    return resolve(\"Success\")\r\n                })\r\n            })\r\n        }\r\n        let res = await wait()\r\n        expect(res).to.equal(\"Success\")\r\n        let data = await Order.findOne({ signature: signatures[0] }).lean()! as ifOrderCreated;\r\n        expect(data).to.be.an('object')\r\n        expect(data).not.to.be.null;\r\n        expect(data.cancelled).to.equal(true)\r\n\r\n    })\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"98d3a698751459ef7e0f4bcd8d67597f5025eb99","contentHash":"666bed2921e95eeeef79eaa5862b57cac16d71d4b460852e50bae1dc6fdde633"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\CmarginOrderShort.script.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\CmarginOrderShort.script.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":62}},"15":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"16":{"start":{"line":17,"column":15},"end":{"line":17,"column":30}},"17":{"start":{"line":18,"column":20},"end":{"line":18,"column":57}},"18":{"start":{"line":19,"column":0},"end":{"line":19,"column":37}},"19":{"start":{"line":20,"column":17},"end":{"line":20,"column":34}},"20":{"start":{"line":21,"column":17},"end":{"line":21,"column":51}},"21":{"start":{"line":22,"column":20},"end":{"line":22,"column":55}},"22":{"start":{"line":23,"column":16},"end":{"line":23,"column":44}},"23":{"start":{"line":24,"column":16},"end":{"line":24,"column":45}},"24":{"start":{"line":25,"column":27},"end":{"line":25,"column":54}},"25":{"start":{"line":26,"column":15},"end":{"line":26,"column":47}},"26":{"start":{"line":27,"column":13},"end":{"line":27,"column":35}},"27":{"start":{"line":28,"column":19},"end":{"line":28,"column":51}},"28":{"start":{"line":29,"column":0},"end":{"line":29,"column":185}},"29":{"start":{"line":30,"column":15},"end":{"line":30,"column":90}},"30":{"start":{"line":31,"column":0},"end":{"line":183,"column":4}},"31":{"start":{"line":31,"column":93},"end":{"line":183,"column":2}},"32":{"start":{"line":33,"column":18},"end":{"line":33,"column":26}},"33":{"start":{"line":34,"column":19},"end":{"line":34,"column":52}},"34":{"start":{"line":35,"column":19},"end":{"line":35,"column":67}},"35":{"start":{"line":36,"column":14},"end":{"line":36,"column":57}},"36":{"start":{"line":37,"column":15},"end":{"line":37,"column":59}},"37":{"start":{"line":38,"column":16},"end":{"line":38,"column":61}},"38":{"start":{"line":39,"column":16},"end":{"line":39,"column":68}},"39":{"start":{"line":40,"column":15},"end":{"line":40,"column":66}},"40":{"start":{"line":41,"column":16},"end":{"line":41,"column":86}},"41":{"start":{"line":42,"column":16},"end":{"line":42,"column":86}},"42":{"start":{"line":43,"column":21},"end":{"line":43,"column":23}},"43":{"start":{"line":44,"column":17},"end":{"line":44,"column":19}},"44":{"start":{"line":45,"column":23},"end":{"line":45,"column":25}},"45":{"start":{"line":46,"column":23},"end":{"line":46,"column":75}},"46":{"start":{"line":47,"column":15},"end":{"line":47,"column":50}},"47":{"start":{"line":48,"column":17},"end":{"line":48,"column":65}},"48":{"start":{"line":49,"column":16},"end":{"line":49,"column":17}},"49":{"start":{"line":50,"column":20},"end":{"line":50,"column":21}},"50":{"start":{"line":51,"column":4},"end":{"line":55,"column":7}},"51":{"start":{"line":53,"column":8},"end":{"line":53,"column":28}},"52":{"start":{"line":54,"column":8},"end":{"line":54,"column":15}},"53":{"start":{"line":56,"column":4},"end":{"line":118,"column":8}},"54":{"start":{"line":56,"column":63},"end":{"line":118,"column":6}},"55":{"start":{"line":57,"column":23},"end":{"line":62,"column":9}},"56":{"start":{"line":64,"column":22},"end":{"line":76,"column":9}},"57":{"start":{"line":77,"column":22},"end":{"line":87,"column":9}},"58":{"start":{"line":89,"column":8},"end":{"line":89,"column":27}},"59":{"start":{"line":91,"column":32},"end":{"line":91,"column":80}},"60":{"start":{"line":92,"column":8},"end":{"line":92,"column":41}},"61":{"start":{"line":93,"column":8},"end":{"line":95,"column":11}},"62":{"start":{"line":96,"column":18},"end":{"line":112,"column":10}},"63":{"start":{"line":113,"column":8},"end":{"line":113,"column":30}},"64":{"start":{"line":114,"column":8},"end":{"line":114,"column":52}},"65":{"start":{"line":115,"column":8},"end":{"line":115,"column":62}},"66":{"start":{"line":116,"column":8},"end":{"line":116,"column":56}},"67":{"start":{"line":117,"column":8},"end":{"line":117,"column":90}},"68":{"start":{"line":119,"column":4},"end":{"line":126,"column":8}},"69":{"start":{"line":119,"column":48},"end":{"line":126,"column":6}},"70":{"start":{"line":120,"column":19},"end":{"line":120,"column":80}},"71":{"start":{"line":121,"column":8},"end":{"line":121,"column":52}},"72":{"start":{"line":122,"column":8},"end":{"line":122,"column":57}},"73":{"start":{"line":123,"column":8},"end":{"line":123,"column":77}},"74":{"start":{"line":124,"column":8},"end":{"line":124,"column":63}},"75":{"start":{"line":125,"column":8},"end":{"line":125,"column":32}},"76":{"start":{"line":127,"column":4},"end":{"line":161,"column":8}},"77":{"start":{"line":127,"column":96},"end":{"line":161,"column":6}},"78":{"start":{"line":128,"column":33},"end":{"line":128,"column":61}},"79":{"start":{"line":129,"column":33},"end":{"line":129,"column":61}},"80":{"start":{"line":130,"column":34},"end":{"line":130,"column":63}},"81":{"start":{"line":131,"column":34},"end":{"line":131,"column":63}},"82":{"start":{"line":132,"column":22},"end":{"line":132,"column":123}},"83":{"start":{"line":133,"column":8},"end":{"line":133,"column":51}},"84":{"start":{"line":134,"column":8},"end":{"line":134,"column":51}},"85":{"start":{"line":135,"column":8},"end":{"line":135,"column":52}},"86":{"start":{"line":136,"column":8},"end":{"line":136,"column":52}},"87":{"start":{"line":138,"column":26},"end":{"line":138,"column":74}},"88":{"start":{"line":141,"column":20},"end":{"line":141,"column":138}},"89":{"start":{"line":142,"column":8},"end":{"line":142,"column":28}},"90":{"start":{"line":143,"column":34},"end":{"line":143,"column":62}},"91":{"start":{"line":144,"column":35},"end":{"line":144,"column":64}},"92":{"start":{"line":145,"column":35},"end":{"line":145,"column":64}},"93":{"start":{"line":146,"column":34},"end":{"line":146,"column":62}},"94":{"start":{"line":147,"column":23},"end":{"line":147,"column":128}},"95":{"start":{"line":148,"column":8},"end":{"line":148,"column":53}},"96":{"start":{"line":149,"column":8},"end":{"line":149,"column":54}},"97":{"start":{"line":150,"column":8},"end":{"line":150,"column":54}},"98":{"start":{"line":151,"column":8},"end":{"line":151,"column":53}},"99":{"start":{"line":153,"column":18},"end":{"line":153,"column":50}},"100":{"start":{"line":154,"column":29},"end":{"line":154,"column":133}},"101":{"start":{"line":155,"column":29},"end":{"line":155,"column":137}},"102":{"start":{"line":156,"column":8},"end":{"line":156,"column":174}},"103":{"start":{"line":157,"column":8},"end":{"line":160,"column":66}},"104":{"start":{"line":162,"column":4},"end":{"line":182,"column":8}},"105":{"start":{"line":162,"column":34},"end":{"line":182,"column":6}},"106":{"start":{"line":163,"column":20},"end":{"line":163,"column":114}},"107":{"start":{"line":164,"column":8},"end":{"line":164,"column":28}},"108":{"start":{"line":165,"column":19},"end":{"line":175,"column":9}},"109":{"start":{"line":166,"column":12},"end":{"line":174,"column":15}},"110":{"start":{"line":167,"column":32},"end":{"line":169,"column":25}},"111":{"start":{"line":168,"column":20},"end":{"line":168,"column":46}},"112":{"start":{"line":170,"column":16},"end":{"line":173,"column":19}},"113":{"start":{"line":171,"column":20},"end":{"line":171,"column":44}},"114":{"start":{"line":172,"column":20},"end":{"line":172,"column":46}},"115":{"start":{"line":176,"column":18},"end":{"line":176,"column":30}},"116":{"start":{"line":177,"column":8},"end":{"line":177,"column":52}},"117":{"start":{"line":178,"column":19},"end":{"line":178,"column":80}},"118":{"start":{"line":179,"column":8},"end":{"line":179,"column":52}},"119":{"start":{"line":180,"column":8},"end":{"line":180,"column":48}},"120":{"start":{"line":181,"column":8},"end":{"line":181,"column":58}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":31,"column":87},"end":{"line":31,"column":88}},"loc":{"start":{"line":31,"column":93},"end":{"line":183,"column":2}},"line":31},"9":{"name":"(anonymous_9)","decl":{"start":{"line":31,"column":127},"end":{"line":31,"column":128}},"loc":{"start":{"line":31,"column":140},"end":{"line":183,"column":1}},"line":31},"10":{"name":"(anonymous_10)","decl":{"start":{"line":51,"column":10},"end":{"line":51,"column":11}},"loc":{"start":{"line":51,"column":20},"end":{"line":55,"column":5}},"line":51},"11":{"name":"(anonymous_11)","decl":{"start":{"line":56,"column":57},"end":{"line":56,"column":58}},"loc":{"start":{"line":56,"column":63},"end":{"line":118,"column":6}},"line":56},"12":{"name":"(anonymous_12)","decl":{"start":{"line":56,"column":97},"end":{"line":56,"column":98}},"loc":{"start":{"line":56,"column":110},"end":{"line":118,"column":5}},"line":56},"13":{"name":"(anonymous_13)","decl":{"start":{"line":119,"column":42},"end":{"line":119,"column":43}},"loc":{"start":{"line":119,"column":48},"end":{"line":126,"column":6}},"line":119},"14":{"name":"(anonymous_14)","decl":{"start":{"line":119,"column":82},"end":{"line":119,"column":83}},"loc":{"start":{"line":119,"column":95},"end":{"line":126,"column":5}},"line":119},"15":{"name":"(anonymous_15)","decl":{"start":{"line":127,"column":90},"end":{"line":127,"column":91}},"loc":{"start":{"line":127,"column":96},"end":{"line":161,"column":6}},"line":127},"16":{"name":"(anonymous_16)","decl":{"start":{"line":127,"column":130},"end":{"line":127,"column":131}},"loc":{"start":{"line":127,"column":143},"end":{"line":161,"column":5}},"line":127},"17":{"name":"(anonymous_17)","decl":{"start":{"line":162,"column":28},"end":{"line":162,"column":29}},"loc":{"start":{"line":162,"column":34},"end":{"line":182,"column":6}},"line":162},"18":{"name":"(anonymous_18)","decl":{"start":{"line":162,"column":68},"end":{"line":162,"column":69}},"loc":{"start":{"line":162,"column":81},"end":{"line":182,"column":5}},"line":162},"19":{"name":"(anonymous_19)","decl":{"start":{"line":165,"column":19},"end":{"line":165,"column":20}},"loc":{"start":{"line":165,"column":25},"end":{"line":175,"column":9}},"line":165},"20":{"name":"(anonymous_20)","decl":{"start":{"line":166,"column":31},"end":{"line":166,"column":32}},"loc":{"start":{"line":166,"column":52},"end":{"line":174,"column":13}},"line":166},"21":{"name":"(anonymous_21)","decl":{"start":{"line":167,"column":43},"end":{"line":167,"column":44}},"loc":{"start":{"line":167,"column":49},"end":{"line":169,"column":17}},"line":167},"22":{"name":"(anonymous_22)","decl":{"start":{"line":170,"column":63},"end":{"line":170,"column":64}},"loc":{"start":{"line":170,"column":73},"end":{"line":173,"column":17}},"line":170}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":71},"end":{"line":29,"column":180}},"type":"cond-expr","locations":[{"start":{"line":29,"column":160},"end":{"line":29,"column":171}},{"start":{"line":29,"column":174},"end":{"line":29,"column":180}}],"line":29},"9":{"loc":{"start":{"line":29,"column":72},"end":{"line":29,"column":156}},"type":"cond-expr","locations":[{"start":{"line":29,"column":128},"end":{"line":29,"column":134}},{"start":{"line":29,"column":137},"end":{"line":29,"column":156}}],"line":29},"10":{"loc":{"start":{"line":29,"column":72},"end":{"line":29,"column":125}},"type":"binary-expr","locations":[{"start":{"line":29,"column":72},"end":{"line":29,"column":108}},{"start":{"line":29,"column":112},"end":{"line":29,"column":125}}],"line":29},"11":{"loc":{"start":{"line":154,"column":51},"end":{"line":154,"column":105}},"type":"cond-expr","locations":[{"start":{"line":154,"column":84},"end":{"line":154,"column":90}},{"start":{"line":154,"column":93},"end":{"line":154,"column":105}}],"line":154},"12":{"loc":{"start":{"line":154,"column":51},"end":{"line":154,"column":81}},"type":"binary-expr","locations":[{"start":{"line":154,"column":51},"end":{"line":154,"column":63}},{"start":{"line":154,"column":67},"end":{"line":154,"column":81}}],"line":154}},"s":{"0":1,"1":12,"2":4,"3":5,"4":12,"5":12,"6":0,"7":0,"8":0,"9":0,"10":17,"11":5,"12":1,"13":3,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":1,"100":1,"101":1,"102":1,"103":1,"104":1,"105":1,"106":1,"107":1,"108":1,"109":1,"110":1,"111":1,"112":1,"113":0,"114":0,"115":1,"116":1,"117":1,"118":1,"119":1,"120":1},"f":{"0":5,"1":12,"2":4,"3":5,"4":12,"5":0,"6":17,"7":3,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":0},"b":{"0":[1,1,1],"1":[8,4],"2":[5,5],"3":[5,12],"4":[5,5],"5":[1,1,1],"6":[0,3],"7":[3,3],"8":[0,1],"9":[0,1],"10":[1,1],"11":[0,1],"12":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/CmarginOrderShort.script.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/CmarginOrderShort.script.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nuse(chaiHttp);\r\nimport { ethers } from \"ethers\";\r\nimport Big from \"big.js\";\r\nimport { EVENT_NAME } from \"../../socketIo/socket.io\";\r\nimport {  getProvider, parseEther } from \"../../utils/utils\";\r\nimport { getExchangeAddress } from \"../../helper/chain\";\r\nimport { io } from \"socket.io-client\";\r\nimport path from \"path\";\r\nimport { connect, Order, Sync } from \"../../DB/db\";\r\nimport { ifOrderCreated } from \"../../helper/interface\";\r\nimport {  getConfig, getContract } from \"../../helper/constant\";\r\n\r\n\r\n\r\nrequire(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\n\r\n\r\n\r\nconst socket = io(\"http://localhost:3010\", { autoConnect: false });\r\n\r\n\r\n\r\n\r\ndescribe(\"Margin Order Short=> Mint token, create order, execute order, cancel order\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let provider = getProvider(chainId);\r\n\r\n    let exchange = getContract(\"Exchange\", chainId)\r\n    let btc = getContract(\"BTC\", chainId)\r\n    let usdc = getContract(\"USDC\", chainId)\r\n    let lever = getContract(\"Lever\", chainId)\r\n    let cUsdc = getContract(\"lUSDC_Market\", chainId)\r\n    let cBtc = getContract(\"lBTC_Market\", chainId)\r\n    let user1 = new ethers.Wallet(process.env.PRIVATE_KEY1! as string).connect(provider); //2\r\n    let user2 = new ethers.Wallet(process.env.PRIVATE_KEY2! as string).connect(provider); //1\r\n\r\n\r\n    let signatures: any[] = [];\r\n    let orders: any[] = [];\r\n    let orderCreated: any[] = []\r\n    let exchangeRate = ethers.utils.parseEther('20000').toString();\r\n\r\n    let salt = Math.floor(Math.random() * 9000000);\r\n    let amount = ethers.utils.parseEther('1').toString();\r\n    let loops = 5;\r\n    let orderType = 3 // short\r\n\r\n    after((done) => {\r\n        // socket.emit('end')\r\n        socket.disconnect()\r\n        done()\r\n    })\r\n    it(`user1 create short margin order 1 btc @ 20000}`, async () => {\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getConfig(\"version\"),\r\n            chainId: chainId.toString(),\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Order: [\r\n                { name: 'maker', type: 'address' },\r\n                { name: 'token0', type: 'address' },\r\n                { name: 'token1', type: 'address' },\r\n                { name: 'amount', type: 'uint256' },\r\n                { name: 'orderType', type: 'uint8' },\r\n                { name: 'salt', type: 'uint32' },\r\n                { name: 'exchangeRate', type: 'uint176' },\r\n                { name: 'borrowLimit', type: 'uint32' },\r\n                { name: 'loops', type: 'uint8' }\r\n            ]\r\n        };\r\n\r\n        const value = {\r\n            maker: user1.address.toLowerCase(),\r\n            token0: btc.address.toLowerCase(),\r\n            token1: usdc.address.toLowerCase(),\r\n            amount: amount,\r\n            orderType: orderType,\r\n            salt: salt,\r\n            exchangeRate: exchangeRate,\r\n            borrowLimit: Big(0.75).times(Big(10).pow(6)).toNumber(),\r\n            loops: loops\r\n        };\r\n        // The data to sign\r\n\r\n\r\n        orders.push(value);\r\n        // sign typed data\r\n        const storedSignature = await user1._signTypedData(\r\n            domain,\r\n            types,\r\n            value\r\n        );\r\n        signatures.push(storedSignature);\r\n        console.log([\r\n            value, storedSignature\r\n        ]);\r\n        let res = await request(\"http://localhost:3010\")\r\n            .post(`/v/${getConfig(\"version\")}/order/create`)\r\n            .send(\r\n                {\r\n                    \"data\": {\r\n                        \"maker\": user1.address.toLowerCase(),\r\n                        \"token0\": btc.address.toLowerCase(),\r\n                        \"token1\": usdc.address.toLowerCase(),\r\n                        \"amount\": amount,\r\n                        \"orderType\": orderType,\r\n                        \"salt\": salt,\r\n                        \"exchangeRate\": exchangeRate,\r\n                        borrowLimit: Big(0.75).times(Big(10).pow(6)).toNumber(),\r\n                        loops: loops\r\n\r\n                    },\r\n                    \"signature\": storedSignature,\r\n                    \"chainId\": chainId\r\n                }\r\n            );\r\n        console.log(res.body)\r\n        expect(res).to.have.status(201);\r\n        expect(res.body.status).to.be.equal(true);\r\n        expect(res.body).to.be.an('object');\r\n        expect(res.body.message).to.have.string('Order created successfully');\r\n\r\n    });\r\n\r\n    it(`find created order in data base`, async () => {\r\n\r\n        let data = await Order.findOne({ signature: signatures[0] }).lean()! as ifOrderCreated;\r\n        expect(data).to.be.an('object');\r\n        expect(data.amount).to.equal(amount);\r\n        expect(data.maker).to.equal(user1.address.toLowerCase());\r\n        expect(Number(data.loops)).to.equal(loops)\r\n        orderCreated.push(data)\r\n    })\r\n\r\n\r\n    it(`user1 sell btc got from market to user2 and got 40000 usdc @ 20000 exchangeRate`, async () => {\r\n        let user1BtcBalancePre = btc.balanceOf(user1.address);\r\n        let user2BtcBalancePre = btc.balanceOf(user2.address);\r\n        let user2UsdcBalancePre = usdc.balanceOf(user2.address);\r\n        let user1UsdcBalancePre = usdc.balanceOf(user1.address);\r\n        let promise = await Promise.all([user1BtcBalancePre, user2BtcBalancePre, user2UsdcBalancePre, user1UsdcBalancePre])\r\n        user1BtcBalancePre = promise[0].toString();\r\n        user2BtcBalancePre = promise[1].toString()\r\n        user2UsdcBalancePre = promise[2].toString()\r\n        user1UsdcBalancePre = promise[3].toString()\r\n        // console.log(user1BtcBalancePre)\r\n        const btcAmount = ethers.utils.parseEther('2').toString();\r\n        // await lever.connect(user1).enterMarkets([cBtc.address, cUsdc.address]);\r\n        // await lever.connect(user2).enterMarkets([cBtc.address, cUsdc.address]);\r\n\r\n        let exTxn = await exchange.connect(user2).executeT0LimitOrders(\r\n            [signatures[0]],\r\n            [orders[0]],\r\n            btcAmount,\r\n            { gasLimit: \"100000000\" }\r\n        );\r\n\r\n        await exTxn.wait(1)\r\n        let user1BtcBalancePost = btc.balanceOf(user1.address);\r\n        let user1UsdcBalancePost = usdc.balanceOf(user1.address);\r\n        let user2UsdcBalancePost = usdc.balanceOf(user2.address);\r\n        let user2BtcBalancePost = btc.balanceOf(user2.address);\r\n\r\n        let promise1 = await Promise.all([user1BtcBalancePost, user1UsdcBalancePost, user2UsdcBalancePost, user2BtcBalancePost]);\r\n        user1BtcBalancePost = promise1[0].toString();\r\n        user1UsdcBalancePost = promise1[1].toString();\r\n        user2UsdcBalancePost = promise1[2].toString();\r\n        user2BtcBalancePost = promise1[3].toString();\r\n        // console.log(user1BtcBalancePost)\r\n\r\n        let fee = await Sync.findOne().lean()! as any;\r\n        let makerFeeAmount = Big(fee?.makerFee).div(1e18).times(btcAmount);\r\n\r\n        let takerFeeAmount = Big(Big(fee.takerFee).div(1e18)).times(Big(btcAmount));\r\n\r\n        expect(user2BtcBalancePost).to.equal(parseEther(Big(user2BtcBalancePre).plus(btcAmount).minus(takerFeeAmount).toString()));\r\n        expect(user2UsdcBalancePost).to.equal(\r\n            parseEther(\r\n                Big(user2UsdcBalancePre)\r\n                    .minus(\r\n                        Big(btcAmount)\r\n                            .times(exchangeRate)\r\n                            .div(Big(10).pow(18))).toString()))\r\n\r\n    });\r\n\r\n    it(`cancelled  order `, async () => {\r\n\r\n\r\n\r\n        let exTxn = await exchange.connect(user1).cancelOrder(\r\n            signatures[0],\r\n            orders[0],\r\n            { gasLimit: \"100000000\" }\r\n        )\r\n        await exTxn.wait(1);\r\n\r\n        let wait = () => {\r\n            return new Promise((resolve, reject) => {\r\n\r\n                let timeOutId = setTimeout(() => {\r\n                    return resolve(\"Success\")\r\n                }, 10000)\r\n\r\n                socket.on(EVENT_NAME.CANCEL_ORDER, (data) => {\r\n                    clearTimeout(timeOutId)\r\n                    return resolve(\"Success\")\r\n                })\r\n            })\r\n        }\r\n        let res = await wait()\r\n        expect(res).to.equal(\"Success\")\r\n        let data = await Order.findOne({ signature: signatures[0] }).lean()! as ifOrderCreated;\r\n        expect(data).to.be.an('object')\r\n        expect(data).not.to.be.null;\r\n        expect(data.cancelled).to.equal(true)\r\n\r\n    })\r\n\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2a4f252b0dc8279b88fea4e22401b7752804cd77","contentHash":"4606df797f1ab1c9dd7edf2226d7d759841caae5728e3821011eab5e97608ae6"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\createPair.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\createPair.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":30}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":0},"end":{"line":18,"column":37}},"19":{"start":{"line":19,"column":17},"end":{"line":19,"column":34}},"20":{"start":{"line":20,"column":16},"end":{"line":20,"column":44}},"21":{"start":{"line":21,"column":16},"end":{"line":21,"column":45}},"22":{"start":{"line":22,"column":13},"end":{"line":22,"column":35}},"23":{"start":{"line":23,"column":19},"end":{"line":23,"column":51}},"24":{"start":{"line":24,"column":25},"end":{"line":24,"column":65}},"25":{"start":{"line":25,"column":24},"end":{"line":25,"column":63}},"26":{"start":{"line":27,"column":0},"end":{"line":27,"column":27}},"27":{"start":{"line":29,"column":0},"end":{"line":159,"column":4}},"28":{"start":{"line":29,"column":71},"end":{"line":159,"column":2}},"29":{"start":{"line":31,"column":18},"end":{"line":31,"column":26}},"30":{"start":{"line":32,"column":19},"end":{"line":32,"column":52}},"31":{"start":{"line":33,"column":19},"end":{"line":33,"column":67}},"32":{"start":{"line":34,"column":14},"end":{"line":34,"column":57}},"33":{"start":{"line":35,"column":15},"end":{"line":35,"column":59}},"34":{"start":{"line":36,"column":14},"end":{"line":36,"column":57}},"35":{"start":{"line":37,"column":15},"end":{"line":37,"column":59}},"36":{"start":{"line":38,"column":15},"end":{"line":38,"column":59}},"37":{"start":{"line":39,"column":16},"end":{"line":39,"column":130}},"38":{"start":{"line":40,"column":16},"end":{"line":40,"column":130}},"39":{"start":{"line":41,"column":21},"end":{"line":41,"column":23}},"40":{"start":{"line":42,"column":17},"end":{"line":42,"column":19}},"41":{"start":{"line":43,"column":23},"end":{"line":43,"column":25}},"42":{"start":{"line":44,"column":23},"end":{"line":44,"column":75}},"43":{"start":{"line":45,"column":15},"end":{"line":45,"column":50}},"44":{"start":{"line":46,"column":17},"end":{"line":46,"column":65}},"45":{"start":{"line":47,"column":20},"end":{"line":47,"column":21}},"46":{"start":{"line":48,"column":4},"end":{"line":50,"column":8}},"47":{"start":{"line":48,"column":17},"end":{"line":50,"column":6}},"48":{"start":{"line":51,"column":4},"end":{"line":54,"column":7}},"49":{"start":{"line":53,"column":8},"end":{"line":53,"column":15}},"50":{"start":{"line":55,"column":4},"end":{"line":121,"column":8}},"51":{"start":{"line":55,"column":57},"end":{"line":121,"column":6}},"52":{"start":{"line":56,"column":23},"end":{"line":61,"column":9}},"53":{"start":{"line":63,"column":22},"end":{"line":75,"column":9}},"54":{"start":{"line":76,"column":21},"end":{"line":76,"column":43}},"55":{"start":{"line":77,"column":8},"end":{"line":120,"column":9}},"56":{"start":{"line":78,"column":26},"end":{"line":88,"column":13}},"57":{"start":{"line":90,"column":12},"end":{"line":90,"column":31}},"58":{"start":{"line":92,"column":36},"end":{"line":92,"column":84}},"59":{"start":{"line":93,"column":12},"end":{"line":93,"column":45}},"60":{"start":{"line":97,"column":22},"end":{"line":114,"column":14}},"61":{"start":{"line":116,"column":12},"end":{"line":116,"column":56}},"62":{"start":{"line":117,"column":12},"end":{"line":117,"column":66}},"63":{"start":{"line":118,"column":12},"end":{"line":118,"column":60}},"64":{"start":{"line":119,"column":12},"end":{"line":119,"column":94}},"65":{"start":{"line":122,"column":4},"end":{"line":138,"column":8}},"66":{"start":{"line":122,"column":47},"end":{"line":138,"column":6}},"67":{"start":{"line":123,"column":19},"end":{"line":123,"column":80}},"68":{"start":{"line":124,"column":8},"end":{"line":124,"column":52}},"69":{"start":{"line":125,"column":8},"end":{"line":125,"column":57}},"70":{"start":{"line":126,"column":8},"end":{"line":126,"column":77}},"71":{"start":{"line":127,"column":25},"end":{"line":127,"column":75}},"72":{"start":{"line":128,"column":20},"end":{"line":128,"column":56}},"73":{"start":{"line":129,"column":8},"end":{"line":129,"column":138}},"74":{"start":{"line":130,"column":20},"end":{"line":130,"column":76}},"75":{"start":{"line":131,"column":8},"end":{"line":131,"column":53}},"76":{"start":{"line":132,"column":8},"end":{"line":132,"column":49}},"77":{"start":{"line":133,"column":8},"end":{"line":133,"column":112}},"78":{"start":{"line":135,"column":30},"end":{"line":135,"column":81}},"79":{"start":{"line":136,"column":8},"end":{"line":136,"column":72}},"80":{"start":{"line":137,"column":8},"end":{"line":137,"column":69}},"81":{"start":{"line":139,"column":4},"end":{"line":158,"column":8}},"82":{"start":{"line":139,"column":70},"end":{"line":158,"column":6}},"83":{"start":{"line":140,"column":8},"end":{"line":153,"column":9}},"84":{"start":{"line":141,"column":23},"end":{"line":141,"column":84}},"85":{"start":{"line":142,"column":12},"end":{"line":142,"column":56}},"86":{"start":{"line":143,"column":12},"end":{"line":143,"column":61}},"87":{"start":{"line":144,"column":12},"end":{"line":144,"column":81}},"88":{"start":{"line":145,"column":12},"end":{"line":145,"column":72}},"89":{"start":{"line":146,"column":24},"end":{"line":146,"column":85}},"90":{"start":{"line":147,"column":12},"end":{"line":147,"column":57}},"91":{"start":{"line":148,"column":12},"end":{"line":148,"column":62}},"92":{"start":{"line":149,"column":12},"end":{"line":149,"column":63}},"93":{"start":{"line":150,"column":12},"end":{"line":150,"column":76}},"94":{"start":{"line":151,"column":24},"end":{"line":151,"column":85}},"95":{"start":{"line":152,"column":12},"end":{"line":152,"column":49}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":29,"column":65},"end":{"line":29,"column":66}},"loc":{"start":{"line":29,"column":71},"end":{"line":159,"column":2}},"line":29},"9":{"name":"(anonymous_9)","decl":{"start":{"line":29,"column":105},"end":{"line":29,"column":106}},"loc":{"start":{"line":29,"column":118},"end":{"line":159,"column":1}},"line":29},"10":{"name":"(anonymous_10)","decl":{"start":{"line":48,"column":11},"end":{"line":48,"column":12}},"loc":{"start":{"line":48,"column":17},"end":{"line":50,"column":6}},"line":48},"11":{"name":"(anonymous_11)","decl":{"start":{"line":48,"column":51},"end":{"line":48,"column":52}},"loc":{"start":{"line":48,"column":64},"end":{"line":50,"column":5}},"line":48},"12":{"name":"(anonymous_12)","decl":{"start":{"line":51,"column":10},"end":{"line":51,"column":11}},"loc":{"start":{"line":51,"column":20},"end":{"line":54,"column":5}},"line":51},"13":{"name":"(anonymous_13)","decl":{"start":{"line":55,"column":51},"end":{"line":55,"column":52}},"loc":{"start":{"line":55,"column":57},"end":{"line":121,"column":6}},"line":55},"14":{"name":"(anonymous_14)","decl":{"start":{"line":55,"column":91},"end":{"line":55,"column":92}},"loc":{"start":{"line":55,"column":104},"end":{"line":121,"column":5}},"line":55},"15":{"name":"(anonymous_15)","decl":{"start":{"line":122,"column":41},"end":{"line":122,"column":42}},"loc":{"start":{"line":122,"column":47},"end":{"line":138,"column":6}},"line":122},"16":{"name":"(anonymous_16)","decl":{"start":{"line":122,"column":81},"end":{"line":122,"column":82}},"loc":{"start":{"line":122,"column":94},"end":{"line":138,"column":5}},"line":122},"17":{"name":"(anonymous_17)","decl":{"start":{"line":139,"column":64},"end":{"line":139,"column":65}},"loc":{"start":{"line":139,"column":70},"end":{"line":158,"column":6}},"line":139},"18":{"name":"(anonymous_18)","decl":{"start":{"line":139,"column":104},"end":{"line":139,"column":105}},"loc":{"start":{"line":139,"column":117},"end":{"line":158,"column":5}},"line":139}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":133,"column":27},"end":{"line":133,"column":89}},"type":"cond-expr","locations":[{"start":{"line":133,"column":64},"end":{"line":133,"column":70}},{"start":{"line":133,"column":73},"end":{"line":133,"column":89}}],"line":133},"9":{"loc":{"start":{"line":133,"column":27},"end":{"line":133,"column":61}},"type":"binary-expr","locations":[{"start":{"line":133,"column":27},"end":{"line":133,"column":41}},{"start":{"line":133,"column":45},"end":{"line":133,"column":61}}],"line":133}},"s":{"0":1,"1":32,"2":23,"3":5,"4":32,"5":32,"6":0,"7":0,"8":0,"9":0,"10":37,"11":5,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":4,"57":4,"58":4,"59":4,"60":4,"61":4,"62":4,"63":4,"64":4,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":4,"85":4,"86":4,"87":4,"88":4,"89":4,"90":4,"91":4,"92":4,"93":4,"94":4,"95":4},"f":{"0":5,"1":32,"2":23,"3":5,"4":32,"5":0,"6":37,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1},"b":{"0":[1,1,1],"1":[9,23],"2":[5,5],"3":[5,32],"4":[5,5],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[0,1],"9":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/createPair.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/createPair.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nuse(chaiHttp);\r\nimport { ethers } from \"ethers\";\r\nimport { getProvider } from \"../../utils/utils\";\r\nimport { getExchangeAddress, getVersion } from \"../../helper/chain\";\r\nimport { connect, Order, OrderExecuted } from \"../../DB/db\";\r\nimport { ifOrderCreated } from \"../../helper/interface\";\r\nimport { getConfig, getContract } from \"../../helper/constant\";\r\nimport { handleOrderCancelled } from \"../../handlers/orderCancelled\";\r\nimport { handleOrderExecuted } from \"../../handlers/orderExecuted\";\r\n\r\n\r\n\r\n// require(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\n\r\nrequire(\"dotenv\").config()\r\n\r\n// main server must be close \r\n\r\ndescribe(\"Create Pair => Mint token, create order, deleteOrder\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let provider = getProvider(chainId);\r\n\r\n    let exchange = getContract(\"Exchange\", chainId);\r\n    let btc = getContract(\"BTC\", chainId);\r\n    let usdc = getContract(\"USDC\", chainId);\r\n    let eth = getContract(\"ETH\", chainId);\r\n    let zexe = getContract(\"ZEXE\", chainId);\r\n    let link = getContract(\"LINK\", chainId);\r\n    let user1 = new ethers.Wallet(\"0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80\").connect(provider); //2\r\n    let user2 = new ethers.Wallet(\"0x59c6995e998f97a5a0044966f0945389dc9e86dae88c7a8412f4603b6b78690d\").connect(provider); //1\r\n\r\n\r\n    let signatures: any[] = [];\r\n    let orders: any[] = [];\r\n    let orderCreated: any[] = []\r\n    let exchangeRate = ethers.utils.parseEther('20000').toString();\r\n\r\n    let salt = Math.floor(Math.random() * 9000000);\r\n    let amount = ethers.utils.parseEther('1').toString();\r\n    let orderType = 1 // sell\r\n\r\n    before(async () => {   \r\n    //     require('../../../app')\r\n    });\r\n\r\n    after((done) => {\r\n        // require('../../../app').stop()\r\n        done()\r\n    })\r\n\r\n    it(`user1 create margin order 1 btc @ 20000}`, async () => {\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getVersion(process.env.NODE_ENV!),\r\n            chainId: chainId.toString(),\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Order: [\r\n                { name: 'maker', type: 'address' },\r\n                { name: 'token0', type: 'address' },\r\n                { name: 'token1', type: 'address' },\r\n                { name: 'amount', type: 'uint256' },\r\n                { name: 'orderType', type: 'uint8' },\r\n                { name: 'salt', type: 'uint32' },\r\n                { name: 'exchangeRate', type: 'uint176' },\r\n                { name: 'borrowLimit', type: 'uint32' },\r\n                { name: 'loops', type: 'uint8' }\r\n            ]\r\n        };\r\n\r\n        let tokens = [btc, zexe, eth, link]\r\n        for (let i in tokens) {\r\n\r\n            const value = {\r\n                maker: user1.address.toLowerCase(),\r\n                token0: tokens[i].address.toLowerCase(),\r\n                token1: usdc.address.toLowerCase(),\r\n                amount: amount,\r\n                orderType: orderType,\r\n                salt: salt,\r\n                exchangeRate: exchangeRate,\r\n                borrowLimit: 0,\r\n                loops: 0\r\n            };\r\n            // The data to sign\r\n\r\n\r\n            orders.push(value);\r\n            // sign typed data\r\n            const storedSignature = await user1._signTypedData(\r\n                domain,\r\n                types,\r\n                value\r\n            );\r\n            signatures.push(storedSignature);\r\n            // console.log([\r\n            //     value, storedSignature\r\n            // ]);\r\n            let res = await request(\"http://localhost:3010\")\r\n                .post(`/v/${getVersion(process.env.NODE_ENV!)}/order/create`)\r\n                .send(\r\n                    {\r\n                        \"data\": {\r\n                            \"maker\": user1.address.toLowerCase(),\r\n                            \"token0\": tokens[i].address.toLowerCase(),\r\n                            \"token1\": usdc.address.toLowerCase(),\r\n                            \"amount\": amount,\r\n                            \"orderType\": orderType,\r\n                            \"salt\": salt,\r\n                            \"exchangeRate\": exchangeRate,\r\n                            borrowLimit: 0,\r\n                            loops: 0\r\n\r\n                        },\r\n                        \"signature\": signatures[i],\r\n                        \"chainId\": chainId,\r\n                        \"ipfs\": true\r\n                    }\r\n                );\r\n            // console.log(res.body)\r\n            expect(res).to.have.status(201);\r\n            expect(res.body.status).to.be.equal(true);\r\n            expect(res.body).to.be.an('object');\r\n            expect(res.body.message).to.have.string('Order created successfully');\r\n\r\n        }\r\n\r\n\r\n    });\r\n\r\n    it(\"execute 0ne order and check DB\", async () => {\r\n        let data = await Order.findOne({ signature: signatures[0] }).lean()! as ifOrderCreated;\r\n\r\n        expect(data).to.be.an('object');\r\n        expect(data.amount).to.equal(amount);\r\n        expect(data.maker).to.equal(user1.address.toLowerCase());\r\n\r\n        let fillAmount = ethers.utils.parseEther('0.5').toString();\r\n        let input = [data.id, user2.address, fillAmount]\r\n        await handleOrderExecuted(input, { chainId: chainId, txnId: 1, blockNumber: 1, blockTimestamp: Date.now() });\r\n\r\n        let data1 = await OrderExecuted.findOne({ id: data.id }).lean()!;\r\n        expect(data1).to.be.an('object');\r\n        expect(data1).not.to.be.null;\r\n        expect(data1?.fillAmount).to.equal(fillAmount);\r\n\r\n        // delete from db executed order\r\n        let delExecutedData = await OrderExecuted.deleteOne({ id: data.id });\r\n        expect(delExecutedData.acknowledged).to.equal(true)\r\n        expect(delExecutedData.deletedCount).to.equal(1)\r\n    });\r\n    it(`find created order in data base, cancel and delete it`, async () => {\r\n\r\n        for (let i in signatures) {\r\n            let data = await Order.findOne({ signature: signatures[i] }).lean()! as ifOrderCreated;\r\n\r\n            expect(data).to.be.an('object');\r\n            expect(data.amount).to.equal(amount);\r\n            expect(data.maker).to.equal(user1.address.toLowerCase());\r\n            await handleOrderCancelled([data.id]);\r\n\r\n            let data1 = await Order.findOne({ signature: signatures[i] }).lean()! as ifOrderCreated;\r\n            expect(data1).to.be.an('object');\r\n            expect(data1.amount).to.equal(amount);\r\n            expect(data1.cancelled).to.equal(true);\r\n            await Order.findOneAndDelete({ signature: signatures[i] })\r\n            let data2 = await Order.findOne({ signature: signatures[i] }).lean()! as ifOrderCreated;\r\n            expect(data2).to.be.null;\r\n\r\n\r\n        }\r\n\r\n        // server.close((err) => {\r\n        //     console.log('server closed')\r\n        //     process.exit(0)\r\n        // })\r\n\r\n\r\n    })\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4b971793b3f66336822c68779ed9869bda59cb92","contentHash":"7c189a9298ab73fc177f50c067c5df69103ec8e29fb99143b7413c395e766dd8"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\orderCancelled.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\orderCancelled.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":38}},"40":{"start":{"line":39,"column":13},"end":{"line":39,"column":32}},"41":{"start":{"line":40,"column":17},"end":{"line":40,"column":51}},"42":{"start":{"line":41,"column":20},"end":{"line":41,"column":52}},"43":{"start":{"line":42,"column":15},"end":{"line":42,"column":52}},"44":{"start":{"line":44,"column":4},"end":{"line":101,"column":7}},"45":{"start":{"line":45,"column":8},"end":{"line":100,"column":9}},"46":{"start":{"line":46,"column":21},"end":{"line":46,"column":42}},"47":{"start":{"line":47,"column":31},"end":{"line":47,"column":74}},"48":{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},"49":{"start":{"line":49,"column":16},"end":{"line":49,"column":83}},"50":{"start":{"line":51,"column":12},"end":{"line":53,"column":13}},"51":{"start":{"line":52,"column":16},"end":{"line":52,"column":65}},"52":{"start":{"line":55,"column":12},"end":{"line":82,"column":13}},"53":{"start":{"line":56,"column":28},"end":{"line":56,"column":47}},"54":{"start":{"line":57,"column":16},"end":{"line":59,"column":17}},"55":{"start":{"line":58,"column":20},"end":{"line":58,"column":48}},"56":{"start":{"line":60,"column":30},"end":{"line":60,"column":133}},"57":{"start":{"line":61,"column":16},"end":{"line":70,"column":17}},"58":{"start":{"line":62,"column":48},"end":{"line":62,"column":138}},"59":{"start":{"line":63,"column":20},"end":{"line":65,"column":21}},"60":{"start":{"line":64,"column":24},"end":{"line":64,"column":234}},"61":{"start":{"line":66,"column":20},"end":{"line":69,"column":23}},"62":{"start":{"line":72,"column":17},"end":{"line":82,"column":13}},"63":{"start":{"line":73,"column":37},"end":{"line":73,"column":123}},"64":{"start":{"line":74,"column":37},"end":{"line":74,"column":123}},"65":{"start":{"line":75,"column":36},"end":{"line":75,"column":201}},"66":{"start":{"line":76,"column":36},"end":{"line":76,"column":201}},"67":{"start":{"line":77,"column":16},"end":{"line":81,"column":19}},"68":{"start":{"line":83,"column":12},"end":{"line":88,"column":15}},"69":{"start":{"line":89,"column":12},"end":{"line":94,"column":15}},"70":{"start":{"line":95,"column":12},"end":{"line":95,"column":65}},"71":{"start":{"line":98,"column":12},"end":{"line":98,"column":43}},"72":{"start":{"line":99,"column":12},"end":{"line":99,"column":63}},"73":{"start":{"line":103,"column":0},"end":{"line":103,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"handleOrderCancelled","decl":{"start":{"line":43,"column":9},"end":{"line":43,"column":29}},"loc":{"start":{"line":43,"column":36},"end":{"line":102,"column":1}},"line":43},"15":{"name":"(anonymous_15)","decl":{"start":{"line":44,"column":43},"end":{"line":44,"column":44}},"loc":{"start":{"line":44,"column":56},"end":{"line":101,"column":5}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},{"start":{"line":48,"column":12},"end":{"line":50,"column":13}}],"line":48},"25":{"loc":{"start":{"line":51,"column":12},"end":{"line":53,"column":13}},"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":53,"column":13}},{"start":{"line":51,"column":12},"end":{"line":53,"column":13}}],"line":51},"26":{"loc":{"start":{"line":55,"column":12},"end":{"line":82,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":82,"column":13}},{"start":{"line":55,"column":12},"end":{"line":82,"column":13}}],"line":55},"27":{"loc":{"start":{"line":55,"column":16},"end":{"line":55,"column":74}},"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":43}},{"start":{"line":55,"column":47},"end":{"line":55,"column":74}}],"line":55},"28":{"loc":{"start":{"line":57,"column":16},"end":{"line":59,"column":17}},"type":"if","locations":[{"start":{"line":57,"column":16},"end":{"line":59,"column":17}},{"start":{"line":57,"column":16},"end":{"line":59,"column":17}}],"line":57},"29":{"loc":{"start":{"line":61,"column":16},"end":{"line":70,"column":17}},"type":"if","locations":[{"start":{"line":61,"column":16},"end":{"line":70,"column":17}},{"start":{"line":61,"column":16},"end":{"line":70,"column":17}}],"line":61},"30":{"loc":{"start":{"line":63,"column":20},"end":{"line":65,"column":21}},"type":"if","locations":[{"start":{"line":63,"column":20},"end":{"line":65,"column":21}},{"start":{"line":63,"column":20},"end":{"line":65,"column":21}}],"line":63},"31":{"loc":{"start":{"line":72,"column":17},"end":{"line":82,"column":13}},"type":"if","locations":[{"start":{"line":72,"column":17},"end":{"line":82,"column":13}},{"start":{"line":72,"column":17},"end":{"line":82,"column":13}}],"line":72},"32":{"loc":{"start":{"line":72,"column":21},"end":{"line":72,"column":79}},"type":"binary-expr","locations":[{"start":{"line":72,"column":21},"end":{"line":72,"column":48}},{"start":{"line":72,"column":52},"end":{"line":72,"column":79}}],"line":72},"33":{"loc":{"start":{"line":75,"column":58},"end":{"line":75,"column":151}},"type":"cond-expr","locations":[{"start":{"line":75,"column":113},"end":{"line":75,"column":119}},{"start":{"line":75,"column":122},"end":{"line":75,"column":151}}],"line":75},"34":{"loc":{"start":{"line":75,"column":58},"end":{"line":75,"column":110}},"type":"binary-expr","locations":[{"start":{"line":75,"column":58},"end":{"line":75,"column":81}},{"start":{"line":75,"column":85},"end":{"line":75,"column":110}}],"line":75},"35":{"loc":{"start":{"line":76,"column":58},"end":{"line":76,"column":151}},"type":"cond-expr","locations":[{"start":{"line":76,"column":113},"end":{"line":76,"column":119}},{"start":{"line":76,"column":122},"end":{"line":76,"column":151}}],"line":76},"36":{"loc":{"start":{"line":76,"column":58},"end":{"line":76,"column":110}},"type":"binary-expr","locations":[{"start":{"line":76,"column":58},"end":{"line":76,"column":81}},{"start":{"line":76,"column":85},"end":{"line":76,"column":110}}],"line":76}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":21,"26":15,"27":7,"28":21,"29":21,"30":0,"31":0,"32":0,"33":0,"34":28,"35":7,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":7,"45":7,"46":7,"47":7,"48":7,"49":0,"50":7,"51":1,"52":6,"53":4,"54":4,"55":0,"56":4,"57":4,"58":4,"59":4,"60":0,"61":4,"62":2,"63":2,"64":2,"65":2,"66":2,"67":2,"68":6,"69":6,"70":6,"71":0,"72":0,"73":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":7,"7":21,"8":15,"9":7,"10":21,"11":0,"12":28,"13":1,"14":7,"15":7},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[6,15],"18":[7,7],"19":[7,21],"20":[7,7],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,7],"25":[1,6],"26":[4,2],"27":[6,2],"28":[0,4],"29":[4,0],"30":[0,4],"31":[2,0],"32":[2,1],"33":[0,2],"34":[2,2],"35":[0,2],"36":[2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/orderCancelled.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/orderCancelled.ts"],"names":[],"mappings":"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","sourcesContent":["import { Order, User } from \"../DB/db\";\r\nimport Big from \"big.js\";\r\nimport { ifOrderCreated, ifUserPosition } from \"../helper/interface\";\r\nimport { EVENT_NAME, socketService } from \"../socketIo/socket.io\";\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\nexport async function handleOrderCancelled(data: any) {\r\n\r\n    try {\r\n        let id = data[0].toLowerCase();\r\n\r\n        let orderDetails: ifOrderCreated | null = await Order.findOne({ id: id }).lean();\r\n\r\n        if (!orderDetails) {\r\n            return console.log(`Order cancelled OrderId not found ${data[0]}`);\r\n        }\r\n\r\n        if (orderDetails.cancelled == true) {\r\n            return console.log(\"Order is already cancelled\");\r\n        }\r\n    \r\n        // update user inOrder\r\n        if (orderDetails.orderType == 1 || orderDetails.orderType == 0) {\r\n\r\n            let token = orderDetails.token0;\r\n\r\n            if (orderDetails.orderType == 0) {\r\n                token = orderDetails.token1\r\n            }\r\n            let getUser: ifUserPosition | null = await User.findOne({ id: orderDetails.maker, token: token, chainId: orderDetails.chainId }).lean();\r\n            if (getUser) {\r\n\r\n                let currentInOrderBalance = Big(getUser.inOrderBalance).minus(orderDetails.balanceAmount).toString();\r\n\r\n                if (orderDetails.orderType == 0) {\r\n                    currentInOrderBalance = Big(getUser.inOrderBalance).minus(Big(orderDetails.balanceAmount).times(orderDetails.exchangeRate).div(Big(10).pow(18))).toString();\r\n                }\r\n\r\n                await Promise.all(\r\n                    [\r\n                        User.findOneAndUpdate(\r\n                            { _id: getUser._id },\r\n                            { $set: { inOrderBalance: currentInOrderBalance } }\r\n                        ),\r\n                        Order.findOneAndUpdate(\r\n                            { _id: orderDetails._id },\r\n                            { $set: { cancelled: true, active: false } }\r\n                        )\r\n                    ]\r\n                )\r\n            }\r\n        }\r\n        else if (orderDetails.orderType == 2 || orderDetails.orderType == 3) {\r\n\r\n            let token0Position = await User.findOne({ id: orderDetails.maker, token: orderDetails.token0 }).lean()! as any;\r\n            let token1Position = await User.findOne({ id: orderDetails.maker, token: orderDetails.token1 }).lean()! as any;\r\n            let token0InOrder = Big(token0Position?.inOrderBalance).minus(orderDetails.lastInOrderToken0).toString();\r\n            let token1InOrder = Big(token1Position?.inOrderBalance).minus(orderDetails.lastInOrderToken1).toString();\r\n\r\n            await Promise.all(\r\n                [\r\n                    User.findOneAndUpdate(\r\n                        { _id: token0Position._id },\r\n                        { $set: { inOrderBalance: token0InOrder } }\r\n                    ),\r\n                    User.findOneAndUpdate(\r\n                        { _id: token1Position._id },\r\n                        { $set: { inOrderBalance: token1InOrder } }\r\n                    ),\r\n                    Order.findOneAndUpdate(\r\n                        { _id: orderDetails._id },\r\n                        { $set: { cancelled: true, active: false } }\r\n                    )\r\n                ]\r\n            )\r\n        }\r\n\r\n        socketService.emit(EVENT_NAME.PAIR_ORDER, {\r\n            amount: `-${orderDetails.balanceAmount}`,\r\n            exchangeRate: orderDetails.exchangeRate,\r\n            orderType: orderDetails.orderType,\r\n            pair: orderDetails.pair\r\n        });\r\n\r\n        socketService.emit(EVENT_NAME.CANCEL_ORDER, {\r\n            amount: `-${orderDetails.balanceAmount}`,\r\n            exchangeRate: orderDetails.exchangeRate,\r\n            orderType: orderDetails.orderType,\r\n            pair: orderDetails.pair\r\n        });\r\n\r\n        console.log(`order Cancelled, orderId : ${data[0]}`);\r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ handleOrderCancelled\", error);\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1bc53338ac1871382e7f174fcdb3109b221d0f0f","contentHash":"f5781481c8fb342c82933bf4b4b18200f73712533be9fe855f63f8668cdceff9"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\orderExecuted.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\orderExecuted.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":37}},"40":{"start":{"line":39,"column":13},"end":{"line":39,"column":32}},"41":{"start":{"line":40,"column":17},"end":{"line":40,"column":51}},"42":{"start":{"line":41,"column":20},"end":{"line":41,"column":52}},"43":{"start":{"line":42,"column":15},"end":{"line":42,"column":52}},"44":{"start":{"line":43,"column":29},"end":{"line":43,"column":67}},"45":{"start":{"line":44,"column":35},"end":{"line":44,"column":79}},"46":{"start":{"line":45,"column":21},"end":{"line":45,"column":51}},"47":{"start":{"line":48,"column":4},"end":{"line":113,"column":7}},"48":{"start":{"line":49,"column":8},"end":{"line":112,"column":9}},"49":{"start":{"line":50,"column":35},"end":{"line":55,"column":14}},"50":{"start":{"line":56,"column":12},"end":{"line":59,"column":13}},"51":{"start":{"line":57,"column":16},"end":{"line":57,"column":83}},"52":{"start":{"line":58,"column":16},"end":{"line":58,"column":23}},"53":{"start":{"line":60,"column":21},"end":{"line":60,"column":89}},"54":{"start":{"line":61,"column":24},"end":{"line":61,"column":92}},"55":{"start":{"line":62,"column":29},"end":{"line":62,"column":47}},"56":{"start":{"line":63,"column":12},"end":{"line":63,"column":29}},"57":{"start":{"line":64,"column":12},"end":{"line":64,"column":35}},"58":{"start":{"line":65,"column":12},"end":{"line":65,"column":45}},"59":{"start":{"line":66,"column":34},"end":{"line":66,"column":104}},"60":{"start":{"line":67,"column":12},"end":{"line":69,"column":13}},"61":{"start":{"line":68,"column":16},"end":{"line":68,"column":70}},"62":{"start":{"line":70,"column":33},"end":{"line":70,"column":141}},"63":{"start":{"line":71,"column":12},"end":{"line":73,"column":13}},"64":{"start":{"line":72,"column":16},"end":{"line":72,"column":74}},"65":{"start":{"line":74,"column":12},"end":{"line":74,"column":65}},"66":{"start":{"line":75,"column":12},"end":{"line":75,"column":49}},"67":{"start":{"line":76,"column":12},"end":{"line":76,"column":88}},"68":{"start":{"line":77,"column":12},"end":{"line":77,"column":59}},"69":{"start":{"line":79,"column":39},"end":{"line":79,"column":106}},"70":{"start":{"line":80,"column":12},"end":{"line":82,"column":13}},"71":{"start":{"line":81,"column":16},"end":{"line":81,"column":69}},"72":{"start":{"line":83,"column":12},"end":{"line":83,"column":54}},"73":{"start":{"line":84,"column":28},"end":{"line":84,"column":124}},"74":{"start":{"line":85,"column":12},"end":{"line":85,"column":218}},"75":{"start":{"line":87,"column":12},"end":{"line":92,"column":13}},"76":{"start":{"line":88,"column":16},"end":{"line":88,"column":112}},"77":{"start":{"line":90,"column":17},"end":{"line":92,"column":13}},"78":{"start":{"line":91,"column":16},"end":{"line":91,"column":124}},"79":{"start":{"line":94,"column":12},"end":{"line":99,"column":15}},"80":{"start":{"line":101,"column":12},"end":{"line":106,"column":15}},"81":{"start":{"line":107,"column":12},"end":{"line":107,"column":65}},"82":{"start":{"line":110,"column":12},"end":{"line":110,"column":43}},"83":{"start":{"line":111,"column":12},"end":{"line":111,"column":62}},"84":{"start":{"line":115,"column":0},"end":{"line":115,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"handleOrderExecuted","decl":{"start":{"line":46,"column":9},"end":{"line":46,"column":28}},"loc":{"start":{"line":46,"column":45},"end":{"line":114,"column":1}},"line":46},"15":{"name":"(anonymous_15)","decl":{"start":{"line":48,"column":43},"end":{"line":48,"column":44}},"loc":{"start":{"line":48,"column":56},"end":{"line":113,"column":5}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":56,"column":12},"end":{"line":59,"column":13}},"type":"if","locations":[{"start":{"line":56,"column":12},"end":{"line":59,"column":13}},{"start":{"line":56,"column":12},"end":{"line":59,"column":13}}],"line":56},"25":{"loc":{"start":{"line":60,"column":21},"end":{"line":60,"column":89}},"type":"cond-expr","locations":[{"start":{"line":60,"column":64},"end":{"line":60,"column":70}},{"start":{"line":60,"column":73},"end":{"line":60,"column":89}}],"line":60},"26":{"loc":{"start":{"line":60,"column":21},"end":{"line":60,"column":61}},"type":"binary-expr","locations":[{"start":{"line":60,"column":21},"end":{"line":60,"column":44}},{"start":{"line":60,"column":48},"end":{"line":60,"column":61}}],"line":60},"27":{"loc":{"start":{"line":61,"column":24},"end":{"line":61,"column":92}},"type":"cond-expr","locations":[{"start":{"line":61,"column":67},"end":{"line":61,"column":73}},{"start":{"line":61,"column":76},"end":{"line":61,"column":92}}],"line":61},"28":{"loc":{"start":{"line":61,"column":24},"end":{"line":61,"column":64}},"type":"binary-expr","locations":[{"start":{"line":61,"column":24},"end":{"line":61,"column":47}},{"start":{"line":61,"column":51},"end":{"line":61,"column":64}}],"line":61},"29":{"loc":{"start":{"line":67,"column":12},"end":{"line":69,"column":13}},"type":"if","locations":[{"start":{"line":67,"column":12},"end":{"line":69,"column":13}},{"start":{"line":67,"column":12},"end":{"line":69,"column":13}}],"line":67},"30":{"loc":{"start":{"line":71,"column":12},"end":{"line":73,"column":13}},"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":73,"column":13}},{"start":{"line":71,"column":12},"end":{"line":73,"column":13}}],"line":71},"31":{"loc":{"start":{"line":80,"column":12},"end":{"line":82,"column":13}},"type":"if","locations":[{"start":{"line":80,"column":12},"end":{"line":82,"column":13}},{"start":{"line":80,"column":12},"end":{"line":82,"column":13}}],"line":80},"32":{"loc":{"start":{"line":87,"column":12},"end":{"line":92,"column":13}},"type":"if","locations":[{"start":{"line":87,"column":12},"end":{"line":92,"column":13}},{"start":{"line":87,"column":12},"end":{"line":92,"column":13}}],"line":87},"33":{"loc":{"start":{"line":87,"column":16},"end":{"line":87,"column":80}},"type":"binary-expr","locations":[{"start":{"line":87,"column":16},"end":{"line":87,"column":46}},{"start":{"line":87,"column":50},"end":{"line":87,"column":80}}],"line":87},"34":{"loc":{"start":{"line":90,"column":17},"end":{"line":92,"column":13}},"type":"if","locations":[{"start":{"line":90,"column":17},"end":{"line":92,"column":13}},{"start":{"line":90,"column":17},"end":{"line":92,"column":13}}],"line":90},"35":{"loc":{"start":{"line":90,"column":21},"end":{"line":90,"column":85}},"type":"binary-expr","locations":[{"start":{"line":90,"column":21},"end":{"line":90,"column":51}},{"start":{"line":90,"column":55},"end":{"line":90,"column":85}}],"line":90}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":24,"26":16,"27":4,"28":24,"29":24,"30":0,"31":0,"32":0,"33":0,"34":28,"35":4,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":4,"48":4,"49":4,"50":4,"51":0,"52":0,"53":4,"54":4,"55":4,"56":4,"57":4,"58":4,"59":4,"60":4,"61":0,"62":4,"63":4,"64":0,"65":4,"66":4,"67":4,"68":4,"69":4,"70":4,"71":4,"72":4,"73":4,"74":4,"75":4,"76":2,"77":2,"78":2,"79":4,"80":4,"81":4,"82":0,"83":0,"84":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":4,"7":24,"8":16,"9":4,"10":24,"11":0,"12":28,"13":1,"14":4,"15":4},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[8,16],"18":[4,4],"19":[4,24],"20":[4,4],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,4],"25":[0,4],"26":[4,4],"27":[0,4],"28":[4,4],"29":[0,4],"30":[0,4],"31":[4,0],"32":[2,2],"33":[4,2],"34":[2,0],"35":[2,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/orderExecuted.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/orderExecuted.ts"],"names":[],"mappings":"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","sourcesContent":["import { Pair, Order, OrderExecuted, } from \"../DB/db\";\r\nimport Big from \"big.js\";\r\nimport { ifOrderCreated, ifPair} from \"../helper/interface\";\r\nimport { EVENT_NAME, socketService } from \"../socketIo/socket.io\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { getLoop, loopFillAmount } from \"./helper/getLoop\";\r\nimport { updateUserPosition } from \"./helper/updateUserPosition\";\r\nimport { marginUpdateUserPosition } from \"./helper/marginUpdateUserPosition\";\r\nimport { getDecimals } from \"../utils/getDecimal\";\r\n\r\n\r\nexport async function handleOrderExecuted(data: any, argument: any) {\r\n\r\n    try {\r\n\r\n        const isDuplicateTxn = await OrderExecuted.findOne({\r\n            txnId: argument.txnId,\r\n            blockNumber: argument.blockNumber,\r\n            blockTimestamp: argument.blockTimestamp,\r\n            logIndex: argument.logIndex\r\n        });\r\n\r\n        if (isDuplicateTxn) {\r\n            console.log(\"OrderExecute duplicate, id :\", data[0].toLowerCase())\r\n            return;\r\n        }\r\n\r\n        let id = data[0]?.toLowerCase();\r\n        let taker = data[1]?.toLowerCase();\r\n        let fillAmount = data[2].toString();\r\n        argument.id = id;\r\n        argument.taker = taker;\r\n        argument.fillAmount = fillAmount;\r\n\r\n        let getOrderDetails: ifOrderCreated = await Order.findOne({ id: id, chainId: argument.chainId }).lean();\r\n\r\n        if (!getOrderDetails) {\r\n            return console.log(\"OrderId not found @ execute\", id);\r\n        }\r\n\r\n        let getPairDetails: ifPair | null = await Pair.findOne({ id: getOrderDetails.pair, chainId: getOrderDetails.chainId, active: true }).lean();\r\n\r\n        if (!getPairDetails) {\r\n            return console.log(`Pair Id not found in order Executed`);\r\n        }\r\n        argument.exchangeRate = getOrderDetails.exchangeRate;\r\n        argument.pair = getOrderDetails.pair;\r\n        argument.exchangeRateDecimals = Number(getPairDetails.exchangeRateDecimals);\r\n        argument.orderType = getOrderDetails.orderType;\r\n\r\n        // updating ExchangeRateDecimal\r\n        let exchangeRateDecimals: number | string = Number(getDecimals(getOrderDetails.exchangeRate));\r\n\r\n        if (isNaN(exchangeRateDecimals) == false) {\r\n            argument.exchangeRateDecimals = exchangeRateDecimals;\r\n        }\r\n\r\n        await OrderExecuted.create(argument);\r\n        let priceDiff = new Big(getOrderDetails.exchangeRate).minus(getPairDetails.exchangeRate).toString();\r\n\r\n        await Pair.findOneAndUpdate(\r\n            { _id: getPairDetails._id.toString() },\r\n            { $set: { exchangeRate: getOrderDetails.exchangeRate, priceDiff: priceDiff, exchangeRateDecimals: argument.exchangeRateDecimals } }\r\n        );\r\n            // updating userPosition\r\n        if (getOrderDetails.orderType == 1 || getOrderDetails.orderType == 0) {\r\n            await updateUserPosition(getOrderDetails, getPairDetails, fillAmount)\r\n        }\r\n        else if (getOrderDetails.orderType == 3 || getOrderDetails.orderType == 2) { \r\n            await marginUpdateUserPosition(getOrderDetails, getPairDetails, fillAmount)\r\n        }\r\n\r\n        // updating pair orders\r\n\r\n        socketService.emit(EVENT_NAME.PAIR_ORDER, {\r\n            amount: `-${fillAmount}`,\r\n            exchangeRate: getOrderDetails.exchangeRate,\r\n            orderType: getOrderDetails.orderType,\r\n            pair: getOrderDetails.pair\r\n        });\r\n\r\n        // updating pair history\r\n        socketService.emit(EVENT_NAME.PAIR_HISTORY, {\r\n            amount: fillAmount,\r\n            exchangeRate: getOrderDetails.exchangeRate,\r\n            orderType: getOrderDetails.orderType,\r\n            pair: getOrderDetails.pair\r\n        })\r\n\r\n        console.log(\"Order Executed\", taker, fillAmount, id);\r\n\r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ handleOrderExecuted\", error);\r\n    }\r\n\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4015011867a96e3e122cbef7175e36cb42fd1e41","contentHash":"03b4e42afe1a2395ca955069f18a5e37c07001f50e5fc14587dccc2e50625294"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\helper\\updateUserPosition.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\helper\\updateUserPosition.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":51}},"17":{"start":{"line":17,"column":13},"end":{"line":17,"column":35}},"18":{"start":{"line":19,"column":4},"end":{"line":45,"column":7}},"19":{"start":{"line":20,"column":8},"end":{"line":44,"column":9}},"20":{"start":{"line":21,"column":24},"end":{"line":21,"column":45}},"21":{"start":{"line":22,"column":12},"end":{"line":24,"column":13}},"22":{"start":{"line":23,"column":16},"end":{"line":23,"column":46}},"23":{"start":{"line":25,"column":34},"end":{"line":25,"column":102}},"24":{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},"25":{"start":{"line":27,"column":16},"end":{"line":27,"column":114}},"26":{"start":{"line":29,"column":40},"end":{"line":29,"column":121}},"27":{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},"28":{"start":{"line":31,"column":16},"end":{"line":31,"column":221}},"29":{"start":{"line":33,"column":12},"end":{"line":33,"column":128}},"30":{"start":{"line":34,"column":39},"end":{"line":34,"column":108}},"31":{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},"32":{"start":{"line":36,"column":16},"end":{"line":36,"column":172}},"33":{"start":{"line":39,"column":16},"end":{"line":39,"column":142}},"34":{"start":{"line":43,"column":12},"end":{"line":43,"column":73}},"35":{"start":{"line":47,"column":0},"end":{"line":47,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"updateUserPosition","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":27}},"loc":{"start":{"line":18,"column":73},"end":{"line":46,"column":1}},"line":18},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":43},"end":{"line":19,"column":44}},"loc":{"start":{"line":19,"column":56},"end":{"line":45,"column":5}},"line":19}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":22,"column":12},"end":{"line":24,"column":13}},"type":"if","locations":[{"start":{"line":22,"column":12},"end":{"line":24,"column":13}},{"start":{"line":22,"column":12},"end":{"line":24,"column":13}}],"line":22},"9":{"loc":{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},"type":"if","locations":[{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},{"start":{"line":26,"column":12},"end":{"line":28,"column":13}}],"line":26},"10":{"loc":{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},"type":"if","locations":[{"start":{"line":30,"column":12},"end":{"line":32,"column":13}},{"start":{"line":30,"column":12},"end":{"line":32,"column":13}}],"line":30},"11":{"loc":{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},"type":"if","locations":[{"start":{"line":35,"column":12},"end":{"line":40,"column":13}},{"start":{"line":35,"column":12},"end":{"line":40,"column":13}}],"line":35}},"s":{"0":1,"1":6,"2":6,"3":2,"4":6,"5":6,"6":0,"7":0,"8":0,"9":0,"10":8,"11":2,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":2,"19":2,"20":2,"21":2,"22":0,"23":2,"24":2,"25":0,"26":2,"27":2,"28":0,"29":2,"30":2,"31":2,"32":0,"33":2,"34":0,"35":1},"f":{"0":2,"1":6,"2":6,"3":2,"4":6,"5":0,"6":8,"7":1,"8":2,"9":2},"b":{"0":[1,1,1],"1":[0,6],"2":[2,2],"3":[2,6],"4":[2,2],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[0,2],"9":[0,2],"10":[0,2],"11":[0,2]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/helper/updateUserPosition.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/helper/updateUserPosition.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,oDAAyB;AACzB,oCAA0C;AAY1C,SAAsB,kBAAkB,CAAC,eAAoB,EAAE,cAAmB,EAAE,UAAe;;QAC/F,IAAI;YAEA,IAAI,KAAK,GAAG,cAAc,CAAC,MAAM,CAAC;YAElC,IAAI,eAAe,CAAC,SAAS,IAAI,CAAC,EAAE;gBAChC,KAAK,GAAG,cAAc,CAAC,MAAM,CAAC;aACjC;YAED,IAAI,eAAe,GAA0B,MAAM,SAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,eAAe,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;YAE7G,IAAI,CAAC,eAAe,EAAE;gBAClB,OAAO,OAAO,CAAC,GAAG,CAAC,sCAAsC,KAAK,WAAW,eAAe,CAAC,KAAK,EAAE,CAAC,CAAA;aACpG;YAED,IAAI,qBAAqB,GAAG,IAAI,gBAAG,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,QAAQ,EAAE,CAAC;YAEjG,IAAI,eAAe,CAAC,SAAS,IAAI,CAAC,EAAE;gBAChC,qBAAqB,GAAG,IAAA,gBAAG,EAAC,eAAe,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,IAAA,gBAAG,EAAC,UAAU,CAAC,CAAC,KAAK,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;aAC1J;YAED,MAAM,SAAI,CAAC,gBAAgB,CACvB,EAAE,GAAG,EAAE,eAAe,CAAC,GAAG,EAAE,EAC5B,EAAE,IAAI,EAAE,EAAE,cAAc,EAAE,qBAAqB,EAAE,EAAE,CACtD,CAAC;YAEF,IAAI,oBAAoB,GAAG,IAAI,gBAAG,CAAC,eAAe,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;YAEpF,IAAI,MAAM,CAAC,oBAAoB,CAAC,IAAI,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE;gBACvE,MAAM,UAAK,CAAC,gBAAgB,CACxB,EAAE,GAAG,EAAE,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EACvC,EAAE,IAAI,EAAE,EAAE,aAAa,EAAE,oBAAoB,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,CAClF,CAAC;aACL;iBACI;gBACD,MAAM,UAAK,CAAC,gBAAgB,CACxB,EAAE,GAAG,EAAE,eAAe,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,EACvC,EAAE,IAAI,EAAE,EAAE,aAAa,EAAE,oBAAoB,EAAE,EAAE,CACpD,CAAC;aACL;SACJ;QACD,OAAO,KAAK,EAAE;YACV,OAAO,CAAC,GAAG,CAAC,+CAA+C,CAAC,CAAA;SAC/D;IACL,CAAC;CAAA;AA5CD,gDA4CC","sourcesContent":["import Big from \"big.js\";\r\nimport { Order, User } from \"../../DB/db\";\r\nimport { ifUserPosition } from \"../../helper/interface\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function updateUserPosition(getOrderDetails: any, getPairDetails: any, fillAmount: any) {\r\n    try {\r\n\r\n        let token = getPairDetails.token0;\r\n\r\n        if (getOrderDetails.orderType == 0) {\r\n            token = getPairDetails.token1;\r\n        }\r\n\r\n        let getUserPosition: ifUserPosition | null = await User.findOne({ id: getOrderDetails.maker, token: token });\r\n\r\n        if (!getUserPosition) {\r\n            return console.log(`user position not found for token0 ${token}, maker ${getOrderDetails.maker}`)\r\n        }\r\n\r\n        let currentInOrderBalance = new Big(getUserPosition.inOrderBalance).minus(fillAmount).toString();\r\n\r\n        if (getOrderDetails.orderType == 0) {\r\n            currentInOrderBalance = Big(getUserPosition.inOrderBalance).minus(Big(fillAmount).times(getOrderDetails.exchangeRate).div(Big(10).pow(18))).toString();\r\n        }\r\n\r\n        await User.findOneAndUpdate(\r\n            { _id: getUserPosition._id },\r\n            { $set: { inOrderBalance: currentInOrderBalance } }\r\n        );\r\n\r\n        let currentBalanceAmount = new Big(getOrderDetails.balanceAmount).minus(fillAmount);\r\n\r\n        if (Number(currentBalanceAmount) <= Number(getPairDetails.minToken0Order)) {\r\n            await Order.findOneAndUpdate(\r\n                { _id: getOrderDetails._id.toString() },\r\n                { $set: { balanceAmount: currentBalanceAmount, deleted: true, active: false } }\r\n            );\r\n        }\r\n        else {\r\n            await Order.findOneAndUpdate(\r\n                { _id: getOrderDetails._id.toString() },\r\n                { $set: { balanceAmount: currentBalanceAmount } }\r\n            );\r\n        }\r\n    }\r\n    catch (error) {\r\n        console.log(`Error @ updateUserPosition from orderExecuted`)\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9d5e72cf7cf8935bcb10723eff66f75fd69dbbf7","contentHash":"0d4661eba9471ce8f0521e160200be92b55b92a1ad0ebdf8998f163d8ed71692"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\helper\\marginUpdateUserPosition.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\helper\\marginUpdateUserPosition.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":42}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":51}},"17":{"start":{"line":17,"column":13},"end":{"line":17,"column":35}},"18":{"start":{"line":18,"column":18},"end":{"line":18,"column":38}},"19":{"start":{"line":20,"column":4},"end":{"line":60,"column":7}},"20":{"start":{"line":21,"column":8},"end":{"line":59,"column":9}},"21":{"start":{"line":22,"column":37},"end":{"line":22,"column":129}},"22":{"start":{"line":23,"column":37},"end":{"line":23,"column":129}},"23":{"start":{"line":24,"column":34},"end":{"line":24,"column":111}},"24":{"start":{"line":25,"column":30},"end":{"line":25,"column":52}},"25":{"start":{"line":26,"column":30},"end":{"line":26,"column":57}},"26":{"start":{"line":27,"column":30},"end":{"line":27,"column":95}},"27":{"start":{"line":28,"column":31},"end":{"line":28,"column":122}},"28":{"start":{"line":29,"column":32},"end":{"line":29,"column":35}},"29":{"start":{"line":30,"column":32},"end":{"line":30,"column":35}},"30":{"start":{"line":31,"column":30},"end":{"line":31,"column":62}},"31":{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},"32":{"start":{"line":33,"column":16},"end":{"line":33,"column":130}},"33":{"start":{"line":34,"column":16},"end":{"line":34,"column":196}},"34":{"start":{"line":36,"column":12},"end":{"line":41,"column":13}},"35":{"start":{"line":37,"column":16},"end":{"line":40,"column":17}},"36":{"start":{"line":38,"column":20},"end":{"line":38,"column":102}},"37":{"start":{"line":39,"column":20},"end":{"line":39,"column":232}},"38":{"start":{"line":43,"column":32},"end":{"line":43,"column":232}},"39":{"start":{"line":44,"column":32},"end":{"line":44,"column":160}},"40":{"start":{"line":45,"column":32},"end":{"line":45,"column":102}},"41":{"start":{"line":46,"column":12},"end":{"line":49,"column":15}},"42":{"start":{"line":50,"column":12},"end":{"line":55,"column":13}},"43":{"start":{"line":51,"column":16},"end":{"line":51,"column":262}},"44":{"start":{"line":54,"column":16},"end":{"line":54,"column":232}},"45":{"start":{"line":58,"column":12},"end":{"line":58,"column":60}},"46":{"start":{"line":62,"column":0},"end":{"line":62,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"marginUpdateUserPosition","decl":{"start":{"line":19,"column":9},"end":{"line":19,"column":33}},"loc":{"start":{"line":19,"column":79},"end":{"line":61,"column":1}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":43},"end":{"line":20,"column":44}},"loc":{"start":{"line":20,"column":56},"end":{"line":60,"column":5}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":35,"column":13}},{"start":{"line":32,"column":12},"end":{"line":35,"column":13}}],"line":32},"9":{"loc":{"start":{"line":36,"column":12},"end":{"line":41,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":41,"column":13}},{"start":{"line":36,"column":12},"end":{"line":41,"column":13}}],"line":36},"10":{"loc":{"start":{"line":37,"column":16},"end":{"line":40,"column":17}},"type":"if","locations":[{"start":{"line":37,"column":16},"end":{"line":40,"column":17}},{"start":{"line":37,"column":16},"end":{"line":40,"column":17}}],"line":37},"11":{"loc":{"start":{"line":43,"column":54},"end":{"line":43,"column":159}},"type":"cond-expr","locations":[{"start":{"line":43,"column":117},"end":{"line":43,"column":123}},{"start":{"line":43,"column":126},"end":{"line":43,"column":159}}],"line":43},"12":{"loc":{"start":{"line":43,"column":54},"end":{"line":43,"column":114}},"type":"binary-expr","locations":[{"start":{"line":43,"column":54},"end":{"line":43,"column":81}},{"start":{"line":43,"column":85},"end":{"line":43,"column":114}}],"line":43},"13":{"loc":{"start":{"line":50,"column":12},"end":{"line":55,"column":13}},"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":55,"column":13}},{"start":{"line":50,"column":12},"end":{"line":55,"column":13}}],"line":50}},"s":{"0":1,"1":8,"2":6,"3":2,"4":8,"5":8,"6":0,"7":0,"8":0,"9":0,"10":10,"11":2,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":2,"20":2,"21":2,"22":2,"23":2,"24":2,"25":2,"26":2,"27":2,"28":2,"29":2,"30":2,"31":2,"32":2,"33":2,"34":2,"35":1,"36":1,"37":1,"38":2,"39":2,"40":2,"41":2,"42":2,"43":0,"44":2,"45":0,"46":1},"f":{"0":2,"1":8,"2":6,"3":2,"4":8,"5":0,"6":10,"7":1,"8":2,"9":2},"b":{"0":[1,1,1],"1":[2,6],"2":[2,2],"3":[2,8],"4":[2,2],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[2,0],"9":[1,1],"10":[1,0],"11":[0,2],"12":[2,2],"13":[0,2]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/helper/marginUpdateUserPosition.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/helper/marginUpdateUserPosition.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport Big from \"big.js\";\r\nimport { Order, User } from \"../../DB/db\";\r\nimport { ifUserPosition } from \"../../helper/interface\";\r\nimport { getLoop, loopFillAmount } from \"./getLoop\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function marginUpdateUserPosition(getOrderDetails: any, getPairDetails: any, fillAmount: any) {\r\n    try {\r\n\r\n        let userPositionToken0 = await User.findOne({ id: getOrderDetails.maker, token: getOrderDetails.token0 }).lean()! as any\r\n        let userPositionToken1 = await User.findOne({ id: getOrderDetails.maker, token: getOrderDetails.token1 }).lean()! as any\r\n\r\n        let totalFillAmount = Big(getOrderDetails.fillAmount).plus(fillAmount).toString();\r\n        let orderAmount = getOrderDetails.amount;\r\n        let borrowLimit = getOrderDetails.borrowLimit;\r\n\r\n        let currentLoop = getLoop(totalFillAmount, borrowLimit, orderAmount);\r\n\r\n        let amountToFill = loopFillAmount(orderAmount, borrowLimit, Math.ceil(+currentLoop).toString())\r\n\r\n        let token0Balance = \"0\";\r\n        let token1Balance = \"0\";\r\n        let fillPercent = \"0.\" + currentLoop.split('.')[1]\r\n        if (Number(fillPercent) > 0) {\r\n            token0Balance = Big(Big(1).minus(fillPercent)).times(amountToFill).toString();\r\n            token1Balance = Big(fillPercent).times(amountToFill).times(Big(getOrderDetails.exchangeRate).div(Big(10).pow(18))).toString()\r\n        }\r\n\r\n        if (getOrderDetails.orderType == 2) {\r\n\r\n            if (Number(fillPercent) > 0) {\r\n                token0Balance = Big(fillPercent).times(amountToFill).toString();\r\n                token1Balance = Big(Big(1).minus(fillPercent)).times(amountToFill).times(Big(getOrderDetails.exchangeRate).div(Big(10).pow(18))).toString()\r\n            }\r\n        }\r\n\r\n        // updating userInOrder Balance \r\n        let token0InOrder = Big(userPositionToken0?.inOrderBalance).minus(getOrderDetails.lastInOrderToken0).plus(token0Balance).toString();\r\n        let token1InOrder = Big(userPositionToken1.inOrderBalance).minus(getOrderDetails.lastInOrderToken1).plus(token1Balance).toString();\r\n        let currentBalnce = Big(getOrderDetails.balanceAmount).minus(fillAmount)\r\n        await Promise.all(\r\n            [\r\n                User.findOneAndUpdate(\r\n                    { _id: userPositionToken0._id },\r\n                    { $set: { inOrderBalance: token0InOrder } }\r\n                ),\r\n\r\n                User.findOneAndUpdate(\r\n                    { _id: userPositionToken1._id },\r\n                    { $set: { inOrderBalance: token1InOrder } }\r\n                )\r\n            ]\r\n        )\r\n\r\n        if (Number(currentBalnce) < Number(getPairDetails.minToken0Order)) {\r\n            await Order.findOneAndUpdate({ _id: getOrderDetails._id.toString() },\r\n                { $set: { deleted: true, active: false, balanceAmount: currentBalnce, lastInOrderToken0: token0Balance, lastInOrderToken1: token1Balance, fillAmount: totalFillAmount } });\r\n        }\r\n        else {\r\n            await Order.findOneAndUpdate(\r\n                { _id: getOrderDetails._id.toString() },\r\n                { $set: { lastInOrderToken0: token0Balance, lastInOrderToken1: token1Balance, fillAmount: totalFillAmount, balanceAmount: currentBalnce } }\r\n            );\r\n        }\r\n    }\r\n    catch (error) {\r\n        console.log(`Error @ marginUpdateUserPosition`)\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c35d0a023a2f43f7d568ce343839a9e1f3f65e7b","contentHash":"3737555fc0737990ca13962bae2ef6fa770e4a02172474027e764354885f0920"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\helper\\getLoop.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\helper\\getLoop.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":50}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":51}},"5":{"start":{"line":9,"column":4},"end":{"line":11,"column":5}},"6":{"start":{"line":9,"column":17},"end":{"line":9,"column":18}},"7":{"start":{"line":10,"column":8},"end":{"line":10,"column":90}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":18}},"9":{"start":{"line":14,"column":0},"end":{"line":14,"column":40}},"10":{"start":{"line":16,"column":4},"end":{"line":16,"column":73}},"11":{"start":{"line":17,"column":16},"end":{"line":18,"column":238}},"12":{"start":{"line":19,"column":15},"end":{"line":19,"column":124}},"13":{"start":{"line":20,"column":4},"end":{"line":20,"column":16}},"14":{"start":{"line":22,"column":0},"end":{"line":22,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"loopFillAmount","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":23}},"loc":{"start":{"line":8,"column":51},"end":{"line":13,"column":1}},"line":8},"2":{"name":"getLoop","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":16}},"loc":{"start":{"line":15,"column":53},"end":{"line":21,"column":1}},"line":15}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":8,"8":2,"9":1,"10":2,"11":2,"12":2,"13":2,"14":1},"f":{"0":1,"1":2,"2":2},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/helper/getLoop.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/helper/getLoop.ts"],"names":[],"mappings":";;;;;;AAAA,oDAAyB;AAWzB,SAAgB,cAAc,CAAC,MAAc,EAAE,WAAgB,EAAE,IAAS;IAEtE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;QAC3B,MAAM,GAAG,IAAA,gBAAG,EAAC,MAAM,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;KACnE;IACD,OAAO,MAAM,CAAC;AAClB,CAAC;AAND,wCAMC;AAMD,SAAgB,OAAO,CAAC,QAAe,EAAC,WAAmB,EAAC,WAAmB;IAE3E,WAAW,GAAG,IAAA,gBAAG,EAAC,WAAW,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;IACnD,IAAI,KAAK,GAAG,IAAA,gBAAG,EACX,IAAA,gBAAG,EAAC,CAAC,CAAC,CAAC;SACF,KAAK,CACF,IAAA,gBAAG,EAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,IAAA,gBAAG,EAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAC5C,CAAC,IAAI,CACF,IAAA,gBAAG,EAAC,WAAW,CAAC,CAAC,KAAK,CAAC,IAAA,gBAAG,EAAC,CAAC,CAAC,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CACpD,CAAC,KAAK,CAAC,WAAW,CAAC,CACvB,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,QAAQ,EAAE,CAAA;IAEtC,IAAI,IAAI,GAAG,IAAA,gBAAG,EAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,IAAI,CAAC,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;IAErF,OAAO,IAAI,CAAA;AACf,CAAC;AAfD,0BAeC;AAGD,+BAA+B;AAC/B,4DAA4D;AAC5D,0BAA0B;AAC1B,iBAAiB","sourcesContent":["import Big from \"big.js\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function loopFillAmount(amount: string, borrowLimit: any, loop: any) {\r\n\r\n    for (let i = 0; i < loop; i++) {\r\n        amount = Big(amount).times(borrowLimit).div(10 ** 6).toString();\r\n    }\r\n    return amount;\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport function getLoop(totalSum:string,borrowLimit: string,orderAmount: string){\r\n\r\n    borrowLimit = Big(borrowLimit).div(1e6).toString();\r\n    let temp1 = Big(\r\n        Big(-1)\r\n            .times(\r\n                Big(totalSum).times(Big(1).minus(borrowLimit)\r\n                ).plus(\r\n                    Big(orderAmount).times(Big(1).minus(borrowLimit))\r\n                ).minus(orderAmount)\r\n            )).div(orderAmount).toNumber()\r\n    \r\n    let loop = Big(Math.log(temp1)).div(Big(Math.log(+borrowLimit))).minus(1).toString();\r\n\r\n    return loop\r\n}\r\n\r\n\r\n// formula for calculating loop\r\n// let temp = Math.log(-(s * (1 - x) + a * (1 - x) - a) / a)\r\n// n = temp / Math.log(x);\r\n// console.log(n)\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"933c23f99e54f0e76dc310a1a181dd1742185e23","contentHash":"6e7ec2f540dd8022f0cd0bbfd247c6fe3fb4952afc9e295497f004e5b9e17a44"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\getDecimal.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\getDecimal.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":51}},"5":{"start":{"line":10,"column":35},"end":{"line":10,"column":37}},"6":{"start":{"line":11,"column":12},"end":{"line":11,"column":108}},"7":{"start":{"line":12,"column":4},"end":{"line":17,"column":5}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":144}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":37}},"10":{"start":{"line":18,"column":19},"end":{"line":18,"column":53}},"11":{"start":{"line":20,"column":4},"end":{"line":25,"column":5}},"12":{"start":{"line":21,"column":8},"end":{"line":21,"column":33}},"13":{"start":{"line":23,"column":9},"end":{"line":25,"column":5}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":33}},"15":{"start":{"line":26,"column":17},"end":{"line":26,"column":18}},"16":{"start":{"line":27,"column":4},"end":{"line":34,"column":5}},"17":{"start":{"line":27,"column":17},"end":{"line":27,"column":18}},"18":{"start":{"line":28,"column":8},"end":{"line":33,"column":9}},"19":{"start":{"line":29,"column":12},"end":{"line":29,"column":21}},"20":{"start":{"line":32,"column":12},"end":{"line":32,"column":18}},"21":{"start":{"line":35,"column":22},"end":{"line":35,"column":23}},"22":{"start":{"line":36,"column":4},"end":{"line":43,"column":5}},"23":{"start":{"line":36,"column":17},"end":{"line":36,"column":18}},"24":{"start":{"line":37,"column":8},"end":{"line":42,"column":9}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":26}},"26":{"start":{"line":41,"column":12},"end":{"line":41,"column":18}},"27":{"start":{"line":44,"column":4},"end":{"line":61,"column":5}},"28":{"start":{"line":45,"column":8},"end":{"line":45,"column":65}},"29":{"start":{"line":47,"column":9},"end":{"line":61,"column":5}},"30":{"start":{"line":48,"column":8},"end":{"line":48,"column":36}},"31":{"start":{"line":51,"column":8},"end":{"line":51,"column":42}},"32":{"start":{"line":52,"column":8},"end":{"line":59,"column":9}},"33":{"start":{"line":52,"column":21},"end":{"line":52,"column":22}},"34":{"start":{"line":53,"column":12},"end":{"line":58,"column":13}},"35":{"start":{"line":54,"column":16},"end":{"line":54,"column":25}},"36":{"start":{"line":56,"column":17},"end":{"line":58,"column":13}},"37":{"start":{"line":57,"column":16},"end":{"line":57,"column":73}},"38":{"start":{"line":60,"column":8},"end":{"line":60,"column":36}},"39":{"start":{"line":63,"column":0},"end":{"line":63,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"getDecimals","decl":{"start":{"line":8,"column":9},"end":{"line":8,"column":20}},"loc":{"start":{"line":8,"column":35},"end":{"line":62,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":12,"column":4},"end":{"line":17,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":17,"column":5}},{"start":{"line":12,"column":4},"end":{"line":17,"column":5}}],"line":12},"4":{"loc":{"start":{"line":20,"column":4},"end":{"line":25,"column":5}},"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":25,"column":5}},{"start":{"line":20,"column":4},"end":{"line":25,"column":5}}],"line":20},"5":{"loc":{"start":{"line":23,"column":9},"end":{"line":25,"column":5}},"type":"if","locations":[{"start":{"line":23,"column":9},"end":{"line":25,"column":5}},{"start":{"line":23,"column":9},"end":{"line":25,"column":5}}],"line":23},"6":{"loc":{"start":{"line":23,"column":13},"end":{"line":23,"column":64}},"type":"binary-expr","locations":[{"start":{"line":23,"column":13},"end":{"line":23,"column":26}},{"start":{"line":23,"column":30},"end":{"line":23,"column":64}}],"line":23},"7":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":149}},"type":"cond-expr","locations":[{"start":{"line":27,"column":143},"end":{"line":27,"column":145}},{"start":{"line":27,"column":148},"end":{"line":27,"column":149}}],"line":27},"8":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":140}},"type":"binary-expr","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":123}},{"start":{"line":27,"column":127},"end":{"line":27,"column":140}}],"line":27},"9":{"loc":{"start":{"line":27,"column":31},"end":{"line":27,"column":112}},"type":"cond-expr","locations":[{"start":{"line":27,"column":94},"end":{"line":27,"column":100}},{"start":{"line":27,"column":103},"end":{"line":27,"column":112}}],"line":27},"10":{"loc":{"start":{"line":27,"column":31},"end":{"line":27,"column":91}},"type":"binary-expr","locations":[{"start":{"line":27,"column":31},"end":{"line":27,"column":74}},{"start":{"line":27,"column":78},"end":{"line":27,"column":91}}],"line":27},"11":{"loc":{"start":{"line":28,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":33,"column":9}},{"start":{"line":28,"column":8},"end":{"line":33,"column":9}}],"line":28},"12":{"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":149}},"type":"cond-expr","locations":[{"start":{"line":36,"column":143},"end":{"line":36,"column":145}},{"start":{"line":36,"column":148},"end":{"line":36,"column":149}}],"line":36},"13":{"loc":{"start":{"line":36,"column":20},"end":{"line":36,"column":140}},"type":"binary-expr","locations":[{"start":{"line":36,"column":20},"end":{"line":36,"column":123}},{"start":{"line":36,"column":127},"end":{"line":36,"column":140}}],"line":36},"14":{"loc":{"start":{"line":36,"column":31},"end":{"line":36,"column":112}},"type":"cond-expr","locations":[{"start":{"line":36,"column":94},"end":{"line":36,"column":100}},{"start":{"line":36,"column":103},"end":{"line":36,"column":112}}],"line":36},"15":{"loc":{"start":{"line":36,"column":31},"end":{"line":36,"column":91}},"type":"binary-expr","locations":[{"start":{"line":36,"column":31},"end":{"line":36,"column":74}},{"start":{"line":36,"column":78},"end":{"line":36,"column":91}}],"line":36},"16":{"loc":{"start":{"line":37,"column":8},"end":{"line":42,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":42,"column":9}},{"start":{"line":37,"column":8},"end":{"line":42,"column":9}}],"line":37},"17":{"loc":{"start":{"line":44,"column":4},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":44,"column":4},"end":{"line":61,"column":5}},{"start":{"line":44,"column":4},"end":{"line":61,"column":5}}],"line":44},"18":{"loc":{"start":{"line":44,"column":8},"end":{"line":44,"column":101}},"type":"binary-expr","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":28}},{"start":{"line":44,"column":33},"end":{"line":44,"column":62}},{"start":{"line":44,"column":66},"end":{"line":44,"column":100}}],"line":44},"19":{"loc":{"start":{"line":47,"column":9},"end":{"line":61,"column":5}},"type":"if","locations":[{"start":{"line":47,"column":9},"end":{"line":61,"column":5}},{"start":{"line":47,"column":9},"end":{"line":61,"column":5}}],"line":47},"20":{"loc":{"start":{"line":47,"column":13},"end":{"line":47,"column":99}},"type":"binary-expr","locations":[{"start":{"line":47,"column":13},"end":{"line":47,"column":33}},{"start":{"line":47,"column":37},"end":{"line":47,"column":66}},{"start":{"line":47,"column":70},"end":{"line":47,"column":99}}],"line":47},"21":{"loc":{"start":{"line":52,"column":24},"end":{"line":52,"column":153}},"type":"cond-expr","locations":[{"start":{"line":52,"column":147},"end":{"line":52,"column":149}},{"start":{"line":52,"column":152},"end":{"line":52,"column":153}}],"line":52},"22":{"loc":{"start":{"line":52,"column":24},"end":{"line":52,"column":144}},"type":"binary-expr","locations":[{"start":{"line":52,"column":24},"end":{"line":52,"column":127}},{"start":{"line":52,"column":131},"end":{"line":52,"column":144}}],"line":52},"23":{"loc":{"start":{"line":52,"column":35},"end":{"line":52,"column":116}},"type":"cond-expr","locations":[{"start":{"line":52,"column":98},"end":{"line":52,"column":104}},{"start":{"line":52,"column":107},"end":{"line":52,"column":116}}],"line":52},"24":{"loc":{"start":{"line":52,"column":35},"end":{"line":52,"column":95}},"type":"binary-expr","locations":[{"start":{"line":52,"column":35},"end":{"line":52,"column":78}},{"start":{"line":52,"column":82},"end":{"line":52,"column":95}}],"line":52},"25":{"loc":{"start":{"line":53,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":58,"column":13}},{"start":{"line":53,"column":12},"end":{"line":58,"column":13}}],"line":53},"26":{"loc":{"start":{"line":56,"column":17},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":56,"column":17},"end":{"line":58,"column":13}},{"start":{"line":56,"column":17},"end":{"line":58,"column":13}}],"line":56}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":11,"6":11,"7":11,"8":0,"9":11,"10":11,"11":11,"12":11,"13":0,"14":0,"15":11,"16":11,"17":11,"18":0,"19":0,"20":0,"21":11,"22":11,"23":11,"24":0,"25":0,"26":0,"27":11,"28":0,"29":11,"30":11,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1},"f":{"0":1,"1":11},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,11],"4":[11,0],"5":[0,0],"6":[0,0],"7":[11,0],"8":[11,11],"9":[11,0],"10":[11,11],"11":[0,0],"12":[11,0],"13":[11,11],"14":[11,0],"15":[11,11],"16":[0,0],"17":[0,11],"18":[11,11,11],"19":[11,0],"20":[11,11,11],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/getDecimal.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/getDecimal.ts"],"names":[],"mappings":";;;;;;AAAA,oDAAyB;AASzB,SAAgB,WAAW,CAAC,YAAoB;;IAC5C,IAAI,wBAAwB,GAAa,EAAE,CAAC;IAC5C,IAAI,CAAC,GAAG,IAAA,gBAAG,EAAC,YAAY,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IAErE,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;QACd,wBAAwB,GAAG,IAAA,gBAAG,EAAC,YAAY,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACvG;SACI;QACD,wBAAwB,GAAG,CAAC,CAAC;KAChC;IAED,IAAI,QAAQ,GAAG,wBAAwB,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;IAClD,IAAI,oBAAoB,CAAC;IACzB,IAAI,QAAQ,IAAI,CAAC,EAAE;QACf,oBAAoB,GAAG,CAAC,CAAC;KAC5B;SACI,IAAI,QAAQ,IAAI,CAAC,IAAI,wBAAwB,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE;QAC1D,oBAAoB,GAAG,CAAC,CAAC;KAC5B;IAED,IAAI,MAAM,GAAG,CAAC,CAAC;IAEf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,MAAA,CAAC,IAAG,MAAA,wBAAwB,CAAC,CAAC,CAAC,0CAAE,MAAM,CAAA,mCAAI,CAAC,EAAE,CAAC,EAAE,EAAE;QAC/D,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE;YACvC,MAAM,EAAE,CAAC;SACZ;aACI;YACD,MAAM;SACT;KACJ;IAED,IAAI,WAAW,GAAG,CAAC,CAAC;IAEpB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,MAAA,CAAC,IAAG,MAAA,wBAAwB,CAAC,CAAC,CAAC,0CAAE,MAAM,CAAA,mCAAI,CAAC,EAAE,CAAC,EAAE,EAAE;QAC/D,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE;YACvC,WAAW,EAAE,CAAC;SACjB;aACI;YACD,MAAM;SACT;KACJ;IAED,IAAI,oBAAoB,IAAI,CAAC,MAAM,GAAG,oBAAoB,IAAI,WAAW,GAAG,oBAAoB,CAAC,EAAE;QAE/F,OAAO,QAAQ,oBAAoB,qBAAqB,CAAC;KAE5D;SACI,IAAI,oBAAoB,IAAI,MAAM,GAAG,oBAAoB,IAAI,MAAM,GAAG,oBAAoB,EAAE;QAC7F,OAAO,oBAAoB,CAAC;KAC/B;SACI;QACD,oBAAoB,GAAG,MAAM,GAAG,CAAC,CAAC;QAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,MAAA,CAAC,IAAG,MAAA,wBAAwB,CAAC,CAAC,CAAC,0CAAE,MAAM,CAAA,mCAAI,CAAC,EAAE,CAAC,EAAE,EAAE;YAC/D,IAAI,CAAC,IAAI,oBAAoB,GAAG,CAAC,EAAE;gBAC/B,SAAS;aACZ;iBACI,IAAI,wBAAwB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE;gBAC5C,OAAO,QAAQ,oBAAoB,qBAAqB,CAAC;aAC5D;SAEJ;QACD,OAAO,oBAAoB,CAAC;KAC/B;AAEL,CAAC;AAhED,kCAgEC","sourcesContent":["import Big from \"big.js\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport function getDecimals(exchangeRate: string) {\r\n    let findExchangeRateDecimals: string[] = [];\r\n    let a = Big(exchangeRate).div(Big(10).pow(18)).toString().split(\".\");\r\n\r\n    if (a.length > 1) {\r\n        findExchangeRateDecimals = Big(exchangeRate).div(Big(10).pow(18)).toFixed(20).toString().split(\".\");\r\n    }\r\n    else {\r\n        findExchangeRateDecimals = a;\r\n    }\r\n\r\n    let countInt = findExchangeRateDecimals[0].length;\r\n    let exchangeRateDecimals;\r\n    if (countInt >= 4) {\r\n        exchangeRateDecimals = 2;\r\n    }\r\n    else if (countInt >= 1 && findExchangeRateDecimals[0] != '0') {\r\n        exchangeRateDecimals = 3;\r\n    }\r\n\r\n    let count0 = 0;\r\n\r\n    for (let i = 0; i < findExchangeRateDecimals[1]?.length ?? 0; i++) {\r\n        if (findExchangeRateDecimals[1][i] == '0') {\r\n            count0++;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    let countDecInt = 0;\r\n\r\n    for (let i = 0; i < findExchangeRateDecimals[1]?.length ?? 0; i++) {\r\n        if (findExchangeRateDecimals[1][i] != '0') {\r\n            countDecInt++;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (exchangeRateDecimals && (count0 > exchangeRateDecimals || countDecInt > exchangeRateDecimals)) {\r\n\r\n        return `only ${exchangeRateDecimals} decimal acceptable`;\r\n\r\n    }\r\n    else if (exchangeRateDecimals && count0 < exchangeRateDecimals && count0 < exchangeRateDecimals) {\r\n        return exchangeRateDecimals;\r\n    }\r\n    else {\r\n        exchangeRateDecimals = count0 + 4;\r\n        for (let i = 0; i < findExchangeRateDecimals[1]?.length ?? 0; i++) {\r\n            if (i <= exchangeRateDecimals - 1) {\r\n                continue;\r\n            }\r\n            else if (findExchangeRateDecimals[1][i] != '0') {\r\n                return `only ${exchangeRateDecimals} decimal acceptable`;\r\n            }\r\n\r\n        }\r\n        return exchangeRateDecimals;\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d0b71a7d0ebfbae24c7021901a7215be9a9c41ee","contentHash":"ef9ff6654faafd3465298de25a18cdccfef46bda383a46571b2d02aa9a28745a"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\DblackListToken.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\DblackListToken.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":15,"column":0},"end":{"line":15,"column":62}},"15":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"16":{"start":{"line":17,"column":15},"end":{"line":17,"column":30}},"17":{"start":{"line":18,"column":20},"end":{"line":18,"column":57}},"18":{"start":{"line":19,"column":17},"end":{"line":19,"column":34}},"19":{"start":{"line":20,"column":16},"end":{"line":20,"column":45}},"20":{"start":{"line":21,"column":16},"end":{"line":21,"column":44}},"21":{"start":{"line":22,"column":15},"end":{"line":22,"column":47}},"22":{"start":{"line":23,"column":19},"end":{"line":23,"column":51}},"23":{"start":{"line":24,"column":0},"end":{"line":24,"column":37}},"24":{"start":{"line":25,"column":0},"end":{"line":25,"column":185}},"25":{"start":{"line":26,"column":0},"end":{"line":116,"column":4}},"26":{"start":{"line":26,"column":87},"end":{"line":116,"column":2}},"27":{"start":{"line":28,"column":18},"end":{"line":28,"column":26}},"28":{"start":{"line":29,"column":19},"end":{"line":29,"column":52}},"29":{"start":{"line":30,"column":16},"end":{"line":30,"column":130}},"30":{"start":{"line":31,"column":21},"end":{"line":31,"column":23}},"31":{"start":{"line":32,"column":17},"end":{"line":32,"column":19}},"32":{"start":{"line":33,"column":4},"end":{"line":35,"column":8}},"33":{"start":{"line":33,"column":17},"end":{"line":35,"column":6}},"34":{"start":{"line":36,"column":4},"end":{"line":75,"column":8}},"35":{"start":{"line":36,"column":46},"end":{"line":75,"column":6}},"36":{"start":{"line":37,"column":23},"end":{"line":42,"column":9}},"37":{"start":{"line":44,"column":22},"end":{"line":49,"column":9}},"38":{"start":{"line":51,"column":22},"end":{"line":54,"column":9}},"39":{"start":{"line":55,"column":8},"end":{"line":55,"column":27}},"40":{"start":{"line":57,"column":32},"end":{"line":57,"column":80}},"41":{"start":{"line":58,"column":8},"end":{"line":58,"column":41}},"42":{"start":{"line":62,"column":18},"end":{"line":69,"column":10}},"43":{"start":{"line":70,"column":8},"end":{"line":70,"column":30}},"44":{"start":{"line":71,"column":8},"end":{"line":71,"column":52}},"45":{"start":{"line":72,"column":8},"end":{"line":72,"column":62}},"46":{"start":{"line":73,"column":8},"end":{"line":73,"column":56}},"47":{"start":{"line":74,"column":8},"end":{"line":74,"column":80}},"48":{"start":{"line":76,"column":4},"end":{"line":115,"column":8}},"49":{"start":{"line":76,"column":48},"end":{"line":115,"column":6}},"50":{"start":{"line":77,"column":23},"end":{"line":82,"column":9}},"51":{"start":{"line":84,"column":22},"end":{"line":89,"column":9}},"52":{"start":{"line":91,"column":22},"end":{"line":94,"column":9}},"53":{"start":{"line":95,"column":8},"end":{"line":95,"column":27}},"54":{"start":{"line":97,"column":32},"end":{"line":97,"column":80}},"55":{"start":{"line":98,"column":8},"end":{"line":98,"column":41}},"56":{"start":{"line":102,"column":18},"end":{"line":109,"column":10}},"57":{"start":{"line":110,"column":8},"end":{"line":110,"column":30}},"58":{"start":{"line":111,"column":8},"end":{"line":111,"column":52}},"59":{"start":{"line":112,"column":8},"end":{"line":112,"column":62}},"60":{"start":{"line":113,"column":8},"end":{"line":113,"column":56}},"61":{"start":{"line":114,"column":8},"end":{"line":114,"column":72}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":81},"end":{"line":26,"column":82}},"loc":{"start":{"line":26,"column":87},"end":{"line":116,"column":2}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":26,"column":121},"end":{"line":26,"column":122}},"loc":{"start":{"line":26,"column":134},"end":{"line":116,"column":1}},"line":26},"10":{"name":"(anonymous_10)","decl":{"start":{"line":33,"column":11},"end":{"line":33,"column":12}},"loc":{"start":{"line":33,"column":17},"end":{"line":35,"column":6}},"line":33},"11":{"name":"(anonymous_11)","decl":{"start":{"line":33,"column":51},"end":{"line":33,"column":52}},"loc":{"start":{"line":33,"column":64},"end":{"line":35,"column":5}},"line":33},"12":{"name":"(anonymous_12)","decl":{"start":{"line":36,"column":40},"end":{"line":36,"column":41}},"loc":{"start":{"line":36,"column":46},"end":{"line":75,"column":6}},"line":36},"13":{"name":"(anonymous_13)","decl":{"start":{"line":36,"column":80},"end":{"line":36,"column":81}},"loc":{"start":{"line":36,"column":93},"end":{"line":75,"column":5}},"line":36},"14":{"name":"(anonymous_14)","decl":{"start":{"line":76,"column":42},"end":{"line":76,"column":43}},"loc":{"start":{"line":76,"column":48},"end":{"line":115,"column":6}},"line":76},"15":{"name":"(anonymous_15)","decl":{"start":{"line":76,"column":82},"end":{"line":76,"column":83}},"loc":{"start":{"line":76,"column":95},"end":{"line":115,"column":5}},"line":76}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":25,"column":71},"end":{"line":25,"column":180}},"type":"cond-expr","locations":[{"start":{"line":25,"column":160},"end":{"line":25,"column":171}},{"start":{"line":25,"column":174},"end":{"line":25,"column":180}}],"line":25},"9":{"loc":{"start":{"line":25,"column":72},"end":{"line":25,"column":156}},"type":"cond-expr","locations":[{"start":{"line":25,"column":128},"end":{"line":25,"column":134}},{"start":{"line":25,"column":137},"end":{"line":25,"column":156}}],"line":25},"10":{"loc":{"start":{"line":25,"column":72},"end":{"line":25,"column":125}},"type":"binary-expr","locations":[{"start":{"line":25,"column":72},"end":{"line":25,"column":108}},{"start":{"line":25,"column":112},"end":{"line":25,"column":125}}],"line":25}},"s":{"0":1,"1":4,"2":2,"3":4,"4":4,"5":4,"6":0,"7":0,"8":0,"9":0,"10":8,"11":4,"12":1,"13":2,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1},"f":{"0":4,"1":4,"2":2,"3":4,"4":4,"5":0,"6":8,"7":2,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1},"b":{"0":[1,1,1],"1":[2,2],"2":[4,4],"3":[4,4],"4":[4,4],"5":[1,1,1],"6":[0,2],"7":[2,2],"8":[0,1],"9":[0,1],"10":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/DblackListToken.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/DblackListToken.ts"],"names":[],"mappings":"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","sourcesContent":["\r\n\r\n\r\n\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { ethers } from \"ethers\";\r\nimport { connect } from \"../../DB/db\";\r\nimport { getExchangeAddress, getVersion } from \"../../helper/chain\";\r\nimport { ifOrderCreated } from \"../../helper/interface\";\r\nimport { getProvider } from \"../../utils/utils\";\r\nimport path from \"path\";\r\nimport { getConfig, getContractAddress } from \"../../helper/constant\";\r\nuse(chaiHttp);\r\nrequire(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\n\r\n\r\n\r\ndescribe(\"Limit Order => Mint token, create order, execute order, cancel order\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let provider = getProvider(chainId);\r\n    let user1 = new ethers.Wallet(\"0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80\").connect(provider); //1 \r\n    let signatures: any[] = [];\r\n    let orders: any[] = [];\r\n\r\n    before(async () => {\r\n        // await connect()\r\n    });\r\n\r\n\r\n    it(`Add link address in blacklist`, async () => {\r\n\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getVersion(process.env.NODE_ENV!),\r\n            chainId: chainId.toString(),\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Request: [\r\n                { name: 'token', type: 'address' },\r\n                { name: 'blackList', type: 'uint8' },\r\n            ]\r\n        };\r\n\r\n        // The data to sign\r\n        const value = {\r\n            token: getContractAddress(\"LINK\"),\r\n            blackList: 0\r\n        };\r\n\r\n        orders.push(value);\r\n        // sign typed data\r\n        const storedSignature = await user1._signTypedData(\r\n            domain,\r\n            types,\r\n            value\r\n        );\r\n        signatures.push(storedSignature);\r\n        // console.log([\r\n        //     value, storedSignature\r\n        // ]);\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .put(`/v/${getVersion(process.env.NODE_ENV!)}/pair/blacklist `)\r\n            .send(\r\n                {\r\n                    \"token\": getContractAddress(\"LINK\"),\r\n                    \"blackList\": 0,\r\n                    \"signature\": storedSignature.toLowerCase(),\r\n                    \"chainId\": chainId\r\n                }\r\n            );\r\n\r\n\r\n        console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.status).to.be.equal(true);\r\n        expect(res.body).to.be.an('object');\r\n        expect(res.body.message).to.have.string(\"Token Deactivate\");\r\n\r\n    });\r\n    it(`Remove Linktoken from blacklist`, async () => {\r\n\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getVersion(process.env.NODE_ENV!),\r\n            chainId: chainId.toString(),\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Request: [\r\n                { name: 'token', type: 'address' },\r\n                { name: 'blackList', type: 'uint8' },\r\n            ]\r\n        };\r\n\r\n        // The data to sign\r\n        const value = {\r\n            token: getContractAddress(\"LINK\"),\r\n            blackList: 1\r\n        };\r\n\r\n        orders.push(value);\r\n        // sign typed data\r\n        const storedSignature = await user1._signTypedData(\r\n            domain,\r\n            types,\r\n            value\r\n        );\r\n        signatures.push(storedSignature);\r\n        // console.log([\r\n        //     value, storedSignature\r\n        // ]);\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .put(`/v/${getVersion(process.env.NODE_ENV!)}/pair/blacklist `)\r\n            .send(\r\n                {\r\n                    \"token\": getContractAddress(\"LINK\"),\r\n                    \"blackList\": 1,\r\n                    \"signature\": storedSignature.toLowerCase(),\r\n                    \"chainId\": chainId\r\n                }\r\n            );\r\n\r\n\r\n        console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.status).to.be.equal(true);\r\n        expect(res.body).to.be.an('object');\r\n        expect(res.body.message).to.equal(\"Token Activate\")\r\n\r\n\r\n    });\r\n\r\n\r\n\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ba175826896e1d43f1153069fcce8743a2bca925","contentHash":"1796cdc068f48ee44c99963c76a713d6c8fe2dd492d0af4863d41bbeb87a3e04"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\handleMinTokenAmountSet.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\handleMinTokenAmountSet.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":13},"end":{"line":12,"column":35}},"14":{"start":{"line":13,"column":34},"end":{"line":13,"column":83}},"15":{"start":{"line":14,"column":15},"end":{"line":14,"column":30}},"16":{"start":{"line":15,"column":19},"end":{"line":15,"column":51}},"17":{"start":{"line":17,"column":0},"end":{"line":48,"column":4}},"18":{"start":{"line":17,"column":75},"end":{"line":48,"column":2}},"19":{"start":{"line":18,"column":26},"end":{"line":18,"column":29}},"20":{"start":{"line":20,"column":4},"end":{"line":22,"column":7}},"21":{"start":{"line":21,"column":8},"end":{"line":21,"column":15}},"22":{"start":{"line":23,"column":4},"end":{"line":47,"column":8}},"23":{"start":{"line":23,"column":79},"end":{"line":47,"column":6}},"24":{"start":{"line":24,"column":27},"end":{"line":24,"column":68}},"25":{"start":{"line":25,"column":23},"end":{"line":25,"column":34}},"26":{"start":{"line":27,"column":30},"end":{"line":27,"column":81}},"27":{"start":{"line":28,"column":8},"end":{"line":28,"column":57}},"28":{"start":{"line":29,"column":19},"end":{"line":29,"column":41}},"29":{"start":{"line":30,"column":8},"end":{"line":30,"column":75}},"30":{"start":{"line":32,"column":34},"end":{"line":32,"column":95}},"31":{"start":{"line":33,"column":8},"end":{"line":33,"column":82}},"32":{"start":{"line":35,"column":23},"end":{"line":35,"column":88}},"33":{"start":{"line":36,"column":8},"end":{"line":38,"column":11}},"34":{"start":{"line":37,"column":12},"end":{"line":37,"column":61}},"35":{"start":{"line":40,"column":8},"end":{"line":40,"column":100}},"36":{"start":{"line":41,"column":35},"end":{"line":41,"column":96}},"37":{"start":{"line":42,"column":8},"end":{"line":42,"column":90}},"38":{"start":{"line":43,"column":24},"end":{"line":43,"column":89}},"39":{"start":{"line":44,"column":8},"end":{"line":46,"column":11}},"40":{"start":{"line":45,"column":12},"end":{"line":45,"column":68}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":17,"column":69},"end":{"line":17,"column":70}},"loc":{"start":{"line":17,"column":75},"end":{"line":48,"column":2}},"line":17},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":109},"end":{"line":17,"column":110}},"loc":{"start":{"line":17,"column":122},"end":{"line":48,"column":1}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":20,"column":10},"end":{"line":20,"column":11}},"loc":{"start":{"line":20,"column":18},"end":{"line":22,"column":5}},"line":20},"10":{"name":"(anonymous_10)","decl":{"start":{"line":23,"column":73},"end":{"line":23,"column":74}},"loc":{"start":{"line":23,"column":79},"end":{"line":47,"column":6}},"line":23},"11":{"name":"(anonymous_11)","decl":{"start":{"line":23,"column":113},"end":{"line":23,"column":114}},"loc":{"start":{"line":23,"column":126},"end":{"line":47,"column":5}},"line":23},"12":{"name":"(anonymous_12)","decl":{"start":{"line":36,"column":25},"end":{"line":36,"column":26}},"loc":{"start":{"line":36,"column":32},"end":{"line":38,"column":9}},"line":36},"13":{"name":"(anonymous_13)","decl":{"start":{"line":44,"column":26},"end":{"line":44,"column":27}},"loc":{"start":{"line":44,"column":33},"end":{"line":46,"column":9}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8}},"s":{"0":1,"1":7,"2":5,"3":2,"4":7,"5":7,"6":0,"7":0,"8":0,"9":0,"10":9,"11":2,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1},"f":{"0":2,"1":7,"2":5,"3":2,"4":7,"5":0,"6":9,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"b":{"0":[1,1,1],"1":[2,5],"2":[2,2],"3":[2,7],"4":[2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/handleMinTokenAmountSet.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/handleMinTokenAmountSet.ts"],"names":[],"mappings":";;;;;;;;;;;AACA,oCAAmD;AACnD,oFAAiF;AACjF,+BAA8B;AAC9B,oDAA2D;AAG3D,wFAAwF;AAExF,QAAQ,CAAC,0DAA0D,EAAE,GAAS,EAAE;IAC5E,IAAI,eAAe,GAAG,GAAG,CAAA;IACzB,mBAAmB;IACnB,KAAK,CAAC,IAAI,CAAC,EAAE;QAET,IAAI,EAAE,CAAA;IACV,CAAC,CAAC,CAAA;IACF,EAAE,CAAC,gEAAgE,EAAE,GAAS,EAAE;QAE5E,MAAM,UAAU,GAAG,IAAA,6BAAkB,EAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,QAAQ,GAAG,WAAW,CAAC;QAE3B,wBAAwB;QAExB,IAAI,eAAe,GAAG,MAAM,UAAK,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,CAAC,IAAI,EAAU,CAAA;QAC5E,eAAe,GAAG,eAAe,CAAC,cAAc,CAAC;QACjD,IAAI,IAAI,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAA;QACjC,MAAM,IAAA,iDAAuB,EAAC,IAAI,CAAC,CAAC;QAEpC,mCAAmC;QAEnC,IAAI,mBAAmB,GAAG,MAAM,UAAK,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,eAAe,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,EAAU,CAAA;QAE1F,IAAA,aAAM,EAAC,mBAAmB,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAE9D,8CAA8C;QAE9C,IAAI,QAAQ,GAAG,MAAM,SAAI,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;QAE5E,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;YACnB,IAAA,aAAM,EAAC,CAAC,CAAC,cAAc,IAAI,QAAQ,CAAC,CAAA;QACxC,CAAC,CAAC,CAAA;QAEF,6BAA6B;QAE7B,MAAM,IAAA,iDAAuB,EAAC,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC,CAAA;QAE5D,IAAI,oBAAoB,GAAG,MAAM,UAAK,CAAC,OAAO,CAAC,EAAE,GAAG,EAAE,eAAe,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,EAAU,CAAA;QAE3F,IAAA,aAAM,EAAC,oBAAoB,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;QAEtE,IAAI,SAAS,GAAG,MAAM,SAAI,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;QAE7E,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE;YACpB,IAAA,aAAM,EAAC,CAAC,CAAC,cAAc,IAAI,eAAe,CAAC,CAAA;QAC/C,CAAC,CAAC,CAAA;IAIN,CAAC,CAAA,CAAC,CAAC;AAIP,CAAC,CAAA,CAAC,CAAA","sourcesContent":["\r\nimport { connect, Pair, Token } from \"../../DB/db\";\r\nimport { handleMinTokenAmountSet } from \"../../handlers/handleMinTokenAmountSet\";\r\nimport { expect } from \"chai\";\r\nimport { getContractAddress } from \"../../helper/constant\";\r\n\r\n\r\n// befor running this make sure btc token present in the database, and its piar created.\r\n\r\ndescribe(\"handleMinTokenAmountSet, change its minToken and restore\", async () => {\r\n    let currentMinToken = \"0\"\r\n    // await connect();\r\n    after(done => {\r\n       \r\n        done()\r\n    })\r\n    it(\"it will change btc minToken and then restore to previous value\", async () => {\r\n       \r\n        const btcAddress = getContractAddress(\"BTC\");\r\n        let minToken = \"123456789\";\r\n\r\n        // get current minToken \r\n\r\n        let getTokenDetails = await Token.findOne({ id: btcAddress }).lean()! as any\r\n        currentMinToken = getTokenDetails.minTokenAmount;\r\n        let data = [btcAddress, minToken]\r\n        await handleMinTokenAmountSet(data);\r\n\r\n        // check new amount updated or not;\r\n\r\n        let getTokenAfterUpdate = await Token.findOne({ _id: getTokenDetails._id }).lean()! as any\r\n\r\n        expect(getTokenAfterUpdate.minTokenAmount).to.equal(minToken);\r\n\r\n        // checking pairs updated where btc is token0;\r\n\r\n        let getPairs = await Pair.find({ token0: btcAddress, active: true }).lean();\r\n\r\n        getPairs.forEach((x) => {\r\n            expect(x.minToken0Order == minToken)\r\n        })\r\n\r\n        // updating as per old value;\r\n\r\n        await handleMinTokenAmountSet([btcAddress, currentMinToken])\r\n\r\n        let getTokenAfterUpdate1 = await Token.findOne({ _id: getTokenDetails._id }).lean()! as any\r\n\r\n        expect(getTokenAfterUpdate1.minTokenAmount).to.equal(currentMinToken);\r\n\r\n        let getPairs1 = await Pair.find({ token0: btcAddress, active: true }).lean();\r\n\r\n        getPairs1.forEach((x) => {\r\n            expect(x.minToken0Order == currentMinToken)\r\n        })\r\n\r\n\r\n\r\n    });\r\n\r\n\r\n\r\n})"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cc0aeb165bdb0ae6d2c65b658309a75e02007977","contentHash":"4dbfcbe829cb4deabd16b3a5b3ff5f4f9297e1e0284f01bbe311c3346a25d63b"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\handleMinTokenAmountSet.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\handleMinTokenAmountSet.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":41}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":32}},"40":{"start":{"line":39,"column":4},"end":{"line":54,"column":7}},"41":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"42":{"start":{"line":41,"column":26},"end":{"line":41,"column":53}},"43":{"start":{"line":42,"column":35},"end":{"line":42,"column":53}},"44":{"start":{"line":43,"column":12},"end":{"line":43,"column":121}},"45":{"start":{"line":44,"column":24},"end":{"line":44,"column":84}},"46":{"start":{"line":45,"column":12},"end":{"line":47,"column":16}},"47":{"start":{"line":45,"column":33},"end":{"line":47,"column":14}},"48":{"start":{"line":46,"column":16},"end":{"line":46,"column":111}},"49":{"start":{"line":48,"column":12},"end":{"line":48,"column":100}},"50":{"start":{"line":51,"column":12},"end":{"line":51,"column":66}},"51":{"start":{"line":52,"column":12},"end":{"line":52,"column":43}},"52":{"start":{"line":56,"column":0},"end":{"line":56,"column":58}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"handleMinTokenAmountSet","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":32}},"loc":{"start":{"line":38,"column":39},"end":{"line":55,"column":1}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":39,"column":43},"end":{"line":39,"column":44}},"loc":{"start":{"line":39,"column":56},"end":{"line":54,"column":5}},"line":39},"15":{"name":"(anonymous_15)","decl":{"start":{"line":45,"column":26},"end":{"line":45,"column":27}},"loc":{"start":{"line":45,"column":33},"end":{"line":47,"column":14}},"line":45},"16":{"name":"(anonymous_16)","decl":{"start":{"line":45,"column":65},"end":{"line":45,"column":66}},"loc":{"start":{"line":45,"column":78},"end":{"line":47,"column":13}},"line":45}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":6,"26":6,"27":4,"28":6,"29":6,"30":0,"31":0,"32":0,"33":0,"34":10,"35":4,"36":1,"37":1,"38":1,"39":1,"40":2,"41":2,"42":2,"43":2,"44":2,"45":2,"46":2,"47":2,"48":2,"49":2,"50":0,"51":0,"52":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":4,"7":6,"8":6,"9":4,"10":6,"11":0,"12":10,"13":2,"14":2,"15":2,"16":2},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,6],"18":[4,4],"19":[4,6],"20":[4,4]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/handleMinTokenAmountSet.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/handleMinTokenAmountSet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,iCAAuC;AAOvC,SAAsB,uBAAuB,CAAC,IAAS;;QAEnD,IAAG;YACC,MAAM,KAAK,GAAI,IAAI,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC;YAC3C,MAAM,cAAc,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;YAE1C,MAAM,UAAK,CAAC,gBAAgB,CACxB,EAAC,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC,EACzB,EAAC,IAAI,EAAC,EAAC,cAAc,EAAE,cAAc,EAAC,EAAC,CAC1C,CAAC;YAEF,IAAI,KAAK,GAAG,MAAM,SAAI,CAAC,IAAI,CAAC,EAAC,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAC,CAAC,CAAC,IAAI,EAAE,CAAC;YAElE,KAAK,CAAC,OAAO,CAAC,CAAO,CAAC,EAAC,EAAE;gBACrB,MAAM,SAAI,CAAC,gBAAgB,CACvB,EAAC,GAAG,EAAE,CAAC,CAAC,GAAG,EAAC,EACZ,EAAC,IAAI,EAAC,EAAC,cAAc,EAAE,cAAc,EAAC,EAAC,CAC1C,CAAA;YACL,CAAC,CAAA,CAAC,CAAC;YAEH,OAAO,CAAC,GAAG,CAAC,oCAAoC,KAAK,iBAAiB,cAAc,EAAE,CAAC,CAAA;SAE1F;QACD,OAAM,KAAK,EAAC;YACR,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,KAAK,CAAC,CAAC;YACtD,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;SACjC;IACL,CAAC;CAAA;AA3BD,0DA2BC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { Pair, Token } from \"../DB/db\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function handleMinTokenAmountSet(data: any){\r\n\r\n    try{\r\n        const token =  data[0].toLocaleLowerCase();\r\n        const minTokenAmount = data[1].toString();\r\n\r\n        await Token.findOneAndUpdate(\r\n            {id: token, active: true},\r\n            {$set:{minTokenAmount: minTokenAmount}}\r\n        );\r\n\r\n        let pairs = await Pair.find({token0: token, active: true}).lean();\r\n        \r\n        pairs.forEach(async (x)=>{\r\n            await Pair.findOneAndUpdate(\r\n                {_id: x._id},\r\n                {$set:{minToken0Order: minTokenAmount}}\r\n            )\r\n        });\r\n\r\n        console.log(`Min token amount updated token = ${token}, minAmount = ${minTokenAmount}`)\r\n\r\n    }\r\n    catch(error){\r\n        console.log(\"Error @ handleMinTokenAmountSet\", error);\r\n        sentry.captureException(error)\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"820225d13d37f10e73bbfd9b9e497f9c3f1192e4","contentHash":"8675f6e169f1e18e4ba7493b4846d1fd40a09ab979f742bc856f48e4dcaf2e75"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\order.api.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\order.api.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":30}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":16},"end":{"line":18,"column":45}},"19":{"start":{"line":19,"column":0},"end":{"line":19,"column":37}},"20":{"start":{"line":20,"column":0},"end":{"line":20,"column":27}},"21":{"start":{"line":22,"column":0},"end":{"line":76,"column":4}},"22":{"start":{"line":22,"column":35},"end":{"line":76,"column":2}},"23":{"start":{"line":24,"column":18},"end":{"line":24,"column":26}},"24":{"start":{"line":25,"column":17},"end":{"line":25,"column":19}},"25":{"start":{"line":26,"column":15},"end":{"line":26,"column":59}},"26":{"start":{"line":27,"column":16},"end":{"line":27,"column":18}},"27":{"start":{"line":28,"column":4},"end":{"line":30,"column":8}},"28":{"start":{"line":28,"column":17},"end":{"line":30,"column":6}},"29":{"start":{"line":31,"column":4},"end":{"line":34,"column":7}},"30":{"start":{"line":33,"column":8},"end":{"line":33,"column":15}},"31":{"start":{"line":35,"column":4},"end":{"line":43,"column":8}},"32":{"start":{"line":35,"column":39},"end":{"line":43,"column":6}},"33":{"start":{"line":36,"column":18},"end":{"line":38,"column":40}},"34":{"start":{"line":39,"column":8},"end":{"line":39,"column":52}},"35":{"start":{"line":40,"column":8},"end":{"line":40,"column":63}},"36":{"start":{"line":41,"column":8},"end":{"line":41,"column":37}},"37":{"start":{"line":42,"column":8},"end":{"line":42,"column":46}},"38":{"start":{"line":44,"column":4},"end":{"line":51,"column":8}},"39":{"start":{"line":44,"column":32},"end":{"line":51,"column":6}},"40":{"start":{"line":45,"column":18},"end":{"line":47,"column":40}},"41":{"start":{"line":48,"column":8},"end":{"line":48,"column":52}},"42":{"start":{"line":49,"column":8},"end":{"line":49,"column":66}},"43":{"start":{"line":52,"column":4},"end":{"line":59,"column":8}},"44":{"start":{"line":52,"column":54},"end":{"line":59,"column":6}},"45":{"start":{"line":53,"column":18},"end":{"line":55,"column":68}},"46":{"start":{"line":56,"column":8},"end":{"line":56,"column":52}},"47":{"start":{"line":57,"column":8},"end":{"line":57,"column":62}},"48":{"start":{"line":60,"column":4},"end":{"line":67,"column":8}},"49":{"start":{"line":60,"column":53},"end":{"line":67,"column":6}},"50":{"start":{"line":61,"column":18},"end":{"line":63,"column":89}},"51":{"start":{"line":64,"column":8},"end":{"line":64,"column":52}},"52":{"start":{"line":65,"column":8},"end":{"line":65,"column":62}},"53":{"start":{"line":68,"column":4},"end":{"line":75,"column":8}},"54":{"start":{"line":68,"column":33},"end":{"line":75,"column":6}},"55":{"start":{"line":69,"column":18},"end":{"line":71,"column":40}},"56":{"start":{"line":72,"column":8},"end":{"line":72,"column":52}},"57":{"start":{"line":73,"column":8},"end":{"line":73,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":29},"end":{"line":22,"column":30}},"loc":{"start":{"line":22,"column":35},"end":{"line":76,"column":2}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":69},"end":{"line":22,"column":70}},"loc":{"start":{"line":22,"column":82},"end":{"line":76,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":28,"column":11},"end":{"line":28,"column":12}},"loc":{"start":{"line":28,"column":17},"end":{"line":30,"column":6}},"line":28},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":51},"end":{"line":28,"column":52}},"loc":{"start":{"line":28,"column":64},"end":{"line":30,"column":5}},"line":28},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":10},"end":{"line":31,"column":11}},"loc":{"start":{"line":31,"column":20},"end":{"line":34,"column":5}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":35,"column":33},"end":{"line":35,"column":34}},"loc":{"start":{"line":35,"column":39},"end":{"line":43,"column":6}},"line":35},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":73},"end":{"line":35,"column":74}},"loc":{"start":{"line":35,"column":86},"end":{"line":43,"column":5}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":44,"column":26},"end":{"line":44,"column":27}},"loc":{"start":{"line":44,"column":32},"end":{"line":51,"column":6}},"line":44},"16":{"name":"(anonymous_16)","decl":{"start":{"line":44,"column":66},"end":{"line":44,"column":67}},"loc":{"start":{"line":44,"column":79},"end":{"line":51,"column":5}},"line":44},"17":{"name":"(anonymous_17)","decl":{"start":{"line":52,"column":48},"end":{"line":52,"column":49}},"loc":{"start":{"line":52,"column":54},"end":{"line":59,"column":6}},"line":52},"18":{"name":"(anonymous_18)","decl":{"start":{"line":52,"column":88},"end":{"line":52,"column":89}},"loc":{"start":{"line":52,"column":101},"end":{"line":59,"column":5}},"line":52},"19":{"name":"(anonymous_19)","decl":{"start":{"line":60,"column":47},"end":{"line":60,"column":48}},"loc":{"start":{"line":60,"column":53},"end":{"line":67,"column":6}},"line":60},"20":{"name":"(anonymous_20)","decl":{"start":{"line":60,"column":87},"end":{"line":60,"column":88}},"loc":{"start":{"line":60,"column":100},"end":{"line":67,"column":5}},"line":60},"21":{"name":"(anonymous_21)","decl":{"start":{"line":68,"column":27},"end":{"line":68,"column":28}},"loc":{"start":{"line":68,"column":33},"end":{"line":75,"column":6}},"line":68},"22":{"name":"(anonymous_22)","decl":{"start":{"line":68,"column":67},"end":{"line":68,"column":68}},"loc":{"start":{"line":68,"column":80},"end":{"line":75,"column":5}},"line":68}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":5,"2":5,"3":7,"4":5,"5":5,"6":0,"7":0,"8":0,"9":0,"10":12,"11":7,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1},"f":{"0":7,"1":5,"2":5,"3":7,"4":5,"5":0,"6":12,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1},"b":{"0":[1,1,1],"1":[0,5],"2":[7,7],"3":[7,5],"4":[7,7],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/order.api.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/order.api.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { getVersion } from \"../../helper/chain\";\r\nuse(chaiHttp);\r\n\r\n\r\n\r\n\r\n\r\n\r\nrequire(\"dotenv\").config()\r\n\r\n// main server must be close \r\n\r\ndescribe(\"Testing get apis\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let pairId = \"\";\r\n    let user = \"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\";\r\n    let token = \"\"\r\n    before(async () => {\r\n        //     require('../../../app')\r\n    });\r\n\r\n    after((done) => {\r\n        // require('../../../app').stop()\r\n        done()\r\n    })\r\n\r\n    it(`testing /pair/allpairs`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/allpairs`)\r\n            .query({ chainId: chainId })\r\n\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data[0].id).not.to.be.null;\r\n        pairId = res.body.data[0].id\r\n        token = res.body.data[0].tokens[0].id\r\n\r\n    });\r\n\r\n\r\n    it(`testing /tokens`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/tokens`)\r\n            .query({ chainId: chainId })\r\n\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data[0]).to.have.an(\"object\")\r\n        // console.log(res.body)\r\n\r\n    });\r\n\r\n\r\n    it(`testing /order/market/matched/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/order/market/matched/${pairId}`)\r\n            .query({ chainId: chainId, orderType: 0, amount: 2e18 })\r\n\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an(\"array\")\r\n        // console.log(res.body)\r\n\r\n    });\r\n\r\n\r\n    it(`testing /order/limit/matched/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/order/limit/matched/${pairId}`)\r\n            .query({ chainId: chainId, orderType: 0, amount: 2e18, exchangeRate: 20e18 })\r\n\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an(\"array\")\r\n        // console.log(res.body)\r\n\r\n    });\r\n\r\n\r\n    it(`testing /get/fee`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/get/fee`)\r\n            .query({ chainId: chainId })\r\n\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an(\"array\")\r\n        // console.log(res.body)\r\n\r\n    });\r\n\r\n\r\n\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2f17007aaa768559b6eeefb833d37e2af061770c","contentHash":"718fb59649641a9fa16703e67d2c750648a19da5e67bd7371a7f6069246b7520"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\pair.api.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\pair.api.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":30}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":16},"end":{"line":18,"column":45}},"19":{"start":{"line":19,"column":0},"end":{"line":19,"column":37}},"20":{"start":{"line":20,"column":0},"end":{"line":20,"column":27}},"21":{"start":{"line":22,"column":0},"end":{"line":79,"column":4}},"22":{"start":{"line":22,"column":35},"end":{"line":79,"column":2}},"23":{"start":{"line":24,"column":18},"end":{"line":24,"column":26}},"24":{"start":{"line":25,"column":17},"end":{"line":25,"column":19}},"25":{"start":{"line":26,"column":4},"end":{"line":28,"column":8}},"26":{"start":{"line":26,"column":17},"end":{"line":28,"column":6}},"27":{"start":{"line":29,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":31,"column":8},"end":{"line":31,"column":15}},"29":{"start":{"line":33,"column":4},"end":{"line":40,"column":8}},"30":{"start":{"line":33,"column":39},"end":{"line":40,"column":6}},"31":{"start":{"line":34,"column":18},"end":{"line":36,"column":40}},"32":{"start":{"line":37,"column":8},"end":{"line":37,"column":52}},"33":{"start":{"line":38,"column":8},"end":{"line":38,"column":63}},"34":{"start":{"line":39,"column":8},"end":{"line":39,"column":37}},"35":{"start":{"line":41,"column":4},"end":{"line":47,"column":8}},"36":{"start":{"line":41,"column":48},"end":{"line":47,"column":6}},"37":{"start":{"line":42,"column":18},"end":{"line":44,"column":40}},"38":{"start":{"line":46,"column":8},"end":{"line":46,"column":52}},"39":{"start":{"line":48,"column":4},"end":{"line":54,"column":8}},"40":{"start":{"line":48,"column":48},"end":{"line":54,"column":6}},"41":{"start":{"line":49,"column":18},"end":{"line":50,"column":101}},"42":{"start":{"line":52,"column":8},"end":{"line":52,"column":52}},"43":{"start":{"line":53,"column":8},"end":{"line":53,"column":72}},"44":{"start":{"line":55,"column":4},"end":{"line":62,"column":8}},"45":{"start":{"line":55,"column":48},"end":{"line":62,"column":6}},"46":{"start":{"line":56,"column":18},"end":{"line":58,"column":40}},"47":{"start":{"line":60,"column":8},"end":{"line":60,"column":52}},"48":{"start":{"line":61,"column":8},"end":{"line":61,"column":64}},"49":{"start":{"line":63,"column":4},"end":{"line":70,"column":8}},"50":{"start":{"line":63,"column":34},"end":{"line":70,"column":6}},"51":{"start":{"line":64,"column":18},"end":{"line":66,"column":40}},"52":{"start":{"line":68,"column":8},"end":{"line":68,"column":52}},"53":{"start":{"line":69,"column":8},"end":{"line":69,"column":66}},"54":{"start":{"line":71,"column":4},"end":{"line":78,"column":8}},"55":{"start":{"line":71,"column":34},"end":{"line":78,"column":6}},"56":{"start":{"line":72,"column":18},"end":{"line":74,"column":40}},"57":{"start":{"line":76,"column":8},"end":{"line":76,"column":52}},"58":{"start":{"line":77,"column":8},"end":{"line":77,"column":66}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":29},"end":{"line":22,"column":30}},"loc":{"start":{"line":22,"column":35},"end":{"line":79,"column":2}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":69},"end":{"line":22,"column":70}},"loc":{"start":{"line":22,"column":82},"end":{"line":79,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":26,"column":11},"end":{"line":26,"column":12}},"loc":{"start":{"line":26,"column":17},"end":{"line":28,"column":6}},"line":26},"11":{"name":"(anonymous_11)","decl":{"start":{"line":26,"column":51},"end":{"line":26,"column":52}},"loc":{"start":{"line":26,"column":64},"end":{"line":28,"column":5}},"line":26},"12":{"name":"(anonymous_12)","decl":{"start":{"line":29,"column":10},"end":{"line":29,"column":11}},"loc":{"start":{"line":29,"column":20},"end":{"line":32,"column":5}},"line":29},"13":{"name":"(anonymous_13)","decl":{"start":{"line":33,"column":33},"end":{"line":33,"column":34}},"loc":{"start":{"line":33,"column":39},"end":{"line":40,"column":6}},"line":33},"14":{"name":"(anonymous_14)","decl":{"start":{"line":33,"column":73},"end":{"line":33,"column":74}},"loc":{"start":{"line":33,"column":86},"end":{"line":40,"column":5}},"line":33},"15":{"name":"(anonymous_15)","decl":{"start":{"line":41,"column":42},"end":{"line":41,"column":43}},"loc":{"start":{"line":41,"column":48},"end":{"line":47,"column":6}},"line":41},"16":{"name":"(anonymous_16)","decl":{"start":{"line":41,"column":82},"end":{"line":41,"column":83}},"loc":{"start":{"line":41,"column":95},"end":{"line":47,"column":5}},"line":41},"17":{"name":"(anonymous_17)","decl":{"start":{"line":48,"column":42},"end":{"line":48,"column":43}},"loc":{"start":{"line":48,"column":48},"end":{"line":54,"column":6}},"line":48},"18":{"name":"(anonymous_18)","decl":{"start":{"line":48,"column":82},"end":{"line":48,"column":83}},"loc":{"start":{"line":48,"column":95},"end":{"line":54,"column":5}},"line":48},"19":{"name":"(anonymous_19)","decl":{"start":{"line":55,"column":42},"end":{"line":55,"column":43}},"loc":{"start":{"line":55,"column":48},"end":{"line":62,"column":6}},"line":55},"20":{"name":"(anonymous_20)","decl":{"start":{"line":55,"column":82},"end":{"line":55,"column":83}},"loc":{"start":{"line":55,"column":95},"end":{"line":62,"column":5}},"line":55},"21":{"name":"(anonymous_21)","decl":{"start":{"line":63,"column":28},"end":{"line":63,"column":29}},"loc":{"start":{"line":63,"column":34},"end":{"line":70,"column":6}},"line":63},"22":{"name":"(anonymous_22)","decl":{"start":{"line":63,"column":68},"end":{"line":63,"column":69}},"loc":{"start":{"line":63,"column":81},"end":{"line":70,"column":5}},"line":63},"23":{"name":"(anonymous_23)","decl":{"start":{"line":71,"column":28},"end":{"line":71,"column":29}},"loc":{"start":{"line":71,"column":34},"end":{"line":78,"column":6}},"line":71},"24":{"name":"(anonymous_24)","decl":{"start":{"line":71,"column":68},"end":{"line":71,"column":69}},"loc":{"start":{"line":71,"column":81},"end":{"line":78,"column":5}},"line":71}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":6,"2":6,"3":8,"4":6,"5":6,"6":0,"7":0,"8":0,"9":0,"10":14,"11":8,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1},"f":{"0":8,"1":6,"2":6,"3":8,"4":6,"5":0,"6":14,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1},"b":{"0":[1,1,1],"1":[0,6],"2":[8,8],"3":[8,6],"4":[8,8],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/pair.api.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/pair.api.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,+BAAoC;AACpC,+BAA8B;AAC9B,0DAAiC;AACjC,8CAAgD;AAChD,IAAA,UAAG,EAAC,mBAAQ,CAAC,CAAC;AAOd,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAA;AAE1B,6BAA6B;AAE7B,QAAQ,CAAC,kBAAkB,EAAE,GAAS,EAAE;IAEpC,eAAe;IACf,IAAI,OAAO,GAAG,QAAQ,CAAA;IACtB,IAAI,MAAM,GAAG,EAAE,CAAC;IAEhB,MAAM,CAAC,GAAS,EAAE;QACd,8BAA8B;IAClC,CAAC,CAAA,CAAC,CAAC;IAEH,KAAK,CAAC,CAAC,IAAI,EAAE,EAAE;QACX,iCAAiC;QACjC,IAAI,EAAE,CAAA;IACV,CAAC,CAAC,CAAA;IAEF,EAAE,CAAC,wBAAwB,EAAE,GAAS,EAAE;QAEpC,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;aAC3C,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,gBAAgB,CAAC;aAC5D,KAAK,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAA;QAEhC,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC;QAC3C,MAAM,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAA;IAEhC,CAAC,CAAA,CAAC,CAAC;IAEH,EAAE,CAAC,iCAAiC,EAAE,GAAS,EAAE;QAE7C,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;aAC3C,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,wBAAwB,MAAM,EAAE,CAAC;aAC5E,KAAK,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAA;QAChC,wBAAwB;QACxB,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACpC,CAAC,CAAA,CAAC,CAAC;IACH,EAAE,CAAC,iCAAiC,EAAE,GAAS,EAAE;QAE7C,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;aAC3C,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,wBAAwB,MAAM,EAAE,CAAC,CAAA;QAEjF,wBAAwB;QACxB,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;IACxD,CAAC,CAAA,CAAC,CAAC;IACH,EAAE,CAAC,iCAAiC,EAAE,GAAS,EAAE;QAE7C,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;aAC3C,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,gBAAgB,MAAM,EAAE,CAAC;aACpE,KAAK,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAA;QAChC,wBAAwB;QACxB,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAChD,CAAC,CAAA,CAAC,CAAC;IACH,EAAE,CAAC,mBAAmB,EAAE,GAAS,EAAE;QAE/B,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;aAC3C,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,gBAAgB,CAAC;aAC5D,KAAK,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAA;QAChC,wBAAwB;QACxB,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAClD,CAAC,CAAA,CAAC,CAAC;IACH,EAAE,CAAC,mBAAmB,EAAE,GAAS,EAAE;QAE/B,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;aAC3C,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,gBAAgB,CAAC;aAC5D,KAAK,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAA;QAChC,wBAAwB;QACxB,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAChC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;IAClD,CAAC,CAAA,CAAC,CAAC;AAEP,CAAC,CAAA,CAAC,CAAC","sourcesContent":["\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { getVersion } from \"../../helper/chain\";\r\nuse(chaiHttp);\r\n\r\n\r\n\r\n\r\n\r\n\r\nrequire(\"dotenv\").config()\r\n\r\n// main server must be close \r\n\r\ndescribe(\"Testing get apis\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let pairId = \"\";\r\n\r\n    before(async () => {\r\n        //     require('../../../app')\r\n    });\r\n\r\n    after((done) => {\r\n        // require('../../../app').stop()\r\n        done()\r\n    })\r\n\r\n    it(`testing /pair/allpairs`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/allpairs`)\r\n            .query({ chainId: chainId })\r\n\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data[0].id).not.to.be.null;\r\n        pairId = res.body.data[0].id\r\n\r\n    });\r\n\r\n    it(`testing /orders/history/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/orders/history/${pairId}`)\r\n            .query({ chainId: chainId })\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n    });\r\n    it(`testing /trading/status/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/trading/status/${pairId}`)\r\n            \r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data[0].interval).to.equal(\"_24hr\");\r\n    });\r\n    it(`testing /orders/:pairId/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/orders/${pairId}`)\r\n            .query({ chainId: chainId })\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data.pair).to.equal(pairId);\r\n    });\r\n    it(`testing /newpairs`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/newpairs`)\r\n            .query({ chainId: chainId })\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data[0]).to.have.an(\"object\");\r\n    });\r\n    it(`testing /tranding`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/tranding`)\r\n            .query({ chainId: chainId })\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data[0]).to.have.an(\"object\");\r\n    });\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"068fb33f9ba9727db0ae583c0801bd9ad2e90f56","contentHash":"46d9887ea9e261665d18bf09a935998daf22f9e797186b2a419b178d22f7a257"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\pairTest.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\pairTest.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":30}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":0},"end":{"line":18,"column":37}},"19":{"start":{"line":19,"column":19},"end":{"line":19,"column":51}},"20":{"start":{"line":20,"column":0},"end":{"line":47,"column":3}},"21":{"start":{"line":24,"column":4},"end":{"line":46,"column":8}},"22":{"start":{"line":24,"column":42},"end":{"line":46,"column":6}},"23":{"start":{"line":25,"column":8},"end":{"line":28,"column":11}},"24":{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},"25":{"start":{"line":29,"column":8},"end":{"line":37,"column":12}},"26":{"start":{"line":29,"column":51},"end":{"line":37,"column":10}},"27":{"start":{"line":30,"column":22},"end":{"line":31,"column":95}},"28":{"start":{"line":32,"column":12},"end":{"line":32,"column":56}},"29":{"start":{"line":33,"column":12},"end":{"line":33,"column":60}},"30":{"start":{"line":34,"column":12},"end":{"line":34,"column":64}},"31":{"start":{"line":35,"column":12},"end":{"line":35,"column":70}},"32":{"start":{"line":36,"column":12},"end":{"line":36,"column":66}},"33":{"start":{"line":38,"column":8},"end":{"line":45,"column":12}},"34":{"start":{"line":38,"column":67},"end":{"line":45,"column":10}},"35":{"start":{"line":39,"column":22},"end":{"line":40,"column":80}},"36":{"start":{"line":41,"column":12},"end":{"line":41,"column":56}},"37":{"start":{"line":42,"column":12},"end":{"line":42,"column":67}},"38":{"start":{"line":43,"column":12},"end":{"line":43,"column":60}},"39":{"start":{"line":44,"column":12},"end":{"line":44,"column":85}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":20,"column":29},"end":{"line":20,"column":30}},"loc":{"start":{"line":20,"column":35},"end":{"line":47,"column":1}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":24,"column":36},"end":{"line":24,"column":37}},"loc":{"start":{"line":24,"column":42},"end":{"line":46,"column":6}},"line":24},"10":{"name":"(anonymous_10)","decl":{"start":{"line":24,"column":76},"end":{"line":24,"column":77}},"loc":{"start":{"line":24,"column":89},"end":{"line":46,"column":5}},"line":24},"11":{"name":"(anonymous_11)","decl":{"start":{"line":25,"column":14},"end":{"line":25,"column":15}},"loc":{"start":{"line":25,"column":24},"end":{"line":28,"column":9}},"line":25},"12":{"name":"(anonymous_12)","decl":{"start":{"line":29,"column":45},"end":{"line":29,"column":46}},"loc":{"start":{"line":29,"column":51},"end":{"line":37,"column":10}},"line":29},"13":{"name":"(anonymous_13)","decl":{"start":{"line":29,"column":85},"end":{"line":29,"column":86}},"loc":{"start":{"line":29,"column":98},"end":{"line":37,"column":9}},"line":29},"14":{"name":"(anonymous_14)","decl":{"start":{"line":38,"column":61},"end":{"line":38,"column":62}},"loc":{"start":{"line":38,"column":67},"end":{"line":45,"column":10}},"line":38},"15":{"name":"(anonymous_15)","decl":{"start":{"line":38,"column":101},"end":{"line":38,"column":102}},"loc":{"start":{"line":38,"column":114},"end":{"line":45,"column":9}},"line":38}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":2,"2":2,"3":3,"4":2,"5":2,"6":0,"7":0,"8":0,"9":0,"10":5,"11":3,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1},"f":{"0":3,"1":2,"2":2,"3":3,"4":2,"5":0,"6":5,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1},"b":{"0":[1,1,1],"1":[0,2],"2":[3,3],"3":[3,2],"4":[3,3],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/pairTest.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/pairTest.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA,+BAAoC;AACpC,+BAA8B;AAC9B,0DAAiC;AAEjC,IAAA,UAAG,EAAC,mBAAQ,CAAC,CAAC;AAEd,oDAAkD;AAIlD,QAAQ,CAAC,kBAAkB,EAAE,GAAG,EAAE;IAE9B;;QAEI;IACJ,QAAQ,CAAC,qBAAqB,EAAE,GAAS,EAAE;QACvC,KAAK,CAAC,CAAC,IAAI,EAAC,EAAE;YACV,IAAI,EAAE,CAAA;YACN,kBAAkB;QAEtB,CAAC,CAAC,CAAA;QACF,EAAE,CAAC,gCAAgC,EAAE,GAAS,EAAE;YAE5C,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;iBAC3C,GAAG,CAAC,MAAM,IAAA,oBAAS,EAAC,SAAS,CAAC,+BAA+B,CAAC,CAAA;YACnE,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAChC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;YACpC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;YACxC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC9C,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC9C,CAAC,CAAA,CAAC,CAAC;QAGH,EAAE,CAAC,gDAAgD,EAAE,GAAS,EAAE;YAC5D,IAAI,GAAG,GAAG,MAAM,IAAA,cAAO,EAAC,uBAAuB,CAAC;iBAC3C,GAAG,CAAC,MAAM,IAAA,oBAAS,EAAC,SAAS,CAAC,gBAAgB,CAAC,CAAA;YAEpD,IAAA,aAAM,EAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAChC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YAC3C,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;YACpC,IAAA,aAAM,EAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC;QACjE,CAAC,CAAA,CAAC,CAAC;IAGP,CAAC,CAAA,CAAC,CAAC;AAEP,CAAC,CAAC,CAAC","sourcesContent":["\r\n\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport mongoose from \"mongoose\";\r\nuse(chaiHttp);\r\n\r\nimport { getConfig } from \"../../helper/constant\";\r\n\r\n\r\n\r\ndescribe('Testing Pair Api', () => {\r\n\r\n    /*\r\n      * Test the /GET route\r\n      */\r\n    describe('Get(/pair/allpairs)', async () => {\r\n        after((done)=>{\r\n            done()\r\n            // process.exit(0)\r\n           \r\n        })\r\n        it('it should  have atleast a pair', async () => {\r\n\r\n            let res = await request(\"http://localhost:3010\")\r\n                .get(`/v/${getConfig(\"version\")}/pair/allpairs?chainId=421613`)\r\n            expect(res).to.have.status(200);\r\n            expect(res.body).to.be.an('object');\r\n            expect(res.body.data).to.be.an('array');\r\n            expect(res.body.data).not.to.have.lengthOf(0);\r\n            expect(res.body.status).to.be.equal(true);\r\n        });\r\n\r\n\r\n        it('it should send error for not providing chainId', async () => {\r\n            let res = await request(\"http://localhost:3010\")\r\n                .get(`/v/${getConfig(\"version\")}/pair/allpairs`)\r\n\r\n            expect(res).to.have.status(400);\r\n            expect(res.body.status).to.be.equal(false);\r\n            expect(res.body).to.be.an('object');\r\n            expect(res.body.error).to.have.string('chainId is required');\r\n        });\r\n\r\n\r\n    });\r\n\r\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"27eddb3a3ed6c95803bb19046ec648b08bd38640","contentHash":"b8a78d103116ca64a5d832df97eefe699870a016286103a752ed28311f3e6572"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\user.api.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\test\\unitTest\\user.api.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":15},"end":{"line":15,"column":30}},"16":{"start":{"line":16,"column":15},"end":{"line":16,"column":30}},"17":{"start":{"line":17,"column":20},"end":{"line":17,"column":57}},"18":{"start":{"line":18,"column":16},"end":{"line":18,"column":45}},"19":{"start":{"line":19,"column":0},"end":{"line":19,"column":37}},"20":{"start":{"line":20,"column":0},"end":{"line":20,"column":27}},"21":{"start":{"line":22,"column":0},"end":{"line":85,"column":4}},"22":{"start":{"line":22,"column":35},"end":{"line":85,"column":2}},"23":{"start":{"line":24,"column":18},"end":{"line":24,"column":26}},"24":{"start":{"line":25,"column":17},"end":{"line":25,"column":19}},"25":{"start":{"line":26,"column":15},"end":{"line":26,"column":59}},"26":{"start":{"line":27,"column":16},"end":{"line":27,"column":18}},"27":{"start":{"line":28,"column":4},"end":{"line":30,"column":8}},"28":{"start":{"line":28,"column":17},"end":{"line":30,"column":6}},"29":{"start":{"line":31,"column":4},"end":{"line":34,"column":7}},"30":{"start":{"line":33,"column":8},"end":{"line":33,"column":15}},"31":{"start":{"line":35,"column":4},"end":{"line":44,"column":8}},"32":{"start":{"line":35,"column":39},"end":{"line":44,"column":6}},"33":{"start":{"line":36,"column":18},"end":{"line":38,"column":40}},"34":{"start":{"line":39,"column":8},"end":{"line":39,"column":52}},"35":{"start":{"line":40,"column":8},"end":{"line":40,"column":63}},"36":{"start":{"line":41,"column":8},"end":{"line":41,"column":37}},"37":{"start":{"line":42,"column":8},"end":{"line":42,"column":46}},"38":{"start":{"line":45,"column":4},"end":{"line":52,"column":8}},"39":{"start":{"line":45,"column":64},"end":{"line":52,"column":6}},"40":{"start":{"line":46,"column":18},"end":{"line":48,"column":40}},"41":{"start":{"line":50,"column":8},"end":{"line":50,"column":52}},"42":{"start":{"line":51,"column":8},"end":{"line":51,"column":62}},"43":{"start":{"line":53,"column":4},"end":{"line":60,"column":8}},"44":{"start":{"line":53,"column":65},"end":{"line":60,"column":6}},"45":{"start":{"line":54,"column":18},"end":{"line":56,"column":40}},"46":{"start":{"line":58,"column":8},"end":{"line":58,"column":52}},"47":{"start":{"line":59,"column":8},"end":{"line":59,"column":62}},"48":{"start":{"line":61,"column":4},"end":{"line":68,"column":8}},"49":{"start":{"line":61,"column":67},"end":{"line":68,"column":6}},"50":{"start":{"line":62,"column":18},"end":{"line":64,"column":40}},"51":{"start":{"line":66,"column":8},"end":{"line":66,"column":52}},"52":{"start":{"line":67,"column":8},"end":{"line":67,"column":62}},"53":{"start":{"line":69,"column":4},"end":{"line":76,"column":8}},"54":{"start":{"line":69,"column":67},"end":{"line":76,"column":6}},"55":{"start":{"line":70,"column":18},"end":{"line":72,"column":40}},"56":{"start":{"line":74,"column":8},"end":{"line":74,"column":52}},"57":{"start":{"line":75,"column":8},"end":{"line":75,"column":62}},"58":{"start":{"line":77,"column":4},"end":{"line":84,"column":8}},"59":{"start":{"line":77,"column":61},"end":{"line":84,"column":6}},"60":{"start":{"line":78,"column":18},"end":{"line":80,"column":40}},"61":{"start":{"line":82,"column":8},"end":{"line":82,"column":52}},"62":{"start":{"line":83,"column":8},"end":{"line":83,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":29},"end":{"line":22,"column":30}},"loc":{"start":{"line":22,"column":35},"end":{"line":85,"column":2}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":69},"end":{"line":22,"column":70}},"loc":{"start":{"line":22,"column":82},"end":{"line":85,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":28,"column":11},"end":{"line":28,"column":12}},"loc":{"start":{"line":28,"column":17},"end":{"line":30,"column":6}},"line":28},"11":{"name":"(anonymous_11)","decl":{"start":{"line":28,"column":51},"end":{"line":28,"column":52}},"loc":{"start":{"line":28,"column":64},"end":{"line":30,"column":5}},"line":28},"12":{"name":"(anonymous_12)","decl":{"start":{"line":31,"column":10},"end":{"line":31,"column":11}},"loc":{"start":{"line":31,"column":20},"end":{"line":34,"column":5}},"line":31},"13":{"name":"(anonymous_13)","decl":{"start":{"line":35,"column":33},"end":{"line":35,"column":34}},"loc":{"start":{"line":35,"column":39},"end":{"line":44,"column":6}},"line":35},"14":{"name":"(anonymous_14)","decl":{"start":{"line":35,"column":73},"end":{"line":35,"column":74}},"loc":{"start":{"line":35,"column":86},"end":{"line":44,"column":5}},"line":35},"15":{"name":"(anonymous_15)","decl":{"start":{"line":45,"column":58},"end":{"line":45,"column":59}},"loc":{"start":{"line":45,"column":64},"end":{"line":52,"column":6}},"line":45},"16":{"name":"(anonymous_16)","decl":{"start":{"line":45,"column":98},"end":{"line":45,"column":99}},"loc":{"start":{"line":45,"column":111},"end":{"line":52,"column":5}},"line":45},"17":{"name":"(anonymous_17)","decl":{"start":{"line":53,"column":59},"end":{"line":53,"column":60}},"loc":{"start":{"line":53,"column":65},"end":{"line":60,"column":6}},"line":53},"18":{"name":"(anonymous_18)","decl":{"start":{"line":53,"column":99},"end":{"line":53,"column":100}},"loc":{"start":{"line":53,"column":112},"end":{"line":60,"column":5}},"line":53},"19":{"name":"(anonymous_19)","decl":{"start":{"line":61,"column":61},"end":{"line":61,"column":62}},"loc":{"start":{"line":61,"column":67},"end":{"line":68,"column":6}},"line":61},"20":{"name":"(anonymous_20)","decl":{"start":{"line":61,"column":101},"end":{"line":61,"column":102}},"loc":{"start":{"line":61,"column":114},"end":{"line":68,"column":5}},"line":61},"21":{"name":"(anonymous_21)","decl":{"start":{"line":69,"column":61},"end":{"line":69,"column":62}},"loc":{"start":{"line":69,"column":67},"end":{"line":76,"column":6}},"line":69},"22":{"name":"(anonymous_22)","decl":{"start":{"line":69,"column":101},"end":{"line":69,"column":102}},"loc":{"start":{"line":69,"column":114},"end":{"line":76,"column":5}},"line":69},"23":{"name":"(anonymous_23)","decl":{"start":{"line":77,"column":55},"end":{"line":77,"column":56}},"loc":{"start":{"line":77,"column":61},"end":{"line":84,"column":6}},"line":77},"24":{"name":"(anonymous_24)","decl":{"start":{"line":77,"column":95},"end":{"line":77,"column":96}},"loc":{"start":{"line":77,"column":108},"end":{"line":84,"column":5}},"line":77}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":6,"2":6,"3":8,"4":6,"5":6,"6":0,"7":0,"8":0,"9":0,"10":14,"11":8,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1},"f":{"0":8,"1":6,"2":6,"3":8,"4":6,"5":0,"6":14,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1},"b":{"0":[1,1,1],"1":[0,6],"2":[8,8],"3":[8,6],"4":[8,8],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/user.api.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/test/unitTest/user.api.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { use, request } from \"chai\";\r\nimport { expect } from \"chai\";\r\nimport chaiHttp from \"chai-http\";\r\nimport { getVersion } from \"../../helper/chain\";\r\nuse(chaiHttp);\r\n\r\n\r\n\r\n\r\n\r\n\r\nrequire(\"dotenv\").config()\r\n\r\n// main server must be close \r\n\r\ndescribe(\"Testing get apis\", async () => {\r\n\r\n    // requirements\r\n    let chainId = \"421613\"\r\n    let pairId = \"\";\r\n    let user = \"0x70997970C51812dc3A010C7d01b50e0d17dc79C8\";\r\n    let token = \"\"\r\n    before(async () => {\r\n        //     require('../../../app')\r\n    });\r\n\r\n    after((done) => {\r\n        // require('../../../app').stop()\r\n        done()\r\n    })\r\n\r\n    it(`testing /pair/allpairs`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/pair/allpairs`)\r\n            .query({ chainId: chainId })\r\n\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data[0].id).not.to.be.null;\r\n        pairId = res.body.data[0].id\r\n        token = res.body.data[0].tokens[0].id\r\n        // console.log(res.body)\r\n\r\n    });\r\n\r\n\r\n    it(`testing /user/orders/placed/:maker/pair/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/user/orders/placed/${user}/pair/${pairId}`)\r\n            .query({ chainId: chainId })\r\n\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an('array');\r\n    \r\n    });\r\n\r\n\r\n    it(`testing /user/orders/history/:taker/pair/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/user/orders/history/${user}/pair/${pairId}`)\r\n            .query({ chainId: chainId })\r\n\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an('array');\r\n    \r\n    });\r\n\r\n\r\n    it(`testing /user/orders/cancelled/:maker/pair/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/user/orders/cancelled/${user}/pair/${pairId}`)\r\n            .query({ chainId: chainId })\r\n\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an('array');\r\n    \r\n    });\r\n\r\n\r\n    it(`testing /user/orders/cancelled/:maker/pair/:pairId`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/user/orders/cancelled/${user}/pair/${pairId}`)\r\n            .query({ chainId: chainId })\r\n\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an('array');\r\n    \r\n    });\r\n\r\n\r\n    it(`testing /inorder/balance/:maker/token/:token`, async () => {\r\n\r\n        let res = await request(\"http://localhost:3010\")\r\n            .get(`/v/${getVersion(process.env.NODE_ENV!)}/user/orders/cancelled/${user}/pair/${token}`)\r\n            .query({ chainId: chainId })\r\n\r\n        // console.log(res.body)\r\n        expect(res).to.have.status(200);\r\n        expect(res.body.data).to.have.an('array');\r\n    \r\n    });\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c6014e004e79bd869f0b8530dab2caf4e1f975d8","contentHash":"cd90cb763a8866399379f06250e352e8295fad183e757016e6c57b92c83e7d60"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\app.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\app.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":22},"end":{"line":27,"column":1}},"25":{"start":{"line":26,"column":4},"end":{"line":26,"column":62}},"26":{"start":{"line":28,"column":0},"end":{"line":28,"column":62}},"27":{"start":{"line":29,"column":18},"end":{"line":29,"column":53}},"28":{"start":{"line":30,"column":13},"end":{"line":30,"column":35}},"29":{"start":{"line":31,"column":15},"end":{"line":31,"column":47}},"30":{"start":{"line":32,"column":12},"end":{"line":32,"column":36}},"31":{"start":{"line":33,"column":21},"end":{"line":33,"column":72}},"32":{"start":{"line":34,"column":21},"end":{"line":34,"column":72}},"33":{"start":{"line":35,"column":20},"end":{"line":35,"column":70}},"34":{"start":{"line":36,"column":21},"end":{"line":36,"column":72}},"35":{"start":{"line":37,"column":18},"end":{"line":37,"column":66}},"36":{"start":{"line":38,"column":17},"end":{"line":38,"column":51}},"37":{"start":{"line":39,"column":18},"end":{"line":39,"column":48}},"38":{"start":{"line":40,"column":15},"end":{"line":40,"column":30}},"39":{"start":{"line":41,"column":17},"end":{"line":41,"column":51}},"40":{"start":{"line":42,"column":15},"end":{"line":42,"column":52}},"41":{"start":{"line":43,"column":16},"end":{"line":43,"column":56}},"42":{"start":{"line":44,"column":16},"end":{"line":44,"column":45}},"43":{"start":{"line":45,"column":22},"end":{"line":45,"column":61}},"44":{"start":{"line":46,"column":31},"end":{"line":46,"column":74}},"45":{"start":{"line":47,"column":19},"end":{"line":47,"column":48}},"46":{"start":{"line":48,"column":0},"end":{"line":59,"column":3}},"47":{"start":{"line":60,"column":0},"end":{"line":60,"column":42}},"48":{"start":{"line":61,"column":0},"end":{"line":61,"column":42}},"49":{"start":{"line":62,"column":0},"end":{"line":62,"column":38}},"50":{"start":{"line":63,"column":0},"end":{"line":63,"column":88}},"51":{"start":{"line":65,"column":0},"end":{"line":65,"column":27}},"52":{"start":{"line":66,"column":0},"end":{"line":66,"column":38}},"53":{"start":{"line":67,"column":0},"end":{"line":67,"column":20}},"54":{"start":{"line":68,"column":0},"end":{"line":70,"column":4}},"55":{"start":{"line":71,"column":0},"end":{"line":71,"column":33}},"56":{"start":{"line":72,"column":0},"end":{"line":72,"column":34}},"57":{"start":{"line":75,"column":0},"end":{"line":75,"column":90}},"58":{"start":{"line":76,"column":0},"end":{"line":76,"column":89}},"59":{"start":{"line":77,"column":0},"end":{"line":77,"column":91}},"60":{"start":{"line":78,"column":0},"end":{"line":78,"column":27}},"61":{"start":{"line":79,"column":0},"end":{"line":79,"column":30}},"62":{"start":{"line":80,"column":0},"end":{"line":82,"column":3}},"63":{"start":{"line":81,"column":4},"end":{"line":81,"column":46}},"64":{"start":{"line":83,"column":0},"end":{"line":88,"column":1}},"65":{"start":{"line":84,"column":4},"end":{"line":84,"column":46}},"66":{"start":{"line":87,"column":4},"end":{"line":87,"column":47}},"67":{"start":{"line":90,"column":0},"end":{"line":90,"column":40}},"68":{"start":{"line":92,"column":0},"end":{"line":95,"column":3}},"69":{"start":{"line":93,"column":4},"end":{"line":93,"column":25}},"70":{"start":{"line":94,"column":4},"end":{"line":94,"column":31}},"71":{"start":{"line":96,"column":13},"end":{"line":98,"column":2}},"72":{"start":{"line":97,"column":4},"end":{"line":97,"column":49}},"73":{"start":{"line":100,"column":4},"end":{"line":100,"column":19}},"74":{"start":{"line":102,"column":0},"end":{"line":102,"column":24}},"75":{"start":{"line":103,"column":0},"end":{"line":103,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":56},"end":{"line":25,"column":57}},"loc":{"start":{"line":25,"column":71},"end":{"line":27,"column":1}},"line":25},"7":{"name":"mainHandler","decl":{"start":{"line":80,"column":34},"end":{"line":80,"column":45}},"loc":{"start":{"line":80,"column":56},"end":{"line":82,"column":1}},"line":80},"8":{"name":"onError","decl":{"start":{"line":92,"column":17},"end":{"line":92,"column":24}},"loc":{"start":{"line":92,"column":46},"end":{"line":95,"column":1}},"line":92},"9":{"name":"(anonymous_9)","decl":{"start":{"line":96,"column":37},"end":{"line":96,"column":38}},"loc":{"start":{"line":96,"column":49},"end":{"line":98,"column":1}},"line":96},"10":{"name":"stop","decl":{"start":{"line":99,"column":9},"end":{"line":99,"column":13}},"loc":{"start":{"line":99,"column":16},"end":{"line":101,"column":1}},"line":99}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":22},"end":{"line":27,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":27}},{"start":{"line":25,"column":31},"end":{"line":25,"column":51}},{"start":{"line":25,"column":56},"end":{"line":27,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":11},"end":{"line":26,"column":61}},"type":"cond-expr","locations":[{"start":{"line":26,"column":37},"end":{"line":26,"column":40}},{"start":{"line":26,"column":43},"end":{"line":26,"column":61}}],"line":26},"18":{"loc":{"start":{"line":26,"column":12},"end":{"line":26,"column":33}},"type":"binary-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":15}},{"start":{"line":26,"column":19},"end":{"line":26,"column":33}}],"line":26},"19":{"loc":{"start":{"line":83,"column":0},"end":{"line":88,"column":1}},"type":"if","locations":[{"start":{"line":83,"column":0},"end":{"line":88,"column":1}},{"start":{"line":83,"column":0},"end":{"line":88,"column":1}}],"line":83}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":2,"16":2,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":10,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":0,"64":1,"65":0,"66":1,"67":1,"68":1,"69":0,"70":0,"71":1,"72":1,"73":0,"74":1,"75":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":2,"6":10,"7":0,"8":0,"9":1,"10":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[2,0],"12":[2,2],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[5,5],"18":[10,10],"19":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/app.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/app.ts"],"names":[],"mappings":"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","sourcesContent":["import express from \"express\";\r\nimport { connect } from \"./src/DB/db\";\r\nimport cors from \"cors\";\r\nconst app = express();\r\nimport orderRoute from \"./src/routes/orderRoute\";\r\nimport pairRoutes from \"./src/routes/pairRoutes\";\r\nimport userRoute from \"./src/routes/userRoute\";\r\nimport chartRoute from \"./src/routes/chartRoute\"\r\nimport DBRoute from \"./src/routes/DBRoute\"\r\nimport helmet from \"helmet\";\r\nimport { start } from \"./src/utils/appUtil\";\r\nimport { createServer } from \"http\";\r\nimport morgan from 'morgan';\r\nimport * as Sentry from \"@sentry/node\";\r\nimport * as Tracing from \"@sentry/tracing\";\r\nimport { getVersion } from \"./src/helper/chain\";\r\nimport compression from \"compression\";\r\nimport { expressMonitorConfig } from \"./src/utils/expressMonitorConfig\";\r\nconst httpServer = createServer(app);\r\n\r\n\r\nSentry.init({\r\n    // @ts-ignore\r\n    dsn: \"https://7d303c69af974f47aeb870a4537472ee@o4504400337698816.ingest.sentry.io/4504405098823680\",\r\n    integrations: [\r\n        // enable HTTP calls tracing\r\n        new Sentry.Integrations.Http({ tracing: true }),\r\n        // enable Express.js middleware tracing\r\n        new Tracing.Integrations.Express({ app }),\r\n    ],\r\n    tracesSampleRate: 1.0,\r\n    enabled: process.env.NODE_ENV == \"production\"\r\n});\r\n\r\n\r\napp.use(Sentry.Handlers.requestHandler());\r\n\r\napp.use(Sentry.Handlers.tracingHandler());\r\n\r\napp.use(compression());\r\n\r\napp.use(require('express-status-monitor')(\r\n    expressMonitorConfig\r\n));\r\n\r\n// require(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\nrequire(\"dotenv\").config()\r\n\r\napp.use(morgan('dev'));\r\n\r\nconnect();\r\napp.use(cors({\r\n    origin: '*'\r\n}));\r\napp.use(helmet());\r\napp.use(express.json());\r\n\r\n// let version = getVersion(process.env.NODE_ENV!);\r\n// console.log(\"version\", version)\r\napp.use(`/v/${getVersion(process.env.NODE_ENV!)}/pair`, pairRoutes);\r\napp.use(`/v/${getVersion(process.env.NODE_ENV!)}/user`, userRoute);\r\napp.use(`/v/${getVersion(process.env.NODE_ENV!)}/chart`, chartRoute)\r\napp.use(DBRoute)\r\napp.use(orderRoute);\r\n\r\n\r\napp.get(\"/debug-sentry\", function mainHandler(req, res) {\r\n    throw new Error(\"My first Sentry error!\");\r\n});\r\n\r\n\r\n\r\nif (process.env.NODE_ENV == \"test\") {\r\n    start(\"31337\", httpServer)\r\n} else {\r\n    start(\"421613\", httpServer)\r\n}\r\n\r\n\r\n\r\n// The error handler must be before any other error middleware and after all controllers\r\napp.use(Sentry.Handlers.errorHandler());\r\n\r\n// Optional fallthrough error handler\r\napp.use(function onError(err: any, req: any, res: any, next: any) {\r\n    res.statusCode = 500;\r\n    res.end(res.sentry + \"\\n\");\r\n});\r\n\r\n\r\n\r\nlet server = httpServer.listen(3010, function () {\r\n    console.log(\"app running on port \" + (3010));\r\n});\r\n\r\nfunction stop() {\r\n    server.close();\r\n}\r\n\r\nmodule.exports = server;\r\nmodule.exports.stop = stop;\r\n// set NODE_ENV=test && mocha -r ts-node/register --timeout 180000 ./src/test/api/BmarginOrderLong.ts"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"150230548c81244c103c436e2ba0d3583463f479","contentHash":"0337f1362a3c0ca4367124dd24ae4b43ad2595b28586f707a007ca93fca9ed89"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\orderRoute.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\orderRoute.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":22},"end":{"line":7,"column":66}},"5":{"start":{"line":8,"column":20},"end":{"line":8,"column":62}},"6":{"start":{"line":9,"column":29},"end":{"line":9,"column":79}},"7":{"start":{"line":10,"column":29},"end":{"line":10,"column":79}},"8":{"start":{"line":11,"column":23},"end":{"line":11,"column":67}},"9":{"start":{"line":12,"column":16},"end":{"line":12,"column":42}},"10":{"start":{"line":13,"column":15},"end":{"line":13,"column":41}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":27}},"12":{"start":{"line":15,"column":16},"end":{"line":15,"column":61}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":63}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":102}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":100}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":77}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":59}},"18":{"start":{"line":21,"column":0},"end":{"line":26,"column":3}},"19":{"start":{"line":22,"column":4},"end":{"line":25,"column":7}},"20":{"start":{"line":27,"column":0},"end":{"line":27,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":16},"end":{"line":21,"column":17}},"loc":{"start":{"line":21,"column":36},"end":{"line":26,"column":1}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1},"f":{"0":1,"1":0},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/orderRoute.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/orderRoute.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,mEAAiE;AACjE,+DAA4D;AAC5D,gFAAgF;AAChF,gFAAiF;AACjF,oEAAuE;AACvE,2CAAwD;AACxD,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAGhC,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAA;AAC1B,MAAM,OAAO,GAAG,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,CAAA;AACjD,MAAM,CAAC,GAAG,CAAC,MAAM,OAAO,SAAS,EAAE,0BAAY,CAAC,CAAC,CAAC,IAAI;AACtD,MAAM,CAAC,GAAG,CAAC,MAAM,OAAO,+BAA+B,EAAE,2CAAsB,CAAC,CAAC,CAAA,IAAI;AACrF,MAAM,CAAC,GAAG,CAAC,MAAM,OAAO,8BAA8B,EAAE,0CAAqB,CAAC,CAAC,CAAC,IAAI;AACpF,MAAM,CAAC,IAAI,CAAC,MAAM,OAAO,eAAe,EAAE,iCAAkB,CAAC,CAAC,CAAC,IAAI;AACnE,MAAM,CAAC,GAAG,CAAC,MAAM,OAAO,UAAU,EAAE,qBAAS,CAAC,CAAC;AAE/C,MAAM,CAAC,GAAG,CAAC,GAAG,EAAE,UAAU,GAAG,EAAE,GAAG;IAChC,GAAG,CAAC,IAAI,CAAC;QACP,IAAI,EAAE,OAAO;QACb,MAAM,EAAE,IAAA,iBAAS,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC;KACzC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC;AAEH,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport { getAllTokens } from \"../controllers/genral/getAllToken\";\r\nimport { getFeeSet } from \"../controllers/genral/getFeeSet\";\r\nimport { getLimitMatchedOrders } from \"../controllers/order/limitMatchedOrders\";\r\nimport { getMatchedMarketOrders } from \"../controllers/order/marketMatchedOrder\";\r\nimport { handleOrderCreated } from \"../controllers/order/orderCreated\";\r\nimport { getLatest, getVersion } from \"../helper/chain\";\r\nconst router = express.Router();\r\n\r\n\r\nrequire(\"dotenv\").config()\r\nconst version = getVersion(process.env.NODE_ENV!)\r\nrouter.get(`/v/${version}/tokens`, getAllTokens); //ok\r\nrouter.get(`/v/${version}/order/market/matched/:pairId`, getMatchedMarketOrders);//ok\r\nrouter.get(`/v/${version}/order/limit/matched/:pairId`, getLimitMatchedOrders); //ok\r\nrouter.post(`/v/${version}/order/create`, handleOrderCreated); //ok\r\nrouter.get(`/v/${version}/get/fee`, getFeeSet);\r\n\r\nrouter.get(\"/\", function (req, res) {\r\n  res.send({\r\n    zexe: version,\r\n    latest: getLatest(process.env.NODE_ENV!)\r\n  });\r\n});\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ca08dc3ba550e0439c110cbea166ead865a44fce","contentHash":"bda8ff7759802fd0958b7eebe661f3d7f442666f01cd0950c0c142485984686f"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\genral\\getAllToken.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\genral\\getAllToken.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":30}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":40,"column":4},"end":{"line":54,"column":7}},"42":{"start":{"line":41,"column":8},"end":{"line":53,"column":9}},"43":{"start":{"line":42,"column":26},"end":{"line":42,"column":43}},"44":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"45":{"start":{"line":44,"column":16},"end":{"line":44,"column":107}},"46":{"start":{"line":46,"column":33},"end":{"line":46,"column":156}},"47":{"start":{"line":47,"column":12},"end":{"line":47,"column":78}},"48":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}},"49":{"start":{"line":51,"column":12},"end":{"line":51,"column":55}},"50":{"start":{"line":52,"column":12},"end":{"line":52,"column":81}},"51":{"start":{"line":56,"column":0},"end":{"line":56,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getAllTokens","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":21}},"loc":{"start":{"line":39,"column":32},"end":{"line":55,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":40,"column":43},"end":{"line":40,"column":44}},"loc":{"start":{"line":40,"column":56},"end":{"line":54,"column":5}},"line":40}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},{"start":{"line":43,"column":12},"end":{"line":45,"column":13}}],"line":43}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":0,"46":1,"47":1,"48":0,"49":0,"50":0,"51":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":2,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,1],"18":[1,1],"19":[1,1],"20":[1,1],"21":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/genral/getAllToken.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/genral/getAllToken.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,oCAA0C;AAC1C,4DAAyD;AAIzD,SAAsB,YAAY,CAAC,GAAQ,EAAE,GAAQ;;QAEjD,IAAI;YACA,IAAI,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YAChC,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YACD,MAAM,YAAY,GAAG,MAAM,UAAK,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAE5I,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAC;SAErE;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,KAAK,CAAC,CAAC;YAC3C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;IAEL,CAAC;CAAA;AAlBD,oCAkBC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { Sync, Token } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\n\r\n\r\n\r\nexport async function getAllTokens(req: any, res: any) {\r\n\r\n    try {\r\n        let chainId = req.query.chainId;\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n        const getAllTokens = await Token.find({ chainId: chainId, active: true }).select({ _id: 0, name: 1, symbol: 1, decimals: 1, id: 1 }).lean();\r\n\r\n        return res.status(200).send({ status: true, data: getAllTokens });\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getAllTokens\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6d8e0efe3b76eed03c9b7e3b2821d3d13ea97db2","contentHash":"c1ca3a95d03292b4123566d74d3610193ee24db31d2f14642291c0a631fa2ea4"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\errorMessage.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\errorMessage.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":0},"end":{"line":23,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/errorMessage.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/errorMessage.ts"],"names":[],"mappings":";;;AAEa,QAAA,YAAY,GAAG;IACxB,OAAO,EAAG,qBAAqB;IAC/B,MAAM,EAAG,iCAAiC;IAC1C,SAAS,EAAE,2BAA2B;IACtC,OAAO,EAAE,kCAAkC;IAC3C,OAAO,EAAE,sBAAsB;IAC/B,YAAY,EAAE,uCAAuC;IACrD,SAAS,EAAE,oCAAoC;IAC/C,MAAM,EAAE,iCAAiC;IACzC,QAAQ,EAAE,yEAAyE;IACnF,KAAK,EAAE,mBAAmB;IAC1B,KAAK,EAAG,mBAAmB;IAC3B,KAAK,EAAE,mBAAmB;IAC1B,SAAS,EAAE,wBAAwB;IACnC,MAAM,EAAE,qBAAqB;IAC7B,MAAM,EAAE,qBAAqB;IAC7B,MAAM,EAAE,oBAAoB;IAC5B,WAAW,EAAE,uDAAuD;IACpE,MAAM,EAAC,uBAAuB;CAEjC,CAAC","sourcesContent":["\r\n\r\nexport const errorMessage = {\r\n    chainId : \"chainId is required\",\r\n    pairId : \"pairId is required or not valid\",\r\n    signature: \"signature is not verified\",\r\n    address: \"address is required or not valid\",\r\n    balance: \"insufficient balance\",\r\n    exchangerate: \"exchangeRate is required or not valid\",\r\n    orderType: \"orderType is required or not valid\",\r\n    amount: \"amount is required or not valid\",\r\n    interval: 'interval must be one of the [\"5\", \"15\", \"30\", \"60\", \"240\", \"1D\", \"1W\"] ',\r\n    maker: \"maker is required\",\r\n    taker : \"taker is required\",\r\n    token: \"token is required\",\r\n    allowance: \"insufficient allowance\",\r\n    symbol: \"symbol is not found\",\r\n    ticker: \"ticker is not found\",\r\n    market: \"market not approve\",\r\n    borrowLimit: \"Borrow Limit not valid borrowLimit = <0.75 or > 0.05 \",\r\n    server:\"internal Server error\"\r\n\r\n};\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"94bf2684982e8dd4eeb3b683685c7c96d7fb2a01","contentHash":"441585604d28f3e6aa1e2e2a8916eb66164b7671fc35e2139c6bebf42075a361"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\genral\\getFeeSet.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\genral\\getFeeSet.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":27}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":40,"column":4},"end":{"line":54,"column":7}},"42":{"start":{"line":41,"column":8},"end":{"line":53,"column":9}},"43":{"start":{"line":42,"column":26},"end":{"line":42,"column":43}},"44":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"45":{"start":{"line":44,"column":16},"end":{"line":44,"column":107}},"46":{"start":{"line":46,"column":27},"end":{"line":46,"column":121}},"47":{"start":{"line":47,"column":12},"end":{"line":47,"column":72}},"48":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}},"49":{"start":{"line":51,"column":12},"end":{"line":51,"column":52}},"50":{"start":{"line":52,"column":12},"end":{"line":52,"column":81}},"51":{"start":{"line":56,"column":0},"end":{"line":56,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getFeeSet","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":18}},"loc":{"start":{"line":39,"column":29},"end":{"line":55,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":40,"column":43},"end":{"line":40,"column":44}},"loc":{"start":{"line":40,"column":56},"end":{"line":54,"column":5}},"line":40}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},{"start":{"line":43,"column":12},"end":{"line":45,"column":13}}],"line":43}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":0,"46":1,"47":1,"48":0,"49":0,"50":0,"51":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":2,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,1],"18":[1,1],"19":[1,1],"20":[1,1],"21":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/genral/getFeeSet.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/genral/getFeeSet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,oCAAmC;AACnC,4DAAyD;AAKzD,SAAsB,SAAS,CAAC,GAAQ,EAAE,GAAQ;;QAE9C,IAAI;YACA,IAAI,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YAChC,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YACD,MAAM,MAAM,GAAG,MAAM,SAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAEzG,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;SAE/D;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YACxC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;IACL,CAAC;CAAA;AAjBD,8BAiBC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { Sync } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\n\r\n\r\n\r\n\r\nexport async function getFeeSet(req: any, res: any) {\r\n\r\n    try {\r\n        let chainId = req.query.chainId;\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n        const getFee = await Sync.find({ chainId: chainId }).select({ _id: 0, makerFee: 1, takerFee: 1 }).lean();\r\n\r\n        return res.status(200).send({ status: true, data: getFee });\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getFeeSet\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}\r\n\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2eb6e7ccb18145d378d79b96441160565b60891b","contentHash":"efc149a7a762973f0d8e65178aa5f5a8686a338c8a6ab390761be0652469defd"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\limitMatchedOrders.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\limitMatchedOrders.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":39}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":35}},"39":{"start":{"line":37,"column":23},"end":{"line":37,"column":59}},"40":{"start":{"line":38,"column":15},"end":{"line":38,"column":52}},"41":{"start":{"line":39,"column":26},"end":{"line":39,"column":67}},"42":{"start":{"line":52,"column":4},"end":{"line":166,"column":7}},"43":{"start":{"line":53,"column":8},"end":{"line":165,"column":9}},"44":{"start":{"line":54,"column":25},"end":{"line":54,"column":103}},"45":{"start":{"line":55,"column":31},"end":{"line":55,"column":53}},"46":{"start":{"line":56,"column":28},"end":{"line":56,"column":55}},"47":{"start":{"line":57,"column":25},"end":{"line":57,"column":49}},"48":{"start":{"line":58,"column":26},"end":{"line":58,"column":43}},"49":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"50":{"start":{"line":60,"column":16},"end":{"line":60,"column":106}},"51":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"52":{"start":{"line":63,"column":16},"end":{"line":63,"column":112}},"53":{"start":{"line":65,"column":12},"end":{"line":67,"column":13}},"54":{"start":{"line":66,"column":16},"end":{"line":66,"column":109}},"55":{"start":{"line":68,"column":12},"end":{"line":70,"column":13}},"56":{"start":{"line":69,"column":16},"end":{"line":69,"column":106}},"57":{"start":{"line":71,"column":34},"end":{"line":71,"column":112}},"58":{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},"59":{"start":{"line":73,"column":16},"end":{"line":73,"column":106}},"60":{"start":{"line":75,"column":32},"end":{"line":75,"column":34}},"61":{"start":{"line":76,"column":12},"end":{"line":125,"column":13}},"62":{"start":{"line":77,"column":16},"end":{"line":99,"column":19}},"63":{"start":{"line":101,"column":17},"end":{"line":125,"column":13}},"64":{"start":{"line":102,"column":16},"end":{"line":124,"column":19}},"65":{"start":{"line":126,"column":23},"end":{"line":126,"column":25}},"66":{"start":{"line":127,"column":29},"end":{"line":127,"column":30}},"67":{"start":{"line":128,"column":26},"end":{"line":128,"column":27}},"68":{"start":{"line":129,"column":28},"end":{"line":129,"column":30}},"69":{"start":{"line":130,"column":26},"end":{"line":130,"column":28}},"70":{"start":{"line":131,"column":22},"end":{"line":131,"column":24}},"71":{"start":{"line":132,"column":12},"end":{"line":134,"column":13}},"72":{"start":{"line":133,"column":16},"end":{"line":133,"column":72}},"73":{"start":{"line":135,"column":12},"end":{"line":147,"column":13}},"74":{"start":{"line":135,"column":25},"end":{"line":135,"column":26}},"75":{"start":{"line":136,"column":16},"end":{"line":141,"column":17}},"76":{"start":{"line":137,"column":20},"end":{"line":137,"column":30}},"77":{"start":{"line":138,"column":20},"end":{"line":140,"column":21}},"78":{"start":{"line":139,"column":24},"end":{"line":139,"column":30}},"79":{"start":{"line":142,"column":16},"end":{"line":142,"column":69}},"80":{"start":{"line":143,"column":16},"end":{"line":143,"column":55}},"81":{"start":{"line":144,"column":16},"end":{"line":144,"column":69}},"82":{"start":{"line":145,"column":16},"end":{"line":145,"column":44}},"83":{"start":{"line":146,"column":16},"end":{"line":146,"column":47}},"84":{"start":{"line":149,"column":12},"end":{"line":154,"column":13}},"85":{"start":{"line":150,"column":16},"end":{"line":150,"column":39}},"86":{"start":{"line":153,"column":16},"end":{"line":153,"column":39}},"87":{"start":{"line":155,"column":27},"end":{"line":155,"column":118}},"88":{"start":{"line":156,"column":12},"end":{"line":158,"column":13}},"89":{"start":{"line":157,"column":16},"end":{"line":157,"column":72}},"90":{"start":{"line":159,"column":12},"end":{"line":159,"column":74}},"91":{"start":{"line":162,"column":12},"end":{"line":162,"column":59}},"92":{"start":{"line":163,"column":12},"end":{"line":163,"column":43}},"93":{"start":{"line":164,"column":12},"end":{"line":164,"column":81}},"94":{"start":{"line":168,"column":0},"end":{"line":168,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getLimitMatchedOrders","decl":{"start":{"line":50,"column":9},"end":{"line":50,"column":30}},"loc":{"start":{"line":50,"column":41},"end":{"line":167,"column":1}},"line":50},"14":{"name":"(anonymous_14)","decl":{"start":{"line":52,"column":43},"end":{"line":52,"column":44}},"loc":{"start":{"line":52,"column":56},"end":{"line":166,"column":5}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":54,"column":25},"end":{"line":54,"column":103}},"type":"cond-expr","locations":[{"start":{"line":54,"column":78},"end":{"line":54,"column":84}},{"start":{"line":54,"column":87},"end":{"line":54,"column":103}}],"line":54},"22":{"loc":{"start":{"line":54,"column":25},"end":{"line":54,"column":75}},"type":"binary-expr","locations":[{"start":{"line":54,"column":25},"end":{"line":54,"column":58}},{"start":{"line":54,"column":62},"end":{"line":54,"column":75}}],"line":54},"23":{"loc":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"type":"if","locations":[{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},{"start":{"line":59,"column":12},"end":{"line":61,"column":13}}],"line":59},"24":{"loc":{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":64,"column":13}},{"start":{"line":62,"column":12},"end":{"line":64,"column":13}}],"line":62},"25":{"loc":{"start":{"line":62,"column":16},"end":{"line":62,"column":60}},"type":"binary-expr","locations":[{"start":{"line":62,"column":16},"end":{"line":62,"column":29}},{"start":{"line":62,"column":33},"end":{"line":62,"column":60}}],"line":62},"26":{"loc":{"start":{"line":65,"column":12},"end":{"line":67,"column":13}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":67,"column":13}},{"start":{"line":65,"column":12},"end":{"line":67,"column":13}}],"line":65},"27":{"loc":{"start":{"line":68,"column":12},"end":{"line":70,"column":13}},"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":70,"column":13}},{"start":{"line":68,"column":12},"end":{"line":70,"column":13}}],"line":68},"28":{"loc":{"start":{"line":68,"column":16},"end":{"line":68,"column":48}},"type":"binary-expr","locations":[{"start":{"line":68,"column":16},"end":{"line":68,"column":23}},{"start":{"line":68,"column":27},"end":{"line":68,"column":48}}],"line":68},"29":{"loc":{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},"type":"if","locations":[{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},{"start":{"line":72,"column":12},"end":{"line":74,"column":13}}],"line":72},"30":{"loc":{"start":{"line":76,"column":12},"end":{"line":125,"column":13}},"type":"if","locations":[{"start":{"line":76,"column":12},"end":{"line":125,"column":13}},{"start":{"line":76,"column":12},"end":{"line":125,"column":13}}],"line":76},"31":{"loc":{"start":{"line":76,"column":16},"end":{"line":76,"column":48}},"type":"binary-expr","locations":[{"start":{"line":76,"column":16},"end":{"line":76,"column":30}},{"start":{"line":76,"column":34},"end":{"line":76,"column":48}}],"line":76},"32":{"loc":{"start":{"line":101,"column":17},"end":{"line":125,"column":13}},"type":"if","locations":[{"start":{"line":101,"column":17},"end":{"line":125,"column":13}},{"start":{"line":101,"column":17},"end":{"line":125,"column":13}}],"line":101},"33":{"loc":{"start":{"line":101,"column":21},"end":{"line":101,"column":53}},"type":"binary-expr","locations":[{"start":{"line":101,"column":21},"end":{"line":101,"column":35}},{"start":{"line":101,"column":39},"end":{"line":101,"column":53}}],"line":101},"34":{"loc":{"start":{"line":132,"column":12},"end":{"line":134,"column":13}},"type":"if","locations":[{"start":{"line":132,"column":12},"end":{"line":134,"column":13}},{"start":{"line":132,"column":12},"end":{"line":134,"column":13}}],"line":132},"35":{"loc":{"start":{"line":136,"column":16},"end":{"line":141,"column":17}},"type":"if","locations":[{"start":{"line":136,"column":16},"end":{"line":141,"column":17}},{"start":{"line":136,"column":16},"end":{"line":141,"column":17}}],"line":136},"36":{"loc":{"start":{"line":138,"column":20},"end":{"line":140,"column":21}},"type":"if","locations":[{"start":{"line":138,"column":20},"end":{"line":140,"column":21}},{"start":{"line":138,"column":20},"end":{"line":140,"column":21}}],"line":138},"37":{"loc":{"start":{"line":149,"column":12},"end":{"line":154,"column":13}},"type":"if","locations":[{"start":{"line":149,"column":12},"end":{"line":154,"column":13}},{"start":{"line":149,"column":12},"end":{"line":154,"column":13}}],"line":149},"38":{"loc":{"start":{"line":149,"column":16},"end":{"line":149,"column":48}},"type":"binary-expr","locations":[{"start":{"line":149,"column":16},"end":{"line":149,"column":30}},{"start":{"line":149,"column":34},"end":{"line":149,"column":48}}],"line":149},"39":{"loc":{"start":{"line":156,"column":12},"end":{"line":158,"column":13}},"type":"if","locations":[{"start":{"line":156,"column":12},"end":{"line":158,"column":13}},{"start":{"line":156,"column":12},"end":{"line":158,"column":13}}],"line":156}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":2,"26":2,"27":1,"28":2,"29":2,"30":0,"31":0,"32":0,"33":0,"34":3,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":0,"51":1,"52":0,"53":1,"54":0,"55":1,"56":0,"57":1,"58":1,"59":0,"60":1,"61":1,"62":1,"63":0,"64":0,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":2,"8":2,"9":1,"10":2,"11":0,"12":3,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,2],"18":[1,1],"19":[1,2],"20":[1,1],"21":[0,1],"22":[1,1],"23":[0,1],"24":[0,1],"25":[1,1],"26":[0,1],"27":[0,1],"28":[1,1],"29":[0,1],"30":[1,0],"31":[1,0],"32":[0,0],"33":[0,0],"34":[1,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/limitMatchedOrders.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/limitMatchedOrders.ts"],"names":[],"mappings":"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","sourcesContent":["\r\n\r\nimport { Pair, Order } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\nimport { ifOrderCreated, ifPair } from \"../../helper/interface\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { getMultiBalance } from \"../../muticall/getMultiBalance\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @dev this api function will provide order as per the exchangeRate\r\n * @param {*} req.params.pairId (string) a valid pairId required\r\n * @param {*} req.query.exchangeRate (string) a valid pairId required\r\n * @param {*} req.query.buy (boolean) true for buying false for selling\r\n * @param {*} req.query.chainId (string) numeric chainId\r\n * @param {*} req.query.amount (string) numeric amount to be buy or sell in 10 to the pow 18 form\r\n * @param {*} res \r\n * @returns \r\n */\r\n\r\nexport async function getLimitMatchedOrders(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        let pairId: string = req.params.pairId?.toLowerCase();\r\n\r\n        let exchangeRate: string = req.query.exchangeRate;\r\n\r\n        let orderType: number = Number(req.query.orderType);\r\n\r\n        let amount: number = Number(req.query.amount);\r\n\r\n        let chainId: string = req.query.chainId;\r\n\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        if (!exchangeRate || isNaN(Number(exchangeRate))) {\r\n            return res.status(400).send({ status: false, error: errorMessage.exchangerate });\r\n        }\r\n\r\n        if (isNaN(orderType) == true) {\r\n            return res.status(400).send({ status: false, error: errorMessage.orderType });\r\n        }\r\n\r\n        if (!amount || isNaN(amount) == true) {\r\n            return res.status(400).send({ status: false, error: errorMessage.amount });\r\n        }\r\n\r\n        const isPairIdExist: ifPair | null = await Pair.findOne({ id: pairId, chainId: chainId, active: true }).lean();\r\n\r\n        if (!isPairIdExist) {\r\n            return res.status(404).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        let getMatchedDoc: ifOrderCreated[] = [];\r\n\r\n        if (orderType == 0 || orderType == 2) {\r\n            getMatchedDoc = await Order.aggregate(\r\n                [\r\n                    {\r\n                        $match: {\r\n                            $and: [\r\n                                { pair: pairId },\r\n                                { \"$expr\": { \"$lte\": [{ \"$toDouble\": \"$exchangeRate\" }, Number(exchangeRate)] } },\r\n                                { orderType: { $in: [1, 3] } },\r\n                                { chainId: chainId },\r\n                                { deleted: false },\r\n                                { active: true },\r\n                                { cancelled: false }\r\n                            ]\r\n                        }\r\n                    },\r\n                    {\r\n                        $sort: { exchangeRate: 1, balanceAmount: 1 }\r\n                    }\r\n                ],\r\n                {\r\n                    collation: {\r\n                        locale: \"en_US\",\r\n                        numericOrdering: true\r\n                    }\r\n                }\r\n            );\r\n        }\r\n        else if (orderType == 1 || orderType == 3) {\r\n            getMatchedDoc = await Order.aggregate(\r\n                [\r\n                    {\r\n                        $match: {\r\n                            $and: [\r\n                                { pair: pairId },\r\n                                { \"$expr\": { \"$gte\": [{ \"$toDouble\": \"$exchangeRate\" }, Number(exchangeRate)] } },\r\n                                { orderType: { $in: [0, 2] } },\r\n                                { chainId: chainId },\r\n                                { deleted: false },\r\n                                { active: true },\r\n                                { cancelled: false }\r\n                            ]\r\n                        }\r\n                    },\r\n                    {\r\n                        $sort: { exchangeRate: -1, balanceAmount: 1 }\r\n                    }\r\n                ],\r\n                {\r\n                    collation: {\r\n                        locale: \"en_US\",\r\n                        numericOrdering: true\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        let data: ifOrderCreated[] = [];\r\n        let currAmount = 0;\r\n        let counter = 0;\r\n        let addresses: any = [];\r\n        let amounts: any = [];\r\n        let ids: any = [];\r\n\r\n        if (getMatchedDoc.length == 0) {\r\n            return res.status(200).send({ status: true, data: [] });\r\n        }\r\n\r\n        for (let i = 0; i < getMatchedDoc.length; i++) {\r\n\r\n            if (currAmount >= amount) {\r\n                counter++;\r\n                if (counter > 10) {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            currAmount += Number(getMatchedDoc[i].balanceAmount);\r\n            addresses.push(getMatchedDoc[i].maker);\r\n            amounts.push(Number(getMatchedDoc[i].balanceAmount));\r\n            data.push(getMatchedDoc[i]);\r\n            ids.push(getMatchedDoc[i]._id);\r\n\r\n        }\r\n\r\n        let token;\r\n        if (orderType == 0 || orderType == 2) {\r\n            token = data[0].token0;\r\n        } else {\r\n            token = data[0].token1;\r\n        }\r\n\r\n        let response = await getMultiBalance(token, addresses, ids, data, chainId, amounts);\r\n\r\n        if (!response) {\r\n            return res.status(200).send({ status: true, data: [] });\r\n        }\r\n\r\n        return res.status(200).send({ status: true, data: response });\r\n    }\r\n    catch (error: any) {\r\n        console.log(\"Error @ getMatchedOrders\", error);\r\n        sentry.captureException(error)\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cd8a856cfa381eaebb293fa0ec16656cbdcd3840","contentHash":"b73c1033bf30263d462af7d84d17d04f58472eb5e496dd90041381232e4d82b6"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\getMultiBalance.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\getMultiBalance.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":33}},"40":{"start":{"line":39,"column":17},"end":{"line":39,"column":34}},"41":{"start":{"line":40,"column":13},"end":{"line":40,"column":32}},"42":{"start":{"line":41,"column":17},"end":{"line":41,"column":51}},"43":{"start":{"line":42,"column":16},"end":{"line":42,"column":41}},"44":{"start":{"line":43,"column":15},"end":{"line":43,"column":52}},"45":{"start":{"line":44,"column":16},"end":{"line":44,"column":42}},"46":{"start":{"line":57,"column":4},"end":{"line":114,"column":7}},"47":{"start":{"line":58,"column":33},"end":{"line":112,"column":10}},"48":{"start":{"line":58,"column":39},"end":{"line":112,"column":10}},"49":{"start":{"line":59,"column":12},"end":{"line":111,"column":13}},"50":{"start":{"line":60,"column":34},"end":{"line":60,"column":175}},"51":{"start":{"line":61,"column":28},"end":{"line":61,"column":87}},"52":{"start":{"line":62,"column":29},"end":{"line":67,"column":19}},"53":{"start":{"line":63,"column":20},"end":{"line":66,"column":22}},"54":{"start":{"line":68,"column":34},"end":{"line":68,"column":36}},"55":{"start":{"line":69,"column":16},"end":{"line":81,"column":17}},"56":{"start":{"line":69,"column":29},"end":{"line":69,"column":30}},"57":{"start":{"line":70,"column":34},"end":{"line":70,"column":80}},"58":{"start":{"line":71,"column":39},"end":{"line":71,"column":123}},"59":{"start":{"line":72,"column":41},"end":{"line":72,"column":91}},"60":{"start":{"line":73,"column":20},"end":{"line":80,"column":21}},"61":{"start":{"line":74,"column":24},"end":{"line":74,"column":49}},"62":{"start":{"line":75,"column":52},"end":{"line":75,"column":118}},"63":{"start":{"line":76,"column":49},"end":{"line":76,"column":182}},"64":{"start":{"line":77,"column":24},"end":{"line":77,"column":68}},"65":{"start":{"line":78,"column":42},"end":{"line":78,"column":115}},"66":{"start":{"line":79,"column":24},"end":{"line":79,"column":77}},"67":{"start":{"line":82,"column":26},"end":{"line":82,"column":28}},"68":{"start":{"line":83,"column":16},"end":{"line":104,"column":17}},"69":{"start":{"line":84,"column":20},"end":{"line":103,"column":21}},"70":{"start":{"line":85,"column":24},"end":{"line":85,"column":33}},"71":{"start":{"line":88,"column":24},"end":{"line":102,"column":27}},"72":{"start":{"line":105,"column":16},"end":{"line":105,"column":27}},"73":{"start":{"line":108,"column":16},"end":{"line":108,"column":47}},"74":{"start":{"line":109,"column":16},"end":{"line":109,"column":62}},"75":{"start":{"line":110,"column":16},"end":{"line":110,"column":28}},"76":{"start":{"line":113,"column":8},"end":{"line":113,"column":34}},"77":{"start":{"line":116,"column":0},"end":{"line":116,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"getMultiBalance","decl":{"start":{"line":56,"column":9},"end":{"line":56,"column":24}},"loc":{"start":{"line":56,"column":72},"end":{"line":115,"column":1}},"line":56},"15":{"name":"(anonymous_15)","decl":{"start":{"line":57,"column":43},"end":{"line":57,"column":44}},"loc":{"start":{"line":57,"column":56},"end":{"line":114,"column":5}},"line":57},"16":{"name":"(anonymous_16)","decl":{"start":{"line":58,"column":33},"end":{"line":58,"column":34}},"loc":{"start":{"line":58,"column":39},"end":{"line":112,"column":10}},"line":58},"17":{"name":"(anonymous_17)","decl":{"start":{"line":58,"column":71},"end":{"line":58,"column":72}},"loc":{"start":{"line":58,"column":84},"end":{"line":112,"column":9}},"line":58},"18":{"name":"(anonymous_18)","decl":{"start":{"line":62,"column":80},"end":{"line":62,"column":81}},"loc":{"start":{"line":62,"column":89},"end":{"line":67,"column":17}},"line":62}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":73,"column":20},"end":{"line":80,"column":21}},"type":"if","locations":[{"start":{"line":73,"column":20},"end":{"line":80,"column":21}},{"start":{"line":73,"column":20},"end":{"line":80,"column":21}}],"line":73},"25":{"loc":{"start":{"line":84,"column":20},"end":{"line":103,"column":21}},"type":"if","locations":[{"start":{"line":84,"column":20},"end":{"line":103,"column":21}},{"start":{"line":84,"column":20},"end":{"line":103,"column":21}}],"line":84}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":4,"26":3,"27":2,"28":4,"29":4,"30":0,"31":0,"32":0,"33":0,"34":6,"35":2,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":3,"54":1,"55":1,"56":1,"57":3,"58":3,"59":3,"60":3,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":1,"69":3,"70":0,"71":3,"72":1,"73":0,"74":0,"75":0,"76":1,"77":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":2,"7":4,"8":3,"9":2,"10":4,"11":0,"12":6,"13":1,"14":1,"15":1,"16":1,"17":1,"18":3},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[1,3],"18":[2,2],"19":[2,4],"20":[2,2],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,3],"25":[0,3]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/getMultiBalance.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/getMultiBalance.ts"],"names":[],"mappings":"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","sourcesContent":["\r\n\r\nimport { BigNumber, ethers } from \"ethers\";\r\nimport { User, Order } from \"../DB/db\";\r\nimport Big from \"big.js\";\r\nimport { getProvider, getInterface, getABI } from \"../utils/utils\";\r\nimport { ifOrderCreated, ifUserPosition, orderSignature } from \"../helper/interface\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { getMulticallAddress } from \"../helper/chain\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @dev this function is used to check weather the fetched order is still active or not\r\n * @notice its check if maker has sufficeint token or not, and remove invalid data, update as inActive in DB\r\n * @param {*} token (string) address of token\r\n * @param {*} addresses ([string]) addresses of user\r\n * @param {*} ids ([string]) ids of orders\r\n * @param {*} data (object) document from DB\r\n * @param {*} chainId (string) numeric chainId\r\n * @param {*} amounts ([string]) numeric amounts of repective orders\r\n * @returns (object) only valid order send \r\n */\r\nexport async function getMultiBalance(token: string, addresses: string[], ids: string[], data: ifOrderCreated[], chainId: string, amounts: number[]) {\r\n\r\n    const _getMultiBalance = async () => {\r\n        try {\r\n           \r\n            const multicall: ethers.Contract = new ethers.Contract(\r\n               getMulticallAddress(chainId),\r\n               getABI(\"Multicall2\"),\r\n               getProvider(chainId)\r\n            );\r\n\r\n            const itf: ethers.utils.Interface = getInterface(getABI(\"TestERC20\"));\r\n\r\n            const resp: any = await multicall.callStatic.aggregate(\r\n\r\n                addresses.map((add: string) => {\r\n                    return [\r\n                        token,\r\n                        itf.encodeFunctionData(\"balanceOf\", [add]),\r\n                    ];\r\n                })\r\n\r\n            );\r\n\r\n            let inActiveIds: string[] = [];\r\n            for (let i = 0; i < resp[1].length; i++) {\r\n\r\n                let balance = BigNumber.from(resp[1][i]).toString();\r\n                let userPosition: ifUserPosition = await User.findOne({ token: token, id: addresses[i], chainId: chainId }).lean();\r\n                let inOrderBalance = Big(userPosition.inOrderBalance);\r\n\r\n                if (Number(balance) < Number(inOrderBalance)) {\r\n                    inActiveIds.push(ids[i]);\r\n                    let currentInOrderBalance = Big(inOrderBalance).minus(amounts[i]).toString();\r\n\r\n                    let updateUserPosition = User.findOneAndUpdate({ token: token, id: addresses[i], chainId: chainId }, { $set: { inOrderBalance: currentInOrderBalance } });\r\n                    console.log(\"Order Deactivate\", data[i].id)\r\n                    let deleteOrder = Order.findOneAndUpdate({ _id: ids[i] }, { $set: { active: false } });\r\n                    await Promise.all([updateUserPosition, deleteOrder]);\r\n                }\r\n\r\n            }\r\n\r\n            let res: orderSignature[] = [];\r\n\r\n            for (let i in data) {\r\n\r\n                if (inActiveIds.includes(data[i]._id)) {\r\n                    continue;\r\n                }\r\n                else {\r\n                    res.push({\r\n                        signature: data[i].signature,\r\n                        id: data[i].id,\r\n                        value: {\r\n                            maker: data[i].maker,\r\n                            token0: data[i].token0,\r\n                            token1: data[i].token1,\r\n                            amount: data[i].amount,\r\n                            orderType: data[i].orderType,\r\n                            salt: data[i].salt,\r\n                            exchangeRate: data[i].exchangeRate,\r\n                            borrowLimit: data[i].borrowLimit,\r\n                            loops: data[i].loops\r\n                        }\r\n                    });\r\n\r\n                }\r\n            }\r\n\r\n            return res;\r\n        } catch (error) {\r\n            sentry.captureException(error);\r\n            console.log(\"Error @ getMultiBalance\", error);\r\n            return null\r\n\r\n        }\r\n    };\r\n    return _getMultiBalance();\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"525b8e32232b9f94465af40637aed3c8d9bf761f","contentHash":"ccaa2566ac3b05235318839ecbeda064fcc9f1833bafd6d779ca0df58e0177f3"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\marketMatchedOrder.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\marketMatchedOrder.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":40}},"40":{"start":{"line":39,"column":13},"end":{"line":39,"column":35}},"41":{"start":{"line":40,"column":17},"end":{"line":40,"column":51}},"42":{"start":{"line":41,"column":23},"end":{"line":41,"column":59}},"43":{"start":{"line":42,"column":15},"end":{"line":42,"column":52}},"44":{"start":{"line":43,"column":26},"end":{"line":43,"column":67}},"45":{"start":{"line":46,"column":4},"end":{"line":116,"column":7}},"46":{"start":{"line":47,"column":8},"end":{"line":115,"column":9}},"47":{"start":{"line":48,"column":25},"end":{"line":48,"column":103}},"48":{"start":{"line":49,"column":28},"end":{"line":49,"column":55}},"49":{"start":{"line":50,"column":25},"end":{"line":50,"column":49}},"50":{"start":{"line":51,"column":26},"end":{"line":51,"column":43}},"51":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"52":{"start":{"line":53,"column":16},"end":{"line":53,"column":107}},"53":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"54":{"start":{"line":56,"column":16},"end":{"line":56,"column":106}},"55":{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},"56":{"start":{"line":59,"column":16},"end":{"line":59,"column":109}},"57":{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},"58":{"start":{"line":62,"column":16},"end":{"line":62,"column":106}},"59":{"start":{"line":64,"column":32},"end":{"line":64,"column":34}},"60":{"start":{"line":65,"column":12},"end":{"line":70,"column":13}},"61":{"start":{"line":66,"column":16},"end":{"line":66,"column":253}},"62":{"start":{"line":68,"column":17},"end":{"line":70,"column":13}},"63":{"start":{"line":69,"column":16},"end":{"line":69,"column":254}},"64":{"start":{"line":71,"column":23},"end":{"line":71,"column":25}},"65":{"start":{"line":72,"column":29},"end":{"line":72,"column":30}},"66":{"start":{"line":73,"column":26},"end":{"line":73,"column":27}},"67":{"start":{"line":74,"column":28},"end":{"line":74,"column":30}},"68":{"start":{"line":75,"column":26},"end":{"line":75,"column":28}},"69":{"start":{"line":76,"column":22},"end":{"line":76,"column":24}},"70":{"start":{"line":77,"column":12},"end":{"line":94,"column":13}},"71":{"start":{"line":77,"column":25},"end":{"line":77,"column":26}},"72":{"start":{"line":78,"column":16},"end":{"line":83,"column":17}},"73":{"start":{"line":79,"column":20},"end":{"line":79,"column":30}},"74":{"start":{"line":80,"column":20},"end":{"line":82,"column":21}},"75":{"start":{"line":81,"column":24},"end":{"line":81,"column":30}},"76":{"start":{"line":84,"column":16},"end":{"line":89,"column":17}},"77":{"start":{"line":85,"column":20},"end":{"line":85,"column":172}},"78":{"start":{"line":87,"column":21},"end":{"line":89,"column":17}},"79":{"start":{"line":88,"column":20},"end":{"line":88,"column":73}},"80":{"start":{"line":90,"column":16},"end":{"line":90,"column":55}},"81":{"start":{"line":91,"column":16},"end":{"line":91,"column":69}},"82":{"start":{"line":92,"column":16},"end":{"line":92,"column":44}},"83":{"start":{"line":93,"column":16},"end":{"line":93,"column":47}},"84":{"start":{"line":95,"column":12},"end":{"line":97,"column":13}},"85":{"start":{"line":96,"column":16},"end":{"line":96,"column":72}},"86":{"start":{"line":99,"column":12},"end":{"line":104,"column":13}},"87":{"start":{"line":100,"column":16},"end":{"line":100,"column":39}},"88":{"start":{"line":103,"column":16},"end":{"line":103,"column":39}},"89":{"start":{"line":105,"column":25},"end":{"line":105,"column":116}},"90":{"start":{"line":106,"column":12},"end":{"line":108,"column":13}},"91":{"start":{"line":107,"column":16},"end":{"line":107,"column":72}},"92":{"start":{"line":109,"column":12},"end":{"line":109,"column":72}},"93":{"start":{"line":112,"column":12},"end":{"line":112,"column":65}},"94":{"start":{"line":113,"column":12},"end":{"line":113,"column":43}},"95":{"start":{"line":114,"column":12},"end":{"line":114,"column":81}},"96":{"start":{"line":118,"column":0},"end":{"line":118,"column":56}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"getMatchedMarketOrders","decl":{"start":{"line":44,"column":9},"end":{"line":44,"column":31}},"loc":{"start":{"line":44,"column":42},"end":{"line":117,"column":1}},"line":44},"15":{"name":"(anonymous_15)","decl":{"start":{"line":46,"column":43},"end":{"line":46,"column":44}},"loc":{"start":{"line":46,"column":56},"end":{"line":116,"column":5}},"line":46}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":48,"column":25},"end":{"line":48,"column":103}},"type":"cond-expr","locations":[{"start":{"line":48,"column":78},"end":{"line":48,"column":84}},{"start":{"line":48,"column":87},"end":{"line":48,"column":103}}],"line":48},"25":{"loc":{"start":{"line":48,"column":25},"end":{"line":48,"column":75}},"type":"binary-expr","locations":[{"start":{"line":48,"column":25},"end":{"line":48,"column":58}},{"start":{"line":48,"column":62},"end":{"line":48,"column":75}}],"line":48},"26":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52},"27":{"loc":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},{"start":{"line":55,"column":12},"end":{"line":57,"column":13}}],"line":55},"28":{"loc":{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":60,"column":13}},{"start":{"line":58,"column":12},"end":{"line":60,"column":13}}],"line":58},"29":{"loc":{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},"type":"if","locations":[{"start":{"line":61,"column":12},"end":{"line":63,"column":13}},{"start":{"line":61,"column":12},"end":{"line":63,"column":13}}],"line":61},"30":{"loc":{"start":{"line":61,"column":16},"end":{"line":61,"column":52}},"type":"binary-expr","locations":[{"start":{"line":61,"column":16},"end":{"line":61,"column":37}},{"start":{"line":61,"column":41},"end":{"line":61,"column":52}}],"line":61},"31":{"loc":{"start":{"line":65,"column":12},"end":{"line":70,"column":13}},"type":"if","locations":[{"start":{"line":65,"column":12},"end":{"line":70,"column":13}},{"start":{"line":65,"column":12},"end":{"line":70,"column":13}}],"line":65},"32":{"loc":{"start":{"line":65,"column":16},"end":{"line":65,"column":48}},"type":"binary-expr","locations":[{"start":{"line":65,"column":16},"end":{"line":65,"column":30}},{"start":{"line":65,"column":34},"end":{"line":65,"column":48}}],"line":65},"33":{"loc":{"start":{"line":68,"column":17},"end":{"line":70,"column":13}},"type":"if","locations":[{"start":{"line":68,"column":17},"end":{"line":70,"column":13}},{"start":{"line":68,"column":17},"end":{"line":70,"column":13}}],"line":68},"34":{"loc":{"start":{"line":68,"column":21},"end":{"line":68,"column":53}},"type":"binary-expr","locations":[{"start":{"line":68,"column":21},"end":{"line":68,"column":35}},{"start":{"line":68,"column":39},"end":{"line":68,"column":53}}],"line":68},"35":{"loc":{"start":{"line":77,"column":33},"end":{"line":77,"column":115}},"type":"cond-expr","locations":[{"start":{"line":77,"column":86},"end":{"line":77,"column":92}},{"start":{"line":77,"column":95},"end":{"line":77,"column":115}}],"line":77},"36":{"loc":{"start":{"line":77,"column":33},"end":{"line":77,"column":83}},"type":"binary-expr","locations":[{"start":{"line":77,"column":33},"end":{"line":77,"column":55}},{"start":{"line":77,"column":59},"end":{"line":77,"column":83}}],"line":77},"37":{"loc":{"start":{"line":78,"column":16},"end":{"line":83,"column":17}},"type":"if","locations":[{"start":{"line":78,"column":16},"end":{"line":83,"column":17}},{"start":{"line":78,"column":16},"end":{"line":83,"column":17}}],"line":78},"38":{"loc":{"start":{"line":80,"column":20},"end":{"line":82,"column":21}},"type":"if","locations":[{"start":{"line":80,"column":20},"end":{"line":82,"column":21}},{"start":{"line":80,"column":20},"end":{"line":82,"column":21}}],"line":80},"39":{"loc":{"start":{"line":84,"column":16},"end":{"line":89,"column":17}},"type":"if","locations":[{"start":{"line":84,"column":16},"end":{"line":89,"column":17}},{"start":{"line":84,"column":16},"end":{"line":89,"column":17}}],"line":84},"40":{"loc":{"start":{"line":84,"column":20},"end":{"line":84,"column":52}},"type":"binary-expr","locations":[{"start":{"line":84,"column":20},"end":{"line":84,"column":34}},{"start":{"line":84,"column":38},"end":{"line":84,"column":52}}],"line":84},"41":{"loc":{"start":{"line":87,"column":21},"end":{"line":89,"column":17}},"type":"if","locations":[{"start":{"line":87,"column":21},"end":{"line":89,"column":17}},{"start":{"line":87,"column":21},"end":{"line":89,"column":17}}],"line":87},"42":{"loc":{"start":{"line":87,"column":25},"end":{"line":87,"column":57}},"type":"binary-expr","locations":[{"start":{"line":87,"column":25},"end":{"line":87,"column":39}},{"start":{"line":87,"column":43},"end":{"line":87,"column":57}}],"line":87},"43":{"loc":{"start":{"line":95,"column":12},"end":{"line":97,"column":13}},"type":"if","locations":[{"start":{"line":95,"column":12},"end":{"line":97,"column":13}},{"start":{"line":95,"column":12},"end":{"line":97,"column":13}}],"line":95},"44":{"loc":{"start":{"line":99,"column":12},"end":{"line":104,"column":13}},"type":"if","locations":[{"start":{"line":99,"column":12},"end":{"line":104,"column":13}},{"start":{"line":99,"column":12},"end":{"line":104,"column":13}}],"line":99},"45":{"loc":{"start":{"line":99,"column":16},"end":{"line":99,"column":48}},"type":"binary-expr","locations":[{"start":{"line":99,"column":16},"end":{"line":99,"column":30}},{"start":{"line":99,"column":34},"end":{"line":99,"column":48}}],"line":99},"46":{"loc":{"start":{"line":106,"column":12},"end":{"line":108,"column":13}},"type":"if","locations":[{"start":{"line":106,"column":12},"end":{"line":108,"column":13}},{"start":{"line":106,"column":12},"end":{"line":108,"column":13}}],"line":106}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":2,"26":1,"27":1,"28":2,"29":2,"30":0,"31":0,"32":0,"33":0,"34":3,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":0,"53":1,"54":0,"55":1,"56":0,"57":1,"58":0,"59":1,"60":1,"61":1,"62":0,"63":0,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":3,"73":2,"74":2,"75":0,"76":3,"77":3,"78":0,"79":0,"80":3,"81":3,"82":3,"83":3,"84":1,"85":0,"86":1,"87":1,"88":0,"89":1,"90":1,"91":0,"92":1,"93":0,"94":0,"95":0,"96":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":2,"8":1,"9":1,"10":2,"11":0,"12":3,"13":1,"14":1,"15":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[1,1],"18":[1,1],"19":[1,2],"20":[1,1],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,1],"25":[1,1],"26":[0,1],"27":[0,1],"28":[0,1],"29":[0,1],"30":[1,1],"31":[1,0],"32":[1,0],"33":[0,0],"34":[0,0],"35":[0,4],"36":[4,4],"37":[2,1],"38":[0,2],"39":[3,0],"40":[3,0],"41":[0,0],"42":[0,0],"43":[0,1],"44":[1,0],"45":[1,0],"46":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/marketMatchedOrder.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/marketMatchedOrder.ts"],"names":[],"mappings":"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","sourcesContent":["import { Order } from \"../../DB/db\";\r\nimport Big from \"big.js\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\nimport { ifOrderCreated} from \"../../helper/interface\";\r\nimport {  } from \"./helper/marginValidationUserPosition\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { getMultiBalance } from \"../../muticall/getMultiBalance\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function getMatchedMarketOrders(req: any, res: any) {\r\n    try {\r\n\r\n        let pairId: string = req.params.pairId?.toLowerCase();\r\n        let orderType: number = Number(req.query.orderType);\r\n        let amount: number = Number(req.query.amount);\r\n        let chainId: string = req.query.chainId;\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        if (isNaN(orderType) == true) {\r\n            return res.status(400).send({ status: false, error: errorMessage.orderType });\r\n        }\r\n\r\n        if (isNaN(amount) == true || amount <= 0) {\r\n            return res.status(400).send({ status: false, error: errorMessage.amount });\r\n        }\r\n\r\n        let getMatchedDoc: ifOrderCreated[] = [];\r\n\r\n        if (orderType == 0 || orderType == 2) {\r\n            getMatchedDoc = await Order.find({ pair: pairId, orderType: { $in: [1, 3] }, chainId: chainId, deleted: false, active: true, cancelled: false }).sort({ exchangeRate: 1 }).collation({ locale: \"en_US\", numericOrdering: true }).lean();\r\n        }\r\n        else if (orderType == 1 || orderType == 3) {\r\n            getMatchedDoc = await Order.find({ pair: pairId, orderType: { $in: [0, 2] }, chainId: chainId, deleted: false, active: true, cancelled: false }).sort({ exchangeRate: -1 }).collation({ locale: \"en_US\", numericOrdering: true }).lean();\r\n        }\r\n\r\n        let data: ifOrderCreated[] = [];\r\n        let currAmount: number = 0;\r\n        let counter: number = 0;\r\n        let addresses: string[] = [];\r\n        let amounts: number[] = [];\r\n        let ids: string[] = [];\r\n\r\n        for (let i = 0; i < getMatchedDoc?.length; i++) {\r\n\r\n            if (currAmount >= amount) {\r\n                counter++;\r\n                if (counter > 5) {\r\n                    break;\r\n                }\r\n            }\r\n            if (orderType == 0 || orderType == 2) {\r\n                currAmount += Number(Big(getMatchedDoc[i].balanceAmount).times(getMatchedDoc[i].exchangeRate).div(Big(10).pow(18)));\r\n            }\r\n            else if (orderType == 1 || orderType == 3) {\r\n                currAmount += Number(getMatchedDoc[i].balanceAmount)\r\n            }\r\n            addresses.push(getMatchedDoc[i].maker);\r\n            amounts.push(Number(getMatchedDoc[i].balanceAmount));\r\n            data.push(getMatchedDoc[i]);\r\n            ids.push(getMatchedDoc[i]._id);\r\n\r\n        }\r\n\r\n        if (getMatchedDoc.length == 0) {\r\n            return res.status(200).send({ status: true, data: [] });\r\n        }\r\n\r\n        let token;\r\n        if (orderType == 0 || orderType == 2) {\r\n            token = data[0].token0;\r\n        } else {\r\n            token = data[0].token1;\r\n        }\r\n\r\n        let result = await getMultiBalance(token, addresses, ids, data, chainId, amounts);\r\n\r\n        if (!result) {\r\n            return res.status(200).send({ status: true, data: [] });\r\n        }\r\n        return res.status(200).send({ status: true, data: result });\r\n    }\r\n    catch (error: any) {\r\n        console.log(\"Error @ getMatchedMarketOrders\", error);\r\n        sentry.captureException(error)\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0692ef1e9add8c295325295d726847fcef2c6744","contentHash":"1307bc8e1844359fabeeee96668143355e213bf65a2c150bd657cd808bbaa638"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\orderCreated.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\orderCreated.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":36}},"40":{"start":{"line":39,"column":13},"end":{"line":39,"column":35}},"41":{"start":{"line":40,"column":17},"end":{"line":40,"column":51}},"42":{"start":{"line":41,"column":17},"end":{"line":41,"column":34}},"43":{"start":{"line":42,"column":26},"end":{"line":42,"column":65}},"44":{"start":{"line":43,"column":19},"end":{"line":43,"column":49}},"45":{"start":{"line":44,"column":23},"end":{"line":44,"column":59}},"46":{"start":{"line":45,"column":20},"end":{"line":45,"column":55}},"47":{"start":{"line":46,"column":39},"end":{"line":46,"column":87}},"48":{"start":{"line":47,"column":15},"end":{"line":47,"column":52}},"49":{"start":{"line":48,"column":17},"end":{"line":48,"column":43}},"50":{"start":{"line":49,"column":33},"end":{"line":49,"column":75}},"51":{"start":{"line":50,"column":28},"end":{"line":50,"column":68}},"52":{"start":{"line":51,"column":21},"end":{"line":51,"column":54}},"53":{"start":{"line":367,"column":4},"end":{"line":479,"column":7}},"54":{"start":{"line":368,"column":8},"end":{"line":478,"column":9}},"55":{"start":{"line":369,"column":28},"end":{"line":369,"column":107}},"56":{"start":{"line":370,"column":23},"end":{"line":370,"column":36}},"57":{"start":{"line":371,"column":26},"end":{"line":371,"column":42}},"58":{"start":{"line":372,"column":23},"end":{"line":372,"column":36}},"59":{"start":{"line":373,"column":28},"end":{"line":373,"column":42}},"60":{"start":{"line":374,"column":28},"end":{"line":374,"column":66}},"61":{"start":{"line":375,"column":12},"end":{"line":375,"column":97}},"62":{"start":{"line":376,"column":12},"end":{"line":376,"column":99}},"63":{"start":{"line":377,"column":12},"end":{"line":377,"column":99}},"64":{"start":{"line":378,"column":12},"end":{"line":378,"column":150}},"65":{"start":{"line":379,"column":12},"end":{"line":384,"column":13}},"66":{"start":{"line":380,"column":16},"end":{"line":383,"column":17}},"67":{"start":{"line":381,"column":20},"end":{"line":381,"column":88}},"68":{"start":{"line":382,"column":20},"end":{"line":382,"column":111}},"69":{"start":{"line":386,"column":39},"end":{"line":386,"column":95}},"70":{"start":{"line":387,"column":12},"end":{"line":389,"column":13}},"71":{"start":{"line":388,"column":16},"end":{"line":388,"column":92}},"72":{"start":{"line":390,"column":12},"end":{"line":390,"column":61}},"73":{"start":{"line":391,"column":21},"end":{"line":391,"column":101}},"74":{"start":{"line":392,"column":12},"end":{"line":395,"column":13}},"75":{"start":{"line":393,"column":16},"end":{"line":393,"column":67}},"76":{"start":{"line":394,"column":16},"end":{"line":394,"column":109}},"77":{"start":{"line":396,"column":35},"end":{"line":396,"column":96}},"78":{"start":{"line":397,"column":12},"end":{"line":399,"column":13}},"79":{"start":{"line":398,"column":16},"end":{"line":398,"column":96}},"80":{"start":{"line":400,"column":25},"end":{"line":400,"column":59}},"81":{"start":{"line":401,"column":33},"end":{"line":403,"column":66}},"82":{"start":{"line":404,"column":12},"end":{"line":404,"column":45}},"83":{"start":{"line":405,"column":32},"end":{"line":405,"column":49}},"84":{"start":{"line":407,"column":12},"end":{"line":415,"column":13}},"85":{"start":{"line":408,"column":31},"end":{"line":408,"column":136}},"86":{"start":{"line":409,"column":16},"end":{"line":414,"column":17}},"87":{"start":{"line":410,"column":20},"end":{"line":410,"column":106}},"88":{"start":{"line":412,"column":21},"end":{"line":414,"column":17}},"89":{"start":{"line":413,"column":20},"end":{"line":413,"column":59}},"90":{"start":{"line":416,"column":12},"end":{"line":421,"column":13}},"91":{"start":{"line":417,"column":31},"end":{"line":417,"column":113}},"92":{"start":{"line":418,"column":16},"end":{"line":420,"column":17}},"93":{"start":{"line":419,"column":20},"end":{"line":419,"column":106}},"94":{"start":{"line":422,"column":23},"end":{"line":422,"column":67}},"95":{"start":{"line":423,"column":12},"end":{"line":425,"column":13}},"96":{"start":{"line":424,"column":16},"end":{"line":424,"column":106}},"97":{"start":{"line":426,"column":22},"end":{"line":426,"column":24}},"98":{"start":{"line":427,"column":30},"end":{"line":448,"column":13}},"99":{"start":{"line":449,"column":12},"end":{"line":458,"column":13}},"100":{"start":{"line":450,"column":16},"end":{"line":456,"column":17}},"101":{"start":{"line":451,"column":20},"end":{"line":455,"column":27}},"102":{"start":{"line":457,"column":16},"end":{"line":457,"column":60}},"103":{"start":{"line":459,"column":12},"end":{"line":459,"column":49}},"104":{"start":{"line":461,"column":12},"end":{"line":468,"column":13}},"105":{"start":{"line":462,"column":16},"end":{"line":467,"column":19}},"106":{"start":{"line":469,"column":12},"end":{"line":469,"column":119}},"107":{"start":{"line":470,"column":12},"end":{"line":470,"column":97}},"108":{"start":{"line":473,"column":12},"end":{"line":474,"column":35}},"109":{"start":{"line":474,"column":16},"end":{"line":474,"column":35}},"110":{"start":{"line":475,"column":12},"end":{"line":475,"column":43}},"111":{"start":{"line":476,"column":12},"end":{"line":476,"column":61}},"112":{"start":{"line":477,"column":12},"end":{"line":477,"column":90}},"113":{"start":{"line":481,"column":0},"end":{"line":481,"column":48}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"handleOrderCreated","decl":{"start":{"line":365,"column":9},"end":{"line":365,"column":27}},"loc":{"start":{"line":365,"column":38},"end":{"line":480,"column":1}},"line":365},"15":{"name":"(anonymous_15)","decl":{"start":{"line":367,"column":43},"end":{"line":367,"column":44}},"loc":{"start":{"line":367,"column":56},"end":{"line":479,"column":5}},"line":367}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":369,"column":28},"end":{"line":369,"column":107}},"type":"cond-expr","locations":[{"start":{"line":369,"column":82},"end":{"line":369,"column":88}},{"start":{"line":369,"column":91},"end":{"line":369,"column":107}}],"line":369},"25":{"loc":{"start":{"line":369,"column":28},"end":{"line":369,"column":79}},"type":"binary-expr","locations":[{"start":{"line":369,"column":28},"end":{"line":369,"column":62}},{"start":{"line":369,"column":66},"end":{"line":369,"column":79}}],"line":369},"26":{"loc":{"start":{"line":375,"column":25},"end":{"line":375,"column":96}},"type":"cond-expr","locations":[{"start":{"line":375,"column":71},"end":{"line":375,"column":77}},{"start":{"line":375,"column":80},"end":{"line":375,"column":96}}],"line":375},"27":{"loc":{"start":{"line":375,"column":25},"end":{"line":375,"column":68}},"type":"binary-expr","locations":[{"start":{"line":375,"column":25},"end":{"line":375,"column":51}},{"start":{"line":375,"column":55},"end":{"line":375,"column":68}}],"line":375},"28":{"loc":{"start":{"line":376,"column":26},"end":{"line":376,"column":98}},"type":"cond-expr","locations":[{"start":{"line":376,"column":73},"end":{"line":376,"column":79}},{"start":{"line":376,"column":82},"end":{"line":376,"column":98}}],"line":376},"29":{"loc":{"start":{"line":376,"column":26},"end":{"line":376,"column":70}},"type":"binary-expr","locations":[{"start":{"line":376,"column":26},"end":{"line":376,"column":53}},{"start":{"line":376,"column":57},"end":{"line":376,"column":70}}],"line":376},"30":{"loc":{"start":{"line":377,"column":26},"end":{"line":377,"column":98}},"type":"cond-expr","locations":[{"start":{"line":377,"column":73},"end":{"line":377,"column":79}},{"start":{"line":377,"column":82},"end":{"line":377,"column":98}}],"line":377},"31":{"loc":{"start":{"line":377,"column":26},"end":{"line":377,"column":70}},"type":"binary-expr","locations":[{"start":{"line":377,"column":26},"end":{"line":377,"column":53}},{"start":{"line":377,"column":57},"end":{"line":377,"column":70}}],"line":377},"32":{"loc":{"start":{"line":380,"column":16},"end":{"line":383,"column":17}},"type":"if","locations":[{"start":{"line":380,"column":16},"end":{"line":383,"column":17}},{"start":{"line":380,"column":16},"end":{"line":383,"column":17}}],"line":380},"33":{"loc":{"start":{"line":387,"column":12},"end":{"line":389,"column":13}},"type":"if","locations":[{"start":{"line":387,"column":12},"end":{"line":389,"column":13}},{"start":{"line":387,"column":12},"end":{"line":389,"column":13}}],"line":387},"34":{"loc":{"start":{"line":392,"column":12},"end":{"line":395,"column":13}},"type":"if","locations":[{"start":{"line":392,"column":12},"end":{"line":395,"column":13}},{"start":{"line":392,"column":12},"end":{"line":395,"column":13}}],"line":392},"35":{"loc":{"start":{"line":397,"column":12},"end":{"line":399,"column":13}},"type":"if","locations":[{"start":{"line":397,"column":12},"end":{"line":399,"column":13}},{"start":{"line":397,"column":12},"end":{"line":399,"column":13}}],"line":397},"36":{"loc":{"start":{"line":407,"column":12},"end":{"line":415,"column":13}},"type":"if","locations":[{"start":{"line":407,"column":12},"end":{"line":415,"column":13}},{"start":{"line":407,"column":12},"end":{"line":415,"column":13}}],"line":407},"37":{"loc":{"start":{"line":407,"column":16},"end":{"line":407,"column":48}},"type":"binary-expr","locations":[{"start":{"line":407,"column":16},"end":{"line":407,"column":30}},{"start":{"line":407,"column":34},"end":{"line":407,"column":48}}],"line":407},"38":{"loc":{"start":{"line":409,"column":16},"end":{"line":414,"column":17}},"type":"if","locations":[{"start":{"line":409,"column":16},"end":{"line":414,"column":17}},{"start":{"line":409,"column":16},"end":{"line":414,"column":17}}],"line":409},"39":{"loc":{"start":{"line":412,"column":21},"end":{"line":414,"column":17}},"type":"if","locations":[{"start":{"line":412,"column":21},"end":{"line":414,"column":17}},{"start":{"line":412,"column":21},"end":{"line":414,"column":17}}],"line":412},"40":{"loc":{"start":{"line":416,"column":12},"end":{"line":421,"column":13}},"type":"if","locations":[{"start":{"line":416,"column":12},"end":{"line":421,"column":13}},{"start":{"line":416,"column":12},"end":{"line":421,"column":13}}],"line":416},"41":{"loc":{"start":{"line":416,"column":16},"end":{"line":416,"column":48}},"type":"binary-expr","locations":[{"start":{"line":416,"column":16},"end":{"line":416,"column":30}},{"start":{"line":416,"column":34},"end":{"line":416,"column":48}}],"line":416},"42":{"loc":{"start":{"line":418,"column":16},"end":{"line":420,"column":17}},"type":"if","locations":[{"start":{"line":418,"column":16},"end":{"line":420,"column":17}},{"start":{"line":418,"column":16},"end":{"line":420,"column":17}}],"line":418},"43":{"loc":{"start":{"line":423,"column":12},"end":{"line":425,"column":13}},"type":"if","locations":[{"start":{"line":423,"column":12},"end":{"line":425,"column":13}},{"start":{"line":423,"column":12},"end":{"line":425,"column":13}}],"line":423},"44":{"loc":{"start":{"line":444,"column":35},"end":{"line":444,"column":67}},"type":"cond-expr","locations":[{"start":{"line":444,"column":57},"end":{"line":444,"column":63}},{"start":{"line":444,"column":66},"end":{"line":444,"column":67}}],"line":444},"45":{"loc":{"start":{"line":445,"column":35},"end":{"line":445,"column":73}},"type":"cond-expr","locations":[{"start":{"line":445,"column":57},"end":{"line":445,"column":69}},{"start":{"line":445,"column":72},"end":{"line":445,"column":73}}],"line":445},"46":{"loc":{"start":{"line":449,"column":12},"end":{"line":458,"column":13}},"type":"if","locations":[{"start":{"line":449,"column":12},"end":{"line":458,"column":13}},{"start":{"line":449,"column":12},"end":{"line":458,"column":13}}],"line":449},"47":{"loc":{"start":{"line":450,"column":16},"end":{"line":456,"column":17}},"type":"if","locations":[{"start":{"line":450,"column":16},"end":{"line":456,"column":17}},{"start":{"line":450,"column":16},"end":{"line":456,"column":17}}],"line":450},"48":{"loc":{"start":{"line":450,"column":20},"end":{"line":450,"column":104}},"type":"cond-expr","locations":[{"start":{"line":450,"column":76},"end":{"line":450,"column":82}},{"start":{"line":450,"column":85},"end":{"line":450,"column":104}}],"line":450},"49":{"loc":{"start":{"line":450,"column":20},"end":{"line":450,"column":73}},"type":"binary-expr","locations":[{"start":{"line":450,"column":20},"end":{"line":450,"column":56}},{"start":{"line":450,"column":60},"end":{"line":450,"column":73}}],"line":450},"50":{"loc":{"start":{"line":461,"column":12},"end":{"line":468,"column":13}},"type":"if","locations":[{"start":{"line":461,"column":12},"end":{"line":468,"column":13}},{"start":{"line":461,"column":12},"end":{"line":468,"column":13}}],"line":461},"51":{"loc":{"start":{"line":473,"column":12},"end":{"line":474,"column":35}},"type":"if","locations":[{"start":{"line":473,"column":12},"end":{"line":474,"column":35}},{"start":{"line":473,"column":12},"end":{"line":474,"column":35}}],"line":473}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":35,"26":7,"27":7,"28":35,"29":35,"30":0,"31":0,"32":0,"33":0,"34":42,"35":7,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":7,"54":7,"55":7,"56":7,"57":7,"58":7,"59":7,"60":7,"61":7,"62":7,"63":7,"64":7,"65":7,"66":21,"67":0,"68":0,"69":7,"70":7,"71":0,"72":7,"73":7,"74":7,"75":0,"76":0,"77":7,"78":7,"79":0,"80":7,"81":7,"82":7,"83":7,"84":7,"85":2,"86":2,"87":0,"88":2,"89":2,"90":7,"91":5,"92":5,"93":0,"94":7,"95":7,"96":0,"97":7,"98":7,"99":7,"100":3,"101":0,"102":3,"103":7,"104":7,"105":3,"106":7,"107":7,"108":0,"109":0,"110":0,"111":0,"112":0,"113":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":7,"7":35,"8":7,"9":7,"10":35,"11":0,"12":42,"13":1,"14":7,"15":7},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[28,7],"18":[7,7],"19":[7,35],"20":[7,7],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,7],"25":[7,7],"26":[0,7],"27":[7,7],"28":[0,7],"29":[7,7],"30":[0,7],"31":[7,7],"32":[0,21],"33":[0,7],"34":[0,7],"35":[0,7],"36":[2,5],"37":[7,6],"38":[0,2],"39":[2,0],"40":[5,2],"41":[7,2],"42":[0,5],"43":[0,7],"44":[1,6],"45":[1,6],"46":[3,4],"47":[0,3],"48":[0,3],"49":[3,3],"50":[3,4],"51":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/orderCreated.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/orderCreated.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport {  Order, OrderCreatedBackup } from \"../../DB/db\";\r\nimport Big from \"big.js\";\r\nimport { ethers } from \"ethers\";\r\nimport { createOrderSchema } from \"../../helper/validateRequest\";\r\nimport { mainIPFS } from \"../../IPFS/putFiles\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\nimport { EVENT_NAME, socketService } from \"../../socketIo/socket.io\";\r\nimport { marginValidationAndUserPosition} from \"./helper/marginValidationUserPosition\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { getPairId } from \"./helper/pairId\";\r\nimport { validationAndUserPosition } from \"./helper/validationUserPosition\";\r\nimport { validateSignature } from \"../../utils/validateSignature\";\r\nimport { getDecimals } from \"../../utils/getDecimal\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * \r\n * @dev This api function would create order and store it into data base\r\n * @notice verify signature,check if data coming from backup, check user inOrder balance, wallet balance, allowance, if pair is not present then create corresponding token and pair\r\n * @param {*} req.body.signature (string)  \r\n * @param {*} req.body.data (object) this data will be verify with the signature\r\n * example  \r\n * \"data\" :{\r\n    \"maker\": \"0x103B62f68Da23f20055c572269be67fA7635f2fc\",\r\n    \"token0\": \"0x842681C1fA28EF2AA2A4BDE174612e901D2b7827\",\r\n    \"token1\": \"0xa50fABf59f2c11fF0F02E7c94A82B442611F37B2\",\r\n    \"amount\": \"1000000000000000000\",\r\n    \"orderType\": 0,\r\n    \"salt\": \"12345\",\r\n    \"exchangeRate\": \"18000000000000000000000\"\r\n    }\r\n * @param {*} req.body.chainId (string) numeric chainId\r\n * @param {*} req.body.ipfs (boolean) if it is present that means request is sent from backup \r\n * @returns  error with message if any validation fail, if success return order created successfully\r\n */\r\n/*\r\nexport async function _handleOrderCreated(req: any, res: any) {\r\n    try {\r\n\r\n        let signature: string = req.body.signature?.toLowerCase();\r\n        let data = req.body.data;\r\n        let chainId: string = req.body.chainId;\r\n        let ipfs: boolean | undefined = req.body.ipfs;\r\n        let orderType: number = data.orderType;\r\n        let addresses = [data.maker, data.token0, data.token1];\r\n        data.maker = data.maker?.toLowerCase();\r\n        data.token0 = data.token0?.toLowerCase();\r\n        data.token1 = data.token1?.toLowerCase();\r\n        await createOrderSchema.validateAsync({ createOrderSchemaData: req.body.data, signature: signature, chainId: chainId });\r\n        for (let i in addresses) {\r\n\r\n            if (!ethers.utils.isAddress(addresses[i])) {\r\n                console.log(`${errorMessage.address, addresses[i]}`);\r\n                return res.status(400).send({ status: false, error: errorMessage.address });\r\n            }\r\n        }\r\n        // geting exchangeRate decimal\r\n        let exchangeRateDecimals: number | string = Number(getDecimals(data.exchangeRate));\r\n\r\n        if (isNaN(exchangeRateDecimals) == true) {\r\n            return res.status(400).send({ status: false, error: exchangeRateDecimals });\r\n        }\r\n\r\n\r\n        let id: string | null = validateSignature(data.maker, signature, data, chainId);\r\n\r\n        if (!id) {\r\n            console.log(errorMessage.signature);\r\n\r\n            return res.status(400).send({ status: false, error: errorMessage.signature });\r\n        }\r\n\r\n        const isOrderPresent = await OrderCreated.findOne({ id: id, chainId: chainId }).lean();\r\n\r\n        if (isOrderPresent) {\r\n            return res.status(201).send({ status: true, message: \"Order Already Created\" });\r\n        }\r\n\r\n        // if margin Order\r\n        if (orderType == 2 || orderType == 3) {\r\n            let response = await _handleMarginOrderCreated(signature, data, chainId, ipfs, id, exchangeRateDecimals)\r\n\r\n            if (response.status == false) {\r\n                return res.status(response.statusCode).send({ status: false, error: response.error })\r\n            }\r\n            else if (response.status == true) {\r\n                return res.status(response.statusCode).send({ status: true, message: response.message })\r\n            }\r\n        }\r\n\r\n        let amount = Big(data.amount);\r\n\r\n        if (data.orderType == 1) {\r\n\r\n            const findUserPosition: ifUserPosition | null = await UserPosition.findOne({ id: data.maker, token: data.token0, chainId: chainId }).lean();\r\n\r\n            let multicallData: number[] | null;\r\n            let userToken0Balance = 0;\r\n            let allowance = 0;\r\n\r\n            if (!ipfs) {\r\n                multicallData = await multicall(data.token0, data.maker, chainId)\r\n                if (multicallData) {\r\n                    userToken0Balance = multicallData[0];\r\n                    allowance = multicallData[1];\r\n                }\r\n            }\r\n\r\n            if (findUserPosition) {\r\n\r\n                let _id = findUserPosition._id.toString();\r\n\r\n                let currentInOrderBalance = Big(findUserPosition.inOrderBalance).plus(amount).toString();\r\n\r\n                if (!ipfs && Number(allowance) < Number(currentInOrderBalance)) {\r\n                    console.log(`${errorMessage.allowance} token0`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.allowance });\r\n                }\r\n\r\n                if (!ipfs && Number(userToken0Balance) < Number(currentInOrderBalance)) {\r\n                    console.log(`${errorMessage.balance} token0`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.balance });\r\n                }\r\n\r\n\r\n                await UserPosition.findOneAndUpdate(\r\n                    { _id: _id },\r\n                    { $set: { inOrderBalance: currentInOrderBalance } }\r\n                );\r\n            } else {\r\n\r\n                if (!ipfs && Number(allowance) < Number(amount)) {\r\n                    console.log(`${errorMessage.allowance} token0`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.allowance });\r\n                }\r\n\r\n                if (!ipfs && Number(userToken0Balance) < Number(amount)) {\r\n                    console.log(`${errorMessage.balance} token0`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.balance });\r\n                }\r\n\r\n                UserPosition.create(\r\n                    {\r\n                        token: data.token0,\r\n                        chainId: chainId,\r\n                        inOrderBalance: amount.toString(),\r\n                        // balance: userToken0Balance,\r\n                        id: data.maker\r\n                    }\r\n                );\r\n\r\n            }\r\n        }\r\n\r\n        else if (data.orderType == 0) {\r\n\r\n            let findUserPosition: ifUserPosition | null = await UserPosition.findOne({ id: data.maker, token: data.token1, chainId: chainId });\r\n\r\n            let multicallData: number[] | null\r\n            let userToken1Balance = 0\r\n            let allowance = 0\r\n\r\n            if (!ipfs) {\r\n                multicallData = await multicall(data.token1, data.maker, chainId)\r\n                if (multicallData) {\r\n                    userToken1Balance = multicallData[0];\r\n                    allowance = multicallData[1];\r\n                }\r\n            }\r\n\r\n            amount = Big(amount).times(data.exchangeRate).div(Big(10).pow(18));\r\n            if (findUserPosition) {\r\n\r\n                let _id = findUserPosition._id.toString();\r\n\r\n                let currentInOrderBalance = Big(findUserPosition.inOrderBalance).plus(amount).toString();\r\n\r\n                if (!ipfs && Number(allowance) < Number(currentInOrderBalance)) {\r\n                    console.log(`${errorMessage.allowance} token1`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.allowance });\r\n                }\r\n\r\n                if (!ipfs && Number(userToken1Balance) < Number(currentInOrderBalance)) {\r\n                    console.log(`${errorMessage.balance} token1`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.balance });\r\n                }\r\n\r\n\r\n                await UserPosition.findOneAndUpdate(\r\n                    { _id: _id },\r\n                    { $set: { inOrderBalance: currentInOrderBalance } }\r\n                );\r\n            } else {\r\n\r\n                if (!ipfs && Number(allowance) < Number(amount)) {\r\n                    console.log(`${errorMessage.allowance} token1`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.allowance });\r\n                }\r\n\r\n                if (!ipfs && Number(userToken1Balance) < Number(amount)) {\r\n                    console.log(`${errorMessage.balance} token1`);\r\n                    return res.status(400).send({ status: false, error: errorMessage.balance });\r\n                }\r\n\r\n                UserPosition.create(\r\n                    {\r\n                        token: data.token1,\r\n                        chainId: chainId,\r\n                        inOrderBalance: amount.toString(),\r\n                        // balance: userToken1Balance,\r\n                        id: data.maker\r\n                    }\r\n                );\r\n\r\n            }\r\n        }\r\n\r\n        let isPairExist: ifPair = await Pair.findOne({ token0: data.token0, token1: data.token1, chainId: chainId, active: true }).lean();\r\n        let createPair: ifPair | any;\r\n\r\n        if (!isPairExist) {\r\n            // cheking for opposite pair\r\n            let encoder = new ethers.utils.AbiCoder().encode([\"address\", \"address\"], [data.token1, data.token0]);\r\n            let id = ethers.utils.keccak256(encoder);\r\n\r\n            let isPairExist1: ifPair = await Pair.findOne({ id: id, active: true }).lean();;\r\n\r\n            if (isPairExist1) {\r\n                createPair = isPairExist1;\r\n            }\r\n\r\n            if (!isPairExist1) {\r\n                let encoder = new ethers.utils.AbiCoder().encode([\"address\", \"address\"], [data.token0, data.token1]);\r\n                let id = ethers.utils.keccak256(encoder);\r\n\r\n                let token0 = await handleToken(data.token0, chainId);\r\n                let token1 = await handleToken(data.token1, chainId);\r\n                let marginEnabled = false;\r\n                if (token0?.marginEnabled == true && token1?.marginEnabled == true) {\r\n                    marginEnabled = true\r\n                }\r\n                let temp = {\r\n                    id: id,\r\n                    exchangeRateDecimals: exchangeRateDecimals,\r\n                    minToken0Order: token0?.minToken0Amount,\r\n                    exchangeRate: '0',\r\n                    priceDiff: '0',\r\n                    token0: data.token0,\r\n                    token1: data.token1,\r\n                    chainId: chainId,\r\n                    symbol: `${token0?.symbol}_${token1?.symbol}`,\r\n                    marginEnabled: marginEnabled,\r\n                    active: true\r\n                }\r\n                createPair = await Pair.create(temp);\r\n\r\n                console.log(\"Pair Created \", \"T0 \", data.token0, \"T1 \", data.token1, \"CId \", chainId);\r\n\r\n            }\r\n\r\n        }\r\n        let pair: string;\r\n        if (isPairExist) {\r\n            pair = isPairExist.id?.toString();\r\n        }\r\n        else {\r\n            pair = createPair.id.toString();\r\n        }\r\n        let cid = \"\";\r\n\r\n        let orderCreate = {\r\n            id: id,\r\n            signature: signature,\r\n            pair: pair,\r\n            token0: data.token0,\r\n            token1: data.token1,\r\n            maker: data.maker,\r\n            amount: data.amount,\r\n            salt: data.salt,\r\n            exchangeRate: data.exchangeRate,\r\n            orderType: data.orderType,\r\n            chainId: chainId,\r\n            exchangeRateDecimals: exchangeRateDecimals,\r\n            balanceAmount: data.amount,\r\n            active: true,\r\n            deleted: false,\r\n            cid: cid,\r\n        }\r\n        if (!ipfs) {\r\n\r\n            if (!process.env.NODE_ENV?.includes('test')) {\r\n                cid = await mainIPFS([\r\n                    data,\r\n                    signature,\r\n                    chainId\r\n                ],\r\n                    id\r\n                );\r\n            }\r\n\r\n            OrderCreatedBackup.create(orderCreate);\r\n        }\r\n\r\n        await OrderCreated.create(orderCreate);\r\n\r\n        // socket io data\r\n        if (!ipfs) {\r\n            socketService.emit(EVENT_NAME.PAIR_ORDER, {\r\n                amount: data.amount,\r\n                exchangeRate: data.exchangeRate,\r\n                orderType: data.orderType,\r\n                pair: pair\r\n            });\r\n        }\r\n\r\n        console.log(\"Order Created \", \"maker \", data.maker, \"amount \", data.amount.toString(), id);\r\n\r\n        return res.status(201).send({ status: true, message: \"Order created successfully\" });\r\n\r\n    }\r\n    catch (error: any) {\r\n\r\n        if (error.isJoi == true) error.status = 422;\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ handleOrderCreated\", error);\r\n        return res.status(error.status).send({ status: false, error: error.message });\r\n    }\r\n}*/\r\nexport async function handleOrderCreated(req: any, res: any) {\r\n    try {\r\n\r\n        let signature: string = req.body.signature?.toLowerCase();\r\n        let data = req.body.data;\r\n        let chainId: string = req.body.chainId;\r\n        let ipfs: boolean | undefined = req.body.ipfs;\r\n        let orderType: number = data.orderType;\r\n        let addresses = [data.maker, data.token0, data.token1];\r\n        data.maker = data.maker?.toLowerCase();\r\n        data.token0 = data.token0?.toLowerCase();\r\n        data.token1 = data.token1?.toLowerCase();\r\n\r\n        await createOrderSchema.validateAsync({ createOrderSchemaData: req.body.data, signature: signature, chainId: chainId });\r\n        for (let i in addresses) {\r\n\r\n            if (!ethers.utils.isAddress(addresses[i])) {\r\n                console.log(`${errorMessage.address, addresses[i]}`);\r\n                return res.status(400).send({ status: false, error: errorMessage.address });\r\n            }\r\n        }\r\n        // geting exchangeRate decimal\r\n        let exchangeRateDecimals: number | string = Number(getDecimals(data.exchangeRate));\r\n\r\n        if (isNaN(exchangeRateDecimals) == true) {\r\n            return res.status(400).send({ status: false, error: exchangeRateDecimals });\r\n        }\r\n\r\n        data.exchangeRateDecimals = exchangeRateDecimals;\r\n\r\n        let id: string | null = validateSignature(data.maker, signature, data, chainId);\r\n\r\n        if (!id) {\r\n            console.log(errorMessage.signature);\r\n            return res.status(400).send({ status: false, error: errorMessage.signature });\r\n        }\r\n\r\n        const isOrderPresent = await Order.findOne({ id: id, chainId: chainId }).lean();\r\n\r\n        if (isOrderPresent) {\r\n            return res.status(201).send({ status: true, message: \"Order Already Created\" });\r\n        }\r\n\r\n        let amount = Big(data.amount);\r\n        const token1Amount =\r\n            Big(amount)\r\n                .times(data.exchangeRate)\r\n                .div(Big(10).pow(18)).toString();\r\n\r\n        data.token1Amount = token1Amount;\r\n        let balanceAmount = amount.toString()\r\n\r\n        // if margin Order\r\n        if (orderType == 2 || orderType == 3) {\r\n            let response = await marginValidationAndUserPosition(signature, data, chainId, ipfs)\r\n\r\n            if (response.status == false) {\r\n                return res.status(response.statusCode).send({ status: false, error: response.error })\r\n            }\r\n            else if (response.status == true) {\r\n               balanceAmount = response.balanceAmount!\r\n            }\r\n        }\r\n\r\n        if (orderType == 1 || orderType == 0){\r\n            let response = await validationAndUserPosition(data, chainId, ipfs);\r\n            if(response.status == false){\r\n                return res.status(response.statusCode).send({status: false, error: response.error})\r\n            }\r\n        }\r\n\r\n        let pair = await getPairId(data, chainId);\r\n        if(!pair){\r\n            return res.status(500).send({ status: false, error: errorMessage.server });\r\n        }\r\n        let cid = \"\";\r\n\r\n        let orderCreate = {\r\n            id: id,\r\n            signature: signature,\r\n            pair: pair,\r\n            token0: data.token0,\r\n            token1: data.token1,\r\n            maker: data.maker,\r\n            amount: data.amount,\r\n            salt: data.salt,\r\n            exchangeRate: data.exchangeRate,\r\n            orderType: data.orderType,\r\n            chainId: chainId,\r\n            exchangeRateDecimals: exchangeRateDecimals,\r\n            balanceAmount: balanceAmount,\r\n            active: true,\r\n            deleted: false,\r\n            cid: cid,\r\n            lastInOrderToken0: data.orderType == 2 ? amount : 0,\r\n            lastInOrderToken1: data.orderType == 3 ? token1Amount : 0,\r\n            borrowLimit: data.borrowLimit,\r\n            loops: data.loops,\r\n        }\r\n        if (!ipfs) {\r\n\r\n            if (process.env.NODE_ENV?.includes('prod')) {\r\n                cid = await mainIPFS([\r\n                    data,\r\n                    signature,\r\n                    chainId\r\n                ],\r\n                    id\r\n                );\r\n            }\r\n\r\n            OrderCreatedBackup.create(orderCreate);\r\n        }\r\n\r\n        await Order.create(orderCreate);\r\n\r\n        // socket io data\r\n        if (!ipfs) {\r\n            socketService.emit(EVENT_NAME.PAIR_ORDER, {\r\n                amount: data.amount,\r\n                exchangeRate: data.exchangeRate,\r\n                orderType: data.orderType,\r\n                pair: pair\r\n            });\r\n        }\r\n\r\n        console.log(\"Order Created \", \"maker \", data.maker, \"amount \", data.amount.toString(), id, data.orderType);\r\n\r\n        return res.status(201).send({ status: true, message: \"Order created successfully\" });\r\n\r\n    }\r\n    catch (error: any) {\r\n\r\n        if (error.isJoi == true) error.status = 422;\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ handleOrderCreated\", error);\r\n        return res.status(error.status).send({ status: false, error: error.message });\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"810246a2bf08adad322d51729cfd52617f4696ed","contentHash":"e6f05ed8bf896b0c2c7d8aaf3205dd26338bf33629490e9162c9b43291dd1eb1"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\validateRequest.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\helper\\validateRequest.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":35}},"4":{"start":{"line":7,"column":14},"end":{"line":7,"column":45}},"5":{"start":{"line":8,"column":30},"end":{"line":18,"column":2}},"6":{"start":{"line":19,"column":26},"end":{"line":23,"column":2}},"7":{"start":{"line":24,"column":0},"end":{"line":24,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/validateRequest.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/helper/validateRequest.ts"],"names":[],"mappings":";;;;;;AACA,8CAAsB;AAGtB,MAAM,qBAAqB,GAAG,aAAG,CAAC,MAAM,EAAE,CAAC,IAAI,CAC3C;IACI,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;IACtC,MAAM,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;IACvC,MAAM,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;IACvC,MAAM,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAC/B,SAAS,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IAClC,IAAI,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,GAAG,IAAI,EAAE,CAAC;IAC5C,YAAY,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;IAC7C,WAAW,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;IACpC,KAAK,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE;CAEjC,CACJ,CAAC;AAEF,MAAM,iBAAiB,GAAG,aAAG,CAAC,MAAM,CAChC;IACI,qBAAqB,EAAE,qBAAqB;IAC5C,SAAS,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC;IAC3C,OAAO,EAAE,aAAG,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;CAC3C,CAEJ,CAAC;AAEM,8CAAiB","sourcesContent":["\r\nimport joi from \"joi\";\r\n\r\n\r\nconst createOrderSchemaData = joi.object().keys(\r\n    {\r\n        maker: joi.string().required().max(50),\r\n        token0: joi.string().required().max(50),\r\n        token1: joi.string().required().max(50),\r\n        amount: joi.string().required(),\r\n        orderType: joi.number().required(),\r\n        salt: joi.number().required().max(100 ** 10),\r\n        exchangeRate: joi.string().required().max(50),\r\n        borrowLimit: joi.number().required(),\r\n        loops: joi.number().required()\r\n\r\n    }\r\n);\r\n\r\nconst createOrderSchema = joi.object(\r\n    {\r\n        createOrderSchemaData: createOrderSchemaData,\r\n        signature: joi.string().required().max(250),\r\n        chainId: joi.string().required().max(50)\r\n    }\r\n\r\n);\r\n\r\nexport{ createOrderSchema };"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b89ed342ef81a5e099359639d997bfedd8a859eb","contentHash":"4610ee156ceb2bd250936d70c559507d40795b2cd9293522e8293e06da502998"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\IPFS\\putFiles.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\IPFS\\putFiles.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":26}},"16":{"start":{"line":16,"column":23},"end":{"line":16,"column":46}},"17":{"start":{"line":17,"column":18},"end":{"line":17,"column":36}},"18":{"start":{"line":18,"column":16},"end":{"line":18,"column":49}},"19":{"start":{"line":19,"column":0},"end":{"line":19,"column":27}},"20":{"start":{"line":20,"column":12},"end":{"line":20,"column":31}},"21":{"start":{"line":22,"column":18},"end":{"line":22,"column":43}},"22":{"start":{"line":23,"column":4},"end":{"line":23,"column":53}},"23":{"start":{"line":25,"column":17},"end":{"line":25,"column":18}},"24":{"start":{"line":85,"column":4},"end":{"line":95,"column":7}},"25":{"start":{"line":86,"column":22},"end":{"line":86,"column":47}},"26":{"start":{"line":87,"column":24},"end":{"line":87,"column":65}},"27":{"start":{"line":88,"column":23},"end":{"line":88,"column":56}},"28":{"start":{"line":89,"column":22},"end":{"line":91,"column":9}},"29":{"start":{"line":92,"column":20},"end":{"line":92,"column":44}},"30":{"start":{"line":93,"column":8},"end":{"line":93,"column":52}},"31":{"start":{"line":94,"column":8},"end":{"line":94,"column":19}},"32":{"start":{"line":97,"column":0},"end":{"line":97,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"makeStorageClient","decl":{"start":{"line":21,"column":9},"end":{"line":21,"column":26}},"loc":{"start":{"line":21,"column":29},"end":{"line":24,"column":1}},"line":21},"9":{"name":"mainIPFS","decl":{"start":{"line":84,"column":9},"end":{"line":84,"column":17}},"loc":{"start":{"line":84,"column":28},"end":{"line":96,"column":1}},"line":84},"10":{"name":"(anonymous_10)","decl":{"start":{"line":85,"column":43},"end":{"line":85,"column":44}},"loc":{"start":{"line":85,"column":56},"end":{"line":95,"column":5}},"line":85}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[0,1],"7":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/IPFS/putFiles.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/IPFS/putFiles.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,+CAAiD;AACjD,qCAA8B;AAC9B,kDAA0B;AAE1B,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;AAE3B,MAAM,GAAG,GAAG,eAAK,CAAC,GAAG,CAAC;AACtB,SAAS,iBAAiB;IACtB,MAAM,KAAK,GAAG,aAAG,CAAC,WAAqB,CAAC;IACxC,OAAO,IAAI,0BAAW,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;AACtC,CAAC;AAGD,IAAI,UAAU,GAAG,CAAC,CAAC;AACnB;;;GAGG;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA+CE;AAEF;;;;;GAKG;AACH,SAAe,QAAQ,CAAC,IAAW,EAAE,EAAU;;QAE3C,MAAM,KAAK,GAAG,aAAG,CAAC,WAAqB,CAAC;QAExC,MAAM,OAAO,GAAG,IAAI,0BAAW,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;QAE3C,MAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;QAEjD,MAAM,KAAK,GAAG;YACV,IAAI,mBAAI,CAAC,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,OAAO,CAAC;SACnC,CAAC;QAEF,MAAM,GAAG,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACrC,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,GAAG,CAAC,CAAC;QAC5C,OAAO,GAAG,CAAC;IACf,CAAC;CAAA;AAGS,4BAAQ;AAElB,SAAS;AACT,QAAQ;AACR,+DAA+D;AAC/D,gEAAgE;AAChE,gEAAgE;AAChE,yCAAyC;AACzC,sBAAsB;AACtB,2BAA2B;AAC3B,kDAAkD;AAClD,SAAS;AACT,6IAA6I;AAC7I,KAAK;AACL,uEAAuE;AACvE,IAAI","sourcesContent":["\r\nimport { Web3Storage, File } from \"web3.storage\";\r\nimport { env } from \"process\";\r\nimport axios from \"axios\";\r\nimport { orderSignature } from \"../helper/interface\";\r\nrequire(\"dotenv\").config();\r\n\r\nconst get = axios.get;\r\nfunction makeStorageClient() {\r\n    const token = env.WEB_3_TOKEN as string;\r\n    return new Web3Storage({ token });\r\n}\r\n\r\n\r\nlet errorCount = 0;\r\n/**\r\n * @notice current we are not using this function\r\n * this function is used to get IPFS data i.e signature value etc and call create order function \r\n */\r\n/*\r\nasync function getIPFSData() {\r\n    try {\r\n        const client = makeStorageClient();\r\n        for await (const upload of client.list()) {\r\n            console.log(upload.cid);\r\n            // console.log(`${upload.name} - cid: ${upload.cid} - size: ${upload.dagSize}`)\r\n            const res: any = await client.get(upload.cid);\r\n\r\n            const files = await res.files();\r\n            for (const file of files) {\r\n                // console.log(` ${file.name} ${file.size}`);\r\n                console.log(file.name);\r\n                let data = await get(`https://${upload.cid}.ipfs.w3s.link/${file.name}`);\r\n                data = data.data;\r\n                let result = await axios({\r\n                    method: \"post\",\r\n                    url: \"http://localhost:3030/create/order\",\r\n                    data: {\r\n                        data: data[0],\r\n                        signature: data[1],\r\n                        chainId: data[2],\r\n                        ipfs: true\r\n                    }\r\n                });\r\n\r\n                console.log(\"IPFS Create Request\", result.data);\r\n\r\n            }\r\n\r\n            if (!res.ok) {\r\n                throw new Error(`failed to get ${upload.cid}`);\r\n            }\r\n        }\r\n        console.log(\"IPFS End\");\r\n    }\r\n    catch (error) {\r\n        console.log(\"Error @ getIPFSData\", error);\r\n        if (errorCount < 5) {\r\n            getIPFSData();\r\n        }\r\n        else {\r\n            errorCount = 0;\r\n        }\r\n    }\r\n\r\n}\r\n*/\r\n\r\n/**\r\n * \r\n * @param {*} data (object) e.g signature, value \r\n * @param {*} id (string) orderId (digest)\r\n * @returns cid  \r\n */\r\nasync function mainIPFS(data: any[], id: string) {\r\n\r\n    const token = env.WEB_3_TOKEN as string;\r\n\r\n    const storage = new Web3Storage({ token });\r\n\r\n    const buffer = Buffer.from(JSON.stringify(data));\r\n\r\n    const files = [\r\n        new File([buffer], `${id}.json`)\r\n    ];\r\n\r\n    const cid = await storage.put(files);\r\n    console.log(\"Content added with CID:\", cid);\r\n    return cid;\r\n}\r\n\r\n\r\nexport  { mainIPFS};\r\n\r\n// main([\r\n//     {\r\n//         maker: '0x103B62f68Da23f20055c572269be67fA7635f2fc',\r\n//         token0: '0x5c16f2076a6c10DE6A7289E529143975f20850Fe',\r\n//         token1: '0x1580a7C5BF1b687a096bB8Fa79491326a7f17359',\r\n//         amount: '2000000000000000000',\r\n//         buy: false,\r\n//         salt: '1234567',\r\n//         exchangeRate: '21000000000000000000000'\r\n//     },\r\n//     '0x0828113f10fd94d62b55e7983de434600671328a389ad794f577093f4a964cde667b463a4030d84d9ca028f26d64cba2549929ff23e3abaf29e9970263b8d0aa1c'\r\n// ],\r\n// '0x1f138359d57332d7ff4ec96046d4fc0c297439dd3b3812d0ee6d3ace2af9b091'\r\n// )\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"41979e83a2884e17a039c219b00651e37b132c51","contentHash":"a4e9cd50a2330d39ab132f3ad1c25c003db4df4fc93414ea73f6ceedea144875"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\helper\\marginValidationUserPosition.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\helper\\marginValidationUserPosition.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":49}},"40":{"start":{"line":39,"column":17},"end":{"line":39,"column":51}},"41":{"start":{"line":40,"column":17},"end":{"line":40,"column":34}},"42":{"start":{"line":41,"column":15},"end":{"line":41,"column":52}},"43":{"start":{"line":42,"column":13},"end":{"line":42,"column":38}},"44":{"start":{"line":43,"column":16},"end":{"line":43,"column":48}},"45":{"start":{"line":44,"column":23},"end":{"line":44,"column":62}},"46":{"start":{"line":45,"column":28},"end":{"line":45,"column":74}},"47":{"start":{"line":46,"column":16},"end":{"line":46,"column":47}},"48":{"start":{"line":287,"column":4},"end":{"line":403,"column":7}},"49":{"start":{"line":288,"column":8},"end":{"line":402,"column":9}},"50":{"start":{"line":289,"column":25},"end":{"line":289,"column":59}},"51":{"start":{"line":290,"column":20},"end":{"line":290,"column":54}},"52":{"start":{"line":291,"column":20},"end":{"line":291,"column":97}},"53":{"start":{"line":292,"column":20},"end":{"line":292,"column":42}},"54":{"start":{"line":293,"column":32},"end":{"line":293,"column":199}},"55":{"start":{"line":294,"column":12},"end":{"line":294,"column":45}},"56":{"start":{"line":296,"column":30},"end":{"line":296,"column":118}},"57":{"start":{"line":297,"column":12},"end":{"line":299,"column":13}},"58":{"start":{"line":298,"column":16},"end":{"line":298,"column":106}},"59":{"start":{"line":300,"column":24},"end":{"line":300,"column":158}},"60":{"start":{"line":302,"column":26},"end":{"line":302,"column":28}},"61":{"start":{"line":304,"column":36},"end":{"line":304,"column":37}},"62":{"start":{"line":305,"column":36},"end":{"line":305,"column":37}},"63":{"start":{"line":306,"column":34},"end":{"line":306,"column":35}},"64":{"start":{"line":307,"column":34},"end":{"line":307,"column":35}},"65":{"start":{"line":308,"column":12},"end":{"line":318,"column":13}},"66":{"start":{"line":309,"column":16},"end":{"line":309,"column":130}},"67":{"start":{"line":310,"column":16},"end":{"line":310,"column":92}},"68":{"start":{"line":310,"column":75},"end":{"line":310,"column":90}},"69":{"start":{"line":312,"column":16},"end":{"line":317,"column":17}},"70":{"start":{"line":313,"column":20},"end":{"line":313,"column":57}},"71":{"start":{"line":314,"column":20},"end":{"line":314,"column":55}},"72":{"start":{"line":315,"column":20},"end":{"line":315,"column":57}},"73":{"start":{"line":316,"column":20},"end":{"line":316,"column":55}},"74":{"start":{"line":319,"column":38},"end":{"line":319,"column":126}},"75":{"start":{"line":321,"column":38},"end":{"line":321,"column":126}},"76":{"start":{"line":322,"column":39},"end":{"line":322,"column":230}},"77":{"start":{"line":323,"column":33},"end":{"line":323,"column":50}},"78":{"start":{"line":324,"column":39},"end":{"line":324,"column":236}},"79":{"start":{"line":325,"column":12},"end":{"line":328,"column":13}},"80":{"start":{"line":326,"column":16},"end":{"line":326,"column":79}},"81":{"start":{"line":327,"column":16},"end":{"line":327,"column":104}},"82":{"start":{"line":329,"column":12},"end":{"line":332,"column":13}},"83":{"start":{"line":330,"column":16},"end":{"line":330,"column":79}},"84":{"start":{"line":331,"column":16},"end":{"line":331,"column":104}},"85":{"start":{"line":334,"column":12},"end":{"line":343,"column":13}},"86":{"start":{"line":335,"column":28},"end":{"line":335,"column":39}},"87":{"start":{"line":336,"column":16},"end":{"line":338,"column":17}},"88":{"start":{"line":337,"column":20},"end":{"line":337,"column":40}},"89":{"start":{"line":339,"column":34},"end":{"line":339,"column":94}},"90":{"start":{"line":340,"column":16},"end":{"line":342,"column":17}},"91":{"start":{"line":341,"column":20},"end":{"line":341,"column":105}},"92":{"start":{"line":344,"column":12},"end":{"line":395,"column":13}},"93":{"start":{"line":345,"column":16},"end":{"line":348,"column":17}},"94":{"start":{"line":346,"column":20},"end":{"line":346,"column":81}},"95":{"start":{"line":347,"column":20},"end":{"line":347,"column":106}},"96":{"start":{"line":349,"column":16},"end":{"line":360,"column":17}},"97":{"start":{"line":350,"column":30},"end":{"line":350,"column":62}},"98":{"start":{"line":351,"column":20},"end":{"line":351,"column":119}},"99":{"start":{"line":354,"column":20},"end":{"line":359,"column":23}},"100":{"start":{"line":361,"column":16},"end":{"line":368,"column":17}},"101":{"start":{"line":362,"column":20},"end":{"line":367,"column":23}},"102":{"start":{"line":370,"column":17},"end":{"line":395,"column":13}},"103":{"start":{"line":371,"column":16},"end":{"line":374,"column":17}},"104":{"start":{"line":372,"column":20},"end":{"line":372,"column":81}},"105":{"start":{"line":373,"column":20},"end":{"line":373,"column":106}},"106":{"start":{"line":375,"column":16},"end":{"line":386,"column":17}},"107":{"start":{"line":376,"column":30},"end":{"line":376,"column":62}},"108":{"start":{"line":377,"column":20},"end":{"line":377,"column":119}},"109":{"start":{"line":380,"column":20},"end":{"line":385,"column":23}},"110":{"start":{"line":387,"column":16},"end":{"line":394,"column":17}},"111":{"start":{"line":388,"column":20},"end":{"line":393,"column":23}},"112":{"start":{"line":396,"column":12},"end":{"line":396,"column":66}},"113":{"start":{"line":399,"column":12},"end":{"line":399,"column":43}},"114":{"start":{"line":400,"column":12},"end":{"line":400,"column":61}},"115":{"start":{"line":401,"column":12},"end":{"line":401,"column":76}},"116":{"start":{"line":405,"column":0},"end":{"line":405,"column":74}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"marginValidationAndUserPosition","decl":{"start":{"line":285,"column":9},"end":{"line":285,"column":40}},"loc":{"start":{"line":285,"column":73},"end":{"line":404,"column":1}},"line":285},"15":{"name":"(anonymous_15)","decl":{"start":{"line":287,"column":43},"end":{"line":287,"column":44}},"loc":{"start":{"line":287,"column":56},"end":{"line":403,"column":5}},"line":287},"16":{"name":"(anonymous_16)","decl":{"start":{"line":310,"column":68},"end":{"line":310,"column":69}},"loc":{"start":{"line":310,"column":75},"end":{"line":310,"column":90}},"line":310}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":297,"column":12},"end":{"line":299,"column":13}},"type":"if","locations":[{"start":{"line":297,"column":12},"end":{"line":299,"column":13}},{"start":{"line":297,"column":12},"end":{"line":299,"column":13}}],"line":297},"25":{"loc":{"start":{"line":297,"column":16},"end":{"line":297,"column":56}},"type":"binary-expr","locations":[{"start":{"line":297,"column":16},"end":{"line":297,"column":34}},{"start":{"line":297,"column":38},"end":{"line":297,"column":56}}],"line":297},"26":{"loc":{"start":{"line":308,"column":12},"end":{"line":318,"column":13}},"type":"if","locations":[{"start":{"line":308,"column":12},"end":{"line":318,"column":13}},{"start":{"line":308,"column":12},"end":{"line":318,"column":13}}],"line":308},"27":{"loc":{"start":{"line":312,"column":16},"end":{"line":317,"column":17}},"type":"if","locations":[{"start":{"line":312,"column":16},"end":{"line":317,"column":17}},{"start":{"line":312,"column":16},"end":{"line":317,"column":17}}],"line":312},"28":{"loc":{"start":{"line":322,"column":61},"end":{"line":322,"column":205}},"type":"cond-expr","locations":[{"start":{"line":322,"column":199},"end":{"line":322,"column":201}},{"start":{"line":322,"column":204},"end":{"line":322,"column":205}}],"line":322},"29":{"loc":{"start":{"line":322,"column":61},"end":{"line":322,"column":196}},"type":"binary-expr","locations":[{"start":{"line":322,"column":61},"end":{"line":322,"column":179}},{"start":{"line":322,"column":183},"end":{"line":322,"column":196}}],"line":322},"30":{"loc":{"start":{"line":322,"column":67},"end":{"line":322,"column":169}},"type":"cond-expr","locations":[{"start":{"line":322,"column":128},"end":{"line":322,"column":134}},{"start":{"line":322,"column":137},"end":{"line":322,"column":169}}],"line":322},"31":{"loc":{"start":{"line":322,"column":67},"end":{"line":322,"column":125}},"type":"binary-expr","locations":[{"start":{"line":322,"column":67},"end":{"line":322,"column":93}},{"start":{"line":322,"column":97},"end":{"line":322,"column":125}}],"line":322},"32":{"loc":{"start":{"line":324,"column":61},"end":{"line":324,"column":205}},"type":"cond-expr","locations":[{"start":{"line":324,"column":199},"end":{"line":324,"column":201}},{"start":{"line":324,"column":204},"end":{"line":324,"column":205}}],"line":324},"33":{"loc":{"start":{"line":324,"column":61},"end":{"line":324,"column":196}},"type":"binary-expr","locations":[{"start":{"line":324,"column":61},"end":{"line":324,"column":179}},{"start":{"line":324,"column":183},"end":{"line":324,"column":196}}],"line":324},"34":{"loc":{"start":{"line":324,"column":67},"end":{"line":324,"column":169}},"type":"cond-expr","locations":[{"start":{"line":324,"column":128},"end":{"line":324,"column":134}},{"start":{"line":324,"column":137},"end":{"line":324,"column":169}}],"line":324},"35":{"loc":{"start":{"line":324,"column":67},"end":{"line":324,"column":125}},"type":"binary-expr","locations":[{"start":{"line":324,"column":67},"end":{"line":324,"column":93}},{"start":{"line":324,"column":97},"end":{"line":324,"column":125}}],"line":324},"36":{"loc":{"start":{"line":325,"column":12},"end":{"line":328,"column":13}},"type":"if","locations":[{"start":{"line":325,"column":12},"end":{"line":328,"column":13}},{"start":{"line":325,"column":12},"end":{"line":328,"column":13}}],"line":325},"37":{"loc":{"start":{"line":325,"column":16},"end":{"line":325,"column":79}},"type":"binary-expr","locations":[{"start":{"line":325,"column":16},"end":{"line":325,"column":21}},{"start":{"line":325,"column":25},"end":{"line":325,"column":79}}],"line":325},"38":{"loc":{"start":{"line":329,"column":12},"end":{"line":332,"column":13}},"type":"if","locations":[{"start":{"line":329,"column":12},"end":{"line":332,"column":13}},{"start":{"line":329,"column":12},"end":{"line":332,"column":13}}],"line":329},"39":{"loc":{"start":{"line":329,"column":16},"end":{"line":329,"column":79}},"type":"binary-expr","locations":[{"start":{"line":329,"column":16},"end":{"line":329,"column":21}},{"start":{"line":329,"column":25},"end":{"line":329,"column":79}}],"line":329},"40":{"loc":{"start":{"line":334,"column":12},"end":{"line":343,"column":13}},"type":"if","locations":[{"start":{"line":334,"column":12},"end":{"line":343,"column":13}},{"start":{"line":334,"column":12},"end":{"line":343,"column":13}}],"line":334},"41":{"loc":{"start":{"line":336,"column":16},"end":{"line":338,"column":17}},"type":"if","locations":[{"start":{"line":336,"column":16},"end":{"line":338,"column":17}},{"start":{"line":336,"column":16},"end":{"line":338,"column":17}}],"line":336},"42":{"loc":{"start":{"line":340,"column":16},"end":{"line":342,"column":17}},"type":"if","locations":[{"start":{"line":340,"column":16},"end":{"line":342,"column":17}},{"start":{"line":340,"column":16},"end":{"line":342,"column":17}}],"line":340},"43":{"loc":{"start":{"line":344,"column":12},"end":{"line":395,"column":13}},"type":"if","locations":[{"start":{"line":344,"column":12},"end":{"line":395,"column":13}},{"start":{"line":344,"column":12},"end":{"line":395,"column":13}}],"line":344},"44":{"loc":{"start":{"line":345,"column":16},"end":{"line":348,"column":17}},"type":"if","locations":[{"start":{"line":345,"column":16},"end":{"line":348,"column":17}},{"start":{"line":345,"column":16},"end":{"line":348,"column":17}}],"line":345},"45":{"loc":{"start":{"line":345,"column":20},"end":{"line":345,"column":85}},"type":"binary-expr","locations":[{"start":{"line":345,"column":20},"end":{"line":345,"column":25}},{"start":{"line":345,"column":29},"end":{"line":345,"column":85}}],"line":345},"46":{"loc":{"start":{"line":349,"column":16},"end":{"line":360,"column":17}},"type":"if","locations":[{"start":{"line":349,"column":16},"end":{"line":360,"column":17}},{"start":{"line":349,"column":16},"end":{"line":360,"column":17}}],"line":349},"47":{"loc":{"start":{"line":361,"column":16},"end":{"line":368,"column":17}},"type":"if","locations":[{"start":{"line":361,"column":16},"end":{"line":368,"column":17}},{"start":{"line":361,"column":16},"end":{"line":368,"column":17}}],"line":361},"48":{"loc":{"start":{"line":370,"column":17},"end":{"line":395,"column":13}},"type":"if","locations":[{"start":{"line":370,"column":17},"end":{"line":395,"column":13}},{"start":{"line":370,"column":17},"end":{"line":395,"column":13}}],"line":370},"49":{"loc":{"start":{"line":371,"column":16},"end":{"line":374,"column":17}},"type":"if","locations":[{"start":{"line":371,"column":16},"end":{"line":374,"column":17}},{"start":{"line":371,"column":16},"end":{"line":374,"column":17}}],"line":371},"50":{"loc":{"start":{"line":371,"column":20},"end":{"line":371,"column":85}},"type":"binary-expr","locations":[{"start":{"line":371,"column":20},"end":{"line":371,"column":25}},{"start":{"line":371,"column":29},"end":{"line":371,"column":85}}],"line":371},"51":{"loc":{"start":{"line":375,"column":16},"end":{"line":386,"column":17}},"type":"if","locations":[{"start":{"line":375,"column":16},"end":{"line":386,"column":17}},{"start":{"line":375,"column":16},"end":{"line":386,"column":17}}],"line":375},"52":{"loc":{"start":{"line":387,"column":16},"end":{"line":394,"column":17}},"type":"if","locations":[{"start":{"line":387,"column":16},"end":{"line":394,"column":17}},{"start":{"line":387,"column":16},"end":{"line":394,"column":17}}],"line":387}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":12,"26":8,"27":2,"28":12,"29":12,"30":0,"31":0,"32":0,"33":0,"34":14,"35":2,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":2,"49":2,"50":2,"51":2,"52":2,"53":2,"54":2,"55":2,"56":2,"57":2,"58":0,"59":2,"60":2,"61":2,"62":2,"63":2,"64":2,"65":2,"66":2,"67":2,"68":4,"69":2,"70":2,"71":2,"72":2,"73":2,"74":2,"75":2,"76":2,"77":2,"78":2,"79":2,"80":0,"81":0,"82":2,"83":0,"84":0,"85":2,"86":2,"87":2,"88":1,"89":2,"90":2,"91":0,"92":2,"93":1,"94":0,"95":0,"96":1,"97":1,"98":1,"99":0,"100":1,"101":0,"102":1,"103":1,"104":0,"105":0,"106":1,"107":1,"108":1,"109":0,"110":1,"111":0,"112":2,"113":0,"114":0,"115":0,"116":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":2,"7":12,"8":8,"9":2,"10":12,"11":0,"12":14,"13":1,"14":2,"15":2,"16":4},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[4,8],"18":[2,2],"19":[2,12],"20":[2,2],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,2],"25":[2,2],"26":[2,0],"27":[2,0],"28":[2,0],"29":[2,2],"30":[0,2],"31":[2,2],"32":[2,0],"33":[2,2],"34":[0,2],"35":[2,2],"36":[0,2],"37":[2,2],"38":[0,2],"39":[2,2],"40":[2,0],"41":[1,1],"42":[0,2],"43":[1,1],"44":[0,1],"45":[1,1],"46":[1,0],"47":[0,1],"48":[1,0],"49":[0,1],"50":[1,1],"51":[1,0],"52":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/helper/marginValidationUserPosition.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/helper/marginValidationUserPosition.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,oDAAyB;AACzB,mCAAgC;AAChC,qDAAuC;AACvC,uCAA6C;AAC7C,iDAAwD;AACxD,+DAA4D;AAE5D,2EAA0E;AAC1E,gDAA2D;AAI3D,MAAM;AACN,qIAAqI;AACrI,YAAY;AAEZ,yCAAyC;AACzC,oCAAoC;AACpC,6DAA6D;AAC7D,0CAA0C;AAC1C,kJAAkJ;AAClJ,kJAAkJ;AAClJ,4CAA4C;AAE5C,iDAAiD;AACjD,mDAAmD;AACnD,mDAAmD;AACnD,oCAAoC;AACpC,kFAAkF;AAElF,0DAA0D;AAC1D,yFAAyF;AACzF,YAAY;AAEZ,+CAA+C;AAC/C,8FAA8F;AAE9F,0CAA0C;AAC1C,sCAAsC;AAEtC,8CAA8C;AAC9C,qCAAqC;AACrC,qCAAqC;AACrC,mCAAmC;AACnC,mCAAmC;AAEnC,uBAAuB;AAEvB,wGAAwG;AACxG,mGAAmG;AACnG,kDAAkD;AAClD,mCAAmC;AACnC,wDAAwD;AACxD,sDAAsD;AACtD,wDAAwD;AACxD,qDAAqD;AACrD,gBAAgB;AAChB,YAAY;AAEZ,wJAAwJ;AACxJ,8CAA8C;AAC9C,wJAAwJ;AAExJ,0GAA0G;AAE1G,+BAA+B;AAC/B,0BAA0B;AAC1B,4CAA4C;AAC5C,oDAAoD;AAEpD,gHAAgH;AAEhH,qCAAqC;AAErC,2CAA2C;AAC3C,2BAA2B;AAC3B,uGAAuG;AAEvG,sDAAsD;AACtD,4FAA4F;AAC5F,oBAAoB;AACpB,gBAAgB;AAChB,qFAAqF;AACrF,mEAAmE;AACnE,4FAA4F;AAC5F,gBAAgB;AAChB,qFAAqF;AACrF,mEAAmE;AACnE,4FAA4F;AAC5F,gBAAgB;AAEhB,uFAAuF;AACvF,iEAAiE;AACjE,0FAA0F;AAC1F,gBAAgB;AAEhB,uCAAuC;AAEvC,8DAA8D;AAC9D,uDAAuD;AACvD,oCAAoC;AACpC,yEAAyE;AACzE,qBAAqB;AACrB,uBAAuB;AAEvB,uCAAuC;AACvC,wBAAwB;AACxB,8CAA8C;AAC9C,4CAA4C;AAC5C,6DAA6D;AAC7D,yCAAyC;AACzC,wBAAwB;AACxB,qBAAqB;AAErB,gBAAgB;AAChB,wCAAwC;AACxC,uCAAuC;AACvC,wBAAwB;AACxB,8CAA8C;AAC9C,4CAA4C;AAC5C,+CAA+C;AAC/C,yCAAyC;AACzC,wBAAwB;AACxB,qBAAqB;AACrB,gBAAgB;AAChB,YAAY;AAEZ,0CAA0C;AAE1C,2CAA2C;AAE3C,2BAA2B;AAC3B,uGAAuG;AAEvG,sDAAsD;AACtD,4FAA4F;AAC5F,oBAAoB;AACpB,gBAAgB;AAEhB,qFAAqF;AACrF,mEAAmE;AACnE,4FAA4F;AAC5F,gBAAgB;AAChB,qFAAqF;AACrF,mEAAmE;AACnE,4FAA4F;AAC5F,gBAAgB;AAEhB,uFAAuF;AACvF,iEAAiE;AACjE,0FAA0F;AAC1F,gBAAgB;AAEhB,uCAAuC;AAEvC,8DAA8D;AAC9D,uDAAuD;AACvD,oCAAoC;AACpC,yEAAyE;AACzE,qBAAqB;AACrB,uBAAuB;AAEvB,uCAAuC;AACvC,wBAAwB;AACxB,8CAA8C;AAC9C,4CAA4C;AAC5C,wDAAwD;AACxD,yCAAyC;AACzC,wBAAwB;AACxB,qBAAqB;AAErB,gBAAgB;AAChB,wCAAwC;AACxC,uCAAuC;AACvC,wBAAwB;AACxB,8CAA8C;AAC9C,4CAA4C;AAC5C,+CAA+C;AAC/C,yCAAyC;AACzC,wBAAwB;AACxB,qBAAqB;AACrB,gBAAgB;AAEhB,YAAY;AAGZ,6IAA6I;AAC7I,wCAAwC;AAExC,8BAA8B;AAC9B,2CAA2C;AAC3C,oHAAoH;AACpH,wDAAwD;AAExD,+FAA+F;AAE/F,kCAAkC;AAClC,6CAA6C;AAC7C,gBAAgB;AAEhB,mCAAmC;AACnC,wHAAwH;AACxH,4DAA4D;AAE5D,wEAAwE;AACxE,wEAAwE;AACxE,6CAA6C;AAC7C,wFAAwF;AACxF,2CAA2C;AAC3C,oBAAoB;AACpB,+BAA+B;AAC/B,8BAA8B;AAC9B,kEAAkE;AAClE,+DAA+D;AAC/D,yCAAyC;AACzC,sCAAsC;AACtC,2CAA2C;AAC3C,2CAA2C;AAC3C,wCAAwC;AACxC,qEAAqE;AACrE,oDAAoD;AACpD,mCAAmC;AACnC,oBAAoB;AACpB,wDAAwD;AAExD,yGAAyG;AAEzG,gBAAgB;AAEhB,YAAY;AACZ,4BAA4B;AAC5B,6BAA6B;AAC7B,iDAAiD;AACjD,YAAY;AACZ,iBAAiB;AACjB,+CAA+C;AAC/C,YAAY;AACZ,wBAAwB;AAExB,8BAA8B;AAC9B,sBAAsB;AACtB,oCAAoC;AACpC,0BAA0B;AAC1B,mCAAmC;AACnC,mCAAmC;AACnC,iCAAiC;AACjC,mCAAmC;AACnC,+BAA+B;AAC/B,+CAA+C;AAC/C,gCAAgC;AAChC,0DAA0D;AAC1D,4CAA4C;AAC5C,4BAA4B;AAC5B,8BAA8B;AAC9B,wBAAwB;AACxB,6CAA6C;AAC7C,iCAAiC;AACjC,yCAAyC;AACzC,mEAAmE;AACnE,yEAAyE;AACzE,YAAY;AAEZ,uBAAuB;AACvB,6DAA6D;AAC7D,yCAAyC;AACzC,4BAA4B;AAC5B,iCAAiC;AACjC,8BAA8B;AAC9B,qBAAqB;AACrB,yBAAyB;AACzB,qBAAqB;AACrB,gBAAgB;AAEhB,sDAAsD;AACtD,YAAY;AAGZ,kDAAkD;AAGlD,4BAA4B;AAC5B,uBAAuB;AACvB,0DAA0D;AAC1D,yCAAyC;AACzC,mDAAmD;AACnD,6CAA6C;AAC7C,6BAA6B;AAC7B,kBAAkB;AAClB,YAAY;AAEZ,4GAA4G;AAE5G,2FAA2F;AAE3F,QAAQ;AACR,2BAA2B;AAC3B,yCAAyC;AACzC,4DAA4D;AAC5D,2EAA2E;AAC3E,QAAQ;AACR,IAAI;AAEJ,SAAsB,+BAA+B,CAAC,SAAiB,EAAE,IAAS,EAAE,OAAe,EAAE,IAAyB;;;QAC1H,IAAI;YAEA,IAAI,MAAM,GAAG,IAAA,gBAAG,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC9B,IAAI,CAAC,GAAG,IAAA,gBAAG,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACzB,IAAI,CAAC,GAAG,IAAA,gBAAG,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC/B,IAAI,aAAa,GAAsB,IAAA,gBAAG,EAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAA,gBAAG,EAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAA,gBAAG,EAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAEvI,aAAa,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;YACjC,yBAAyB;YACzB,IAAI,WAAW,GAAG,IAAA,gBAAG,EAAC,IAAI,CAAC,WAAW,CAAC,CAAC,GAAG,CAAC,IAAA,gBAAG,EAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;YAEvE,IAAI,WAAW,GAAG,IAAI,IAAI,WAAW,GAAG,IAAI,EAAE;gBAC1C,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,WAAW,EAAE,UAAU,EAAE,GAAG,EAAE,CAAA;aAC7E;YAED,IAAI,KAAK,GAAG,IAAI,eAAM,CAAC,QAAQ,CAAC,CAAC,IAAA,uBAAe,EAAC,OAAO,CAAC,CAAC,EAAE,IAAA,cAAM,EAAC,OAAO,CAAC,EAAE,IAAA,mBAAW,EAAC,OAAO,CAAC,CAAC,CAAC;YAEnG,+BAA+B;YAC/B,IAAI,OAAO,GAAa,EAAE,CAAC;YAE3B,IAAI,aAA8B,CAAC;YACnC,IAAI,iBAAiB,GAAG,CAAC,CAAC;YAC1B,IAAI,iBAAiB,GAAG,CAAC,CAAC;YAC1B,IAAI,eAAe,GAAG,CAAC,CAAC;YACxB,IAAI,eAAe,GAAG,CAAC,CAAC;YAExB,IAAI,CAAC,IAAI,EAAE;gBAEP,aAAa,GAAG,MAAM,IAAA,uCAAmB,EAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;gBACzF,OAAO,GAAG,CAAC,MAAM,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAS,EAAE,EAAE,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC;gBACpF,mCAAmC;gBACnC,IAAI,aAAa,EAAE;oBACf,iBAAiB,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;oBACrC,eAAe,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;oBACnC,iBAAiB,GAAG,aAAa,CAAC,CAAC,CAAC,CAAC;oBACrC,eAAe,GAAG,aAAa,CAAC,CAAC,CAAC,CAAA;iBACrC;aACJ;YAED,MAAM,iBAAiB,GAA0B,MAAM,SAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YACrI,mCAAmC;YACnC,MAAM,iBAAiB,GAA0B,MAAM,SAAI,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAErI,IAAI,oBAAoB,GAAG,IAAA,gBAAG,EAAC,MAAA,iBAAiB,aAAjB,iBAAiB,uBAAjB,iBAAiB,CAAE,cAAc,mCAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,QAAQ,EAAE,CAAC;YAE/F,MAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;YAEvC,IAAI,oBAAoB,GAAG,IAAA,gBAAG,EAAC,MAAA,iBAAiB,aAAjB,iBAAiB,uBAAjB,iBAAiB,CAAE,cAAc,mCAAI,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,QAAQ,EAAE,CAAC;YAErG,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC,oBAAoB,CAAC,EAAE;gBACjE,OAAO,CAAC,GAAG,CAAC,GAAG,2BAAY,CAAC,SAAS,SAAS,CAAC,CAAC;gBAChD,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,SAAS,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC;aAC5E;YACD,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,eAAe,CAAC,GAAG,MAAM,CAAC,oBAAoB,CAAC,EAAE;gBACjE,OAAO,CAAC,GAAG,CAAC,GAAG,2BAAY,CAAC,SAAS,SAAS,CAAC,CAAC;gBAChD,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,SAAS,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC;aAC5E;YAED,4BAA4B;YAC5B,IAAI,CAAC,IAAI,EAAE;gBACP,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAA;gBACvB,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;oBACrB,KAAK,GAAG,IAAI,CAAC,MAAM,CAAA;iBACtB;gBACD,MAAM,SAAS,GAAG,MAAM,UAAK,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAU,CAAC;gBAElF,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;oBAClC,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,MAAM,EAAE,UAAU,EAAE,GAAG,EAAE,CAAA;iBACxE;aACJ;YAED,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;gBAErB,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC,oBAAoB,CAAC,EAAE;oBACnE,OAAO,CAAC,GAAG,CAAC,GAAG,2BAAY,CAAC,OAAO,SAAS,CAAC,CAAC;oBAC9C,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC;iBAC1E;gBAED,IAAI,iBAAiB,EAAE;oBAEnB,IAAI,GAAG,GAAG,iBAAiB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;oBAC3C,MAAM,SAAI,CAAC,gBAAgB,CACvB,EAAE,GAAG,EAAE,GAAG,EAAE,EACZ,EAAE,IAAI,EAAE,EAAE,cAAc,EAAE,oBAAoB,EAAE,EAAE,CACrD,CAAC;iBACL;qBAAM;oBAEH,SAAI,CAAC,MAAM,CACP;wBACI,KAAK,EAAE,IAAI,CAAC,MAAM;wBAClB,OAAO,EAAE,OAAO;wBAChB,cAAc,EAAE,MAAM,CAAC,QAAQ,EAAE;wBACjC,EAAE,EAAE,IAAI,CAAC,KAAK;qBACjB,CACJ,CAAC;iBAEL;gBACD,IAAI,CAAC,iBAAiB,EAAE;oBACpB,SAAI,CAAC,MAAM,CACP;wBACI,KAAK,EAAE,IAAI,CAAC,MAAM;wBAClB,OAAO,EAAE,OAAO;wBAChB,cAAc,EAAE,GAAG;wBACnB,EAAE,EAAE,IAAI,CAAC,KAAK;qBACjB,CACJ,CAAC;iBACL;aACJ;iBAEI,IAAI,IAAI,CAAC,SAAS,IAAI,CAAC,EAAE;gBAE1B,IAAI,CAAC,IAAI,IAAI,MAAM,CAAC,iBAAiB,CAAC,GAAG,MAAM,CAAC,oBAAoB,CAAC,EAAE;oBACnE,OAAO,CAAC,GAAG,CAAC,GAAG,2BAAY,CAAC,OAAO,SAAS,CAAC,CAAC;oBAC9C,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC;iBAC1E;gBAED,IAAI,iBAAiB,EAAE;oBAEnB,IAAI,GAAG,GAAG,iBAAiB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;oBAC3C,MAAM,SAAI,CAAC,gBAAgB,CACvB,EAAE,GAAG,EAAE,GAAG,EAAE,EACZ,EAAE,IAAI,EAAE,EAAE,cAAc,EAAE,oBAAoB,EAAE,EAAE,CACrD,CAAC;iBACL;qBAAM;oBAEH,SAAI,CAAC,MAAM,CACP;wBACI,KAAK,EAAE,IAAI,CAAC,MAAM;wBAClB,OAAO,EAAE,OAAO;wBAChB,cAAc,EAAE,YAAY;wBAC5B,EAAE,EAAE,IAAI,CAAC,KAAK;qBACjB,CACJ,CAAC;iBAEL;gBACD,IAAI,CAAC,iBAAiB,EAAE;oBACpB,SAAI,CAAC,MAAM,CACP;wBACI,KAAK,EAAE,IAAI,CAAC,MAAM;wBAClB,OAAO,EAAE,OAAO;wBAChB,cAAc,EAAE,GAAG;wBACnB,EAAE,EAAE,IAAI,CAAC,KAAK;qBACjB,CACJ,CAAC;iBACL;aAEJ;YAED,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,aAAa,EAAE,CAAA;SAExD;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAE,KAAK,CAAC,CAAC;YACjD,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC;SACnE;;CACJ;AA9JD,0EA8JC","sourcesContent":["import Big from \"big.js\";\r\nimport { ethers } from \"ethers\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { Token, User } from \"../../../DB/db\";\r\nimport { getLeverAddress } from \"../../../helper/chain\";\r\nimport { errorMessage } from \"../../../helper/errorMessage\";\r\nimport { ifUserPosition } from \"../../../helper/interface\";\r\nimport { multicallFor2Tokens } from \"../../../muticall/twoTokenMulticall\";\r\nimport { getABI, getProvider } from \"../../../utils/utils\";\r\n\r\n\r\n\r\n// old\r\n// export async function _marginValidationAndUserPosition(signature: string, data: any, chainId: string, ipfs: boolean | undefined) {\r\n//     try {\r\n\r\n//         let amount = Big(data.amount);\r\n//         let a = Big(data.amount);\r\n//         let x = Big(data.borrowLimit).div(Big(10).pow(6));\r\n//         let n = Number(data.loops) + 1;\r\n//         let balanceAmount: string | string[] = Big(a).times((Big(1).minus(Big(x).pow(n))).div(Big(1).minus(x))).minus(a).toString().split(\".\");\r\n//         // let balanceAmount: string | string[] = Big(a).times(((Big(x).pow(n)).minus(1)).div(Big(x).minus(1))).minus(a).toString().split(\".\");\r\n//         balanceAmount = balanceAmount[0];\r\n\r\n//         data.maker = data.maker.toLowerCase();\r\n//         data.token0 = data.token0.toLowerCase();\r\n//         data.token1 = data.token1.toLowerCase();\r\n//         // console.log(arguments)\r\n//         let borrowLimit = Big(data.borrowLimit).div(Big(10).pow(6)).toNumber();\r\n\r\n//         if (borrowLimit > 0.75 || borrowLimit < 0.05) {\r\n//             return { status: false, error: errorMessage.borrowLimit, statusCode: 400 }\r\n//         }\r\n\r\n//         let provider = getProvider(chainId);\r\n//         let lever = new ethers.Contract((getLeverAddress(chainId)), leverageAbi, provider);\r\n\r\n//         // checking market enter or not\r\n//         let assetIn: string[] = [];\r\n\r\n//         let multicallData: number[] | null;\r\n//         let userToken0Balance = 0;\r\n//         let userToken1Balance = 0;\r\n//         let allowanceToken0 = 0;\r\n//         let allowanceToken1 = 0;\r\n\r\n//         if (!ipfs) {\r\n\r\n//             multicallData = await multicallFor2Tokens(data.token0, data.token1, data.maker, chainId);\r\n//             assetIn = (await lever.getAssetsIn(data.maker)).map((x: string) => x.toLowerCase());\r\n//             // console.log(\"AssetIn:\", assetIn)\r\n//             if (multicallData) {\r\n//                 userToken0Balance = multicallData[0];\r\n//                 allowanceToken0 = multicallData[1];\r\n//                 userToken1Balance = multicallData[2];\r\n//                 allowanceToken1 = multicallData[3]\r\n//             }\r\n//         }\r\n\r\n//         const findUserPosition0: ifUserPosition | null = await UserPosition.findOne({ id: data.maker, token: data.token0, chainId: chainId }).lean();\r\n//         // for new order , will sell token1\r\n//         const findUserPosition1: ifUserPosition | null = await UserPosition.findOne({ id: data.maker, token: data.token1, chainId: chainId }).lean();\r\n\r\n//         let token0CurrentInOrder = Big(findUserPosition0?.inOrderBalance ?? 0).plus(amount).toNumber();\r\n\r\n//         const token1Amount =\r\n//             Big(amount)\r\n//                 .times(data.exchangeRate)\r\n//                 .div(Big(10).pow(18)).toString();\r\n\r\n//         let token1CurrentInOrder = Big(findUserPosition1?.inOrderBalance ?? 0).plus(token1Amount).toNumber();\r\n\r\n//         if (data.orderType == 2) {\r\n\r\n//             // check market enter or not\r\n//             if (!ipfs) {\r\n//                 const token = await Token.findOne({ id: data.token0, active: true }).lean()! as any;\r\n\r\n//                 if (!assetIn.includes(token.cId)) {\r\n//                     return { status: false, error: errorMessage.market, statusCode: 400 }\r\n//                 }\r\n//             }\r\n//             if (!ipfs && Number(allowanceToken0) < Number(token0CurrentInOrder)) {\r\n//                 console.log(`${errorMessage.allowance} token0`);\r\n//                 return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n//             }\r\n//             if (!ipfs && Number(allowanceToken1) < Number(token1CurrentInOrder)) {\r\n//                 console.log(`${errorMessage.allowance} token1`);\r\n//                 return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n//             }\r\n\r\n//             if (!ipfs && Number(userToken0Balance) < Number(token0CurrentInOrder)) {\r\n//                 console.log(`${errorMessage.balance} token0`);\r\n//                 return { status: false, error: errorMessage.balance, statusCode: 400 };\r\n//             }\r\n\r\n//             if (findUserPosition0) {\r\n\r\n//                 let _id = findUserPosition0._id.toString();\r\n//                 await UserPosition.findOneAndUpdate(\r\n//                     { _id: _id },\r\n//                     { $set: { inOrderBalance: token0CurrentInOrder } }\r\n//                 );\r\n//             } else {\r\n\r\n//                 UserPosition.create(\r\n//                     {\r\n//                         token: data.token0,\r\n//                         chainId: chainId,\r\n//                         inOrderBalance: amount.toString(),\r\n//                         id: data.maker\r\n//                     }\r\n//                 );\r\n\r\n//             }\r\n//             if (!findUserPosition1) {\r\n//                 UserPosition.create(\r\n//                     {\r\n//                         token: data.token1,\r\n//                         chainId: chainId,\r\n//                         inOrderBalance: '0',\r\n//                         id: data.maker\r\n//                     }\r\n//                 );\r\n//             }\r\n//         }\r\n\r\n//         else if (data.orderType == 3) {\r\n\r\n//             // check market enter or not\r\n\r\n//             if (!ipfs) {\r\n//                 const token = await Token.findOne({ id: data.token1, active: true }).lean()! as any;\r\n\r\n//                 if (!assetIn.includes(token.cId)) {\r\n//                     return { status: false, error: errorMessage.market, statusCode: 400 }\r\n//                 }\r\n//             }\r\n\r\n//             if (!ipfs && Number(allowanceToken1) < Number(token1CurrentInOrder)) {\r\n//                 console.log(`${errorMessage.allowance} token1`);\r\n//                 return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n//             }\r\n//             if (!ipfs && Number(allowanceToken0) < Number(token0CurrentInOrder)) {\r\n//                 console.log(`${errorMessage.allowance} token0`);\r\n//                 return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n//             }\r\n\r\n//             if (!ipfs && Number(userToken1Balance) < Number(token1CurrentInOrder)) {\r\n//                 console.log(`${errorMessage.balance} token1`);\r\n//                 return { status: false, error: errorMessage.balance, statusCode: 400 };\r\n//             }\r\n\r\n//             if (findUserPosition1) {\r\n\r\n//                 let _id = findUserPosition1._id.toString();\r\n//                 await UserPosition.findOneAndUpdate(\r\n//                     { _id: _id },\r\n//                     { $set: { inOrderBalance: token1CurrentInOrder } }\r\n//                 );\r\n//             } else {\r\n\r\n//                 UserPosition.create(\r\n//                     {\r\n//                         token: data.token1,\r\n//                         chainId: chainId,\r\n//                         inOrderBalance: token1Amount,\r\n//                         id: data.maker\r\n//                     }\r\n//                 );\r\n\r\n//             }\r\n//             if (!findUserPosition0) {\r\n//                 UserPosition.create(\r\n//                     {\r\n//                         token: data.token0,\r\n//                         chainId: chainId,\r\n//                         inOrderBalance: '0',\r\n//                         id: data.maker\r\n//                     }\r\n//                 );\r\n//             }\r\n\r\n//         }\r\n\r\n\r\n//         let isPairExist: ifPair = await Pair.findOne({ token0: data.token0, token1: data.token1, chainId: chainId, active: true }).lean();\r\n//         let createPair: ifPair | any;\r\n\r\n//         if (!isPairExist) {\r\n//             // cheking for opposite pair\r\n//             let encoder = new ethers.utils.AbiCoder().encode([\"address\", \"address\"], [data.token1, data.token0]);\r\n//             let id = ethers.utils.keccak256(encoder);\r\n\r\n//             let isPairExist1: ifPair = await Pair.findOne({ id: id, active: true }).lean();;\r\n\r\n//             if (isPairExist1) {\r\n//                 createPair = isPairExist1;\r\n//             }\r\n\r\n//             if (!isPairExist1) {\r\n//                 let encoder = new ethers.utils.AbiCoder().encode([\"address\", \"address\"], [data.token0, data.token1]);\r\n//                 let id = ethers.utils.keccak256(encoder);\r\n\r\n//                 let token0 = await handleToken(data.token0, chainId);\r\n//                 let token1 = await handleToken(data.token1, chainId);\r\n//                 let marginEnabled = false;\r\n//                 if (token0?.marginEnabled == true && token1?.marginEnabled == true) {\r\n//                     marginEnabled = true\r\n//                 }\r\n//                 let temp = {\r\n//                     id: id,\r\n//                     exchangeRateDecimals: exchangeRateDecimals,\r\n//                     minToken0Order: token0?.minToken0Amount,\r\n//                     exchangeRate: '0',\r\n//                     priceDiff: '0',\r\n//                     token0: data.token0,\r\n//                     token1: data.token1,\r\n//                     chainId: chainId,\r\n//                     symbol: `${token0?.symbol}_${token1?.symbol}`,\r\n//                     marginEnabled: marginEnabled,\r\n//                     active: true\r\n//                 }\r\n//                 createPair = await Pair.create(temp);\r\n\r\n//                 console.log(\"Pair Created \", \"T0 \", data.token0, \"T1 \", data.token1, \"CId \", chainId);\r\n\r\n//             }\r\n\r\n//         }\r\n//         let pair: string;\r\n//         if (isPairExist) {\r\n//             pair = isPairExist.id?.toString();\r\n//         }\r\n//         else {\r\n//             pair = createPair.id.toString();\r\n//         }\r\n//         let cid = \"\";\r\n\r\n//         let orderCreate = {\r\n//             id: id,\r\n//             signature: signature,\r\n//             pair: pair,\r\n//             token0: data.token0,\r\n//             token1: data.token1,\r\n//             maker: data.maker,\r\n//             amount: data.amount,\r\n//             salt: data.salt,\r\n//             exchangeRate: data.exchangeRate,\r\n//             chainId: chainId,\r\n//             exchangeRateDecimals: exchangeRateDecimals,\r\n//             balanceAmount: balanceAmount,\r\n//             active: true,\r\n//             deleted: false,\r\n//             cid: cid,\r\n//             borrowLimit: data.borrowLimit,\r\n//             loops: data.loops,\r\n//             orderType: data.orderType,\r\n//             lastInOrderToken0: data.orderType == 2 ? amount : 0,\r\n//             lastInOrderToken1: data.orderType == 3 ? token1Amount : 0,\r\n//         }\r\n\r\n//         if (!ipfs) {\r\n//             if (!process.env.NODE_ENV?.includes('test')) {\r\n//                 cid = await mainIPFS([\r\n//                     data,\r\n//                     signature,\r\n//                     chainId\r\n//                 ],\r\n//                     id\r\n//                 );\r\n//             }\r\n\r\n//             OrderCreatedBackup.create(orderCreate);\r\n//         }\r\n\r\n\r\n//         await OrderCreated.create(orderCreate);\r\n\r\n\r\n//         // socket io data\r\n//         if (!ipfs) {\r\n//             socketService.emit(EVENT_NAME.PAIR_ORDER, {\r\n//                 amount: balanceAmount,\r\n//                 exchangeRate: data.exchangeRate,\r\n//                 orderType: data.orderType,\r\n//                 pair: pair\r\n//             });\r\n//         }\r\n\r\n//         console.log(\"MarginOrder Created \", \"maker \", data.maker, \"amount \", data.amount.toString(), id);\r\n\r\n//         return { status: true, message: \"Order created successfully\", statusCode: 201 };\r\n\r\n//     }\r\n//     catch (error: any) {\r\n//         sentry.captureException(error)\r\n//         console.log(\"Error @ handleOrderCreated\", error);\r\n//         return { status: false, error: error.message, statusCode: 500 };\r\n//     }\r\n// }\r\n\r\nexport async function marginValidationAndUserPosition(signature: string, data: any, chainId: string, ipfs: boolean | undefined) {\r\n    try {\r\n\r\n        let amount = Big(data.amount);\r\n        let a = Big(data.amount);\r\n        let x = Big(data.borrowLimit).div(Big(10).pow(6));\r\n        let n = Number(data.loops) + 1;\r\n        let balanceAmount: string | string[] = Big(a).times((Big(1).minus(Big(x).pow(n))).div(Big(1).minus(x))).minus(a).toString().split(\".\");\r\n\r\n        balanceAmount = balanceAmount[0];\r\n        // console.log(arguments)\r\n        let borrowLimit = Big(data.borrowLimit).div(Big(10).pow(6)).toNumber();\r\n\r\n        if (borrowLimit > 0.75 || borrowLimit < 0.05) {\r\n            return { status: false, error: errorMessage.borrowLimit, statusCode: 400 }\r\n        }\r\n\r\n        let lever = new ethers.Contract((getLeverAddress(chainId)), getABI(\"Lever\"), getProvider(chainId));\r\n\r\n        // checking market enter or not\r\n        let assetIn: string[] = [];\r\n\r\n        let multicallData: number[] | null;\r\n        let userToken0Balance = 0;\r\n        let userToken1Balance = 0;\r\n        let allowanceToken0 = 0;\r\n        let allowanceToken1 = 0;\r\n\r\n        if (!ipfs) {\r\n\r\n            multicallData = await multicallFor2Tokens(data.token0, data.token1, data.maker, chainId);\r\n            assetIn = (await lever.getAssetsIn(data.maker)).map((x: string) => x.toLowerCase());\r\n            // console.log(\"AssetIn:\", assetIn)\r\n            if (multicallData) {\r\n                userToken0Balance = multicallData[0];\r\n                allowanceToken0 = multicallData[1];\r\n                userToken1Balance = multicallData[2];\r\n                allowanceToken1 = multicallData[3]\r\n            }\r\n        }\r\n\r\n        const findUserPosition0: ifUserPosition | null = await User.findOne({ id: data.maker, token: data.token0, chainId: chainId }).lean();\r\n        // for new order , will sell token1\r\n        const findUserPosition1: ifUserPosition | null = await User.findOne({ id: data.maker, token: data.token1, chainId: chainId }).lean();\r\n\r\n        let token0CurrentInOrder = Big(findUserPosition0?.inOrderBalance ?? 0).plus(amount).toNumber();\r\n\r\n        const token1Amount = data.token1Amount;\r\n\r\n        let token1CurrentInOrder = Big(findUserPosition1?.inOrderBalance ?? 0).plus(token1Amount).toNumber();\r\n\r\n        if (!ipfs && Number(allowanceToken0) < Number(token0CurrentInOrder)) {\r\n            console.log(`${errorMessage.allowance} token0`);\r\n            return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n        }\r\n        if (!ipfs && Number(allowanceToken1) < Number(token1CurrentInOrder)) {\r\n            console.log(`${errorMessage.allowance} token1`);\r\n            return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n        }\r\n\r\n        // check market enter or not\r\n        if (!ipfs) {\r\n            let token = data.token0\r\n            if (data.orderType == 3) {\r\n                token = data.token1\r\n            }\r\n            const tokenData = await Token.findOne({ id: token, active: true }).lean()! as any;\r\n\r\n            if (!assetIn.includes(tokenData.cId)) {\r\n                return { status: false, error: errorMessage.market, statusCode: 400 }\r\n            }\r\n        }\r\n\r\n        if (data.orderType == 2) {\r\n\r\n            if (!ipfs && Number(userToken0Balance) < Number(token0CurrentInOrder)) {\r\n                console.log(`${errorMessage.balance} token0`);\r\n                return { status: false, error: errorMessage.balance, statusCode: 400 };\r\n            }\r\n\r\n            if (findUserPosition0) {\r\n\r\n                let _id = findUserPosition0._id.toString();\r\n                await User.findOneAndUpdate(\r\n                    { _id: _id },\r\n                    { $set: { inOrderBalance: token0CurrentInOrder } }\r\n                );\r\n            } else {\r\n\r\n                User.create(\r\n                    {\r\n                        token: data.token0,\r\n                        chainId: chainId,\r\n                        inOrderBalance: amount.toString(),\r\n                        id: data.maker\r\n                    }\r\n                );\r\n\r\n            }\r\n            if (!findUserPosition1) {\r\n                User.create(\r\n                    {\r\n                        token: data.token1,\r\n                        chainId: chainId,\r\n                        inOrderBalance: '0',\r\n                        id: data.maker\r\n                    }\r\n                );\r\n            }\r\n        }\r\n\r\n        else if (data.orderType == 3) {\r\n\r\n            if (!ipfs && Number(userToken1Balance) < Number(token1CurrentInOrder)) {\r\n                console.log(`${errorMessage.balance} token1`);\r\n                return { status: false, error: errorMessage.balance, statusCode: 400 };\r\n            }\r\n\r\n            if (findUserPosition1) {\r\n\r\n                let _id = findUserPosition1._id.toString();\r\n                await User.findOneAndUpdate(\r\n                    { _id: _id },\r\n                    { $set: { inOrderBalance: token1CurrentInOrder } }\r\n                );\r\n            } else {\r\n\r\n                User.create(\r\n                    {\r\n                        token: data.token1,\r\n                        chainId: chainId,\r\n                        inOrderBalance: token1Amount,\r\n                        id: data.maker\r\n                    }\r\n                );\r\n\r\n            }\r\n            if (!findUserPosition0) {\r\n                User.create(\r\n                    {\r\n                        token: data.token0,\r\n                        chainId: chainId,\r\n                        inOrderBalance: '0',\r\n                        id: data.maker\r\n                    }\r\n                );\r\n            }\r\n\r\n        }\r\n\r\n        return { status: true, balanceAmount: balanceAmount }\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ handleOrderCreated\", error);\r\n        return { status: false, error: error.message, statusCode: 500 };\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ecbb0b84b4162c4e2b15cb0e5ee73934a914a3ec","contentHash":"e7ae959f155b9558b49c6c500c55a0b9481a697955382ca55c4cd2433cde1cbf"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\twoTokenMulticall.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\twoTokenMulticall.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":37}},"38":{"start":{"line":36,"column":17},"end":{"line":36,"column":34}},"39":{"start":{"line":37,"column":16},"end":{"line":37,"column":41}},"40":{"start":{"line":38,"column":16},"end":{"line":38,"column":42}},"41":{"start":{"line":39,"column":15},"end":{"line":39,"column":52}},"42":{"start":{"line":41,"column":4},"end":{"line":64,"column":7}},"43":{"start":{"line":42,"column":8},"end":{"line":63,"column":9}},"44":{"start":{"line":43,"column":30},"end":{"line":43,"column":171}},"45":{"start":{"line":44,"column":24},"end":{"line":44,"column":83}},"46":{"start":{"line":45,"column":26},"end":{"line":50,"column":13}},"47":{"start":{"line":51,"column":23},"end":{"line":51,"column":66}},"48":{"start":{"line":52,"column":25},"end":{"line":52,"column":27}},"49":{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},"50":{"start":{"line":54,"column":16},"end":{"line":54,"column":84}},"51":{"start":{"line":57,"column":12},"end":{"line":57,"column":26}},"52":{"start":{"line":60,"column":12},"end":{"line":60,"column":43}},"53":{"start":{"line":61,"column":12},"end":{"line":61,"column":62}},"54":{"start":{"line":62,"column":12},"end":{"line":62,"column":24}},"55":{"start":{"line":66,"column":0},"end":{"line":66,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"multicallFor2Tokens","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":28}},"loc":{"start":{"line":40,"column":61},"end":{"line":65,"column":1}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":64,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":2,"26":0,"27":2,"28":2,"29":2,"30":0,"31":0,"32":0,"33":0,"34":4,"35":2,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":2,"43":2,"44":2,"45":2,"46":2,"47":2,"48":2,"49":2,"50":8,"51":2,"52":0,"53":0,"54":0,"55":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":2,"7":2,"8":0,"9":2,"10":2,"11":0,"12":4,"13":2,"14":2},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[2,0],"18":[2,2],"19":[2,2],"20":[2,2]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/twoTokenMulticall.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/twoTokenMulticall.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,mCAA2C;AAC3C,0CAAoE;AACpE,2CAA0E;AAC1E,qDAAuC;AAMvC,SAAsB,mBAAmB,CAAC,MAAc,EAAE,MAAc,EAAE,KAAa,EAAE,OAAe;;QACpG,IAAI;YAEA,MAAM,SAAS,GAAG,IAAI,eAAM,CAAC,QAAQ,CACjC,IAAA,2BAAmB,EAAC,OAAO,CAAC,EAC5B,IAAA,cAAM,EAAC,YAAY,CAAC,EACpB,IAAA,mBAAW,EAAC,OAAO,CAAC,CACvB,CAAC;YAEF,MAAM,GAAG,GAA2B,IAAA,oBAAY,EAAC,IAAA,cAAM,EAAC,WAAW,CAAC,CAAC,CAAC;YACtE,MAAM,KAAK,GAAe;gBACtB,CAAC,MAAM,EAAE,GAAG,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;gBACtD,CAAC,MAAM,EAAE,GAAG,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,KAAK,EAAE,IAAA,0BAAkB,EAAC,OAAO,CAAC,CAAC,CAAC,CAAC;gBACnF,CAAC,MAAM,EAAE,GAAG,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;gBACtD,CAAC,MAAM,EAAE,GAAG,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,KAAK,EAAE,IAAA,0BAAkB,EAAC,OAAO,CAAC,CAAC,CAAC,CAAC;aACtF,CAAA;YACD,IAAI,IAAI,GAAG,MAAM,SAAS,CAAC,UAAU,CAAC,SAAS,CAC3C,KAAK,CACR,CAAC;YAEF,IAAI,MAAM,GAAa,EAAE,CAAC;YAE1B,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE;gBACnB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;aAC7D;YACD,sBAAsB;YACtB,OAAO,MAAM,CAAA;SAChB;QACD,OAAO,KAAK,EAAE;YACV,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAA;YACjD,OAAO,IAAI,CAAA;SACd;IACL,CAAC;CAAA;AAjCD,kDAiCC","sourcesContent":["import { BigNumber, ethers } from \"ethers\";\r\nimport {  getProvider, getInterface, getABI } from \"../utils/utils\";\r\nimport { getExchangeAddress, getMulticallAddress } from \"../helper/chain\";\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\n\r\n\r\nexport async function multicallFor2Tokens(token0: string, token1: string, maker: string, chainId: string): Promise<number[] | null> {\r\n    try {\r\n\r\n        const multicall = new ethers.Contract(\r\n            getMulticallAddress(chainId),\r\n            getABI(\"Multicall2\"),\r\n            getProvider(chainId)\r\n        );\r\n\r\n        const itf: ethers.utils.Interface = getInterface(getABI(\"TestERC20\"));\r\n        const input: string[][] = [\r\n            [token0, itf.encodeFunctionData(\"balanceOf\", [maker])],\r\n            [token0, itf.encodeFunctionData(\"allowance\", [maker, getExchangeAddress(chainId)])],\r\n            [token1, itf.encodeFunctionData(\"balanceOf\", [maker])],\r\n            [token1, itf.encodeFunctionData(\"allowance\", [maker, getExchangeAddress(chainId)])]\r\n        ]\r\n        let resp = await multicall.callStatic.aggregate(\r\n            input\r\n        );\r\n\r\n        let outPut: number[] = [];\r\n\r\n        for (let i in resp[1]) {\r\n            outPut.push(Number(BigNumber.from(resp[1][i]).toString()))\r\n        }\r\n        // console.log(outPut)\r\n        return outPut\r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(`Error @ multicallFor2Tokens`, error)\r\n        return null\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d10b55cd7d7d20b435706782fe2600b07bc25cf8","contentHash":"5c66cde109f6ee1dd8e9497c1fbf40f313754abc434c128ccbdedfa6cc4b833a"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\helper\\pairId.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\helper\\pairId.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":27}},"14":{"start":{"line":13,"column":17},"end":{"line":13,"column":34}},"15":{"start":{"line":14,"column":13},"end":{"line":14,"column":38}},"16":{"start":{"line":15,"column":16},"end":{"line":15,"column":50}},"17":{"start":{"line":18,"column":4},"end":{"line":70,"column":7}},"18":{"start":{"line":19,"column":8},"end":{"line":69,"column":9}},"19":{"start":{"line":20,"column":30},"end":{"line":20,"column":138}},"20":{"start":{"line":22,"column":12},"end":{"line":56,"column":13}},"21":{"start":{"line":24,"column":30},"end":{"line":24,"column":125}},"22":{"start":{"line":25,"column":25},"end":{"line":25,"column":65}},"23":{"start":{"line":26,"column":35},"end":{"line":26,"column":91}},"24":{"start":{"line":28,"column":16},"end":{"line":30,"column":17}},"25":{"start":{"line":29,"column":20},"end":{"line":29,"column":46}},"26":{"start":{"line":31,"column":16},"end":{"line":55,"column":17}},"27":{"start":{"line":32,"column":34},"end":{"line":32,"column":129}},"28":{"start":{"line":33,"column":29},"end":{"line":33,"column":69}},"29":{"start":{"line":34,"column":33},"end":{"line":34,"column":85}},"30":{"start":{"line":35,"column":33},"end":{"line":35,"column":85}},"31":{"start":{"line":36,"column":40},"end":{"line":36,"column":45}},"32":{"start":{"line":37,"column":20},"end":{"line":39,"column":21}},"33":{"start":{"line":38,"column":24},"end":{"line":38,"column":45}},"34":{"start":{"line":40,"column":31},"end":{"line":52,"column":21}},"35":{"start":{"line":53,"column":20},"end":{"line":53,"column":62}},"36":{"start":{"line":54,"column":20},"end":{"line":54,"column":106}},"37":{"start":{"line":58,"column":12},"end":{"line":63,"column":13}},"38":{"start":{"line":59,"column":16},"end":{"line":59,"column":96}},"39":{"start":{"line":62,"column":16},"end":{"line":62,"column":48}},"40":{"start":{"line":64,"column":12},"end":{"line":64,"column":24}},"41":{"start":{"line":67,"column":12},"end":{"line":67,"column":53}},"42":{"start":{"line":68,"column":12},"end":{"line":68,"column":24}},"43":{"start":{"line":72,"column":0},"end":{"line":72,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"getPairId","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":18}},"loc":{"start":{"line":16,"column":34},"end":{"line":71,"column":1}},"line":16},"8":{"name":"(anonymous_8)","decl":{"start":{"line":18,"column":43},"end":{"line":18,"column":44}},"loc":{"start":{"line":18,"column":56},"end":{"line":70,"column":5}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":22,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":22,"column":12},"end":{"line":56,"column":13}},{"start":{"line":22,"column":12},"end":{"line":56,"column":13}}],"line":22},"6":{"loc":{"start":{"line":28,"column":16},"end":{"line":30,"column":17}},"type":"if","locations":[{"start":{"line":28,"column":16},"end":{"line":30,"column":17}},{"start":{"line":28,"column":16},"end":{"line":30,"column":17}}],"line":28},"7":{"loc":{"start":{"line":31,"column":16},"end":{"line":55,"column":17}},"type":"if","locations":[{"start":{"line":31,"column":16},"end":{"line":55,"column":17}},{"start":{"line":31,"column":16},"end":{"line":55,"column":17}}],"line":31},"8":{"loc":{"start":{"line":37,"column":20},"end":{"line":39,"column":21}},"type":"if","locations":[{"start":{"line":37,"column":20},"end":{"line":39,"column":21}},{"start":{"line":37,"column":20},"end":{"line":39,"column":21}}],"line":37},"9":{"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":184}},"type":"binary-expr","locations":[{"start":{"line":37,"column":24},"end":{"line":37,"column":102}},{"start":{"line":37,"column":106},"end":{"line":37,"column":184}}],"line":37},"10":{"loc":{"start":{"line":37,"column":25},"end":{"line":37,"column":93}},"type":"cond-expr","locations":[{"start":{"line":37,"column":64},"end":{"line":37,"column":70}},{"start":{"line":37,"column":73},"end":{"line":37,"column":93}}],"line":37},"11":{"loc":{"start":{"line":37,"column":25},"end":{"line":37,"column":61}},"type":"binary-expr","locations":[{"start":{"line":37,"column":25},"end":{"line":37,"column":40}},{"start":{"line":37,"column":44},"end":{"line":37,"column":61}}],"line":37},"12":{"loc":{"start":{"line":37,"column":107},"end":{"line":37,"column":175}},"type":"cond-expr","locations":[{"start":{"line":37,"column":146},"end":{"line":37,"column":152}},{"start":{"line":37,"column":155},"end":{"line":37,"column":175}}],"line":37},"13":{"loc":{"start":{"line":37,"column":107},"end":{"line":37,"column":143}},"type":"binary-expr","locations":[{"start":{"line":37,"column":107},"end":{"line":37,"column":122}},{"start":{"line":37,"column":126},"end":{"line":37,"column":143}}],"line":37},"14":{"loc":{"start":{"line":43,"column":40},"end":{"line":43,"column":110}},"type":"cond-expr","locations":[{"start":{"line":43,"column":79},"end":{"line":43,"column":85}},{"start":{"line":43,"column":88},"end":{"line":43,"column":110}}],"line":43},"15":{"loc":{"start":{"line":43,"column":40},"end":{"line":43,"column":76}},"type":"binary-expr","locations":[{"start":{"line":43,"column":40},"end":{"line":43,"column":55}},{"start":{"line":43,"column":59},"end":{"line":43,"column":76}}],"line":43},"16":{"loc":{"start":{"line":49,"column":35},"end":{"line":49,"column":96}},"type":"cond-expr","locations":[{"start":{"line":49,"column":74},"end":{"line":49,"column":80}},{"start":{"line":49,"column":83},"end":{"line":49,"column":96}}],"line":49},"17":{"loc":{"start":{"line":49,"column":35},"end":{"line":49,"column":71}},"type":"binary-expr","locations":[{"start":{"line":49,"column":35},"end":{"line":49,"column":50}},{"start":{"line":49,"column":54},"end":{"line":49,"column":71}}],"line":49},"18":{"loc":{"start":{"line":49,"column":100},"end":{"line":49,"column":161}},"type":"cond-expr","locations":[{"start":{"line":49,"column":139},"end":{"line":49,"column":145}},{"start":{"line":49,"column":148},"end":{"line":49,"column":161}}],"line":49},"19":{"loc":{"start":{"line":49,"column":100},"end":{"line":49,"column":136}},"type":"binary-expr","locations":[{"start":{"line":49,"column":100},"end":{"line":49,"column":115}},{"start":{"line":49,"column":119},"end":{"line":49,"column":136}}],"line":49},"20":{"loc":{"start":{"line":58,"column":12},"end":{"line":63,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":63,"column":13}},{"start":{"line":58,"column":12},"end":{"line":63,"column":13}}],"line":58},"21":{"loc":{"start":{"line":59,"column":23},"end":{"line":59,"column":95}},"type":"cond-expr","locations":[{"start":{"line":59,"column":73},"end":{"line":59,"column":79}},{"start":{"line":59,"column":82},"end":{"line":59,"column":95}}],"line":59},"22":{"loc":{"start":{"line":59,"column":23},"end":{"line":59,"column":70}},"type":"binary-expr","locations":[{"start":{"line":59,"column":23},"end":{"line":59,"column":53}},{"start":{"line":59,"column":57},"end":{"line":59,"column":70}}],"line":59}},"s":{"0":1,"1":7,"2":7,"3":7,"4":7,"5":7,"6":0,"7":0,"8":0,"9":0,"10":14,"11":7,"12":1,"13":1,"14":1,"15":1,"16":1,"17":7,"18":7,"19":7,"20":7,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":7,"38":7,"39":0,"40":7,"41":0,"42":0,"43":1},"f":{"0":7,"1":7,"2":7,"3":7,"4":7,"5":0,"6":14,"7":7,"8":7},"b":{"0":[1,1,1],"1":[0,7],"2":[7,7],"3":[7,7],"4":[7,7],"5":[0,7],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[7,0],"21":[0,7],"22":[7,7]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/helper/pairId.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/helper/pairId.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { ethers } from \"ethers\";\r\nimport { Pair } from \"../../../DB/db\";\r\nimport { handleToken } from \"../../../handlers/token\";\r\nimport { ifPair } from \"../../../helper/interface\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function getPairId(data: any, chainId: any){\r\n    try{\r\n\r\n        let isPairExist: ifPair = await Pair.findOne({ token0: data.token0, token1: data.token1, chainId: chainId, active: true }).lean();\r\n        let createPair: ifPair | any;\r\n\r\n        if (!isPairExist) {\r\n            // cheking for opposite pair\r\n            let encoder = new ethers.utils.AbiCoder().encode([\"address\", \"address\"], [data.token1, data.token0]);\r\n            let id = ethers.utils.keccak256(encoder);\r\n\r\n            let isPairExist1: ifPair = await Pair.findOne({ id: id, active: true }).lean();;\r\n\r\n            if (isPairExist1) {\r\n                createPair = isPairExist1;\r\n            }\r\n\r\n            if (!isPairExist1) {\r\n                let encoder = new ethers.utils.AbiCoder().encode([\"address\", \"address\"], [data.token0, data.token1]);\r\n                let id = ethers.utils.keccak256(encoder);\r\n\r\n                let token0 = await handleToken(data.token0, chainId);\r\n                let token1 = await handleToken(data.token1, chainId);\r\n                let marginEnabled = false;\r\n                if (token0?.marginEnabled == true && token1?.marginEnabled == true) {\r\n                    marginEnabled = true\r\n                }\r\n                let temp = {\r\n                    id: id,\r\n                    exchangeRateDecimals: data.exchangeRateDecimals,\r\n                    minToken0Order: token0?.minToken0Amount,\r\n                    exchangeRate: '0',\r\n                    priceDiff: '0',\r\n                    token0: data.token0,\r\n                    token1: data.token1,\r\n                    chainId: chainId,\r\n                    symbol: `${token0?.symbol}_${token1?.symbol}`,\r\n                    marginEnabled: marginEnabled,\r\n                    active: true\r\n                }\r\n                createPair = await Pair.create(temp);\r\n\r\n                console.log(\"Pair Created \", \"T0 \", data.token0, \"T1 \", data.token1, \"CId \", chainId);\r\n\r\n            }\r\n\r\n        }\r\n        let pair: string;\r\n        if (isPairExist) {\r\n            pair = isPairExist.id?.toString();\r\n        }\r\n        else {\r\n            pair = createPair.id.toString();\r\n        }\r\n        return pair\r\n    }\r\n    catch(error){\r\n        console.log(`error at getPairId`, error);\r\n        return null\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4bc17555c4bbe9465cffa092355199a93fa3433a","contentHash":"909d1b3c3c55b3c89b74ec89dc99ae21ee4503cb26efccc588a9c159d2fe973a"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\token.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\token.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":29}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":32}},"39":{"start":{"line":37,"column":16},"end":{"line":37,"column":41}},"40":{"start":{"line":38,"column":17},"end":{"line":38,"column":34}},"41":{"start":{"line":39,"column":15},"end":{"line":39,"column":52}},"42":{"start":{"line":41,"column":4},"end":{"line":73,"column":7}},"43":{"start":{"line":42,"column":8},"end":{"line":72,"column":9}},"44":{"start":{"line":43,"column":33},"end":{"line":43,"column":86}},"45":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"46":{"start":{"line":45,"column":16},"end":{"line":45,"column":144}},"47":{"start":{"line":47,"column":27},"end":{"line":47,"column":60}},"48":{"start":{"line":48,"column":34},"end":{"line":48,"column":113}},"49":{"start":{"line":49,"column":23},"end":{"line":49,"column":48}},"50":{"start":{"line":50,"column":25},"end":{"line":50,"column":52}},"51":{"start":{"line":51,"column":27},"end":{"line":51,"column":56}},"52":{"start":{"line":52,"column":26},"end":{"line":52,"column":69}},"53":{"start":{"line":53,"column":12},"end":{"line":53,"column":30}},"54":{"start":{"line":54,"column":12},"end":{"line":54,"column":32}},"55":{"start":{"line":55,"column":12},"end":{"line":55,"column":34}},"56":{"start":{"line":56,"column":23},"end":{"line":64,"column":13}},"57":{"start":{"line":65,"column":12},"end":{"line":65,"column":36}},"58":{"start":{"line":66,"column":12},"end":{"line":66,"column":63}},"59":{"start":{"line":67,"column":12},"end":{"line":67,"column":92}},"60":{"start":{"line":70,"column":12},"end":{"line":70,"column":43}},"61":{"start":{"line":71,"column":12},"end":{"line":71,"column":54}},"62":{"start":{"line":75,"column":0},"end":{"line":75,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"handleToken","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":20}},"loc":{"start":{"line":40,"column":37},"end":{"line":74,"column":1}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":73,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},{"start":{"line":44,"column":12},"end":{"line":46,"column":13}}],"line":44}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/token.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/token.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iCAAiC;AACjC,0CAAqD;AACrD,mCAAgC;AAChC,qDAAuC;AAIvC,SAAe,WAAW,CAAC,KAAa,EAAE,OAAe;;QACrD,IAAI;YACA,MAAM,YAAY,GAAG,MAAM,UAAK,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;YAEtE,IAAI,YAAY,EAAE;gBACd,OAAO,EAAE,MAAM,EAAE,YAAY,CAAC,MAAM,EAAE,aAAa,EAAE,YAAY,CAAC,aAAa,EAAE,eAAe,EAAE,YAAY,CAAC,cAAc,EAAE,CAAC;aACnI;YAED,IAAI,QAAQ,GAAG,IAAA,mBAAW,EAAC,OAAO,CAAC,CAAC;YACpC,IAAI,eAAe,GAAG,IAAI,eAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAA,cAAM,EAAC,WAAW,CAAC,EAAE,QAAQ,CAAC,CAAC;YAEhF,IAAI,IAAI,GAAG,eAAe,CAAC,MAAM,CAAC,EAAE,CAAC;YACrC,IAAI,MAAM,GAAG,eAAe,CAAC,QAAQ,CAAC,EAAE,CAAC;YACzC,IAAI,QAAQ,GAAG,eAAe,CAAC,UAAU,CAAC,EAAE,CAAC;YAC7C,IAAI,OAAO,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC;YAC1D,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAClB,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YACpB,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;YAEtB,IAAI,IAAI,GAAG;gBACP,EAAE,EAAE,KAAK;gBACT,IAAI,EAAE,IAAI;gBACV,MAAM,EAAE,MAAM;gBACd,QAAQ,EAAE,QAAQ;gBAClB,KAAK,EAAE,GAAG;gBACV,OAAO,EAAE,OAAO;gBAChB,MAAM,EAAE,IAAI;aACf,CAAC;YAEF,UAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAEnB,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;YACnD,OAAQ,EAAE,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,KAAK,EAAE,eAAe,EAAE,aAAa,EAAE,CAAA;SACnF;QACD,OAAO,KAAK,EAAE;YACV,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,KAAK,CAAC,CAAC;SAC7C;IACL,CAAC;CAAA;AAEQ,kCAAW","sourcesContent":["import { Token } from \"../DB/db\";\r\nimport { getABI, getProvider } from \"../utils/utils\";\r\nimport { ethers } from \"ethers\";\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\nasync function handleToken(token: string, chainId: string) {\r\n    try {\r\n        const isTokenExist = await Token.findOne({ id: token, active: true });\r\n\r\n        if (isTokenExist) {\r\n            return { symbol: isTokenExist.symbol, marginEnabled: isTokenExist.marginEnabled, minToken0Amount: isTokenExist.minTokenAmount };\r\n        }\r\n\r\n        let provider = getProvider(chainId);\r\n        let getTokenDetails = new ethers.Contract(token, getABI(\"TestERC20\"), provider);\r\n\r\n        let name = getTokenDetails[\"name\"]();\r\n        let symbol = getTokenDetails[\"symbol\"]();\r\n        let decimals = getTokenDetails[\"decimals\"]();\r\n        let promise = await Promise.all([name, symbol, decimals]);\r\n        name = promise[0];\r\n        symbol = promise[1];\r\n        decimals = promise[2];\r\n\r\n        let temp = {\r\n            id: token,\r\n            name: name,\r\n            symbol: symbol,\r\n            decimals: decimals,\r\n            price: \"0\",\r\n            chainId: chainId,\r\n            active: true\r\n        };\r\n\r\n        Token.create(temp);\r\n\r\n        console.log(\"Token Added\", token, chainId, symbol);\r\n        return  { symbol: symbol, marginEnabled: false, minToken0Amount: \"10000000000\" }\r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ handleToken\", error);\r\n    }\r\n}\r\n\r\nexport { handleToken };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a49dceaa6fc86e9564e67e530fd80042474357e7","contentHash":"cd64b21193c4512fdf120e9f1b2e82202ac0eabcc3e7606018b5b8261ee98d3e"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\helper\\validationUserPosition.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\order\\helper\\validationUserPosition.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":43}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":51}},"17":{"start":{"line":17,"column":13},"end":{"line":17,"column":38}},"18":{"start":{"line":18,"column":23},"end":{"line":18,"column":62}},"19":{"start":{"line":19,"column":19},"end":{"line":19,"column":56}},"20":{"start":{"line":21,"column":4},"end":{"line":87,"column":7}},"21":{"start":{"line":22,"column":8},"end":{"line":86,"column":9}},"22":{"start":{"line":25,"column":35},"end":{"line":25,"column":36}},"23":{"start":{"line":26,"column":28},"end":{"line":26,"column":29}},"24":{"start":{"line":28,"column":25},"end":{"line":28,"column":36}},"25":{"start":{"line":29,"column":12},"end":{"line":51,"column":13}},"26":{"start":{"line":30,"column":16},"end":{"line":30,"column":124}},"27":{"start":{"line":31,"column":16},"end":{"line":37,"column":17}},"28":{"start":{"line":32,"column":20},"end":{"line":32,"column":102}},"29":{"start":{"line":33,"column":20},"end":{"line":36,"column":21}},"30":{"start":{"line":34,"column":24},"end":{"line":34,"column":60}},"31":{"start":{"line":35,"column":24},"end":{"line":35,"column":53}},"32":{"start":{"line":38,"column":16},"end":{"line":38,"column":36}},"33":{"start":{"line":40,"column":17},"end":{"line":51,"column":13}},"34":{"start":{"line":41,"column":16},"end":{"line":41,"column":124}},"35":{"start":{"line":42,"column":16},"end":{"line":48,"column":17}},"36":{"start":{"line":43,"column":20},"end":{"line":43,"column":102}},"37":{"start":{"line":44,"column":20},"end":{"line":47,"column":21}},"38":{"start":{"line":45,"column":24},"end":{"line":45,"column":60}},"39":{"start":{"line":46,"column":24},"end":{"line":46,"column":53}},"40":{"start":{"line":49,"column":16},"end":{"line":49,"column":36}},"41":{"start":{"line":50,"column":16},"end":{"line":50,"column":124}},"42":{"start":{"line":52,"column":12},"end":{"line":80,"column":13}},"43":{"start":{"line":53,"column":26},"end":{"line":53,"column":57}},"44":{"start":{"line":54,"column":44},"end":{"line":54,"column":122}},"45":{"start":{"line":55,"column":16},"end":{"line":58,"column":17}},"46":{"start":{"line":56,"column":20},"end":{"line":56,"column":83}},"47":{"start":{"line":57,"column":20},"end":{"line":57,"column":108}},"48":{"start":{"line":59,"column":16},"end":{"line":62,"column":17}},"49":{"start":{"line":60,"column":20},"end":{"line":60,"column":81}},"50":{"start":{"line":61,"column":20},"end":{"line":61,"column":106}},"51":{"start":{"line":63,"column":16},"end":{"line":63,"column":116}},"52":{"start":{"line":66,"column":16},"end":{"line":69,"column":17}},"53":{"start":{"line":67,"column":20},"end":{"line":67,"column":83}},"54":{"start":{"line":68,"column":20},"end":{"line":68,"column":108}},"55":{"start":{"line":70,"column":16},"end":{"line":73,"column":17}},"56":{"start":{"line":71,"column":20},"end":{"line":71,"column":81}},"57":{"start":{"line":72,"column":20},"end":{"line":72,"column":106}},"58":{"start":{"line":74,"column":16},"end":{"line":79,"column":19}},"59":{"start":{"line":81,"column":12},"end":{"line":81,"column":36}},"60":{"start":{"line":84,"column":12},"end":{"line":84,"column":61}},"61":{"start":{"line":85,"column":12},"end":{"line":85,"column":97}},"62":{"start":{"line":89,"column":0},"end":{"line":89,"column":62}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"validationAndUserPosition","decl":{"start":{"line":20,"column":9},"end":{"line":20,"column":34}},"loc":{"start":{"line":20,"column":56},"end":{"line":88,"column":1}},"line":20},"9":{"name":"(anonymous_9)","decl":{"start":{"line":21,"column":43},"end":{"line":21,"column":44}},"loc":{"start":{"line":21,"column":56},"end":{"line":87,"column":5}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":29,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":51,"column":13}},{"start":{"line":29,"column":12},"end":{"line":51,"column":13}}],"line":29},"9":{"loc":{"start":{"line":31,"column":16},"end":{"line":37,"column":17}},"type":"if","locations":[{"start":{"line":31,"column":16},"end":{"line":37,"column":17}},{"start":{"line":31,"column":16},"end":{"line":37,"column":17}}],"line":31},"10":{"loc":{"start":{"line":33,"column":20},"end":{"line":36,"column":21}},"type":"if","locations":[{"start":{"line":33,"column":20},"end":{"line":36,"column":21}},{"start":{"line":33,"column":20},"end":{"line":36,"column":21}}],"line":33},"11":{"loc":{"start":{"line":40,"column":17},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":40,"column":17},"end":{"line":51,"column":13}},{"start":{"line":40,"column":17},"end":{"line":51,"column":13}}],"line":40},"12":{"loc":{"start":{"line":42,"column":16},"end":{"line":48,"column":17}},"type":"if","locations":[{"start":{"line":42,"column":16},"end":{"line":48,"column":17}},{"start":{"line":42,"column":16},"end":{"line":48,"column":17}}],"line":42},"13":{"loc":{"start":{"line":44,"column":20},"end":{"line":47,"column":21}},"type":"if","locations":[{"start":{"line":44,"column":20},"end":{"line":47,"column":21}},{"start":{"line":44,"column":20},"end":{"line":47,"column":21}}],"line":44},"14":{"loc":{"start":{"line":52,"column":12},"end":{"line":80,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":80,"column":13}},{"start":{"line":52,"column":12},"end":{"line":80,"column":13}}],"line":52},"15":{"loc":{"start":{"line":55,"column":16},"end":{"line":58,"column":17}},"type":"if","locations":[{"start":{"line":55,"column":16},"end":{"line":58,"column":17}},{"start":{"line":55,"column":16},"end":{"line":58,"column":17}}],"line":55},"16":{"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":78}},"type":"binary-expr","locations":[{"start":{"line":55,"column":20},"end":{"line":55,"column":25}},{"start":{"line":55,"column":29},"end":{"line":55,"column":78}}],"line":55},"17":{"loc":{"start":{"line":59,"column":16},"end":{"line":62,"column":17}},"type":"if","locations":[{"start":{"line":59,"column":16},"end":{"line":62,"column":17}},{"start":{"line":59,"column":16},"end":{"line":62,"column":17}}],"line":59},"18":{"loc":{"start":{"line":59,"column":20},"end":{"line":59,"column":85}},"type":"binary-expr","locations":[{"start":{"line":59,"column":20},"end":{"line":59,"column":25}},{"start":{"line":59,"column":29},"end":{"line":59,"column":85}}],"line":59},"19":{"loc":{"start":{"line":66,"column":16},"end":{"line":69,"column":17}},"type":"if","locations":[{"start":{"line":66,"column":16},"end":{"line":69,"column":17}},{"start":{"line":66,"column":16},"end":{"line":69,"column":17}}],"line":66},"20":{"loc":{"start":{"line":66,"column":20},"end":{"line":66,"column":63}},"type":"binary-expr","locations":[{"start":{"line":66,"column":20},"end":{"line":66,"column":25}},{"start":{"line":66,"column":29},"end":{"line":66,"column":63}}],"line":66},"21":{"loc":{"start":{"line":70,"column":16},"end":{"line":73,"column":17}},"type":"if","locations":[{"start":{"line":70,"column":16},"end":{"line":73,"column":17}},{"start":{"line":70,"column":16},"end":{"line":73,"column":17}}],"line":70},"22":{"loc":{"start":{"line":70,"column":20},"end":{"line":70,"column":70}},"type":"binary-expr","locations":[{"start":{"line":70,"column":20},"end":{"line":70,"column":25}},{"start":{"line":70,"column":29},"end":{"line":70,"column":70}}],"line":70}},"s":{"0":1,"1":11,"2":10,"3":5,"4":11,"5":11,"6":0,"7":0,"8":0,"9":0,"10":16,"11":5,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":5,"21":5,"22":5,"23":5,"24":5,"25":5,"26":5,"27":5,"28":1,"29":1,"30":1,"31":1,"32":5,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":5,"43":5,"44":5,"45":5,"46":0,"47":0,"48":5,"49":0,"50":0,"51":5,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":5,"60":0,"61":0,"62":1},"f":{"0":5,"1":11,"2":10,"3":5,"4":11,"5":0,"6":16,"7":1,"8":5,"9":5},"b":{"0":[1,1,1],"1":[1,10],"2":[5,5],"3":[5,11],"4":[5,5],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[5,0],"9":[1,4],"10":[1,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[5,0],"15":[0,5],"16":[5,1],"17":[0,5],"18":[5,1],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/helper/validationUserPosition.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/order/helper/validationUserPosition.ts"],"names":[],"mappings":"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","sourcesContent":["import Big from \"big.js\";\r\nimport { User } from \"../../../DB/db\";\r\nimport { errorMessage } from \"../../../helper/errorMessage\";\r\nimport { multicall } from \"../../../muticall/muticall\";\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function validationAndUserPosition(data: any, chainId: string, ipfs: boolean | undefined) {\r\n    try {\r\n\r\n        let findUserPosition;\r\n        let multicallData: number[] | null;\r\n        let userTokenBalance = 0;\r\n        let allowance = 0;\r\n        let token;\r\n        let amount = data.amount;\r\n        if (data.orderType == 1) {\r\n             findUserPosition = await User.findOne({ id: data.maker, token: data.token0, chainId: chainId }).lean();\r\n            if (!ipfs) {\r\n                multicallData = await multicall(data.token0, data.maker, chainId)\r\n                if (multicallData) {\r\n                    userTokenBalance = multicallData[0];\r\n                    allowance = multicallData[1];\r\n                }\r\n            }\r\n            token = data.token0\r\n        }\r\n        else if (data.orderType == 0) {\r\n            findUserPosition = await User.findOne({ id: data.maker, token: data.token1, chainId: chainId }).lean();\r\n            if (!ipfs) {\r\n                multicallData = await multicall(data.token1, data.maker, chainId)\r\n                if (multicallData) {\r\n                    userTokenBalance = multicallData[0];\r\n                    allowance = multicallData[1];\r\n                }\r\n            }\r\n            token = data.token1\r\n            amount = Big(data.amount).times(data.exchangeRate).div(Big(10).pow(18));\r\n        }\r\n\r\n        if (findUserPosition) {\r\n\r\n            let _id = findUserPosition._id.toString();\r\n\r\n            let currentInOrderBalance = Big(findUserPosition.inOrderBalance).plus(amount).toString();\r\n\r\n            if (!ipfs && Number(allowance) < Number(currentInOrderBalance)) {\r\n                console.log(`${errorMessage.allowance, token}`);\r\n                return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n            }\r\n\r\n            if (!ipfs && Number(userTokenBalance) < Number(currentInOrderBalance)) {\r\n                console.log(`${errorMessage.balance, token}`);\r\n                return { status: false, error: errorMessage.balance, statusCode: 400 };\r\n            }\r\n\r\n            await User.findOneAndUpdate(\r\n                { _id: _id },\r\n                { $set: { inOrderBalance: currentInOrderBalance } }\r\n            );\r\n        } else {\r\n\r\n            if (!ipfs && Number(allowance) < Number(amount)) {\r\n                console.log(`${errorMessage.allowance, token}`);\r\n                return { status: false, error: errorMessage.allowance, statusCode: 400 };\r\n            }\r\n\r\n            if (!ipfs && Number(userTokenBalance) < Number(amount)) {\r\n                console.log(`${errorMessage.balance, token}`);\r\n                return { status: false, error: errorMessage.balance, statusCode: 400 };\r\n            }\r\n\r\n            User.create(\r\n                {\r\n                    token: token,\r\n                    chainId: chainId,\r\n                    inOrderBalance: amount.toString(),\r\n                    id: data.maker\r\n                }\r\n            );\r\n\r\n        }\r\n\r\n        return { status: true}\r\n\r\n\r\n    }\r\n    catch (error) {\r\n        console.log(`error @ validationAndUserPosition`)\r\n        return {status: false, error: errorMessage.server, statusCode: 500}\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"800a2a993b445add5c65f6f9a8bb98e18f7c81bb","contentHash":"aa25c909a3c983e2b4e037df3079f990a208bac5dffed55d17fb7d96e9e91a6c"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\muticall.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\muticall.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":27}},"38":{"start":{"line":36,"column":17},"end":{"line":36,"column":34}},"39":{"start":{"line":37,"column":16},"end":{"line":37,"column":41}},"40":{"start":{"line":38,"column":16},"end":{"line":38,"column":42}},"41":{"start":{"line":39,"column":15},"end":{"line":39,"column":52}},"42":{"start":{"line":48,"column":4},"end":{"line":66,"column":7}},"43":{"start":{"line":49,"column":8},"end":{"line":65,"column":9}},"44":{"start":{"line":50,"column":30},"end":{"line":50,"column":171}},"45":{"start":{"line":51,"column":24},"end":{"line":51,"column":83}},"46":{"start":{"line":52,"column":26},"end":{"line":52,"column":178}},"47":{"start":{"line":53,"column":23},"end":{"line":53,"column":66}},"48":{"start":{"line":54,"column":25},"end":{"line":54,"column":27}},"49":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"50":{"start":{"line":56,"column":16},"end":{"line":56,"column":84}},"51":{"start":{"line":59,"column":12},"end":{"line":59,"column":26}},"52":{"start":{"line":62,"column":12},"end":{"line":62,"column":43}},"53":{"start":{"line":63,"column":12},"end":{"line":63,"column":52}},"54":{"start":{"line":64,"column":12},"end":{"line":64,"column":24}},"55":{"start":{"line":68,"column":0},"end":{"line":68,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"multicall","decl":{"start":{"line":47,"column":9},"end":{"line":47,"column":18}},"loc":{"start":{"line":47,"column":42},"end":{"line":67,"column":1}},"line":47},"14":{"name":"(anonymous_14)","decl":{"start":{"line":48,"column":43},"end":{"line":48,"column":44}},"loc":{"start":{"line":48,"column":56},"end":{"line":66,"column":5}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":0,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":2,"51":1,"52":0,"53":0,"54":0,"55":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":0,"9":1,"10":1,"11":0,"12":2,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[1,0],"18":[1,1],"19":[1,1],"20":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/muticall.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/muticall.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,mCAA2C;AAC3C,0CAAoE;AACpE,2CAA0E;AAC1E,qDAAuC;AAOvC;;;;;;GAMG;AAEH,SAAsB,SAAS,CAAC,KAAa,EAAE,KAAa,EAAE,OAAe;;QACzE,IAAI;YAEA,MAAM,SAAS,GAAG,IAAI,eAAM,CAAC,QAAQ,CACjC,IAAA,2BAAmB,EAAC,OAAO,CAAC,EAC5B,IAAA,cAAM,EAAC,YAAY,CAAC,EACpB,IAAA,mBAAW,EAAC,OAAO,CAAC,CACvB,CAAC;YACF,MAAM,GAAG,GAA2B,IAAA,oBAAY,EAAC,IAAA,cAAM,EAAC,WAAW,CAAC,CAAC,CAAC;YACtE,MAAM,KAAK,GAAe,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,GAAG,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,KAAK,EAAE,IAAA,0BAAkB,EAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YACrK,IAAI,IAAI,GAAG,MAAM,SAAS,CAAC,UAAU,CAAC,SAAS,CAC3C,KAAK,CACR,CAAC;YAEF,IAAI,MAAM,GAAa,EAAE,CAAC;YAE1B,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE;gBACnB,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;aAC7D;YACD,uBAAuB;YACvB,OAAO,MAAM,CAAA;SAChB;QACD,OAAO,KAAK,EAAE;YACV,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAA;YACvC,OAAO,IAAI,CAAA;SACd;IACL,CAAC;CAAA;AA3BD,8BA2BC","sourcesContent":["\r\n\r\nimport { BigNumber, ethers } from \"ethers\";\r\nimport {  getProvider, getInterface, getABI } from \"../utils/utils\";\r\nimport { getExchangeAddress, getMulticallAddress } from \"../helper/chain\";\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @dev this function is use to get onchain data for create order api, i.e balance and allowance\r\n * @param {*} token (string) address of token \r\n * @param {*} maker (string) address of maker\r\n * @param {*} chainId (string) numeric chainId\r\n * @returns ([number])) [balance, allowance]\r\n */\r\n\r\nexport async function multicall(token: string, maker: string, chainId: string): Promise<number[] | null> {\r\n    try {\r\n       \r\n        const multicall = new ethers.Contract(\r\n            getMulticallAddress(chainId),\r\n            getABI(\"Multicall2\"),\r\n            getProvider(chainId)\r\n        );\r\n        const itf: ethers.utils.Interface = getInterface(getABI(\"TestERC20\"));\r\n        const input: string[][] = [[token, itf.encodeFunctionData(\"balanceOf\", [maker])], [token, itf.encodeFunctionData(\"allowance\", [maker, getExchangeAddress(chainId)])]]\r\n        let resp = await multicall.callStatic.aggregate(\r\n            input\r\n        );\r\n\r\n        let outPut: number[] = [];\r\n       \r\n        for (let i in resp[1]) {\r\n            outPut.push(Number(BigNumber.from(resp[1][i]).toString()))\r\n        }\r\n        // console.log(outPut);\r\n        return outPut\r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(`Error @ Multicall`, error)\r\n        return null\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7d02aa40a36edcec2cfb8e19ab124a53ade7bb46","contentHash":"8d64f1254a3b68ed95f7f8234d392aa26978fecd8f808acaf80e6d3f7568f980"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\validateSignature.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\validateSignature.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":4,"column":17},"end":{"line":4,"column":34}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":42}},"4":{"start":{"line":6,"column":19},"end":{"line":6,"column":48}},"5":{"start":{"line":17,"column":4},"end":{"line":50,"column":5}},"6":{"start":{"line":18,"column":8},"end":{"line":18,"column":35}},"7":{"start":{"line":19,"column":23},"end":{"line":24,"column":9}},"8":{"start":{"line":26,"column":22},"end":{"line":38,"column":9}},"9":{"start":{"line":39,"column":23},"end":{"line":39,"column":103}},"10":{"start":{"line":40,"column":33},"end":{"line":40,"column":102}},"11":{"start":{"line":42,"column":8},"end":{"line":44,"column":9}},"12":{"start":{"line":43,"column":12},"end":{"line":43,"column":26}},"13":{"start":{"line":45,"column":8},"end":{"line":45,"column":20}},"14":{"start":{"line":48,"column":8},"end":{"line":48,"column":64}},"15":{"start":{"line":49,"column":8},"end":{"line":49,"column":20}},"16":{"start":{"line":52,"column":0},"end":{"line":52,"column":46}}},"fnMap":{"0":{"name":"validateSignature","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":26}},"loc":{"start":{"line":16,"column":61},"end":{"line":51,"column":1}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":42,"column":8},"end":{"line":44,"column":9}},"type":"if","locations":[{"start":{"line":42,"column":8},"end":{"line":44,"column":9}},{"start":{"line":42,"column":8},"end":{"line":44,"column":9}}],"line":42}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":7,"6":7,"7":7,"8":7,"9":7,"10":7,"11":7,"12":7,"13":0,"14":0,"15":0,"16":1},"f":{"0":7},"b":{"0":[7,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/validateSignature.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/validateSignature.ts"],"names":[],"mappings":";;;AAEA,mCAAgC;AAChC,2CAAiE;AACjE,iDAA+C;AAK/C;;;;;;;;GAQG;AACH,SAAgB,iBAAiB,CAAC,KAAa,EAAE,SAAiB,EAAE,KAAa,EAAE,OAAe;IAC9F,IAAI;QACA,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAA;QAC1B,MAAM,MAAM,GAAG;YACX,IAAI,EAAE,IAAA,oBAAS,EAAC,MAAM,CAAC;YACvB,OAAO,EAAE,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC;YAC1C,OAAO,EAAE,OAAO;YAChB,iBAAiB,EAAE,IAAA,0BAAkB,EAAC,OAAO,CAAC;SACjD,CAAC;QAEF,yCAAyC;QACzC,MAAM,KAAK,GAAG;YACV,KAAK,EAAE;gBACH,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE;gBAClC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE;gBACnC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE;gBACnC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,SAAS,EAAE;gBACnC,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,OAAO,EAAE;gBACpC,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE;gBAChC,EAAE,IAAI,EAAE,cAAc,EAAE,IAAI,EAAE,SAAS,EAAE;gBACzC,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,QAAQ,EAAE;gBACvC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE;aACnC;SACJ,CAAC;QAEF,MAAM,MAAM,GAAW,eAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC;QAE/F,MAAM,gBAAgB,GAAW,eAAM,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC;QAC9F,uCAAuC;QACvC,IAAI,KAAK,IAAI,gBAAgB,EAAE;YAC3B,OAAO,MAAM,CAAC;SACjB;QAED,OAAO,IAAI,CAAC;KAEf;IACD,OAAO,KAAU,EAAE;QACf,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;QACxD,OAAO,IAAI,CAAA;KACd;AACL,CAAC;AAxCD,8CAwCC","sourcesContent":["\r\n\r\nimport { ethers } from \"ethers\";\r\nimport { getExchangeAddress, getVersion } from \"../helper/chain\";\r\nimport { getConfig } from \"../helper/constant\";\r\n\r\n\r\n\r\n\r\n/**\r\n * @dev This function would validate order signatures\r\n * @notice verify signature\r\n * @param {*} maker (string) should be order creator's address \r\n * @param {*} signature (string)\r\n * @param {*} value (object)\r\n * @param {*} chainId (string) numeric chainId\r\n * @returns digest will be id of order, or false\r\n */\r\nexport function validateSignature(maker: string, signature: string, value: object, chainId: string): (string | null) {\r\n    try {\r\n        require(\"dotenv\").config()\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getVersion(process.env.NODE_ENV!),\r\n            chainId: chainId,\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Order: [\r\n                { name: 'maker', type: 'address' },\r\n                { name: 'token0', type: 'address' },\r\n                { name: 'token1', type: 'address' },\r\n                { name: 'amount', type: 'uint256' },\r\n                { name: 'orderType', type: 'uint8' },\r\n                { name: 'salt', type: 'uint32' },\r\n                { name: 'exchangeRate', type: 'uint176' },\r\n                { name: 'borrowLimit', type: 'uint32' },\r\n                { name: 'loops', type: 'uint8' }\r\n            ]\r\n        };\r\n\r\n        const digest: string = ethers.utils._TypedDataEncoder.hash(domain, types, value).toLowerCase();\r\n\r\n        const signatureAddress: string = ethers.utils.recoverAddress(digest, signature).toLowerCase();\r\n        // console.log(maker, signatureAddress)\r\n        if (maker == signatureAddress) {\r\n            return digest;\r\n        }\r\n\r\n        return null;\r\n\r\n    }\r\n    catch (error: any) {\r\n        console.log(\"Error @ validateSignature\", error.message);\r\n        return null\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d0a7b031487f222ca6581f0ec6358cbc98d33651","contentHash":"dc01d0df62970c902acd06c4dbd29770a58938e556fe11b5e015c42e52c488c3"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\pairRoutes.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\pairRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":25},"end":{"line":7,"column":70}},"5":{"start":{"line":8,"column":24},"end":{"line":8,"column":68}},"6":{"start":{"line":9,"column":22},"end":{"line":9,"column":64}},"7":{"start":{"line":10,"column":18},"end":{"line":10,"column":56}},"8":{"start":{"line":11,"column":35},"end":{"line":11,"column":90}},"9":{"start":{"line":12,"column":28},"end":{"line":12,"column":76}},"10":{"start":{"line":13,"column":23},"end":{"line":13,"column":66}},"11":{"start":{"line":14,"column":15},"end":{"line":14,"column":41}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":60}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":94}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":80}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":57}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":46}},"17":{"start":{"line":20,"column":0},"end":{"line":20,"column":60}},"18":{"start":{"line":21,"column":0},"end":{"line":21,"column":63}},"19":{"start":{"line":22,"column":0},"end":{"line":22,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/pairRoutes.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/pairRoutes.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,uEAAuE;AACvE,qEAAyE;AACzE,iEAA8D;AAC9D,yDAAyD;AACzD,2FAA2F;AAC3F,6EAA6E;AAC7E,mEAAuE;AACvE,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAKhC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,kCAAiB,CAAC,CAAC,CAAA,IAAI;AAC/C,MAAM,CAAC,GAAG,CAAC,yBAAyB,EAAE,sDAA2B,CAAC,CAAC,CAAA,IAAI;AACvE,MAAM,CAAC,GAAG,CAAC,yBAAyB,EAAE,wCAAoB,CAAC,CAAC,CAAA,KAAK;AACjE,MAAM,CAAC,GAAG,CAAC,iBAAiB,EAAE,yBAAW,CAAC,CAAC,CAAC,IAAI;AAChD,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,oBAAU,CAAC,CAAC;AACpC,MAAM,CAAC,GAAG,CAAC,WAAW,EAAE,kCAAmB,CAAC,CAAA;AAC5C,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,oCAAoB,CAAC,CAAA;AAE9C,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport { getAllPairDetails } from \"../controllers/pair/allPairDetails\";\r\nimport { handleBlackListToken } from \"../controllers/pair/blackListPair\";\r\nimport { fetchOrders } from \"../controllers/pair/fetchOrders\";\r\nimport { getNewPair } from \"../controllers/pair/newPair\";\r\nimport { getPairOrderExecutedHistory } from \"../controllers/pair/pairOrderExecutedHistory\";\r\nimport { getPairTradingStatus } from \"../controllers/pair/pairTradingStatus\";\r\nimport { getPairTrandingPair } from \"../controllers/pair/trandingPair\";\r\nconst router = express.Router();\r\n\r\n\r\n\r\n\r\nrouter.get(\"/allpairs\", getAllPairDetails);//ok\r\nrouter.get(\"/orders/history/:pairId\", getPairOrderExecutedHistory);//ok\r\nrouter.get(\"/trading/status/:pairId\", getPairTradingStatus);//ok \r\nrouter.get(\"/orders/:pairId\", fetchOrders); //ok\r\nrouter.get(\"/newpairs\", getNewPair);\r\nrouter.get(\"/tranding\", getPairTrandingPair)\r\nrouter.put(\"/blacklist\", handleBlackListToken)\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"539293091e59b90a0e721cbfbef19492dda49706","contentHash":"d788b68f6a3653a5361aa55afdf1abbae913f0689c36539023d662fdc5512a1a"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\allPairDetails.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\allPairDetails.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":35}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":35}},"39":{"start":{"line":37,"column":23},"end":{"line":37,"column":59}},"40":{"start":{"line":38,"column":15},"end":{"line":38,"column":52}},"41":{"start":{"line":40,"column":4},"end":{"line":76,"column":7}},"42":{"start":{"line":41,"column":8},"end":{"line":75,"column":9}},"43":{"start":{"line":42,"column":26},"end":{"line":42,"column":43}},"44":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"45":{"start":{"line":44,"column":16},"end":{"line":44,"column":107}},"46":{"start":{"line":46,"column":27},"end":{"line":46,"column":90}},"47":{"start":{"line":47,"column":23},"end":{"line":47,"column":25}},"48":{"start":{"line":48,"column":32},"end":{"line":48,"column":34}},"49":{"start":{"line":49,"column":12},"end":{"line":53,"column":13}},"50":{"start":{"line":50,"column":29},"end":{"line":50,"column":155}},"51":{"start":{"line":51,"column":29},"end":{"line":51,"column":155}},"52":{"start":{"line":52,"column":16},"end":{"line":52,"column":51}},"53":{"start":{"line":54,"column":12},"end":{"line":54,"column":61}},"54":{"start":{"line":55,"column":12},"end":{"line":68,"column":13}},"55":{"start":{"line":55,"column":25},"end":{"line":55,"column":26}},"56":{"start":{"line":56,"column":29},"end":{"line":56,"column":49}},"57":{"start":{"line":57,"column":29},"end":{"line":57,"column":53}},"58":{"start":{"line":58,"column":27},"end":{"line":66,"column":17}},"59":{"start":{"line":67,"column":16},"end":{"line":67,"column":32}},"60":{"start":{"line":69,"column":12},"end":{"line":69,"column":63}},"61":{"start":{"line":72,"column":12},"end":{"line":72,"column":60}},"62":{"start":{"line":73,"column":12},"end":{"line":73,"column":43}},"63":{"start":{"line":74,"column":12},"end":{"line":74,"column":74}},"64":{"start":{"line":78,"column":0},"end":{"line":78,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getAllPairDetails","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":26}},"loc":{"start":{"line":39,"column":37},"end":{"line":77,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":40,"column":43},"end":{"line":40,"column":44}},"loc":{"start":{"line":40,"column":56},"end":{"line":76,"column":5}},"line":40}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},{"start":{"line":43,"column":12},"end":{"line":45,"column":13}}],"line":43}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":8,"26":4,"27":5,"28":8,"29":8,"30":0,"31":0,"32":0,"33":0,"34":13,"35":5,"36":1,"37":1,"38":1,"39":1,"40":1,"41":5,"42":5,"43":5,"44":5,"45":1,"46":4,"47":4,"48":4,"49":4,"50":16,"51":16,"52":16,"53":4,"54":4,"55":4,"56":16,"57":16,"58":16,"59":16,"60":4,"61":0,"62":0,"63":0,"64":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":5,"7":8,"8":4,"9":5,"10":8,"11":0,"12":13,"13":5,"14":5},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[4,4],"18":[5,5],"19":[5,8],"20":[5,5],"21":[1,4]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/allPairDetails.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/allPairDetails.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { ifPair } from \"../../helper/interface\";\r\n\r\nimport { Pair, Token } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\"\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function getAllPairDetails(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        let chainId: string = req.query.chainId;\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n        let allPairs: ifPair[] = await Pair.find({ chainId: chainId, active: true }).lean();\r\n\r\n        let data: any = [];\r\n\r\n        let promiseTokens: any = [];\r\n\r\n        for (let i in allPairs) {\r\n\r\n            let token0 = Token.findOne({ id: allPairs[i].token0, active: true }).select({ name: 1, symbol: 1, decimals: 1, _id: 0, id: 1 }).lean();\r\n            let token1 = Token.findOne({ id: allPairs[i].token1, active: true }).select({ name: 1, symbol: 1, decimals: 1, _id: 0, id: 1 }).lean();\r\n            promiseTokens.push(token0, token1);\r\n        }\r\n\r\n        promiseTokens = await Promise.all(promiseTokens);\r\n\r\n        for (let i = 0; i < allPairs.length; i++) {\r\n\r\n            let token0 = promiseTokens[2 * i];\r\n            let token1 = promiseTokens[2 * i + 1];\r\n            let temp = {\r\n\r\n                id: allPairs[i].id,\r\n                exchangeRate: allPairs[i].exchangeRate,\r\n                exchangeRateDecimals: allPairs[i].exchangeRateDecimals,\r\n                priceDiff: allPairs[i].priceDiff,\r\n                marginEnabeled: allPairs[i].marginEnabled,\r\n                minToken0Order: allPairs[i].minToken0Order,\r\n                tokens: [token0, token1],\r\n\r\n            };\r\n\r\n            data.push(temp);\r\n        }\r\n\r\n        res.status(200).send({ status: true, data: data });\r\n\r\n    }\r\n    catch (error: any) {\r\n        console.log(\"Error @ getAllPairDetails\", error);\r\n        sentry.captureException(error)\r\n        res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1245c4819d34edd0972cb05afc0d296595d69cc9","contentHash":"7114dc7ff6a18c1ecd10585f62bcd54ffe4368c0a6f6cfc4f5223bdb93c10d13"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\blackListPair.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\blackListPair.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"14":{"start":{"line":13,"column":13},"end":{"line":13,"column":35}},"15":{"start":{"line":14,"column":25},"end":{"line":14,"column":65}},"16":{"start":{"line":15,"column":40},"end":{"line":15,"column":92}},"17":{"start":{"line":17,"column":4},"end":{"line":87,"column":7}},"18":{"start":{"line":18,"column":8},"end":{"line":86,"column":9}},"19":{"start":{"line":19,"column":30},"end":{"line":19,"column":48}},"20":{"start":{"line":20,"column":30},"end":{"line":20,"column":48}},"21":{"start":{"line":21,"column":26},"end":{"line":21,"column":40}},"22":{"start":{"line":22,"column":28},"end":{"line":22,"column":44}},"23":{"start":{"line":23,"column":26},"end":{"line":26,"column":13}},"24":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"25":{"start":{"line":28,"column":16},"end":{"line":28,"column":103}},"26":{"start":{"line":30,"column":38},"end":{"line":30,"column":135}},"27":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"28":{"start":{"line":32,"column":16},"end":{"line":32,"column":97}},"29":{"start":{"line":35,"column":29},"end":{"line":35,"column":93}},"30":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"31":{"start":{"line":37,"column":16},"end":{"line":37,"column":90}},"32":{"start":{"line":39,"column":12},"end":{"line":56,"column":13}},"33":{"start":{"line":40,"column":16},"end":{"line":42,"column":17}},"34":{"start":{"line":41,"column":20},"end":{"line":41,"column":99}},"35":{"start":{"line":44,"column":16},"end":{"line":44,"column":111}},"36":{"start":{"line":46,"column":31},"end":{"line":46,"column":88}},"37":{"start":{"line":47,"column":16},"end":{"line":49,"column":17}},"38":{"start":{"line":48,"column":20},"end":{"line":48,"column":107}},"39":{"start":{"line":51,"column":31},"end":{"line":51,"column":88}},"40":{"start":{"line":52,"column":16},"end":{"line":54,"column":17}},"41":{"start":{"line":53,"column":20},"end":{"line":53,"column":107}},"42":{"start":{"line":55,"column":16},"end":{"line":55,"column":89}},"43":{"start":{"line":57,"column":12},"end":{"line":59,"column":13}},"44":{"start":{"line":58,"column":16},"end":{"line":58,"column":97}},"45":{"start":{"line":62,"column":27},"end":{"line":62,"column":66}},"46":{"start":{"line":63,"column":12},"end":{"line":70,"column":13}},"47":{"start":{"line":64,"column":16},"end":{"line":64,"column":104}},"48":{"start":{"line":66,"column":32},"end":{"line":66,"column":100}},"49":{"start":{"line":67,"column":16},"end":{"line":69,"column":17}},"50":{"start":{"line":68,"column":20},"end":{"line":68,"column":88}},"51":{"start":{"line":72,"column":27},"end":{"line":72,"column":66}},"52":{"start":{"line":73,"column":12},"end":{"line":80,"column":13}},"53":{"start":{"line":74,"column":16},"end":{"line":74,"column":94}},"54":{"start":{"line":76,"column":32},"end":{"line":76,"column":100}},"55":{"start":{"line":77,"column":16},"end":{"line":79,"column":17}},"56":{"start":{"line":78,"column":20},"end":{"line":78,"column":88}},"57":{"start":{"line":81,"column":12},"end":{"line":81,"column":108}},"58":{"start":{"line":82,"column":12},"end":{"line":82,"column":87}},"59":{"start":{"line":85,"column":12},"end":{"line":85,"column":63}},"60":{"start":{"line":89,"column":0},"end":{"line":89,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"handleBlackListToken","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":29}},"loc":{"start":{"line":16,"column":40},"end":{"line":88,"column":1}},"line":16},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":43},"end":{"line":17,"column":44}},"loc":{"start":{"line":17,"column":56},"end":{"line":87,"column":5}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},"type":"if","locations":[{"start":{"line":27,"column":12},"end":{"line":29,"column":13}},{"start":{"line":27,"column":12},"end":{"line":29,"column":13}}],"line":27},"6":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":48}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":30}},{"start":{"line":27,"column":34},"end":{"line":27,"column":48}}],"line":27},"7":{"loc":{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":33,"column":13}},{"start":{"line":31,"column":12},"end":{"line":33,"column":13}}],"line":31},"8":{"loc":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"type":"if","locations":[{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},{"start":{"line":36,"column":12},"end":{"line":38,"column":13}}],"line":36},"9":{"loc":{"start":{"line":39,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":39,"column":12},"end":{"line":56,"column":13}},{"start":{"line":39,"column":12},"end":{"line":56,"column":13}}],"line":39},"10":{"loc":{"start":{"line":40,"column":16},"end":{"line":42,"column":17}},"type":"if","locations":[{"start":{"line":40,"column":16},"end":{"line":42,"column":17}},{"start":{"line":40,"column":16},"end":{"line":42,"column":17}}],"line":40},"11":{"loc":{"start":{"line":40,"column":21},"end":{"line":40,"column":88}},"type":"cond-expr","locations":[{"start":{"line":40,"column":64},"end":{"line":40,"column":70}},{"start":{"line":40,"column":73},"end":{"line":40,"column":88}}],"line":40},"12":{"loc":{"start":{"line":40,"column":21},"end":{"line":40,"column":61}},"type":"binary-expr","locations":[{"start":{"line":40,"column":21},"end":{"line":40,"column":38}},{"start":{"line":40,"column":42},"end":{"line":40,"column":61}}],"line":40},"13":{"loc":{"start":{"line":57,"column":12},"end":{"line":59,"column":13}},"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":59,"column":13}},{"start":{"line":57,"column":12},"end":{"line":59,"column":13}}],"line":57},"14":{"loc":{"start":{"line":57,"column":17},"end":{"line":57,"column":84}},"type":"cond-expr","locations":[{"start":{"line":57,"column":60},"end":{"line":57,"column":66}},{"start":{"line":57,"column":69},"end":{"line":57,"column":84}}],"line":57},"15":{"loc":{"start":{"line":57,"column":17},"end":{"line":57,"column":57}},"type":"binary-expr","locations":[{"start":{"line":57,"column":17},"end":{"line":57,"column":34}},{"start":{"line":57,"column":38},"end":{"line":57,"column":57}}],"line":57}},"s":{"0":1,"1":11,"2":11,"3":2,"4":11,"5":11,"6":0,"7":0,"8":0,"9":0,"10":13,"11":2,"12":1,"13":1,"14":1,"15":1,"16":1,"17":2,"18":2,"19":2,"20":2,"21":2,"22":2,"23":2,"24":2,"25":0,"26":2,"27":2,"28":0,"29":2,"30":2,"31":0,"32":2,"33":1,"34":0,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":0,"42":1,"43":1,"44":0,"45":1,"46":1,"47":1,"48":1,"49":1,"50":0,"51":1,"52":1,"53":0,"54":0,"55":0,"56":0,"57":1,"58":1,"59":0,"60":1},"f":{"0":2,"1":11,"2":11,"3":2,"4":11,"5":0,"6":13,"7":2,"8":2},"b":{"0":[1,1,1],"1":[0,11],"2":[2,2],"3":[2,11],"4":[2,2],"5":[0,2],"6":[2,1],"7":[0,2],"8":[0,2],"9":[1,1],"10":[0,1],"11":[0,1],"12":[1,1],"13":[0,1],"14":[0,1],"15":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/blackListPair.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/blackListPair.ts"],"names":[],"mappings":"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","sourcesContent":["import { Order, Pair, Token } from \"../../DB/db\";\r\nimport { handleOrderCancelled } from \"../../handlers/orderCancelled\";\r\nimport { blackListTokenSignatureValidation } from \"../../utils/blackListTokenSignatureVerify\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function handleBlackListToken(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        const signature = req.body.signature;\r\n        const blackList = req.body.blackList;\r\n        const token = req.body.token;\r\n        const chainId = req.body.chainId;\r\n\r\n        const value = {\r\n            token: token,\r\n            blackList: blackList\r\n        };\r\n\r\n        if (blackList != 0 && blackList != 1) {\r\n            return res.status(400).send({ status: true, message: \"blacklist only can be 0 or 1\" })\r\n        }\r\n\r\n        const validateSignature = blackListTokenSignatureValidation(signature, value, chainId);\r\n\r\n        if (validateSignature == false) {\r\n            return res.status(403).send({ status: true, message: \"Signature not verified\" })\r\n        };\r\n\r\n        const getToken = await Token.findOne({ id: token, chainId: chainId }).lean();\r\n\r\n        if (!getToken) {\r\n            return res.status(400).send({ status: true, message: \"Token not found\" })\r\n        }\r\n\r\n        if (blackList == 1) {\r\n\r\n            if (getToken?.active == true) {\r\n                return res.status(200).send({ status: true, message: \"Token already active\" })\r\n            };\r\n\r\n            await Token.findOneAndUpdate({ id: token, chainId: chainId }, { $set: { active: true } });\r\n\r\n            // find token in pair token0;\r\n            let getPair0 = await Pair.find({ token0: token, chainId: chainId });\r\n\r\n            for (let i in getPair0) {\r\n\r\n                await Pair.findOneAndUpdate({ _id: getPair0[i]._id }, { $set: { active: true } });\r\n\r\n            }\r\n            // find token in pair token1;\r\n            let getPair1 = await Pair.find({ token1: token, chainId: chainId });\r\n\r\n            for (let i in getPair1) {\r\n\r\n                await Pair.findOneAndUpdate({ _id: getPair1[i]._id }, { $set: { active: true } });\r\n\r\n            }\r\n            return res.status(200).send({ status: true, message: \"Token Activate\" })\r\n\r\n        }\r\n\r\n\r\n        if (getToken?.active == false) {\r\n            return res.status(200).send({ status: true, message: \"Token already deactive\" })\r\n        };\r\n        // find token in pair token0;\r\n        let getPair0 = await Pair.find({ token0: token });\r\n\r\n        for (let i in getPair0) {\r\n\r\n            await Pair.findOneAndUpdate({ _id: getPair0[i]._id }, { $set: { active: false } });\r\n            // cancel Orders;\r\n            let getOrders = await Order.find({ pair: getPair0[i].id, active: true }).lean();\r\n\r\n            for (let j in getOrders) {\r\n                await handleOrderCancelled([getOrders[j].id])\r\n            }\r\n\r\n        }\r\n        // find token in pair token1;\r\n        let getPair1 = await Pair.find({ token1: token });\r\n\r\n        for (let i in getPair1) {\r\n\r\n            await Pair.findOneAndUpdate({ _id: getPair1[i]._id }, { active: false });\r\n            // cancel Orders;\r\n            let getOrders = await Order.find({ pair: getPair1[i].id, active: true }).lean();\r\n\r\n            for (let j in getOrders) {\r\n                await handleOrderCancelled([getOrders[j].id])\r\n            }\r\n\r\n        }\r\n        await Token.findOneAndUpdate({ id: token, chainId: chainId }, { $set: { active: false } });\r\n        return res.status(200).send({ status: true, message: \"Token Deactivate\" })\r\n\r\n    }\r\n    catch (error) {\r\n        console.log(\"Error @ handleBlackListToken\", error)\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b7ff8c51c19d22e38b3d0c51f911046edc5326a4","contentHash":"5e576022673a02df1083a303f70b0b7709f09ed634877b7ffbec1168c77923fd"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\blackListTokenSignatureVerify.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\blackListTokenSignatureVerify.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":6,"column":0},"end":{"line":6,"column":62}},"3":{"start":{"line":7,"column":0},"end":{"line":7,"column":51}},"4":{"start":{"line":8,"column":17},"end":{"line":8,"column":34}},"5":{"start":{"line":9,"column":15},"end":{"line":9,"column":47}},"6":{"start":{"line":10,"column":16},"end":{"line":10,"column":42}},"7":{"start":{"line":11,"column":19},"end":{"line":11,"column":48}},"8":{"start":{"line":12,"column":0},"end":{"line":12,"column":185}},"9":{"start":{"line":14,"column":4},"end":{"line":38,"column":5}},"10":{"start":{"line":15,"column":23},"end":{"line":20,"column":9}},"11":{"start":{"line":22,"column":22},"end":{"line":27,"column":9}},"12":{"start":{"line":28,"column":23},"end":{"line":28,"column":103}},"13":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"14":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"15":{"start":{"line":31,"column":12},"end":{"line":31,"column":24}},"16":{"start":{"line":33,"column":8},"end":{"line":33,"column":21}},"17":{"start":{"line":36,"column":8},"end":{"line":36,"column":80}},"18":{"start":{"line":37,"column":8},"end":{"line":37,"column":21}},"19":{"start":{"line":40,"column":0},"end":{"line":40,"column":78}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"blackListTokenSignatureValidation","decl":{"start":{"line":13,"column":9},"end":{"line":13,"column":42}},"loc":{"start":{"line":13,"column":70},"end":{"line":39,"column":1}},"line":13}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":12,"column":71},"end":{"line":12,"column":180}},"type":"cond-expr","locations":[{"start":{"line":12,"column":160},"end":{"line":12,"column":171}},{"start":{"line":12,"column":174},"end":{"line":12,"column":180}}],"line":12},"4":{"loc":{"start":{"line":12,"column":72},"end":{"line":12,"column":156}},"type":"cond-expr","locations":[{"start":{"line":12,"column":128},"end":{"line":12,"column":134}},{"start":{"line":12,"column":137},"end":{"line":12,"column":156}}],"line":12},"5":{"loc":{"start":{"line":12,"column":72},"end":{"line":12,"column":125}},"type":"binary-expr","locations":[{"start":{"line":12,"column":72},"end":{"line":12,"column":108}},{"start":{"line":12,"column":112},"end":{"line":12,"column":125}}],"line":12},"6":{"loc":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},{"start":{"line":30,"column":8},"end":{"line":32,"column":9}}],"line":30}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":2,"14":2,"15":2,"16":0,"17":0,"18":0,"19":1},"f":{"0":1,"1":2},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[0,1],"4":[0,1],"5":[1,1],"6":[2,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/blackListTokenSignatureVerify.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/blackListTokenSignatureVerify.ts"],"names":[],"mappings":";;;;;;;AAAA,mCAAgC;AAChC,gDAAwB;AACxB,2CAAiE;AACjE,iDAA+C;AAQ/C,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,cAAI,CAAC,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAA,MAAA,OAAO,CAAC,GAAG,CAAC,QAAQ,0CAAE,QAAQ,CAAC,MAAM,CAAC,EAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;AAE/H,SAAgB,iCAAiC,CAAE,SAAiB,EAAE,KAAa,EAAE,OAAe;IAChG,IAAI;QAEA,MAAM,MAAM,GAAG;YACX,IAAI,EAAE,IAAA,oBAAS,EAAC,MAAM,CAAC;YACvB,OAAO,EAAE,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC;YAC1C,OAAO,EAAE,OAAO;YAChB,iBAAiB,EAAE,IAAA,0BAAkB,EAAC,OAAO,CAAC;SACjD,CAAC;QAEF,yCAAyC;QACzC,MAAM,KAAK,GAAG;YACV,OAAO,EAAE;gBACL,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE;gBAClC,EAAE,IAAI,EAAE,WAAW,EAAE,IAAI,EAAE,OAAO,EAAE;aACvC;SACJ,CAAC;QAEF,MAAM,MAAM,GAAW,eAAM,CAAC,KAAK,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC,WAAW,EAAE,CAAC;QAE/F,MAAM,gBAAgB,GAAW,eAAM,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,WAAW,EAAE,CAAC;QAE9F,IAAI,OAAO,CAAC,GAAG,CAAC,SAAoB,IAAI,gBAAgB,EAAE;YACtD,OAAO,IAAI,CAAC;SACf;QAED,OAAO,KAAK,CAAC;KAEhB;IACD,OAAO,KAAU,EAAE;QACf,OAAO,CAAC,GAAG,CAAC,2CAA2C,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;QACxE,OAAO,KAAK,CAAA;KACf;AACL,CAAC;AAjCD,8EAiCC","sourcesContent":["import { ethers } from \"ethers\";\r\nimport path from \"path\";\r\nimport { getExchangeAddress, getVersion } from \"../helper/chain\";\r\nimport { getConfig } from \"../helper/constant\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nrequire(\"dotenv\").config({ path: path.resolve(process.cwd(), process.env.NODE_ENV?.includes('test') ? \".env.test\" : \".env\") });\r\n\r\nexport function blackListTokenSignatureValidation( signature: string, value: object, chainId: string): (boolean) {\r\n    try {\r\n\r\n        const domain = {\r\n            name: getConfig(\"name\"),\r\n            version: getVersion(process.env.NODE_ENV!),\r\n            chainId: chainId,\r\n            verifyingContract: getExchangeAddress(chainId),\r\n        };\r\n\r\n        // The named list of all type definitions\r\n        const types = {\r\n            Request: [            \r\n                { name: 'token', type: 'address' },\r\n                { name: 'blackList', type: 'uint8' },              \r\n            ]\r\n        };\r\n\r\n        const digest: string = ethers.utils._TypedDataEncoder.hash(domain, types, value).toLowerCase();\r\n\r\n        const signatureAddress: string = ethers.utils.recoverAddress(digest, signature).toLowerCase();\r\n       \r\n        if (process.env.ADMIN_ADD! as string == signatureAddress) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n    catch (error: any) {\r\n        console.log(\"Error @ blackListTokenSignatureValidation\", error.message);\r\n        return false\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a5548e985586d1c1da860a8ea06f1f875147c81d","contentHash":"38356cac0aa539733f77919dc460cf5210089ad7aa34dcb19b188835b9b56378"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\fetchOrders.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\fetchOrders.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":29}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":35}},"39":{"start":{"line":37,"column":19},"end":{"line":37,"column":51}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":39,"column":15},"end":{"line":39,"column":52}},"42":{"start":{"line":42,"column":4},"end":{"line":110,"column":7}},"43":{"start":{"line":43,"column":8},"end":{"line":109,"column":9}},"44":{"start":{"line":44,"column":25},"end":{"line":44,"column":103}},"45":{"start":{"line":45,"column":26},"end":{"line":45,"column":43}},"46":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"47":{"start":{"line":47,"column":16},"end":{"line":47,"column":106}},"48":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"49":{"start":{"line":50,"column":16},"end":{"line":50,"column":107}},"50":{"start":{"line":52,"column":34},"end":{"line":52,"column":94}},"51":{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},"52":{"start":{"line":54,"column":16},"end":{"line":54,"column":106}},"53":{"start":{"line":56,"column":27},"end":{"line":56,"column":242}},"54":{"start":{"line":57,"column":28},"end":{"line":57,"column":242}},"55":{"start":{"line":58,"column":26},"end":{"line":58,"column":66}},"56":{"start":{"line":59,"column":12},"end":{"line":59,"column":34}},"57":{"start":{"line":60,"column":12},"end":{"line":60,"column":35}},"58":{"start":{"line":61,"column":25},"end":{"line":61,"column":27}},"59":{"start":{"line":62,"column":26},"end":{"line":62,"column":28}},"60":{"start":{"line":63,"column":12},"end":{"line":70,"column":13}},"61":{"start":{"line":63,"column":25},"end":{"line":63,"column":26}},"62":{"start":{"line":64,"column":16},"end":{"line":69,"column":17}},"63":{"start":{"line":65,"column":20},"end":{"line":65,"column":86}},"64":{"start":{"line":67,"column":21},"end":{"line":69,"column":17}},"65":{"start":{"line":68,"column":20},"end":{"line":68,"column":142}},"66":{"start":{"line":71,"column":12},"end":{"line":78,"column":13}},"67":{"start":{"line":72,"column":16},"end":{"line":77,"column":17}},"68":{"start":{"line":73,"column":20},"end":{"line":73,"column":89}},"69":{"start":{"line":75,"column":21},"end":{"line":77,"column":17}},"70":{"start":{"line":76,"column":20},"end":{"line":76,"column":147}},"71":{"start":{"line":79,"column":28},"end":{"line":79,"column":30}},"72":{"start":{"line":80,"column":29},"end":{"line":80,"column":51}},"73":{"start":{"line":81,"column":12},"end":{"line":87,"column":13}},"74":{"start":{"line":82,"column":27},"end":{"line":85,"column":17}},"75":{"start":{"line":86,"column":16},"end":{"line":86,"column":37}},"76":{"start":{"line":88,"column":29},"end":{"line":88,"column":31}},"77":{"start":{"line":89,"column":30},"end":{"line":89,"column":53}},"78":{"start":{"line":90,"column":12},"end":{"line":96,"column":13}},"79":{"start":{"line":91,"column":27},"end":{"line":94,"column":17}},"80":{"start":{"line":95,"column":16},"end":{"line":95,"column":38}},"81":{"start":{"line":97,"column":23},"end":{"line":102,"column":13}},"82":{"start":{"line":103,"column":12},"end":{"line":103,"column":70}},"83":{"start":{"line":106,"column":12},"end":{"line":106,"column":43}},"84":{"start":{"line":107,"column":12},"end":{"line":107,"column":54}},"85":{"start":{"line":108,"column":12},"end":{"line":108,"column":81}},"86":{"start":{"line":112,"column":0},"end":{"line":112,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"fetchOrders","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":20}},"loc":{"start":{"line":40,"column":31},"end":{"line":111,"column":1}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":42,"column":43},"end":{"line":42,"column":44}},"loc":{"start":{"line":42,"column":56},"end":{"line":110,"column":5}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":44,"column":25},"end":{"line":44,"column":103}},"type":"cond-expr","locations":[{"start":{"line":44,"column":78},"end":{"line":44,"column":84}},{"start":{"line":44,"column":87},"end":{"line":44,"column":103}}],"line":44},"22":{"loc":{"start":{"line":44,"column":25},"end":{"line":44,"column":75}},"type":"binary-expr","locations":[{"start":{"line":44,"column":25},"end":{"line":44,"column":58}},{"start":{"line":44,"column":62},"end":{"line":44,"column":75}}],"line":44},"23":{"loc":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},{"start":{"line":46,"column":12},"end":{"line":48,"column":13}}],"line":46},"24":{"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},{"start":{"line":49,"column":12},"end":{"line":51,"column":13}}],"line":49},"25":{"loc":{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},{"start":{"line":53,"column":12},"end":{"line":55,"column":13}}],"line":53},"26":{"loc":{"start":{"line":64,"column":16},"end":{"line":69,"column":17}},"type":"if","locations":[{"start":{"line":64,"column":16},"end":{"line":69,"column":17}},{"start":{"line":64,"column":16},"end":{"line":69,"column":17}}],"line":64},"27":{"loc":{"start":{"line":67,"column":21},"end":{"line":69,"column":17}},"type":"if","locations":[{"start":{"line":67,"column":21},"end":{"line":69,"column":17}},{"start":{"line":67,"column":21},"end":{"line":69,"column":17}}],"line":67},"28":{"loc":{"start":{"line":72,"column":16},"end":{"line":77,"column":17}},"type":"if","locations":[{"start":{"line":72,"column":16},"end":{"line":77,"column":17}},{"start":{"line":72,"column":16},"end":{"line":77,"column":17}}],"line":72},"29":{"loc":{"start":{"line":75,"column":21},"end":{"line":77,"column":17}},"type":"if","locations":[{"start":{"line":75,"column":21},"end":{"line":77,"column":17}},{"start":{"line":75,"column":21},"end":{"line":77,"column":17}}],"line":75}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":2,"26":1,"27":1,"28":2,"29":2,"30":0,"31":0,"32":0,"33":0,"34":3,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":0,"48":1,"49":0,"50":1,"51":1,"52":0,"53":1,"54":1,"55":1,"56":1,"57":1,"58":1,"59":1,"60":1,"61":1,"62":1,"63":1,"64":0,"65":0,"66":1,"67":3,"68":1,"69":2,"70":2,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":0,"84":0,"85":0,"86":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":2,"8":1,"9":1,"10":2,"11":0,"12":3,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[1,1],"18":[1,1],"19":[1,2],"20":[1,1],"21":[0,1],"22":[1,1],"23":[0,1],"24":[0,1],"25":[0,1],"26":[1,0],"27":[0,0],"28":[1,2],"29":[2,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/fetchOrders.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/fetchOrders.ts"],"names":[],"mappings":"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","sourcesContent":["\r\n\r\nimport { ifOrderCreated, ifPair } from \"../../helper/interface\";\r\nimport { Pair, Order } from \"../../DB/db\";\r\nimport { Decimals } from \"../../helper/constant\";\r\nimport { errorMessage } from \"../../helper/errorMessage\"\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function fetchOrders(req: any, res: any) {\r\n    try {\r\n\r\n        let pairId: string = req.params.pairId?.toLowerCase();\r\n        let chainId: string = req.query.chainId;\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n\r\n        const isPairIdExist: ifPair | null = await Pair.findOne({ id: pairId, active: true }).lean();\r\n\r\n        if (!isPairIdExist) {\r\n            return res.status(404).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        let buyOrder: any | ifOrderCreated[] = Order.find({ pair: pairId, chainId: chainId, orderType: { $in: [0, 2] }, deleted: false, active: true, cancelled: false }).sort({ exchangeRate: -1 }).collation({ locale: \"en_US\", numericOrdering: true }).lean();\r\n        let sellOrder: any | ifOrderCreated[] = Order.find({ pair: pairId, chainId: chainId, orderType: { $in: [1, 3] }, deleted: false, active: true, cancelled: false }).sort({ exchangeRate: 1 }).collation({ locale: \"en_US\", numericOrdering: true }).lean();\r\n\r\n        let promise = await Promise.all([buyOrder, sellOrder]);\r\n        buyOrder = promise[0];\r\n        sellOrder = promise[1];\r\n\r\n        let mapBuy: any = {};\r\n        let mapSell: any = {};\r\n        for (let i = 0; i < buyOrder.length; i++) {\r\n\r\n            if (!mapBuy[`${buyOrder[i].exchangeRate}`]) {\r\n\r\n                mapBuy[`${buyOrder[i].exchangeRate}`] = buyOrder[i].balanceAmount;\r\n            }\r\n            else if (mapBuy[`${buyOrder[i].exchangeRate}`]) {\r\n\r\n                mapBuy[`${buyOrder[i].exchangeRate}`] = Number(mapBuy[`${buyOrder[i].exchangeRate}`]) + Number(buyOrder[i].balanceAmount);\r\n            }\r\n\r\n        }\r\n\r\n        for (let i in sellOrder) {\r\n\r\n            if (!mapSell[`${sellOrder[i].exchangeRate}`]) {\r\n\r\n                mapSell[`${sellOrder[i].exchangeRate}`] = sellOrder[i].balanceAmount;\r\n\r\n            }\r\n            else if (mapSell[`${sellOrder[i].exchangeRate}`]) {\r\n\r\n                mapSell[`${sellOrder[i].exchangeRate}`] = Number(mapSell[`${sellOrder[i].exchangeRate}`]) + Number(sellOrder[i].balanceAmount);\r\n            }\r\n        }\r\n\r\n        let buyOrders: any = [];\r\n\r\n        let buyEntries: [string, string][] = Object.entries(mapBuy);\r\n\r\n        for (let i in buyEntries) {\r\n            let temp = {\r\n\r\n                exchangeRate: buyEntries[i][0],\r\n                amount: (buyEntries[i][1]).toString()\r\n\r\n            };\r\n            buyOrders.push(temp);\r\n        }\r\n\r\n        let sellOrders: any = [];\r\n\r\n        let sellEntries = Object.entries(mapSell);\r\n\r\n        for (let i in sellEntries) {\r\n\r\n            let temp = {\r\n                exchangeRate: sellEntries[i][0],\r\n                amount: sellEntries[i][1],\r\n            };\r\n            sellOrders.push(temp);\r\n        }\r\n\r\n        let data = {\r\n            pair: pairId,\r\n            decimals: Decimals.token,\r\n            sellOrders: sellOrders,\r\n            buyOrders: buyOrders\r\n        };\r\n\r\n        return res.status(200).send({ status: true, data: data });\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ fetchOrders\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"474cdb99859dd3b28b54e13adfd1648837a21c40","contentHash":"84132b3e168d9d21fedb8f9258309494c6f7b51375e62b1741059e4f69be4187"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\newPair.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\newPair.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":28}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":40,"column":4},"end":{"line":76,"column":7}},"42":{"start":{"line":41,"column":8},"end":{"line":75,"column":9}},"43":{"start":{"line":42,"column":26},"end":{"line":42,"column":43}},"44":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"45":{"start":{"line":44,"column":16},"end":{"line":44,"column":107}},"46":{"start":{"line":46,"column":27},"end":{"line":46,"column":114}},"47":{"start":{"line":47,"column":23},"end":{"line":47,"column":25}},"48":{"start":{"line":48,"column":32},"end":{"line":48,"column":34}},"49":{"start":{"line":49,"column":12},"end":{"line":53,"column":13}},"50":{"start":{"line":50,"column":29},"end":{"line":50,"column":155}},"51":{"start":{"line":51,"column":29},"end":{"line":51,"column":155}},"52":{"start":{"line":52,"column":16},"end":{"line":52,"column":51}},"53":{"start":{"line":54,"column":12},"end":{"line":54,"column":61}},"54":{"start":{"line":55,"column":12},"end":{"line":68,"column":13}},"55":{"start":{"line":55,"column":25},"end":{"line":55,"column":26}},"56":{"start":{"line":56,"column":29},"end":{"line":56,"column":49}},"57":{"start":{"line":57,"column":29},"end":{"line":57,"column":53}},"58":{"start":{"line":58,"column":27},"end":{"line":66,"column":17}},"59":{"start":{"line":67,"column":16},"end":{"line":67,"column":32}},"60":{"start":{"line":69,"column":12},"end":{"line":69,"column":63}},"61":{"start":{"line":72,"column":12},"end":{"line":72,"column":53}},"62":{"start":{"line":73,"column":12},"end":{"line":73,"column":43}},"63":{"start":{"line":74,"column":12},"end":{"line":74,"column":74}},"64":{"start":{"line":78,"column":0},"end":{"line":78,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getNewPair","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":19}},"loc":{"start":{"line":39,"column":30},"end":{"line":77,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":40,"column":43},"end":{"line":40,"column":44}},"loc":{"start":{"line":40,"column":56},"end":{"line":76,"column":5}},"line":40}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},"type":"if","locations":[{"start":{"line":43,"column":12},"end":{"line":45,"column":13}},{"start":{"line":43,"column":12},"end":{"line":45,"column":13}}],"line":43}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":2,"26":1,"27":1,"28":2,"29":2,"30":0,"31":0,"32":0,"33":0,"34":3,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":0,"46":1,"47":1,"48":1,"49":1,"50":4,"51":4,"52":4,"53":1,"54":1,"55":1,"56":4,"57":4,"58":4,"59":4,"60":1,"61":0,"62":0,"63":0,"64":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":2,"8":1,"9":1,"10":2,"11":0,"12":3,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[1,1],"18":[1,1],"19":[1,2],"20":[1,1],"21":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/newPair.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/newPair.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,oCAA0C;AAC1C,4DAAyD;AAOzD,SAAsB,UAAU,CAAC,GAAQ,EAAE,GAAQ;;QAE/C,IAAI;YAEA,IAAI,OAAO,GAAW,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YAExC,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YACD,IAAI,QAAQ,GAAa,MAAM,SAAI,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,EAAC,SAAS,EAAE,CAAC,CAAC,EAAC,CAAC,CAAC,IAAI,EAAE,CAAC;YAE1G,IAAI,IAAI,GAAQ,EAAE,CAAC;YAEnB,IAAI,aAAa,GAAQ,EAAE,CAAC;YAE5B,KAAK,IAAI,CAAC,IAAI,QAAQ,EAAE;gBAEpB,IAAI,MAAM,GAAG,UAAK,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;gBACvI,IAAI,MAAM,GAAG,UAAK,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;gBACvI,aAAa,CAAC,IAAI,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;aACtC;YAED,aAAa,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAEjD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAEtC,IAAI,MAAM,GAAG,aAAa,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBAClC,IAAI,MAAM,GAAG,aAAa,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBACtC,IAAI,IAAI,GAAE;oBAEN,EAAE,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE;oBAClB,YAAY,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY;oBACtC,oBAAoB,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,oBAAoB;oBACtD,SAAS,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS;oBAChC,cAAc,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,aAAa;oBACzC,cAAc,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,cAAc;oBAC1C,MAAM,EAAE,CAAC,MAAM,EAAE,MAAM,CAAC;iBAE3B,CAAC;gBAEF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACnB;YAED,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;SAEtD;QACD,OAAO,KAAU,EAAE;YACf,OAAO,CAAC,GAAG,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC;YACzC,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACjE;IACL,CAAC;CAAA;AAnDD,gCAmDC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { Pair, Token } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\nimport { ifPair } from \"../../helper/interface\";\r\n\r\n\r\n\r\n\r\n\r\nexport async function getNewPair(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        let chainId: string = req.query.chainId;\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n        let allPairs: ifPair[] = await Pair.find({ chainId: chainId, active: true }).sort({createdAt: -1}).lean();\r\n\r\n        let data: any = [];\r\n\r\n        let promiseTokens: any = [];\r\n\r\n        for (let i in allPairs) {\r\n\r\n            let token0 = Token.findOne({ id: allPairs[i].token0, active: true }).select({ name: 1, symbol: 1, decimals: 1, _id: 0, id: 1 }).lean();\r\n            let token1 = Token.findOne({ id: allPairs[i].token1, active: true }).select({ name: 1, symbol: 1, decimals: 1, _id: 0, id: 1 }).lean();\r\n            promiseTokens.push(token0, token1);\r\n        }\r\n\r\n        promiseTokens = await Promise.all(promiseTokens);\r\n\r\n        for (let i = 0; i < allPairs.length; i++) {\r\n\r\n            let token0 = promiseTokens[2 * i];\r\n            let token1 = promiseTokens[2 * i + 1];\r\n            let temp= {\r\n\r\n                id: allPairs[i].id,\r\n                exchangeRate: allPairs[i].exchangeRate,\r\n                exchangeRateDecimals: allPairs[i].exchangeRateDecimals,\r\n                priceDiff: allPairs[i].priceDiff,\r\n                marginEnabeled: allPairs[i].marginEnabled,\r\n                minToken0Order: allPairs[i].minToken0Order,\r\n                tokens: [token0, token1],\r\n               \r\n            };\r\n\r\n            data.push(temp);\r\n        }\r\n\r\n        res.status(200).send({ status: true, data: data });\r\n\r\n    }\r\n    catch (error: any) {\r\n        console.log(\"Error @ getNewPair\", error);\r\n        sentry.captureException(error)\r\n        res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b0d6cb992d370249f7ea0c589f5747c782900f71","contentHash":"e6e0cf209a3f4224c8444ff109b149022ad729756c7a5966aeaf8ce446d6a3e3"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\pairOrderExecutedHistory.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\pairOrderExecutedHistory.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":45}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":35}},"39":{"start":{"line":37,"column":23},"end":{"line":37,"column":59}},"40":{"start":{"line":38,"column":15},"end":{"line":38,"column":52}},"41":{"start":{"line":41,"column":4},"end":{"line":59,"column":7}},"42":{"start":{"line":42,"column":8},"end":{"line":58,"column":9}},"43":{"start":{"line":43,"column":25},"end":{"line":43,"column":103}},"44":{"start":{"line":44,"column":26},"end":{"line":44,"column":43}},"45":{"start":{"line":45,"column":12},"end":{"line":47,"column":13}},"46":{"start":{"line":46,"column":16},"end":{"line":46,"column":106}},"47":{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},"48":{"start":{"line":49,"column":16},"end":{"line":49,"column":107}},"49":{"start":{"line":51,"column":38},"end":{"line":51,"column":219}},"50":{"start":{"line":52,"column":12},"end":{"line":52,"column":85}},"51":{"start":{"line":55,"column":12},"end":{"line":55,"column":43}},"52":{"start":{"line":56,"column":12},"end":{"line":56,"column":70}},"53":{"start":{"line":57,"column":12},"end":{"line":57,"column":81}},"54":{"start":{"line":61,"column":0},"end":{"line":61,"column":66}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getPairOrderExecutedHistory","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":36}},"loc":{"start":{"line":39,"column":47},"end":{"line":60,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":59,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":25},"end":{"line":43,"column":103}},"type":"cond-expr","locations":[{"start":{"line":43,"column":78},"end":{"line":43,"column":84}},{"start":{"line":43,"column":87},"end":{"line":43,"column":103}}],"line":43},"22":{"loc":{"start":{"line":43,"column":25},"end":{"line":43,"column":75}},"type":"binary-expr","locations":[{"start":{"line":43,"column":25},"end":{"line":43,"column":58}},{"start":{"line":43,"column":62},"end":{"line":43,"column":75}}],"line":43},"23":{"loc":{"start":{"line":45,"column":12},"end":{"line":47,"column":13}},"type":"if","locations":[{"start":{"line":45,"column":12},"end":{"line":47,"column":13}},{"start":{"line":45,"column":12},"end":{"line":47,"column":13}}],"line":45},"24":{"loc":{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},{"start":{"line":48,"column":12},"end":{"line":50,"column":13}}],"line":48}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":0,"47":1,"48":0,"49":1,"50":1,"51":0,"52":0,"53":0,"54":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":2,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,1],"18":[1,1],"19":[1,1],"20":[1,1],"21":[0,1],"22":[1,1],"23":[0,1],"24":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/pairOrderExecutedHistory.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/pairOrderExecutedHistory.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,oCAA4C;AAC5C,4DAAwD;AACxD,qDAAuC;AASvC,SAAsB,2BAA2B,CAAC,GAAQ,EAAE,GAAQ;;;QAChE,IAAI;YAEA,IAAI,MAAM,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,MAAM,0CAAE,WAAW,EAAE,CAAC;YACtD,IAAI,OAAO,GAAW,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YAExC,IAAI,CAAC,MAAM,EAAE;gBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,MAAM,EAAE,CAAC,CAAC;aAC9E;YAED,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YAED,IAAI,mBAAmB,GAAG,MAAM,kBAAa,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,cAAc,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAE3M,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,mBAAmB,EAAE,CAAC,CAAC;SAE5E;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,qCAAqC,EAAE,KAAK,CAAC,CAAC;YAC1D,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;;CACJ;AAxBD,kEAwBC","sourcesContent":["\r\nimport { OrderExecuted } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\"\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function getPairOrderExecutedHistory(req: any, res: any) {\r\n    try {\r\n\r\n        let pairId: string = req.params.pairId?.toLowerCase();\r\n        let chainId: string = req.query.chainId;\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n\r\n        let getPairOrderHistory = await OrderExecuted.find({ pair: pairId, chainId }).sort({ blockTimestamp: -1, logIndex: -1 }).select({ fillAmount: 1, exchangeRate: 1, orderType: 1, _id: 0 }).limit(50).lean();\r\n\r\n        return res.status(200).send({ status: true, data: getPairOrderHistory });\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getPairOrderExecutedHistory\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8e0b01288651b571e9305f9d0a6463b660cbf82f","contentHash":"bee80559600b4c8f156cffa2637b8cc6785f8c8557390282ff1a7ecd1d727902"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\pairTradingStatus.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\pairTradingStatus.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":38}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":35}},"39":{"start":{"line":37,"column":15},"end":{"line":37,"column":52}},"40":{"start":{"line":39,"column":4},"end":{"line":119,"column":7}},"41":{"start":{"line":40,"column":8},"end":{"line":118,"column":9}},"42":{"start":{"line":41,"column":25},"end":{"line":41,"column":56}},"43":{"start":{"line":42,"column":24},"end":{"line":42,"column":43}},"44":{"start":{"line":43,"column":22},"end":{"line":43,"column":31}},"45":{"start":{"line":44,"column":23},"end":{"line":44,"column":33}},"46":{"start":{"line":45,"column":23},"end":{"line":45,"column":31}},"47":{"start":{"line":46,"column":23},"end":{"line":46,"column":34}},"48":{"start":{"line":47,"column":27},"end":{"line":47,"column":57}},"49":{"start":{"line":48,"column":23},"end":{"line":48,"column":25}},"50":{"start":{"line":49,"column":12},"end":{"line":111,"column":13}},"51":{"start":{"line":50,"column":39},"end":{"line":90,"column":18}},"52":{"start":{"line":91,"column":34},"end":{"line":91,"column":77}},"53":{"start":{"line":92,"column":16},"end":{"line":110,"column":17}},"54":{"start":{"line":93,"column":31},"end":{"line":97,"column":21}},"55":{"start":{"line":98,"column":20},"end":{"line":98,"column":36}},"56":{"start":{"line":101,"column":37},"end":{"line":101,"column":121}},"57":{"start":{"line":102,"column":20},"end":{"line":102,"column":95}},"58":{"start":{"line":103,"column":33},"end":{"line":103,"column":88}},"59":{"start":{"line":104,"column":31},"end":{"line":108,"column":21}},"60":{"start":{"line":109,"column":20},"end":{"line":109,"column":36}},"61":{"start":{"line":112,"column":12},"end":{"line":112,"column":70}},"62":{"start":{"line":115,"column":12},"end":{"line":115,"column":43}},"63":{"start":{"line":116,"column":12},"end":{"line":116,"column":63}},"64":{"start":{"line":117,"column":12},"end":{"line":117,"column":81}},"65":{"start":{"line":121,"column":0},"end":{"line":121,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getPairTradingStatus","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":29}},"loc":{"start":{"line":38,"column":40},"end":{"line":120,"column":1}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":39,"column":43},"end":{"line":39,"column":44}},"loc":{"start":{"line":39,"column":56},"end":{"line":119,"column":5}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":92,"column":16},"end":{"line":110,"column":17}},"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":110,"column":17}},{"start":{"line":92,"column":16},"end":{"line":110,"column":17}}],"line":92}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":5,"26":5,"27":1,"28":5,"29":5,"30":0,"31":0,"32":0,"33":0,"34":6,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":5,"52":5,"53":5,"54":0,"55":0,"56":5,"57":5,"58":5,"59":5,"60":5,"61":1,"62":0,"63":0,"64":0,"65":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":5,"8":5,"9":1,"10":5,"11":0,"12":6,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,5],"18":[1,1],"19":[1,5],"20":[1,1],"21":[0,5]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/pairTradingStatus.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/pairTradingStatus.ts"],"names":[],"mappings":"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","sourcesContent":["import { OrderExecuted } from \"../../DB/db\";\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function getPairTradingStatus(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        let pairId: string = req.params.pairId.toLowerCase();\r\n\r\n        let _24hr = 24 * 60 * 60 * 1000;\r\n        let _7D = 7 * _24hr;\r\n        let _30D = 30 * _24hr;\r\n        let _90D = 3 * _30D;\r\n        let _1Yr = 365 * _24hr;\r\n\r\n        let interval = [_24hr, _7D, _30D, _90D, _1Yr];\r\n\r\n        let data: any = [];\r\n\r\n        for (let i in interval) {\r\n\r\n            let getOrderExecuted = await OrderExecuted.aggregate(\r\n                [\r\n                    {\r\n                        $match: {\r\n                            $and: [\r\n                                { pair: pairId },\r\n                                { blockTimestamp: { $gte: Date.now() - interval[i] } }\r\n                            ]\r\n                        }\r\n                    },\r\n                    {\r\n                        $sort: { blockTimestamp: -1, logIndex: -1 }\r\n                    },\r\n                    {\r\n                        $addFields: {\r\n                            amount: { $toDecimal: \"$fillAmount\" },\r\n                        }\r\n                    },\r\n                    {\r\n                        $facet: {\r\n\r\n                            \"exchangeRate\": [\r\n                                {\r\n                                    $group: {\r\n                                        _id: null,\r\n                                        first: { $first: \"$exchangeRate\" },\r\n                                        last: { $last: \"$exchangeRate\" }\r\n\r\n                                    }\r\n                                },\r\n                                { $project: { first: 1, last: 1, _id: 0 } }\r\n                            ],\r\n                            \"volume\": [\r\n                                {\r\n                                    $group: {\r\n                                        _id: null,\r\n                                        volume: { $sum: \"$amount\" },\r\n                                        count: { $sum: 1 }\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    }\r\n\r\n                ]\r\n            );\r\n            let intervalStr = [\"_24hr\", \" _7D\", \" _30D\", \"_90D\", \" _1Yr\"];\r\n\r\n            if (getOrderExecuted[0].exchangeRate.length <= 0) {\r\n\r\n                let temp = {\r\n                    interval: `${intervalStr[i]}`,\r\n                    changeInER: 0,\r\n                    volume: 0\r\n                };\r\n\r\n                data.push(temp);\r\n\r\n            }\r\n            else {\r\n                let changeInER = getOrderExecuted[0].exchangeRate[0].first - getOrderExecuted[0].exchangeRate[0].last;\r\n\r\n                changeInER = (changeInER / getOrderExecuted[0].exchangeRate[0].last) * 100;\r\n\r\n                let volume = Number(getOrderExecuted[0].volume[0].volume) / 10 ** 18;\r\n\r\n                let temp = {\r\n                    interval: `${intervalStr[i]}`,\r\n                    changeInER: changeInER,\r\n                    volume: volume\r\n                };\r\n\r\n                data.push(temp);\r\n            }\r\n\r\n        }\r\n\r\n        return res.status(200).send({ status: true, data: data });\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getPairTradingStatus\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n\r\n    }\r\n}\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2f3e5b7747dfe025972c0e2f560e51a798f5feb6","contentHash":"099d75a253cc7a8fdf9af4b4390fcbc7c7383fff69af141787a974fee4033a03"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\trandingPair.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\pair\\trandingPair.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":37}},"40":{"start":{"line":39,"column":17},"end":{"line":39,"column":51}},"41":{"start":{"line":40,"column":15},"end":{"line":40,"column":52}},"42":{"start":{"line":41,"column":13},"end":{"line":41,"column":35}},"43":{"start":{"line":43,"column":4},"end":{"line":139,"column":7}},"44":{"start":{"line":44,"column":8},"end":{"line":138,"column":9}},"45":{"start":{"line":46,"column":27},"end":{"line":46,"column":72}},"46":{"start":{"line":47,"column":27},"end":{"line":47,"column":46}},"47":{"start":{"line":48,"column":23},"end":{"line":48,"column":25}},"48":{"start":{"line":49,"column":12},"end":{"line":107,"column":13}},"49":{"start":{"line":50,"column":39},"end":{"line":90,"column":18}},"50":{"start":{"line":91,"column":16},"end":{"line":106,"column":17}},"51":{"start":{"line":92,"column":31},"end":{"line":95,"column":21}},"52":{"start":{"line":96,"column":20},"end":{"line":96,"column":36}},"53":{"start":{"line":99,"column":37},"end":{"line":99,"column":121}},"54":{"start":{"line":100,"column":32},"end":{"line":100,"column":161}},"55":{"start":{"line":101,"column":31},"end":{"line":104,"column":21}},"56":{"start":{"line":105,"column":20},"end":{"line":105,"column":36}},"57":{"start":{"line":108,"column":12},"end":{"line":108,"column":58}},"58":{"start":{"line":108,"column":39},"end":{"line":108,"column":56}},"59":{"start":{"line":109,"column":31},"end":{"line":109,"column":33}},"60":{"start":{"line":110,"column":12},"end":{"line":131,"column":13}},"61":{"start":{"line":111,"column":31},"end":{"line":111,"column":123}},"62":{"start":{"line":112,"column":36},"end":{"line":112,"column":38}},"63":{"start":{"line":113,"column":16},"end":{"line":117,"column":17}},"64":{"start":{"line":114,"column":33},"end":{"line":114,"column":156}},"65":{"start":{"line":115,"column":33},"end":{"line":115,"column":156}},"66":{"start":{"line":116,"column":20},"end":{"line":116,"column":55}},"67":{"start":{"line":118,"column":16},"end":{"line":118,"column":65}},"68":{"start":{"line":119,"column":29},"end":{"line":119,"column":45}},"69":{"start":{"line":120,"column":29},"end":{"line":120,"column":45}},"70":{"start":{"line":121,"column":27},"end":{"line":129,"column":17}},"71":{"start":{"line":130,"column":16},"end":{"line":130,"column":40}},"72":{"start":{"line":132,"column":12},"end":{"line":132,"column":78}},"73":{"start":{"line":135,"column":12},"end":{"line":135,"column":43}},"74":{"start":{"line":136,"column":12},"end":{"line":136,"column":63}},"75":{"start":{"line":137,"column":12},"end":{"line":137,"column":81}},"76":{"start":{"line":141,"column":0},"end":{"line":141,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"getPairTrandingPair","decl":{"start":{"line":42,"column":9},"end":{"line":42,"column":28}},"loc":{"start":{"line":42,"column":39},"end":{"line":140,"column":1}},"line":42},"15":{"name":"(anonymous_15)","decl":{"start":{"line":43,"column":43},"end":{"line":43,"column":44}},"loc":{"start":{"line":43,"column":56},"end":{"line":139,"column":5}},"line":43},"16":{"name":"(anonymous_16)","decl":{"start":{"line":108,"column":29},"end":{"line":108,"column":30}},"loc":{"start":{"line":108,"column":39},"end":{"line":108,"column":56}},"line":108}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":91,"column":16},"end":{"line":106,"column":17}},"type":"if","locations":[{"start":{"line":91,"column":16},"end":{"line":106,"column":17}},{"start":{"line":91,"column":16},"end":{"line":106,"column":17}}],"line":91}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":13,"26":9,"27":1,"28":13,"29":13,"30":0,"31":0,"32":0,"33":0,"34":14,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":4,"50":4,"51":3,"52":3,"53":1,"54":1,"55":1,"56":1,"57":1,"58":3,"59":1,"60":1,"61":4,"62":4,"63":4,"64":60,"65":60,"66":60,"67":4,"68":4,"69":4,"70":4,"71":4,"72":1,"73":0,"74":0,"75":0,"76":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":13,"8":9,"9":1,"10":13,"11":0,"12":14,"13":1,"14":1,"15":1,"16":3},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[4,9],"18":[1,1],"19":[1,13],"20":[1,1],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[3,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/trandingPair.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/pair/trandingPair.ts"],"names":[],"mappings":"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","sourcesContent":["import Big from \"big.js\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { connect, OrderExecuted, Pair, Token } from \"../../DB/db\";\r\nimport { ifPair } from \"../../helper/interface\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function getPairTrandingPair(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        // let chainId = req.query.chainId;\r\n        let getPairs: ifPair[] = await Pair.find({active: true}).lean()!\r\n\r\n        let interval = 24 * 60 * 60 * 1000;\r\n\r\n        let data: any = [];\r\n\r\n        for (let i in getPairs) {\r\n\r\n            let getOrderExecuted = await OrderExecuted.aggregate(\r\n                [\r\n                    {\r\n                        $match: {\r\n                            $and: [\r\n                                { pair: getPairs[i].id },\r\n                                { blockTimestamp: { $gte: Date.now() - interval } }\r\n                            ]\r\n                        }\r\n                    },\r\n                    {\r\n                        $sort: { blockTimestamp: -1, logIndex: -1 }\r\n                    },\r\n                    {\r\n                        $addFields: {\r\n                            amount: { $toDecimal: \"$fillAmount\" },\r\n                        }\r\n                    },\r\n                    {\r\n                        $facet: {\r\n\r\n                            \"exchangeRate\": [\r\n                                {\r\n                                    $group: {\r\n                                        _id: null,\r\n                                        first: { $first: \"$exchangeRate\" },\r\n                                        last: { $last: \"$exchangeRate\" }\r\n\r\n                                    }\r\n                                },\r\n                                { $project: { first: 1, last: 1, _id: 0 } }\r\n                            ],\r\n                            \"volume\": [\r\n                                {\r\n                                    $group: {\r\n                                        _id: null,\r\n                                        volume: { $sum: \"$amount\" },\r\n                                        count: { $sum: 1 }\r\n                                    }\r\n                                }\r\n                            ]\r\n                        }\r\n                    }\r\n\r\n                ]\r\n            );\r\n\r\n\r\n            if (getOrderExecuted[0].exchangeRate.length <= 0) {\r\n\r\n                let temp = {\r\n                    pairId: getPairs[i].id,\r\n                    trade: 0\r\n                };\r\n\r\n                data.push(temp);\r\n\r\n            }\r\n            else {\r\n                let changeInER = getOrderExecuted[0].exchangeRate[0].first - getOrderExecuted[0].exchangeRate[0].last;\r\n\r\n                let trade = Big(getOrderExecuted[0].exchangeRate[0].first).times(getOrderExecuted[0].volume[0].volume).div(1e36).toString()\r\n\r\n                let temp = {\r\n                    pairId: getPairs[i].id,\r\n                    trade: Number(trade)\r\n                };\r\n\r\n                data.push(temp);\r\n            }\r\n\r\n        }\r\n\r\n        data = data.sort((a: any, b: any) => b.trade - a.trade)\r\n        let trandingPair: any = []\r\n\r\n        for (let i in data) {\r\n\r\n            let allPairs: ifPair = await Pair.findOne({ id: data[i].pairId, active: true }).sort({ createdAt: -1 }).lean();\r\n\r\n\r\n            let promiseTokens: any = [];\r\n\r\n            for (let i in allPairs) {\r\n\r\n                let token0 = Token.findOne({ id: allPairs.token0, active: true }).select({ name: 1, symbol: 1, decimals: 1, _id: 0, id: 1 }).lean();\r\n                let token1 = Token.findOne({ id: allPairs.token1, active: true }).select({ name: 1, symbol: 1, decimals: 1, _id: 0, id: 1 }).lean();\r\n                promiseTokens.push(token0, token1);\r\n            }\r\n\r\n            promiseTokens = await Promise.all(promiseTokens);\r\n            let token0 = promiseTokens[0];\r\n            let token1 = promiseTokens[1];\r\n            let temp = {\r\n\r\n                id: allPairs.id,\r\n                exchangeRate: allPairs.exchangeRate,\r\n                exchangeRateDecimals: allPairs.exchangeRateDecimals,\r\n                priceDiff: allPairs.priceDiff,\r\n                marginEnabeled: allPairs.marginEnabled,\r\n                minToken0Order: allPairs.minToken0Order,\r\n                tokens: [token0, token1],\r\n\r\n            };\r\n            trandingPair.push(temp);\r\n        }\r\n\r\n        return res.status(200).send({ status: true, data: trandingPair });\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getPairTradingStatus\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2c2ac10250c57d96d73355d7c9054c32dedcae78","contentHash":"c61bc1e433c3c88cb730310ae3b60b574dbef2926f77a567465480c14440c733"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\userRoute.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\userRoute.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":25},"end":{"line":7,"column":70}},"5":{"start":{"line":8,"column":25},"end":{"line":8,"column":70}},"6":{"start":{"line":9,"column":23},"end":{"line":9,"column":66}},"7":{"start":{"line":10,"column":23},"end":{"line":10,"column":66}},"8":{"start":{"line":11,"column":15},"end":{"line":11,"column":41}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":85}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":86}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":88}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":91}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/userRoute.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/userRoute.ts"],"names":[],"mappings":";;;;;AAAA,sDAA+B;AAC/B,uEAA2E;AAC3E,uEAAuE;AACvE,mEAAuE;AACvE,mEAAuE;AACvE,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAGhC,MAAM,CAAC,GAAG,CAAC,oCAAoC,EAAE,kCAAmB,CAAC,CAAC,CAAA,IAAI;AAC1E,MAAM,CAAC,GAAG,CAAC,qCAAqC,EAAE,kCAAmB,CAAC,CAAC,CAAA,IAAI;AAC3E,MAAM,CAAC,GAAG,CAAC,uCAAuC,EAAE,kCAAiB,CAAC,CAAC,CAAA,IAAI;AAC3E,MAAM,CAAC,GAAG,CAAC,sCAAsC,EAAE,sCAAqB,CAAC,CAAC,CAAA,IAAI;AAK9E,kBAAe,MAAM,CAAC","sourcesContent":["import express  from \"express\";\r\nimport { getUserInOrderBalance } from \"../controllers/user/inOrderBalance\";\r\nimport { getOrderCancelled } from \"../controllers/user/orderCancelled\";\r\nimport { getUserOrderHistory } from \"../controllers/user/orderHistory\";\r\nimport { getUserPlacedOrders } from \"../controllers/user/placedOrders\";\r\nconst router = express.Router();\r\n\r\n\r\nrouter.get(\"/orders/placed/:maker/pair/:pairId\", getUserPlacedOrders);//ok\r\nrouter.get(\"/orders/history/:taker/pair/:pairId\", getUserOrderHistory);//ok\r\nrouter.get(\"/orders/cancelled/:maker/pair/:pairId\", getOrderCancelled);//ok\r\nrouter.get(\"/inorder/balance/:maker/token/:token\", getUserInOrderBalance);//ok\r\n\r\n\r\n\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"00d01c8349131569f6bb3c6cbe514a2af815a919","contentHash":"7fe55862db7b260f9a32b278ba44b2bdba10dc3d576d198bd34304003cf4a833"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\inOrderBalance.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\inOrderBalance.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":39}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":41,"column":4},"end":{"line":66,"column":7}},"42":{"start":{"line":42,"column":8},"end":{"line":65,"column":9}},"43":{"start":{"line":43,"column":24},"end":{"line":43,"column":101}},"44":{"start":{"line":44,"column":26},"end":{"line":44,"column":43}},"45":{"start":{"line":45,"column":24},"end":{"line":45,"column":101}},"46":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"47":{"start":{"line":47,"column":16},"end":{"line":47,"column":105}},"48":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"49":{"start":{"line":50,"column":16},"end":{"line":50,"column":107}},"50":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"51":{"start":{"line":53,"column":16},"end":{"line":53,"column":105}},"52":{"start":{"line":55,"column":30},"end":{"line":55,"column":171}},"53":{"start":{"line":56,"column":12},"end":{"line":58,"column":13}},"54":{"start":{"line":57,"column":16},"end":{"line":57,"column":78}},"55":{"start":{"line":59,"column":12},"end":{"line":59,"column":77}},"56":{"start":{"line":62,"column":12},"end":{"line":62,"column":43}},"57":{"start":{"line":63,"column":12},"end":{"line":63,"column":65}},"58":{"start":{"line":64,"column":12},"end":{"line":64,"column":81}},"59":{"start":{"line":68,"column":0},"end":{"line":68,"column":54}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getUserInOrderBalance","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":30}},"loc":{"start":{"line":39,"column":41},"end":{"line":67,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":66,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":101}},"type":"cond-expr","locations":[{"start":{"line":43,"column":76},"end":{"line":43,"column":82}},{"start":{"line":43,"column":85},"end":{"line":43,"column":101}}],"line":43},"22":{"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":73}},"type":"binary-expr","locations":[{"start":{"line":43,"column":24},"end":{"line":43,"column":56}},{"start":{"line":43,"column":60},"end":{"line":43,"column":73}}],"line":43},"23":{"loc":{"start":{"line":45,"column":24},"end":{"line":45,"column":101}},"type":"cond-expr","locations":[{"start":{"line":45,"column":76},"end":{"line":45,"column":82}},{"start":{"line":45,"column":85},"end":{"line":45,"column":101}}],"line":45},"24":{"loc":{"start":{"line":45,"column":24},"end":{"line":45,"column":73}},"type":"binary-expr","locations":[{"start":{"line":45,"column":24},"end":{"line":45,"column":56}},{"start":{"line":45,"column":60},"end":{"line":45,"column":73}}],"line":45},"25":{"loc":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},{"start":{"line":46,"column":12},"end":{"line":48,"column":13}}],"line":46},"26":{"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},{"start":{"line":49,"column":12},"end":{"line":51,"column":13}}],"line":49},"27":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52},"28":{"loc":{"start":{"line":56,"column":12},"end":{"line":58,"column":13}},"type":"if","locations":[{"start":{"line":56,"column":12},"end":{"line":58,"column":13}},{"start":{"line":56,"column":12},"end":{"line":58,"column":13}}],"line":56}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/inOrderBalance.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/inOrderBalance.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,oCAAmC;AACnC,4DAAyD;AAIzD,SAAsB,qBAAqB,CAAC,GAAQ,EAAE,GAAQ;;;QAC1D,IAAI;YAEA,IAAI,KAAK,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,KAAK,0CAAE,WAAW,EAAE,CAAC;YACpD,IAAI,OAAO,GAAW,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YACxC,IAAI,KAAK,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,KAAK,0CAAE,WAAW,EAAE,CAAC;YAEpD,IAAI,CAAC,KAAK,EAAE;gBACR,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,KAAK,EAAE,CAAC,CAAC;aAC7E;YAED,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YAED,IAAI,CAAC,KAAK,EAAE;gBACR,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,KAAK,EAAE,CAAC,CAAC;aAC7E;YAED,IAAI,WAAW,GAAU,MAAM,SAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAClK,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBAExB,WAAW,CAAC,CAAC,CAAC,CAAC,cAAc,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC;aACjE;YACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;SAEpE;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;YACrD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;;CACJ;AAhCD,sDAgCC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { User } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\n\r\n\r\n\r\nexport async function getUserInOrderBalance(req: any, res: any) {\r\n    try {\r\n\r\n        let token: string = req.params.token?.toLowerCase();\r\n        let chainId: string = req.query.chainId;\r\n        let maker: string = req.params.maker?.toLowerCase();\r\n\r\n        if (!token) {\r\n            return res.status(400).send({ status: false, error: errorMessage.token });\r\n        }\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n\r\n        if (!maker) {\r\n            return res.status(400).send({ status: false, error: errorMessage.maker });\r\n        }\r\n\r\n        let userInOrder: any[] = await User.find({ token: token, id: maker, chainId: chainId }).select({ _id: 0, __v: 0, createdAt: 0, updatedAt: 0, balance: 0 }).lean();\r\n        if (userInOrder.length > 0) {\r\n\r\n            userInOrder[0].inOrderBalance = userInOrder[0].inOrderBalance;\r\n        }\r\n        return res.status(200).send({ status: true, data: userInOrder });\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getMatchedMarketOrders\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"987885a4bf5057bd7d6034e6a6c3c096242b3c1b","contentHash":"083c994cf25453431375b7750eff17b6958571ce497428816d6058843ef69ca8"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\orderCancelled.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\orderCancelled.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":35}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":41,"column":4},"end":{"line":63,"column":7}},"42":{"start":{"line":42,"column":8},"end":{"line":62,"column":9}},"43":{"start":{"line":43,"column":25},"end":{"line":43,"column":103}},"44":{"start":{"line":44,"column":24},"end":{"line":44,"column":101}},"45":{"start":{"line":45,"column":26},"end":{"line":45,"column":43}},"46":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"47":{"start":{"line":47,"column":16},"end":{"line":47,"column":105}},"48":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"49":{"start":{"line":50,"column":16},"end":{"line":50,"column":106}},"50":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"51":{"start":{"line":53,"column":16},"end":{"line":53,"column":107}},"52":{"start":{"line":55,"column":39},"end":{"line":55,"column":237}},"53":{"start":{"line":56,"column":12},"end":{"line":56,"column":86}},"54":{"start":{"line":59,"column":12},"end":{"line":59,"column":43}},"55":{"start":{"line":60,"column":12},"end":{"line":60,"column":65}},"56":{"start":{"line":61,"column":12},"end":{"line":61,"column":81}},"57":{"start":{"line":65,"column":0},"end":{"line":65,"column":46}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getOrderCancelled","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":26}},"loc":{"start":{"line":39,"column":37},"end":{"line":64,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":63,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":25},"end":{"line":43,"column":103}},"type":"cond-expr","locations":[{"start":{"line":43,"column":78},"end":{"line":43,"column":84}},{"start":{"line":43,"column":87},"end":{"line":43,"column":103}}],"line":43},"22":{"loc":{"start":{"line":43,"column":25},"end":{"line":43,"column":75}},"type":"binary-expr","locations":[{"start":{"line":43,"column":25},"end":{"line":43,"column":58}},{"start":{"line":43,"column":62},"end":{"line":43,"column":75}}],"line":43},"23":{"loc":{"start":{"line":44,"column":24},"end":{"line":44,"column":101}},"type":"cond-expr","locations":[{"start":{"line":44,"column":76},"end":{"line":44,"column":82}},{"start":{"line":44,"column":85},"end":{"line":44,"column":101}}],"line":44},"24":{"loc":{"start":{"line":44,"column":24},"end":{"line":44,"column":73}},"type":"binary-expr","locations":[{"start":{"line":44,"column":24},"end":{"line":44,"column":56}},{"start":{"line":44,"column":60},"end":{"line":44,"column":73}}],"line":44},"25":{"loc":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},{"start":{"line":46,"column":12},"end":{"line":48,"column":13}}],"line":46},"26":{"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},{"start":{"line":49,"column":12},"end":{"line":51,"column":13}}],"line":49},"27":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":3,"26":3,"27":3,"28":3,"29":3,"30":0,"31":0,"32":0,"33":0,"34":6,"35":3,"36":1,"37":1,"38":1,"39":1,"40":1,"41":3,"42":3,"43":3,"44":3,"45":3,"46":3,"47":0,"48":3,"49":0,"50":3,"51":0,"52":3,"53":3,"54":0,"55":0,"56":0,"57":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":3,"7":3,"8":3,"9":3,"10":3,"11":0,"12":6,"13":3,"14":3},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,3],"18":[3,3],"19":[3,3],"20":[3,3],"21":[0,3],"22":[3,3],"23":[0,3],"24":[3,3],"25":[0,3],"26":[0,3],"27":[0,3]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/orderCancelled.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/orderCancelled.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,oCAAoC;AACpC,4DAAyD;AAMzD,SAAsB,iBAAiB,CAAC,GAAQ,EAAE,GAAQ;;;QACtD,IAAI;YACA,IAAI,MAAM,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,MAAM,0CAAE,WAAW,EAAE,CAAC;YACtD,IAAI,KAAK,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,KAAK,0CAAE,WAAW,EAAE,CAAC;YACpD,IAAI,OAAO,GAAW,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YAExC,IAAI,CAAC,KAAK,EAAE;gBACR,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,KAAK,EAAE,CAAC,CAAC;aAC7E;YAED,IAAI,CAAC,MAAM,EAAE;gBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,MAAM,EAAE,CAAC,CAAC;aAC9E;YAED,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YACD,IAAI,oBAAoB,GAAG,MAAM,UAAK,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,cAAc,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,aAAa,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAE7N,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,oBAAoB,EAAE,CAAC,CAAC;SAC7E;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,gCAAgC,EAAE,KAAK,CAAC,CAAC;YACrD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;;CACJ;AA1BD,8CA0BC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { Order } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\n\r\n\r\n\r\n\r\n\r\nexport async function getOrderCancelled(req: any, res: any) {\r\n    try {\r\n        let pairId: string = req.params.pairId?.toLowerCase();\r\n        let maker: string = req.params.maker?.toLowerCase();\r\n        let chainId: string = req.query.chainId;\r\n\r\n        if (!maker) {\r\n            return res.status(400).send({ status: false, error: errorMessage.maker });\r\n        }\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n        let getOrderCancelledDoc = await Order.find({ maker: maker, pair: pairId, chainId, cancelled: true }).sort({ blockTimestamp: -1, createdAt: -1 }).select({ balanceAmount: 1, exchangeRate: 1, orderType: 1, _id: 0 }).lean();\r\n\r\n        return res.status(200).send({ status: true, data: getOrderCancelledDoc });\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getMatchedMarketOrders\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3f33dbf10044b07641b864a66d069a8476942350","contentHash":"30fc0c86266fced777d642f76f1349eac6baffd43be1ec0fc792b48d86aa7dcb"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\orderHistory.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\orderHistory.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":37}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":41,"column":4},"end":{"line":63,"column":7}},"42":{"start":{"line":42,"column":8},"end":{"line":62,"column":9}},"43":{"start":{"line":43,"column":24},"end":{"line":43,"column":101}},"44":{"start":{"line":44,"column":25},"end":{"line":44,"column":103}},"45":{"start":{"line":45,"column":26},"end":{"line":45,"column":43}},"46":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"47":{"start":{"line":47,"column":16},"end":{"line":47,"column":105}},"48":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"49":{"start":{"line":50,"column":16},"end":{"line":50,"column":106}},"50":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"51":{"start":{"line":53,"column":16},"end":{"line":53,"column":107}},"52":{"start":{"line":55,"column":36},"end":{"line":55,"column":241}},"53":{"start":{"line":56,"column":12},"end":{"line":56,"column":81}},"54":{"start":{"line":59,"column":12},"end":{"line":59,"column":43}},"55":{"start":{"line":60,"column":12},"end":{"line":60,"column":62}},"56":{"start":{"line":61,"column":12},"end":{"line":61,"column":81}},"57":{"start":{"line":65,"column":0},"end":{"line":65,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getUserOrderHistory","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":28}},"loc":{"start":{"line":39,"column":39},"end":{"line":64,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":63,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":101}},"type":"cond-expr","locations":[{"start":{"line":43,"column":76},"end":{"line":43,"column":82}},{"start":{"line":43,"column":85},"end":{"line":43,"column":101}}],"line":43},"22":{"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":73}},"type":"binary-expr","locations":[{"start":{"line":43,"column":24},"end":{"line":43,"column":56}},{"start":{"line":43,"column":60},"end":{"line":43,"column":73}}],"line":43},"23":{"loc":{"start":{"line":44,"column":25},"end":{"line":44,"column":103}},"type":"cond-expr","locations":[{"start":{"line":44,"column":78},"end":{"line":44,"column":84}},{"start":{"line":44,"column":87},"end":{"line":44,"column":103}}],"line":44},"24":{"loc":{"start":{"line":44,"column":25},"end":{"line":44,"column":75}},"type":"binary-expr","locations":[{"start":{"line":44,"column":25},"end":{"line":44,"column":58}},{"start":{"line":44,"column":62},"end":{"line":44,"column":75}}],"line":44},"25":{"loc":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},{"start":{"line":46,"column":12},"end":{"line":48,"column":13}}],"line":46},"26":{"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},{"start":{"line":49,"column":12},"end":{"line":51,"column":13}}],"line":49},"27":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":0,"48":1,"49":0,"50":1,"51":0,"52":1,"53":1,"54":0,"55":0,"56":0,"57":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":2,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,1],"18":[1,1],"19":[1,1],"20":[1,1],"21":[0,1],"22":[1,1],"23":[0,1],"24":[1,1],"25":[0,1],"26":[0,1],"27":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/orderHistory.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/orderHistory.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,qDAAuC;AACvC,oCAA4C;AAC5C,4DAAyD;AAMzD,SAAsB,mBAAmB,CAAC,GAAQ,EAAE,GAAQ;;;QACxD,IAAI;YAEA,IAAI,KAAK,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,KAAK,0CAAE,WAAW,EAAE,CAAC;YACpD,IAAI,MAAM,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,MAAM,0CAAE,WAAW,EAAE,CAAC;YACtD,IAAI,OAAO,GAAW,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YACxC,IAAI,CAAC,KAAK,EAAE;gBACR,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,KAAK,EAAE,CAAC,CAAC;aAC7E;YAED,IAAI,CAAC,MAAM,EAAE;gBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,MAAM,EAAE,CAAC,CAAC;aAC9E;YAED,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YACD,MAAM,eAAe,GAAG,MAAM,kBAAa,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,cAAc,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAEjO,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,eAAe,EAAE,CAAC,CAAC;SACxE;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;YAClD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;;CACJ;AA1BD,kDA0BC","sourcesContent":["\r\n\r\nimport * as sentry from \"@sentry/node\";\r\nimport { OrderExecuted } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\n\r\n\r\n\r\n\r\n\r\nexport async function getUserOrderHistory(req: any, res: any) {\r\n    try {\r\n\r\n        let taker: string = req.params.taker?.toLowerCase();\r\n        let pairId: string = req.params.pairId?.toLowerCase();\r\n        let chainId: string = req.query.chainId;\r\n        if (!taker) {\r\n            return res.status(400).send({ status: false, error: errorMessage.taker });\r\n        }\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n        const getOrderHistory = await OrderExecuted.find({ taker: taker, pair: pairId, chainId: chainId }).sort({ blockTimestamp: -1, createdAt: -1 }).select({ orderType: 1, exchangeRate: 1, fillAmount: 1, _id: 0 }).limit(50).lean();\r\n\r\n        return res.status(200).send({ status: true, data: getOrderHistory });\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getUserOrderHistory\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"296cef59ec0643caf1bc9100b92380a236e3e25c","contentHash":"3bfd3d32cb42d01b1d26c486ce5cfd47e70f135a39a7e04500d7d85084acae24"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\placedOrders.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\user\\placedOrders.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":37}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":41,"column":4},"end":{"line":80,"column":7}},"42":{"start":{"line":42,"column":8},"end":{"line":79,"column":9}},"43":{"start":{"line":43,"column":24},"end":{"line":43,"column":101}},"44":{"start":{"line":44,"column":25},"end":{"line":44,"column":103}},"45":{"start":{"line":45,"column":26},"end":{"line":45,"column":43}},"46":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"47":{"start":{"line":47,"column":16},"end":{"line":47,"column":105}},"48":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"49":{"start":{"line":50,"column":16},"end":{"line":50,"column":106}},"50":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"51":{"start":{"line":53,"column":16},"end":{"line":53,"column":107}},"52":{"start":{"line":55,"column":35},"end":{"line":55,"column":205}},"53":{"start":{"line":56,"column":23},"end":{"line":72,"column":14}},"54":{"start":{"line":57,"column":16},"end":{"line":71,"column":18}},"55":{"start":{"line":73,"column":12},"end":{"line":73,"column":70}},"56":{"start":{"line":76,"column":12},"end":{"line":76,"column":43}},"57":{"start":{"line":77,"column":12},"end":{"line":77,"column":62}},"58":{"start":{"line":78,"column":12},"end":{"line":78,"column":81}},"59":{"start":{"line":82,"column":0},"end":{"line":82,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getUserPlacedOrders","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":28}},"loc":{"start":{"line":39,"column":39},"end":{"line":81,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":80,"column":5}},"line":41},"15":{"name":"(anonymous_15)","decl":{"start":{"line":56,"column":42},"end":{"line":56,"column":43}},"loc":{"start":{"line":56,"column":53},"end":{"line":72,"column":13}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":101}},"type":"cond-expr","locations":[{"start":{"line":43,"column":76},"end":{"line":43,"column":82}},{"start":{"line":43,"column":85},"end":{"line":43,"column":101}}],"line":43},"22":{"loc":{"start":{"line":43,"column":24},"end":{"line":43,"column":73}},"type":"binary-expr","locations":[{"start":{"line":43,"column":24},"end":{"line":43,"column":56}},{"start":{"line":43,"column":60},"end":{"line":43,"column":73}}],"line":43},"23":{"loc":{"start":{"line":44,"column":25},"end":{"line":44,"column":103}},"type":"cond-expr","locations":[{"start":{"line":44,"column":78},"end":{"line":44,"column":84}},{"start":{"line":44,"column":87},"end":{"line":44,"column":103}}],"line":44},"24":{"loc":{"start":{"line":44,"column":25},"end":{"line":44,"column":75}},"type":"binary-expr","locations":[{"start":{"line":44,"column":25},"end":{"line":44,"column":58}},{"start":{"line":44,"column":62},"end":{"line":44,"column":75}}],"line":44},"25":{"loc":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"type":"if","locations":[{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},{"start":{"line":46,"column":12},"end":{"line":48,"column":13}}],"line":46},"26":{"loc":{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},"type":"if","locations":[{"start":{"line":49,"column":12},"end":{"line":51,"column":13}},{"start":{"line":49,"column":12},"end":{"line":51,"column":13}}],"line":49},"27":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":0,"48":1,"49":0,"50":1,"51":0,"52":1,"53":1,"54":0,"55":1,"56":0,"57":0,"58":0,"59":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":2,"13":1,"14":1,"15":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,1],"18":[1,1],"19":[1,1],"20":[1,1],"21":[0,1],"22":[1,1],"23":[0,1],"24":[1,1],"25":[0,1],"26":[0,1],"27":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/placedOrders.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/user/placedOrders.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,oCAAmC;AACnC,4DAAyD;AAEzD,SAAsB,mBAAmB,CAAC,GAAQ,EAAE,GAAQ;;;QAExD,IAAI;YAEA,IAAI,KAAK,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,KAAK,0CAAE,WAAW,EAAE,CAAC;YACpD,IAAI,MAAM,GAAW,MAAA,GAAG,CAAC,MAAM,CAAC,MAAM,0CAAE,WAAW,EAAE,CAAC;YACtD,IAAI,OAAO,GAAW,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC;YACxC,IAAI,CAAC,KAAK,EAAE;gBACR,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,KAAK,EAAE,CAAC,CAAC;aAC7E;YAED,IAAI,CAAC,MAAM,EAAE;gBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,MAAM,EAAE,CAAC,CAAC;aAC9E;YAED,IAAI,CAAC,OAAO,EAAE;gBACV,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,2BAAY,CAAC,OAAO,EAAE,CAAC,CAAC;aAC/E;YAED,MAAM,cAAc,GAAG,MAAM,UAAK,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,cAAc,EAAE,CAAC,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAE7L,IAAI,IAAI,GAAG,cAAc,CAAC,GAAG,CAAC,CAAC,KAAU,EAAE,EAAE;gBACzC,OAAO;oBACH,SAAS,EAAE,KAAK,CAAC,SAAS;oBAC1B,EAAE,EAAE,KAAK,CAAC,EAAE;oBACZ,KAAK,EAAE;wBACH,KAAK,EAAE,KAAK,CAAC,KAAK;wBAClB,MAAM,EAAE,KAAK,CAAC,MAAM;wBACpB,MAAM,EAAE,KAAK,CAAC,MAAM;wBACpB,MAAM,EAAE,KAAK,CAAC,MAAM;wBACpB,SAAS,EAAE,KAAK,CAAC,SAAS;wBAC1B,IAAI,EAAE,KAAK,CAAC,IAAI;wBAChB,YAAY,EAAE,KAAK,CAAC,YAAY;wBAChC,WAAW,EAAE,KAAK,CAAC,WAAW;wBAC9B,KAAK,EAAE,KAAK,CAAC,KAAK;qBACrB;iBACJ,CAAA;YACL,CAAC,CAAC,CAAC;YAIH,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;SAC7D;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;YAClD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;;CAEJ;AAjDD,kDAiDC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { Order} from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\n\r\nexport async function getUserPlacedOrders(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        let maker: string = req.params.maker?.toLowerCase();\r\n        let pairId: string = req.params.pairId?.toLowerCase();\r\n        let chainId: string = req.query.chainId;\r\n        if (!maker) {\r\n            return res.status(400).send({ status: false, error: errorMessage.maker });\r\n        }\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.pairId });\r\n        }\r\n\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n\r\n        const getMakerOrders = await Order.find({ maker: maker, pair: pairId, deleted: false, cancelled: false, active: true, chainId: chainId }).sort({ blockTimestamp: -1, createdAt: -1 }).lean();\r\n\r\n        let data = getMakerOrders.map((order: any) => {\r\n            return {\r\n                signature: order.signature,\r\n                id: order.id,\r\n                value: {\r\n                    maker: order.maker,\r\n                    token0: order.token0,\r\n                    token1: order.token1,\r\n                    amount: order.amount,\r\n                    orderType: order.orderType,\r\n                    salt: order.salt,\r\n                    exchangeRate: order.exchangeRate,\r\n                    borrowLimit: order.borrowLimit,\r\n                    loops: order.loops\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n\r\n        return res.status(200).send({ status: true, data: data });\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getUserPlacedOrders\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"351387a697254bff3b12180875ddbb34afcb7432","contentHash":"ca59b5ac9d6471f9e433046725f305013377c6fe6c80c9040f2f47678fe3fc10"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\chartRoute.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\chartRoute.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":17},"end":{"line":7,"column":55}},"5":{"start":{"line":8,"column":20},"end":{"line":8,"column":61}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":41}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":52}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":45}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/chartRoute.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/chartRoute.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,wDAAqD;AACrD,8DAA2D;AAI3D,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,GAAG,CAAC,sBAAsB,EAAE,eAAM,CAAC,CAAC;AAC3C,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,qBAAS,CAAC,CAAA;AAGhC,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport { getBar } from \"../controllers/chart/getBar\";\r\nimport { getSymbol } from \"../controllers/chart/getSymbol\";\r\n\r\n\r\n\r\nconst router = express.Router();\r\n\r\nrouter.get(\"/bar/history/:ticker\", getBar); \r\nrouter.get(\"/symbol\", getSymbol)\r\n\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ebb1e97b975a1493503b5292e26b5bdab7e09732","contentHash":"fb58ae9ae1877cd5bef1a1452956d07ef8f5302f5ab5b46a4d221b6831f3943d"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\chart\\getBar.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\chart\\getBar.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":24}},"40":{"start":{"line":39,"column":17},"end":{"line":39,"column":51}},"41":{"start":{"line":40,"column":15},"end":{"line":40,"column":52}},"42":{"start":{"line":41,"column":13},"end":{"line":41,"column":35}},"43":{"start":{"line":42,"column":23},"end":{"line":42,"column":59}},"44":{"start":{"line":45,"column":4},"end":{"line":273,"column":7}},"45":{"start":{"line":46,"column":8},"end":{"line":272,"column":9}},"46":{"start":{"line":47,"column":25},"end":{"line":47,"column":103}},"47":{"start":{"line":48,"column":27},"end":{"line":48,"column":45}},"48":{"start":{"line":49,"column":26},"end":{"line":49,"column":34}},"49":{"start":{"line":50,"column":23},"end":{"line":50,"column":52}},"50":{"start":{"line":51,"column":21},"end":{"line":51,"column":48}},"51":{"start":{"line":52,"column":35},"end":{"line":52,"column":61}},"52":{"start":{"line":54,"column":12},"end":{"line":57,"column":13}},"53":{"start":{"line":55,"column":16},"end":{"line":55,"column":42}},"54":{"start":{"line":56,"column":16},"end":{"line":56,"column":38}},"55":{"start":{"line":58,"column":34},"end":{"line":58,"column":76}},"56":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"57":{"start":{"line":60,"column":16},"end":{"line":60,"column":108}},"58":{"start":{"line":62,"column":30},"end":{"line":70,"column":13}},"59":{"start":{"line":71,"column":33},"end":{"line":71,"column":59}},"60":{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},"61":{"start":{"line":73,"column":16},"end":{"line":73,"column":32}},"62":{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},"63":{"start":{"line":79,"column":16},"end":{"line":79,"column":106}},"64":{"start":{"line":81,"column":12},"end":{"line":83,"column":13}},"65":{"start":{"line":82,"column":16},"end":{"line":82,"column":107}},"66":{"start":{"line":84,"column":23},"end":{"line":84,"column":195}},"67":{"start":{"line":85,"column":12},"end":{"line":119,"column":13}},"68":{"start":{"line":86,"column":34},"end":{"line":86,"column":103}},"69":{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},"70":{"start":{"line":88,"column":20},"end":{"line":88,"column":110}},"71":{"start":{"line":90,"column":32},"end":{"line":90,"column":170}},"72":{"start":{"line":91,"column":41},"end":{"line":91,"column":43}},"73":{"start":{"line":92,"column":16},"end":{"line":94,"column":17}},"74":{"start":{"line":93,"column":20},"end":{"line":93,"column":76}},"75":{"start":{"line":95,"column":26},"end":{"line":95,"column":48}},"76":{"start":{"line":96,"column":26},"end":{"line":96,"column":48}},"77":{"start":{"line":97,"column":27},"end":{"line":97,"column":49}},"78":{"start":{"line":98,"column":28},"end":{"line":98,"column":50}},"79":{"start":{"line":99,"column":36},"end":{"line":99,"column":40}},"80":{"start":{"line":100,"column":16},"end":{"line":114,"column":17}},"81":{"start":{"line":101,"column":31},"end":{"line":108,"column":21}},"82":{"start":{"line":109,"column":20},"end":{"line":109,"column":50}},"83":{"start":{"line":110,"column":20},"end":{"line":110,"column":67}},"84":{"start":{"line":111,"column":20},"end":{"line":113,"column":21}},"85":{"start":{"line":112,"column":24},"end":{"line":112,"column":30}},"86":{"start":{"line":115,"column":29},"end":{"line":117,"column":17}},"87":{"start":{"line":118,"column":16},"end":{"line":118,"column":76}},"88":{"start":{"line":120,"column":37},"end":{"line":120,"column":39}},"89":{"start":{"line":121,"column":22},"end":{"line":121,"column":72}},"90":{"start":{"line":122,"column":22},"end":{"line":122,"column":57}},"91":{"start":{"line":123,"column":23},"end":{"line":123,"column":43}},"92":{"start":{"line":124,"column":24},"end":{"line":124,"column":44}},"93":{"start":{"line":125,"column":32},"end":{"line":125,"column":54}},"94":{"start":{"line":126,"column":28},"end":{"line":126,"column":166}},"95":{"start":{"line":127,"column":12},"end":{"line":133,"column":13}},"96":{"start":{"line":128,"column":16},"end":{"line":128,"column":45}},"97":{"start":{"line":129,"column":16},"end":{"line":129,"column":45}},"98":{"start":{"line":130,"column":16},"end":{"line":130,"column":46}},"99":{"start":{"line":131,"column":16},"end":{"line":131,"column":47}},"100":{"start":{"line":132,"column":16},"end":{"line":132,"column":37}},"101":{"start":{"line":134,"column":25},"end":{"line":134,"column":26}},"102":{"start":{"line":135,"column":12},"end":{"line":262,"column":13}},"103":{"start":{"line":135,"column":25},"end":{"line":135,"column":26}},"104":{"start":{"line":136,"column":16},"end":{"line":261,"column":17}},"105":{"start":{"line":138,"column":20},"end":{"line":140,"column":21}},"106":{"start":{"line":139,"column":24},"end":{"line":139,"column":51}},"107":{"start":{"line":141,"column":20},"end":{"line":143,"column":21}},"108":{"start":{"line":142,"column":24},"end":{"line":142,"column":51}},"109":{"start":{"line":144,"column":20},"end":{"line":144,"column":49}},"110":{"start":{"line":145,"column":20},"end":{"line":145,"column":95}},"111":{"start":{"line":146,"column":20},"end":{"line":180,"column":21}},"112":{"start":{"line":147,"column":24},"end":{"line":160,"column":25}},"113":{"start":{"line":148,"column":28},"end":{"line":148,"column":34}},"114":{"start":{"line":151,"column":39},"end":{"line":158,"column":29}},"115":{"start":{"line":159,"column":28},"end":{"line":159,"column":58}},"116":{"start":{"line":162,"column":25},"end":{"line":180,"column":21}},"117":{"start":{"line":163,"column":35},"end":{"line":170,"column":25}},"118":{"start":{"line":171,"column":24},"end":{"line":171,"column":54}},"119":{"start":{"line":172,"column":24},"end":{"line":172,"column":36}},"120":{"start":{"line":173,"column":24},"end":{"line":173,"column":36}},"121":{"start":{"line":174,"column":24},"end":{"line":174,"column":37}},"122":{"start":{"line":175,"column":24},"end":{"line":175,"column":38}},"123":{"start":{"line":176,"column":24},"end":{"line":176,"column":71}},"124":{"start":{"line":177,"column":24},"end":{"line":177,"column":49}},"125":{"start":{"line":178,"column":24},"end":{"line":178,"column":37}},"126":{"start":{"line":179,"column":24},"end":{"line":179,"column":28}},"127":{"start":{"line":184,"column":31},"end":{"line":191,"column":21}},"128":{"start":{"line":192,"column":20},"end":{"line":192,"column":50}},"129":{"start":{"line":193,"column":20},"end":{"line":193,"column":67}},"130":{"start":{"line":195,"column":20},"end":{"line":226,"column":21}},"131":{"start":{"line":196,"column":35},"end":{"line":203,"column":25}},"132":{"start":{"line":204,"column":24},"end":{"line":204,"column":54}},"133":{"start":{"line":205,"column":24},"end":{"line":205,"column":36}},"134":{"start":{"line":206,"column":24},"end":{"line":206,"column":36}},"135":{"start":{"line":207,"column":24},"end":{"line":207,"column":37}},"136":{"start":{"line":208,"column":24},"end":{"line":208,"column":38}},"137":{"start":{"line":209,"column":24},"end":{"line":209,"column":71}},"138":{"start":{"line":210,"column":24},"end":{"line":210,"column":37}},"139":{"start":{"line":211,"column":24},"end":{"line":211,"column":28}},"140":{"start":{"line":215,"column":24},"end":{"line":215,"column":36}},"141":{"start":{"line":216,"column":24},"end":{"line":218,"column":25}},"142":{"start":{"line":217,"column":28},"end":{"line":217,"column":55}},"143":{"start":{"line":219,"column":24},"end":{"line":219,"column":36}},"144":{"start":{"line":220,"column":24},"end":{"line":222,"column":25}},"145":{"start":{"line":221,"column":28},"end":{"line":221,"column":55}},"146":{"start":{"line":223,"column":24},"end":{"line":223,"column":37}},"147":{"start":{"line":224,"column":24},"end":{"line":224,"column":53}},"148":{"start":{"line":225,"column":24},"end":{"line":225,"column":52}},"149":{"start":{"line":227,"column":20},"end":{"line":260,"column":21}},"150":{"start":{"line":228,"column":24},"end":{"line":241,"column":25}},"151":{"start":{"line":229,"column":28},"end":{"line":229,"column":34}},"152":{"start":{"line":232,"column":39},"end":{"line":239,"column":29}},"153":{"start":{"line":240,"column":28},"end":{"line":240,"column":58}},"154":{"start":{"line":243,"column":25},"end":{"line":260,"column":21}},"155":{"start":{"line":244,"column":35},"end":{"line":251,"column":25}},"156":{"start":{"line":252,"column":24},"end":{"line":252,"column":54}},"157":{"start":{"line":253,"column":24},"end":{"line":253,"column":36}},"158":{"start":{"line":254,"column":24},"end":{"line":254,"column":36}},"159":{"start":{"line":255,"column":24},"end":{"line":255,"column":37}},"160":{"start":{"line":256,"column":24},"end":{"line":256,"column":38}},"161":{"start":{"line":257,"column":24},"end":{"line":257,"column":71}},"162":{"start":{"line":258,"column":24},"end":{"line":258,"column":37}},"163":{"start":{"line":259,"column":24},"end":{"line":259,"column":28}},"164":{"start":{"line":263,"column":25},"end":{"line":265,"column":13}},"165":{"start":{"line":266,"column":12},"end":{"line":266,"column":72}},"166":{"start":{"line":269,"column":12},"end":{"line":269,"column":43}},"167":{"start":{"line":270,"column":12},"end":{"line":270,"column":49}},"168":{"start":{"line":271,"column":12},"end":{"line":271,"column":81}},"169":{"start":{"line":275,"column":0},"end":{"line":275,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"getBar","decl":{"start":{"line":43,"column":9},"end":{"line":43,"column":15}},"loc":{"start":{"line":43,"column":26},"end":{"line":274,"column":1}},"line":43},"15":{"name":"(anonymous_15)","decl":{"start":{"line":45,"column":43},"end":{"line":45,"column":44}},"loc":{"start":{"line":45,"column":56},"end":{"line":273,"column":5}},"line":45}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":47,"column":25},"end":{"line":47,"column":103}},"type":"cond-expr","locations":[{"start":{"line":47,"column":78},"end":{"line":47,"column":84}},{"start":{"line":47,"column":87},"end":{"line":47,"column":103}}],"line":47},"25":{"loc":{"start":{"line":47,"column":25},"end":{"line":47,"column":75}},"type":"binary-expr","locations":[{"start":{"line":47,"column":25},"end":{"line":47,"column":58}},{"start":{"line":47,"column":62},"end":{"line":47,"column":75}}],"line":47},"26":{"loc":{"start":{"line":54,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":57,"column":13}},{"start":{"line":54,"column":12},"end":{"line":57,"column":13}}],"line":54},"27":{"loc":{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},"type":"if","locations":[{"start":{"line":59,"column":12},"end":{"line":61,"column":13}},{"start":{"line":59,"column":12},"end":{"line":61,"column":13}}],"line":59},"28":{"loc":{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},"type":"if","locations":[{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},{"start":{"line":72,"column":12},"end":{"line":74,"column":13}}],"line":72},"29":{"loc":{"start":{"line":72,"column":16},"end":{"line":72,"column":44}},"type":"binary-expr","locations":[{"start":{"line":72,"column":16},"end":{"line":72,"column":33}},{"start":{"line":72,"column":37},"end":{"line":72,"column":44}}],"line":72},"30":{"loc":{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},"type":"if","locations":[{"start":{"line":78,"column":12},"end":{"line":80,"column":13}},{"start":{"line":78,"column":12},"end":{"line":80,"column":13}}],"line":78},"31":{"loc":{"start":{"line":81,"column":12},"end":{"line":83,"column":13}},"type":"if","locations":[{"start":{"line":81,"column":12},"end":{"line":83,"column":13}},{"start":{"line":81,"column":12},"end":{"line":83,"column":13}}],"line":81},"32":{"loc":{"start":{"line":85,"column":12},"end":{"line":119,"column":13}},"type":"if","locations":[{"start":{"line":85,"column":12},"end":{"line":119,"column":13}},{"start":{"line":85,"column":12},"end":{"line":119,"column":13}}],"line":85},"33":{"loc":{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},"type":"if","locations":[{"start":{"line":87,"column":16},"end":{"line":89,"column":17}},{"start":{"line":87,"column":16},"end":{"line":89,"column":17}}],"line":87},"34":{"loc":{"start":{"line":92,"column":16},"end":{"line":94,"column":17}},"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":94,"column":17}},{"start":{"line":92,"column":16},"end":{"line":94,"column":17}}],"line":92},"35":{"loc":{"start":{"line":111,"column":20},"end":{"line":113,"column":21}},"type":"if","locations":[{"start":{"line":111,"column":20},"end":{"line":113,"column":21}},{"start":{"line":111,"column":20},"end":{"line":113,"column":21}}],"line":111},"36":{"loc":{"start":{"line":127,"column":12},"end":{"line":133,"column":13}},"type":"if","locations":[{"start":{"line":127,"column":12},"end":{"line":133,"column":13}},{"start":{"line":127,"column":12},"end":{"line":133,"column":13}}],"line":127},"37":{"loc":{"start":{"line":136,"column":16},"end":{"line":261,"column":17}},"type":"if","locations":[{"start":{"line":136,"column":16},"end":{"line":261,"column":17}},{"start":{"line":136,"column":16},"end":{"line":261,"column":17}}],"line":136},"38":{"loc":{"start":{"line":138,"column":20},"end":{"line":140,"column":21}},"type":"if","locations":[{"start":{"line":138,"column":20},"end":{"line":140,"column":21}},{"start":{"line":138,"column":20},"end":{"line":140,"column":21}}],"line":138},"39":{"loc":{"start":{"line":141,"column":20},"end":{"line":143,"column":21}},"type":"if","locations":[{"start":{"line":141,"column":20},"end":{"line":143,"column":21}},{"start":{"line":141,"column":20},"end":{"line":143,"column":21}}],"line":141},"40":{"loc":{"start":{"line":146,"column":20},"end":{"line":180,"column":21}},"type":"if","locations":[{"start":{"line":146,"column":20},"end":{"line":180,"column":21}},{"start":{"line":146,"column":20},"end":{"line":180,"column":21}}],"line":146},"41":{"loc":{"start":{"line":146,"column":24},"end":{"line":146,"column":67}},"type":"binary-expr","locations":[{"start":{"line":146,"column":24},"end":{"line":146,"column":44}},{"start":{"line":146,"column":48},"end":{"line":146,"column":67}}],"line":146},"42":{"loc":{"start":{"line":147,"column":24},"end":{"line":160,"column":25}},"type":"if","locations":[{"start":{"line":147,"column":24},"end":{"line":160,"column":25}},{"start":{"line":147,"column":24},"end":{"line":160,"column":25}}],"line":147},"43":{"loc":{"start":{"line":162,"column":25},"end":{"line":180,"column":21}},"type":"if","locations":[{"start":{"line":162,"column":25},"end":{"line":180,"column":21}},{"start":{"line":162,"column":25},"end":{"line":180,"column":21}}],"line":162},"44":{"loc":{"start":{"line":162,"column":29},"end":{"line":162,"column":71}},"type":"binary-expr","locations":[{"start":{"line":162,"column":29},"end":{"line":162,"column":49}},{"start":{"line":162,"column":53},"end":{"line":162,"column":71}}],"line":162},"45":{"loc":{"start":{"line":195,"column":20},"end":{"line":226,"column":21}},"type":"if","locations":[{"start":{"line":195,"column":20},"end":{"line":226,"column":21}},{"start":{"line":195,"column":20},"end":{"line":226,"column":21}}],"line":195},"46":{"loc":{"start":{"line":216,"column":24},"end":{"line":218,"column":25}},"type":"if","locations":[{"start":{"line":216,"column":24},"end":{"line":218,"column":25}},{"start":{"line":216,"column":24},"end":{"line":218,"column":25}}],"line":216},"47":{"loc":{"start":{"line":220,"column":24},"end":{"line":222,"column":25}},"type":"if","locations":[{"start":{"line":220,"column":24},"end":{"line":222,"column":25}},{"start":{"line":220,"column":24},"end":{"line":222,"column":25}}],"line":220},"48":{"loc":{"start":{"line":227,"column":20},"end":{"line":260,"column":21}},"type":"if","locations":[{"start":{"line":227,"column":20},"end":{"line":260,"column":21}},{"start":{"line":227,"column":20},"end":{"line":260,"column":21}}],"line":227},"49":{"loc":{"start":{"line":227,"column":24},"end":{"line":227,"column":67}},"type":"binary-expr","locations":[{"start":{"line":227,"column":24},"end":{"line":227,"column":44}},{"start":{"line":227,"column":48},"end":{"line":227,"column":67}}],"line":227},"50":{"loc":{"start":{"line":228,"column":24},"end":{"line":241,"column":25}},"type":"if","locations":[{"start":{"line":228,"column":24},"end":{"line":241,"column":25}},{"start":{"line":228,"column":24},"end":{"line":241,"column":25}}],"line":228},"51":{"loc":{"start":{"line":243,"column":25},"end":{"line":260,"column":21}},"type":"if","locations":[{"start":{"line":243,"column":25},"end":{"line":260,"column":21}},{"start":{"line":243,"column":25},"end":{"line":260,"column":21}}],"line":243},"52":{"loc":{"start":{"line":243,"column":29},"end":{"line":243,"column":71}},"type":"binary-expr","locations":[{"start":{"line":243,"column":29},"end":{"line":243,"column":49}},{"start":{"line":243,"column":53},"end":{"line":243,"column":71}}],"line":243}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/chart/getBar.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/chart/getBar.ts"],"names":[],"mappings":"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","sourcesContent":["import Big from \"big.js\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { OrderExecuted, Pair } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\nimport { Interval } from \"../../helper/interface\";\r\n\r\n\r\n\r\nexport async function getBar(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        let pairId: string = req.params.ticker?.toLowerCase();\r\n        let interval: Interval = req.query.interval;\r\n        let chainId: string = \"421613\";\r\n        let from: number = Number(req.query.from) * 1000;\r\n        let to: number = Number(req.query.to) * 1000;\r\n        let firstDataRequest = req.query.firstDataRequest;\r\n        // console.log(interval);\r\n\r\n        if(firstDataRequest){\r\n            console.log(\"from\", from)\r\n            console.log(\"to\", to)\r\n        }\r\n        let intervalFromReq = [\"5\", \"15\", \"30\", \"60\", \"240\", \"1D\", \"1W\"]\r\n\r\n        if (!intervalFromReq.includes(interval)) {\r\n            return res.status(400).send({ status: false, error: errorMessage.interval })\r\n        }\r\n\r\n        let intervalMap = {\r\n            \"5\": 300000,\r\n            \"15\": 900000,\r\n            \"30\": 1800000,\r\n            \"60\": 3600000,\r\n            \"240\": 14400000,\r\n            \"1D\": 86400000,\r\n            \"1W\": 604800000\r\n        };\r\n\r\n        let intervalInMSec: number = intervalMap[`${interval}`]\r\n\r\n        if (isNaN(to) == true || to == 0 ) {\r\n            to = Date.now();\r\n        }\r\n\r\n        // if(to > Date.now()){\r\n        //     to = Date.now()\r\n        // }\r\n\r\n        if (!pairId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.ticker });\r\n        }\r\n        if (!chainId) {\r\n            return res.status(400).send({ status: false, error: errorMessage.chainId });\r\n        }\r\n\r\n        let data = await OrderExecuted.find({ pair: pairId, chainId: chainId, blockTimestamp: { $gte: Number(from), $lte: Number(to) } }).sort({ blockTimestamp: 1, createdAt: 1 }).lean();\r\n\r\n        if (data.length == 0) {\r\n\r\n            let isPairExist = await Pair.findOne({ id: pairId, chainId, active: true }).lean();\r\n\r\n            if (!isPairExist) {\r\n                return res.status(404).send({ status: false, error: errorMessage.pairId });\r\n            }\r\n\r\n            let lastOrder = await OrderExecuted.findOne({ pair: pairId, chainId: chainId, blockTimestamp: { $lt: Number(from) } }).sort({ createdAt: -1 }).lean();\r\n            let exchangeRatesTrend: any = [];\r\n\r\n            if (!lastOrder) {\r\n                return res.status(200).send({ status: true, data: [] });\r\n            }\r\n            let min = lastOrder.exchangeRate;\r\n            let max = lastOrder.exchangeRate;\r\n            let open = lastOrder.exchangeRate;\r\n            let close = lastOrder.exchangeRate;\r\n            let currTimestamp = from;\r\n\r\n            while (currTimestamp < to) {\r\n                let temp = {\r\n                    time: currTimestamp,\r\n                    open: Big(open).div(Big(10).pow(18)).toString(),\r\n                    high: Big(max).div(Big(10).pow(18)).toString(),\r\n                    close: Big(close).div(Big(10).pow(18)).toString(),\r\n                    low: Big(min).div(Big(10).pow(18)).toString(),\r\n                    volume: '0'\r\n                };\r\n                exchangeRatesTrend.push(temp);\r\n                currTimestamp = currTimestamp + intervalInMSec;\r\n                if(currTimestamp > to){\r\n                    break\r\n                }\r\n            }\r\n\r\n            let result = {\r\n                exchangeRate: exchangeRatesTrend,\r\n            };\r\n            return res.status(200).send({ status: true, data: result });\r\n\r\n        }\r\n\r\n        let exchangeRatesTrend: any = [];\r\n        let min: string = Big(Number.MAX_VALUE).toString();\r\n        let max: string = Big(0).toString();\r\n        let open: string = data[0].exchangeRate;\r\n        let close: string = data[0].exchangeRate;\r\n        let currTimestamp: number = data[0].blockTimestamp;\r\n\r\n        let lastOrder = await OrderExecuted.findOne({ pair: pairId, chainId: chainId, blockTimestamp: { $lt: Number(from) } }).sort({ createdAt: -1 }).lean();\r\n\r\n        if (lastOrder) {\r\n            min = lastOrder.exchangeRate;\r\n            max = lastOrder.exchangeRate;\r\n            open = lastOrder.exchangeRate;\r\n            close = lastOrder.exchangeRate;\r\n            currTimestamp = from;\r\n        }\r\n       \r\n        let volume: string | number = 0;\r\n\r\n        for (let i = 0; i < data.length; i++) {\r\n\r\n            if (data[i].blockTimestamp <= currTimestamp + intervalInMSec) {\r\n                // this block will mainly update the min max, open close value\r\n\r\n                if (Number(data[i].exchangeRate) > Number(max)) {\r\n                    max = data[i].exchangeRate;\r\n                }\r\n\r\n                if (Number(data[i].exchangeRate) < Number(min)) {\r\n                    min = data[i].exchangeRate;\r\n                }\r\n\r\n                close = data[i].exchangeRate;\r\n                volume = Big(volume).plus(data[i].fillAmount).toString();\r\n\r\n                if (i == data.length - 1 && currTimestamp >= to) {\r\n\r\n                    if (currTimestamp > to) {\r\n                        break;\r\n                    }\r\n                    else {\r\n                        let temp = {\r\n                            time: currTimestamp,\r\n                            open: Big(open).div(Big(10).pow(18)).toString(),\r\n                            high: Big(max).div(Big(10).pow(18)).toString(),\r\n                            close: Big(close).div(Big(10).pow(18)).toString(),\r\n                            low: Big(min).div(Big(10).pow(18)).toString(),\r\n                            volume: Big(volume).div(Big(10).pow(18)).toString()\r\n                        };\r\n                        exchangeRatesTrend.push(temp);\r\n                    }\r\n\r\n                }\r\n                else if (i == data.length - 1 && currTimestamp < to) {\r\n\r\n                    let temp = {\r\n                        time: currTimestamp,\r\n                        open: Big(open).div(Big(10).pow(18)).toString(),\r\n                        high: Big(max).div(Big(10).pow(18)).toString(),\r\n                        close: Big(close).div(Big(10).pow(18)).toString(),\r\n                        low: Big(min).div(Big(10).pow(18)).toString(),\r\n                        volume: Big(volume).div(Big(10).pow(18)).toString()\r\n                    };\r\n                    exchangeRatesTrend.push(temp);\r\n                    min = close;\r\n                    max = close;\r\n                    open = close;\r\n                    close = close;\r\n                    currTimestamp = currTimestamp + intervalInMSec;\r\n                    data[i].fillAmount = '0';\r\n                    volume= '0';\r\n                    i--;\r\n                }\r\n            }\r\n            else {\r\n\r\n                //if value exceed it will  genrate object regarding upper if block\r\n                let temp = {\r\n                    time: currTimestamp,\r\n                    open: Big(open).div(Big(10).pow(18)).toString(),\r\n                    high: Big(max).div(Big(10).pow(18)).toString(),\r\n                    close: Big(close).div(Big(10).pow(18)).toString(),\r\n                    low: Big(min).div(Big(10).pow(18)).toString(),\r\n                    volume: Big(volume).div(Big(10).pow(18)).toString()\r\n\r\n                };\r\n                exchangeRatesTrend.push(temp);\r\n\r\n                currTimestamp = currTimestamp + intervalInMSec;\r\n                // checking next block lays in next interval\r\n                if (data[i].blockTimestamp > currTimestamp + intervalInMSec) {\r\n                    let temp = {\r\n                        time: currTimestamp,\r\n                        open: Big(close).div(Big(10).pow(18)).toString(),\r\n                        high: Big(close).div(Big(10).pow(18)).toString(),\r\n                        close: Big(close).div(Big(10).pow(18)).toString(),\r\n                        low: Big(close).div(Big(10).pow(18)).toString(),\r\n                        volume: '0'\r\n                    };\r\n                    exchangeRatesTrend.push(temp);\r\n                    min = close;\r\n                    max = close;\r\n                    open = close;\r\n                    close = close;\r\n                    currTimestamp = currTimestamp + intervalInMSec;\r\n                    volume = '0';\r\n                    i--;     // as this block is not fall hence we increase the interval and call same block \r\n                }\r\n                else {\r\n                    // block fall in that interval\r\n                    max = close\r\n                    if (Number(data[i].exchangeRate) > Number(close)) {\r\n                        max = data[i].exchangeRate\r\n                    }\r\n                    min = close;\r\n                    if (Number(data[i].exchangeRate) < Number(close)) {\r\n                        min = data[i].exchangeRate\r\n                    }\r\n                    open = close;\r\n                    close = data[i].exchangeRate;\r\n                    volume = data[i].fillAmount;\r\n                }\r\n\r\n                if (i == data.length - 1 && currTimestamp >= to) {\r\n\r\n                    if (currTimestamp > to) {\r\n                        break;\r\n                    }\r\n                    else {\r\n                        let temp = {\r\n                            time: currTimestamp,\r\n                            open: Big(open).div(Big(10).pow(18)).toString(),\r\n                            high: Big(max).div(Big(10).pow(18)).toString(),\r\n                            close: Big(close).div(Big(10).pow(18)).toString(),\r\n                            low: Big(min).div(Big(10).pow(18)).toString(),\r\n                            volume: Big(volume).div(Big(10).pow(18)).toString()\r\n                        };\r\n                        exchangeRatesTrend.push(temp);\r\n                    }\r\n\r\n                }\r\n                else if (i == data.length - 1 && currTimestamp < to) {\r\n\r\n                    let temp = {\r\n                        time: currTimestamp,\r\n                        open: Big(open).div(Big(10).pow(18)).toString(),\r\n                        high: Big(max).div(Big(10).pow(18)).toString(),\r\n                        close: Big(close).div(Big(10).pow(18)).toString(),\r\n                        low: Big(min).div(Big(10).pow(18)).toString(),\r\n                        volume: Big(volume).div(Big(10).pow(18)).toString()\r\n                    };\r\n                    exchangeRatesTrend.push(temp);\r\n                    min = close;\r\n                    max = close;\r\n                    open = close;\r\n                    close = close;\r\n                    currTimestamp = currTimestamp + intervalInMSec;\r\n                    volume = '0'\r\n                    i--;\r\n                   \r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        let result = {\r\n            exchangeRate: exchangeRatesTrend,\r\n        };\r\n        return res.status(200).send({ status: true, data: result });\r\n    }\r\n\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getBar\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d099792271590dd91d9fd5bb318032385d4127cf","contentHash":"ff9608d79e2b8b7f74c0b85f7c8a766fc95d510f092f14c9589d2b1874f496a1"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\chart\\getSymbol.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\chart\\getSymbol.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":27}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":38,"column":23},"end":{"line":38,"column":59}},"41":{"start":{"line":40,"column":4},"end":{"line":58,"column":7}},"42":{"start":{"line":41,"column":8},"end":{"line":57,"column":9}},"43":{"start":{"line":42,"column":25},"end":{"line":42,"column":41}},"44":{"start":{"line":43,"column":32},"end":{"line":43,"column":96}},"45":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"46":{"start":{"line":45,"column":16},"end":{"line":45,"column":105}},"47":{"start":{"line":47,"column":23},"end":{"line":50,"column":13}},"48":{"start":{"line":51,"column":12},"end":{"line":51,"column":70}},"49":{"start":{"line":54,"column":12},"end":{"line":54,"column":43}},"50":{"start":{"line":55,"column":12},"end":{"line":55,"column":52}},"51":{"start":{"line":56,"column":12},"end":{"line":56,"column":81}},"52":{"start":{"line":60,"column":0},"end":{"line":60,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"getSymbol","decl":{"start":{"line":39,"column":9},"end":{"line":39,"column":18}},"loc":{"start":{"line":39,"column":29},"end":{"line":59,"column":1}},"line":39},"14":{"name":"(anonymous_14)","decl":{"start":{"line":40,"column":43},"end":{"line":40,"column":44}},"loc":{"start":{"line":40,"column":56},"end":{"line":58,"column":5}},"line":40}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},{"start":{"line":44,"column":12},"end":{"line":46,"column":13}}],"line":44}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/chart/getSymbol.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/chart/getSymbol.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,qDAAuC;AACvC,oCAAmC;AACnC,4DAAyD;AAIzD,SAAsB,SAAS,CAAC,GAAQ,EAAE,GAAQ;;QAC9C,IAAI;YAEA,IAAI,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC;YAE9B,IAAI,aAAa,GAAG,MAAM,SAAI,CAAC,OAAO,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC;YAEhF,IAAI,CAAC,aAAa,EAAE;gBAChB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,2BAAY,CAAC,MAAM,EAAE,CAAC,CAAA;aAC5E;YAED,IAAI,IAAI,GAAG;gBACP,MAAM,EAAE,aAAa,CAAC,MAAM;gBAC5B,MAAM,EAAE,aAAa,CAAC,EAAE;aAC3B,CAAA;YAED,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAA;SAC5D;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;YACxC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;IACL,CAAC;CAAA;AAvBD,8BAuBC","sourcesContent":["\r\nimport * as sentry from \"@sentry/node\";\r\nimport { Pair } from \"../../DB/db\";\r\nimport { errorMessage } from \"../../helper/errorMessage\";\r\n\r\n\r\n\r\nexport async function getSymbol(req: any, res: any) {\r\n    try {\r\n\r\n        let symbol = req.query.symbol;\r\n\r\n        let symbolDetails = await Pair.findOne({ symbol: symbol, active: true }).lean();\r\n\r\n        if (!symbolDetails) {\r\n            return res.status(404).send({ status: false, data: errorMessage.symbol })\r\n        }\r\n\r\n        let data = {\r\n            symbol: symbolDetails.symbol,\r\n            ticker: symbolDetails.id\r\n        }\r\n\r\n        return res.status(200).send({ status: true, data: data })\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ getSymbol\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"00d23423f15e92571e82f9fe05966ddfc3d3a221","contentHash":"4c04e9c05ee6c0fcef8f63d96c1a262ffc92f76000bade40966de290e58f8468"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\DBRoute.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\routes\\DBRoute.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":53}},"4":{"start":{"line":7,"column":19},"end":{"line":7,"column":56}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":62}},"6":{"start":{"line":9,"column":16},"end":{"line":9,"column":42}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":27}},"8":{"start":{"line":11,"column":15},"end":{"line":11,"column":41}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":97}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":112}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/DBRoute.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/routes/DBRoute.ts"],"names":[],"mappings":";;;;;AAAA,sDAA8B;AAC9B,yDAAsD;AACtD,+DAA+D;AAC/D,2CAA6C;AAE7C,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAA;AAC1B,MAAM,MAAM,GAAG,iBAAO,CAAC,MAAM,EAAE,CAAC;AAEhC,MAAM,CAAC,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,YAAY,EAAE,mBAAQ,CAAC,CAAC,CAAC,IAAI;AAC/E,MAAM,CAAC,GAAG,CAAC,MAAM,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,kBAAkB,EAAE,4BAAc,CAAC,CAAA;AAErF,kBAAe,MAAM,CAAC","sourcesContent":["import express from \"express\";\r\nimport { DBStatus } from \"../controllers/DB/dbStatus\";\r\nimport { fetchDBRecords } from \"../controllers/DB/fetchRecord\";\r\nimport { getVersion } from \"../helper/chain\";\r\n\r\nrequire(\"dotenv\").config()\r\nconst router = express.Router();\r\n\r\nrouter.get(`/v/${getVersion(process.env.NODE_ENV!)}/DB/status`, DBStatus); //ok\r\nrouter.get(`/v/${getVersion(process.env.NODE_ENV!)}/DB/fetch/record`, fetchDBRecords)\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"645b4e92422e90870805e270afcd1f0db0a70789","contentHash":"de8fa3206084c4ecca2776750ccb80c4af2bb4ee31d40139bd703775bc7a3cc1"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\DB\\dbStatus.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\DB\\dbStatus.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":26}},"40":{"start":{"line":39,"column":19},"end":{"line":39,"column":55}},"41":{"start":{"line":40,"column":15},"end":{"line":40,"column":52}},"42":{"start":{"line":42,"column":4},"end":{"line":63,"column":7}},"43":{"start":{"line":43,"column":8},"end":{"line":62,"column":9}},"44":{"start":{"line":45,"column":33},"end":{"line":49,"column":13}},"45":{"start":{"line":46,"column":16},"end":{"line":48,"column":18}},"46":{"start":{"line":50,"column":25},"end":{"line":50,"column":39}},"47":{"start":{"line":51,"column":12},"end":{"line":56,"column":13}},"48":{"start":{"line":52,"column":16},"end":{"line":52,"column":76}},"49":{"start":{"line":55,"column":16},"end":{"line":55,"column":77}},"50":{"start":{"line":59,"column":12},"end":{"line":59,"column":43}},"51":{"start":{"line":60,"column":12},"end":{"line":60,"column":51}},"52":{"start":{"line":61,"column":12},"end":{"line":61,"column":81}},"53":{"start":{"line":65,"column":0},"end":{"line":65,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"DBStatus","decl":{"start":{"line":41,"column":9},"end":{"line":41,"column":17}},"loc":{"start":{"line":41,"column":28},"end":{"line":64,"column":1}},"line":41},"15":{"name":"(anonymous_15)","decl":{"start":{"line":42,"column":43},"end":{"line":42,"column":44}},"loc":{"start":{"line":42,"column":56},"end":{"line":63,"column":5}},"line":42},"16":{"name":"(anonymous_16)","decl":{"start":{"line":45,"column":33},"end":{"line":45,"column":34}},"loc":{"start":{"line":45,"column":39},"end":{"line":49,"column":13}},"line":45}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":51,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":51,"column":12},"end":{"line":56,"column":13}},{"start":{"line":51,"column":12},"end":{"line":56,"column":13}}],"line":51},"25":{"loc":{"start":{"line":51,"column":16},"end":{"line":51,"column":79}},"type":"binary-expr","locations":[{"start":{"line":51,"column":16},"end":{"line":51,"column":45}},{"start":{"line":51,"column":49},"end":{"line":51,"column":79}}],"line":51}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":0,"50":0,"51":0,"52":0,"53":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":0,"8":0,"9":1,"10":0,"11":0,"12":1,"13":1,"14":1,"15":1,"16":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[1,1],"19":[1,0],"20":[1,1],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[1,0],"25":[1,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/DB/dbStatus.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/DB/dbStatus.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wDAAgC;AAChC,qDAAuC;AAMvC,SAAsB,QAAQ,CAAC,GAAQ,EAAE,GAAQ;;QAE7C,IAAI;YACA,8BAA8B;YAC9B,MAAM,YAAY,GAAG,GAAG,EAAE;gBACtB,OAAO;oBACH,OAAO,EAAE,kBAAQ,CAAC,MAAM,CAAC,kBAAQ,CAAC,UAAU,CAAC,UAAU,CAAC;iBAC3D,CAAA;YACL,CAAC,CAAC;YAEF,IAAI,MAAM,GAAG,YAAY,EAAE,CAAA;YAE3B,IAAI,MAAM,CAAC,OAAO,IAAI,WAAW,IAAI,MAAM,CAAC,OAAO,IAAI,YAAY,EAAE;gBACjE,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;aAC/D;iBACI;gBACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;aAChE;SAEJ;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;YACvC,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;IAEL,CAAC;CAAA;AA1BD,4BA0BC","sourcesContent":["import mongoose from \"mongoose\";\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\n\r\n\r\nexport async function DBStatus(req: any, res: any) {\r\n\r\n    try {\r\n        // mongoose.connection.close()\r\n        const serverStatus = () => {\r\n            return {\r\n                dbState: mongoose.STATES[mongoose.connection.readyState]\r\n            }\r\n        };\r\n\r\n        let result = serverStatus()\r\n\r\n        if (result.dbState == \"connected\" || result.dbState == \"connecting\") {\r\n            return res.status(200).send({ status: true, data: result });\r\n        }\r\n        else {\r\n            return res.status(500).send({ status: false, data: result });\r\n        }\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ DBStatus\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4dd3f316f376f2a6bd81168c5d8aaa0b11a081bd","contentHash":"389d2c53315b23d1811f2f8467edb82aa77af8a38601447a2b9b047ea2a2420c"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\DB\\fetchRecord.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\controllers\\DB\\fetchRecord.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":32}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":35}},"40":{"start":{"line":39,"column":4},"end":{"line":54,"column":7}},"41":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"42":{"start":{"line":41,"column":27},"end":{"line":41,"column":52}},"43":{"start":{"line":42,"column":12},"end":{"line":47,"column":13}},"44":{"start":{"line":43,"column":16},"end":{"line":43,"column":74}},"45":{"start":{"line":46,"column":16},"end":{"line":46,"column":76}},"46":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}},"47":{"start":{"line":51,"column":12},"end":{"line":51,"column":57}},"48":{"start":{"line":52,"column":12},"end":{"line":52,"column":81}},"49":{"start":{"line":56,"column":0},"end":{"line":56,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"fetchDBRecords","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":23}},"loc":{"start":{"line":38,"column":34},"end":{"line":55,"column":1}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":39,"column":43},"end":{"line":39,"column":44}},"loc":{"start":{"line":39,"column":56},"end":{"line":54,"column":5}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":42,"column":12},"end":{"line":47,"column":13}},"type":"if","locations":[{"start":{"line":42,"column":12},"end":{"line":47,"column":13}},{"start":{"line":42,"column":12},"end":{"line":47,"column":13}}],"line":42}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":0,"31":0,"32":0,"33":0,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":0,"45":1,"46":0,"47":0,"48":0,"49":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":0,"12":2,"13":1,"14":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,1],"18":[1,1],"19":[1,1],"20":[1,1],"21":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/DB/fetchRecord.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/controllers/DB/fetchRecord.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,qDAAuC;AACvC,oCAA0C;AAQ1C,SAAsB,cAAc,CAAC,GAAQ,EAAE,GAAQ;;QAEnD,IAAI;YAEA,MAAM,MAAM,GAAG,MAAM,SAAI,CAAC,OAAO,EAAE,CAAC;YAEpC,IAAI,CAAC,MAAM,EAAE;gBACT,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;aAC7D;iBACI;gBACD,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;aAC/D;SAEJ;QACD,OAAO,KAAU,EAAE;YACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;YAC9B,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;YAC7C,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;SACxE;IAEL,CAAC;CAAA;AApBD,wCAoBC","sourcesContent":["\r\nimport * as sentry from \"@sentry/node\";\r\nimport { Order, Pair } from \"../../DB/db\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport async function fetchDBRecords(req: any, res: any) {\r\n\r\n    try {\r\n\r\n        const orders = await Pair.findOne();\r\n\r\n        if (!orders) {\r\n            return res.status(200).send({ status: true, data: null });\r\n        }\r\n        else {\r\n            return res.status(200).send({ status: true, data: orders });\r\n        }\r\n\r\n    }\r\n    catch (error: any) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ fetchDBRecords\", error);\r\n        return res.status(500).send({ status: false, error: error.message });\r\n    }\r\n\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"22f98cfff6a6b7feacf6afc256691f5db16803e2","contentHash":"372174df99f0c29c4b7b6531e1dace20f1f6b968c2da8b080c28354abe696f3e"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\appUtil.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\appUtil.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":23}},"40":{"start":{"line":39,"column":13},"end":{"line":39,"column":32}},"41":{"start":{"line":40,"column":16},"end":{"line":40,"column":49}},"42":{"start":{"line":41,"column":19},"end":{"line":41,"column":54}},"43":{"start":{"line":42,"column":15},"end":{"line":42,"column":38}},"44":{"start":{"line":43,"column":19},"end":{"line":43,"column":55}},"45":{"start":{"line":44,"column":28},"end":{"line":44,"column":68}},"46":{"start":{"line":45,"column":20},"end":{"line":45,"column":52}},"47":{"start":{"line":46,"column":16},"end":{"line":46,"column":42}},"48":{"start":{"line":47,"column":15},"end":{"line":47,"column":52}},"49":{"start":{"line":48,"column":0},"end":{"line":48,"column":27}},"50":{"start":{"line":54,"column":4},"end":{"line":105,"column":7}},"51":{"start":{"line":55,"column":8},"end":{"line":104,"column":9}},"52":{"start":{"line":56,"column":35},"end":{"line":56,"column":58}},"53":{"start":{"line":57,"column":12},"end":{"line":96,"column":13}},"54":{"start":{"line":58,"column":16},"end":{"line":58,"column":96}},"55":{"start":{"line":59,"column":27},"end":{"line":59,"column":28}},"56":{"start":{"line":60,"column":29},"end":{"line":60,"column":31}},"57":{"start":{"line":61,"column":16},"end":{"line":61,"column":29}},"58":{"start":{"line":63,"column":20},"end":{"line":94,"column":23}},"59":{"start":{"line":64,"column":24},"end":{"line":64,"column":53}},"60":{"start":{"line":65,"column":40},"end":{"line":65,"column":153}},"61":{"start":{"line":66,"column":24},"end":{"line":89,"column":25}},"62":{"start":{"line":67,"column":42},"end":{"line":77,"column":29}},"63":{"start":{"line":78,"column":41},"end":{"line":87,"column":30}},"64":{"start":{"line":88,"column":28},"end":{"line":88,"column":78}},"65":{"start":{"line":90,"column":24},"end":{"line":90,"column":31}},"66":{"start":{"line":91,"column":24},"end":{"line":93,"column":25}},"67":{"start":{"line":92,"column":28},"end":{"line":92,"column":41}},"68":{"start":{"line":97,"column":12},"end":{"line":97,"column":92}},"69":{"start":{"line":98,"column":12},"end":{"line":98,"column":55}},"70":{"start":{"line":99,"column":12},"end":{"line":99,"column":63}},"71":{"start":{"line":102,"column":12},"end":{"line":102,"column":43}},"72":{"start":{"line":103,"column":12},"end":{"line":103,"column":48}},"73":{"start":{"line":107,"column":0},"end":{"line":107,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"start","decl":{"start":{"line":53,"column":9},"end":{"line":53,"column":14}},"loc":{"start":{"line":53,"column":36},"end":{"line":106,"column":1}},"line":53},"15":{"name":"(anonymous_15)","decl":{"start":{"line":54,"column":43},"end":{"line":54,"column":44}},"loc":{"start":{"line":54,"column":56},"end":{"line":105,"column":5}},"line":54},"16":{"name":"copy","decl":{"start":{"line":62,"column":25},"end":{"line":62,"column":29}},"loc":{"start":{"line":62,"column":32},"end":{"line":95,"column":17}},"line":62},"17":{"name":"(anonymous_17)","decl":{"start":{"line":63,"column":59},"end":{"line":63,"column":60}},"loc":{"start":{"line":63,"column":72},"end":{"line":94,"column":21}},"line":63}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":57,"column":12},"end":{"line":96,"column":13}},"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":96,"column":13}},{"start":{"line":57,"column":12},"end":{"line":96,"column":13}}],"line":57},"25":{"loc":{"start":{"line":91,"column":24},"end":{"line":93,"column":25}},"type":"if","locations":[{"start":{"line":91,"column":24},"end":{"line":93,"column":25}},{"start":{"line":91,"column":24},"end":{"line":93,"column":25}}],"line":91}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":2,"26":1,"27":1,"28":2,"29":2,"30":0,"31":0,"32":0,"33":0,"34":3,"35":1,"36":1,"37":2,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":1,"70":1,"71":0,"72":0,"73":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":1,"7":2,"8":1,"9":1,"10":2,"11":0,"12":3,"13":2,"14":1,"15":1,"16":0,"17":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[1,1],"18":[1,1],"19":[1,2],"20":[1,1],"21":[1,1,1],"22":[0,2],"23":[2,2],"24":[0,1],"25":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/appUtil.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/appUtil.ts"],"names":[],"mappings":"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","sourcesContent":["\r\nimport { Order, OrderCreatedBackup } from \"../DB/db\";\r\nimport axios, { AxiosResponse } from \"axios\";\r\nimport { ExchangeConfig } from \"../sync/configs/exchange\";\r\nimport { historicEventListner } from \"../sync/sync\";\r\nimport mongoose from \"mongoose\";\r\nimport { startOrderStatus } from \"../muticall/updateOrderStatus\";\r\nimport { ifOrderCreated } from \"../helper/interface\";\r\nimport { socketService } from \"../socketIo/socket.io\";\r\nimport { getVersion } from \"../helper/chain\";\r\nimport * as sentry from \"@sentry/node\";\r\nrequire(\"dotenv\").config();\r\n\r\n\r\n/**\r\n * @dev this function would check if there is any data in OrderCreated collection of main DB, if there is any data then it will  call historicEventListner and startOrderStatus. if there is no data in OrderCreated collection then it will search in backup collection and if there is any data then it will get signature and value and call order create api and call historicEventListner startOrderStatus functions.\r\n * @param {*} chainId (string) numeric chainId\r\n */\r\nasync function start(chainId: string, httpServer: any) {\r\n    try {\r\n        let getCreateRecords: ifOrderCreated[] = await Order.find();\r\n\r\n        if (getCreateRecords.length == 0) {\r\n\r\n            await mongoose.createConnection(process.env.MONGO_URL! as string).dropDatabase();\r\n\r\n            let page: number = 0;\r\n\r\n            let _limit: number = 20;\r\n            await copy();\r\n            async function copy() {\r\n                console.log(page, \"Page No\");\r\n                let copyOrder: ifOrderCreated[] = await OrderCreatedBackup.find({ chainId: chainId }, { _id: 0, __v: 0 }).skip(page * _limit).limit(20).lean();\r\n\r\n                for (let i in copyOrder) {\r\n\r\n                    const input = {\r\n                        maker: copyOrder[i].maker,\r\n                        token0: copyOrder[i].token0,\r\n                        token1: copyOrder[i].token1,\r\n                        amount: copyOrder[i].amount,\r\n                        orderType: copyOrder[i].orderType,\r\n                        salt: Number(copyOrder[i].salt),\r\n                        exchangeRate: copyOrder[i].exchangeRate,\r\n                        borrowLimit: copyOrder[i].borrowLimit,\r\n                        loops: copyOrder[i].loops\r\n                    }\r\n\r\n                    let result: AxiosResponse = await axios({\r\n                        method: \"post\",\r\n                        url: `http://localhost:3010/v/${getVersion(process.env.NODE_ENV!)}/order/create`,\r\n                        data: {\r\n                            signature: copyOrder[i].signature,\r\n                            chainId: copyOrder[i].chainId.toString(),\r\n                            ipfs: true,\r\n                            data: input\r\n                        }\r\n                    });\r\n\r\n                    console.log(\"backup Create Request\", result.data);\r\n                }\r\n                page++;\r\n\r\n                if (copyOrder.length > 0) {\r\n                    await copy();\r\n                }\r\n\r\n            }\r\n        }\r\n        await historicEventListner(ExchangeConfig(chainId));\r\n        socketService.init(httpServer)\r\n        startOrderStatus(chainId)\r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ start\", error);\r\n    }\r\n}\r\n\r\n\r\nexport { start };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3cf7e2b0dccf61ae328c647cdc7bae626c10d24f","contentHash":"3ab8ffe9ecd18028cf8c4a395b8abb6ff7020d5757e1519b6aa3e714cfa31324"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\sync\\configs\\exchange.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\sync\\configs\\exchange.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":32}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":45}},"4":{"start":{"line":6,"column":23},"end":{"line":6,"column":61}},"5":{"start":{"line":7,"column":34},"end":{"line":7,"column":83}},"6":{"start":{"line":8,"column":24},"end":{"line":8,"column":63}},"7":{"start":{"line":9,"column":25},"end":{"line":9,"column":65}},"8":{"start":{"line":10,"column":24},"end":{"line":10,"column":63}},"9":{"start":{"line":12,"column":4},"end":{"line":23,"column":6}},"10":{"start":{"line":25,"column":0},"end":{"line":25,"column":40}}},"fnMap":{"0":{"name":"ExchangeConfig","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":23}},"loc":{"start":{"line":11,"column":33},"end":{"line":24,"column":1}},"line":11}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/sync/configs/exchange.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/sync/configs/exchange.ts"],"names":[],"mappings":";;;AACA,6CAA0C;AAC1C,8CAAwD;AACxD,8DAA4D;AAC5D,oFAAiF;AACjF,gEAAmE;AACnE,kEAAqE;AACrE,gEAAmE;AAMnE,SAAS,cAAc,CAAC,OAAe;IAEnC,OAAO;QACH,eAAe,EAAE,IAAA,0BAAkB,EAAC,OAAO,CAAC;QAC5C,GAAG,EAAE,IAAA,cAAM,EAAC,UAAU,CAAC;QACvB,QAAQ,EAAE;YACN,eAAe,EAAE,mCAAmB;YACpC,gBAAgB,EAAE,qCAAoB;YACtC,eAAe,EAAE,mCAAmB;YACpC,SAAS,EAAE,4BAAa;YACxB,mBAAmB,EAAE,iDAAuB;SAC/C;QACD,OAAO,EAAE,OAAO;KACnB,CAAC;AACN,CAAC;AAIQ,wCAAc","sourcesContent":["\r\nimport { getABI} from \"../../utils/utils\";\r\nimport { getExchangeAddress } from \"../../helper/chain\";\r\nimport { handleFeesSet } from \"../../handlers/handleFeeSet\";\r\nimport { handleMinTokenAmountSet } from \"../../handlers/handleMinTokenAmountSet\";\r\nimport { handleOrderExecuted } from \"../../handlers/orderExecuted\";\r\nimport { handleOrderCancelled } from \"../../handlers/orderCancelled\";\r\nimport { handleMarginEnabled } from \"../../handlers/marginEnabled\";\r\n\r\n\r\n\r\n\r\n\r\nfunction ExchangeConfig(chainId: string) {\r\n\r\n    return {\r\n        contractAddress: getExchangeAddress(chainId),\r\n        abi: getABI(\"Exchange\"),\r\n        handlers: {\r\n            \"OrderExecuted\": handleOrderExecuted,\r\n            \"OrderCancelled\": handleOrderCancelled,\r\n            \"MarginEnabled\": handleMarginEnabled,\r\n            \"FeesSet\": handleFeesSet,\r\n            \"MinTokenAmountSet\": handleMinTokenAmountSet\r\n        },\r\n        chainId: chainId\r\n    };\r\n}\r\n\r\n// console.log(ExchangeConfig(\"31337\"))\r\n\r\nexport { ExchangeConfig };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"282a17cb1a26dbda5564b48a46a92ead84f39e59","contentHash":"c23449932a68ace9f2e17636b07f7959b95fee7fdb570b9ba104277f3730b5b1"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\handleFeeSet.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\handleFeeSet.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":31}},"38":{"start":{"line":36,"column":15},"end":{"line":36,"column":52}},"39":{"start":{"line":37,"column":13},"end":{"line":37,"column":32}},"40":{"start":{"line":39,"column":4},"end":{"line":50,"column":7}},"41":{"start":{"line":40,"column":8},"end":{"line":49,"column":9}},"42":{"start":{"line":41,"column":27},"end":{"line":41,"column":45}},"43":{"start":{"line":42,"column":27},"end":{"line":42,"column":45}},"44":{"start":{"line":43,"column":28},"end":{"line":43,"column":163}},"45":{"start":{"line":44,"column":12},"end":{"line":44,"column":114}},"46":{"start":{"line":47,"column":12},"end":{"line":47,"column":56}},"47":{"start":{"line":48,"column":12},"end":{"line":48,"column":43}},"48":{"start":{"line":52,"column":0},"end":{"line":52,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"handleFeesSet","decl":{"start":{"line":38,"column":9},"end":{"line":38,"column":22}},"loc":{"start":{"line":38,"column":39},"end":{"line":51,"column":1}},"line":38},"14":{"name":"(anonymous_14)","decl":{"start":{"line":39,"column":43},"end":{"line":39,"column":44}},"loc":{"start":{"line":39,"column":56},"end":{"line":50,"column":5}},"line":39}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/handleFeeSet.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/handleFeeSet.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qDAAuC;AACvC,iCAAgC;AAIhC,SAAsB,aAAa,CAAC,IAAS,EAAE,QAAa;;QAExD,IAAG;YACC,IAAI,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;YAClC,IAAI,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;YAEnC,IAAI,SAAS,GAAG,MAAM,SAAI,CAAC,gBAAgB,CAC1C,EAAC,OAAO,EAAE,QAAQ,CAAC,OAAO,EAAC,EAC3B,EAAC,IAAI,EAAC,EAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAC,EAAC,EAC/C,EAAC,MAAM,EAAE,IAAI,EAAC,CACd,CAAC;YAEF,OAAO,CAAC,GAAG,CAAC,0BAA0B,QAAQ,WAAW,QAAQ,iBAAiB,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;SAExG;QACD,OAAM,KAAK,EAAC;YACR,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;YAC5C,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;SACjC;IAEL,CAAC;CAAA;AApBD,sCAoBC","sourcesContent":["import * as sentry from \"@sentry/node\";\r\nimport { Sync } from \"../DB/db\";\r\n\r\n\r\n\r\nexport async function handleFeesSet(data: any, argument: any){\r\n\r\n    try{\r\n        let makerFee = data[0].toString();\r\n        let takerFee = data[1].toString();\r\n\r\n       let updateFee = await Sync.findOneAndUpdate(\r\n        {chainId: argument.chainId},\r\n        {$set:{makerFee: makerFee, takerFee: takerFee}},\r\n        {upsert: true}\r\n       );\r\n\r\n       console.log(`Fees Set updated maker ${makerFee}, taker ${takerFee}, for chainId ${argument.chainId}`);\r\n\r\n    }\r\n    catch(error){\r\n        console.log(\"Error @ handleFeesSet\", error);\r\n        sentry.captureException(error)\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"805f8c759a0e882f32beb92de4a4200dfc77854f","contentHash":"a542cb1dfe2e8b90d9ceb3cc35b7fff8cb62aeb36528945e12575b9844a057e5"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\marginEnabled.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\handlers\\marginEnabled.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":37}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":32}},"39":{"start":{"line":37,"column":16},"end":{"line":37,"column":41}},"40":{"start":{"line":38,"column":17},"end":{"line":38,"column":34}},"41":{"start":{"line":39,"column":15},"end":{"line":39,"column":52}},"42":{"start":{"line":41,"column":4},"end":{"line":107,"column":7}},"43":{"start":{"line":42,"column":8},"end":{"line":106,"column":9}},"44":{"start":{"line":43,"column":24},"end":{"line":43,"column":45}},"45":{"start":{"line":44,"column":25},"end":{"line":44,"column":46}},"46":{"start":{"line":45,"column":26},"end":{"line":45,"column":42}},"47":{"start":{"line":46,"column":33},"end":{"line":46,"column":93}},"48":{"start":{"line":48,"column":12},"end":{"line":57,"column":13}},"49":{"start":{"line":49,"column":16},"end":{"line":56,"column":17}},"50":{"start":{"line":50,"column":20},"end":{"line":50,"column":27}},"51":{"start":{"line":52,"column":21},"end":{"line":56,"column":17}},"52":{"start":{"line":53,"column":20},"end":{"line":53,"column":131}},"53":{"start":{"line":54,"column":20},"end":{"line":54,"column":49}},"54":{"start":{"line":55,"column":20},"end":{"line":55,"column":75}},"55":{"start":{"line":58,"column":12},"end":{"line":80,"column":13}},"56":{"start":{"line":59,"column":31},"end":{"line":59,"column":64}},"57":{"start":{"line":60,"column":38},"end":{"line":60,"column":117}},"58":{"start":{"line":61,"column":27},"end":{"line":61,"column":52}},"59":{"start":{"line":62,"column":16},"end":{"line":62,"column":53}},"60":{"start":{"line":63,"column":31},"end":{"line":63,"column":60}},"61":{"start":{"line":64,"column":30},"end":{"line":64,"column":73}},"62":{"start":{"line":65,"column":16},"end":{"line":65,"column":34}},"63":{"start":{"line":66,"column":16},"end":{"line":66,"column":36}},"64":{"start":{"line":67,"column":16},"end":{"line":67,"column":38}},"65":{"start":{"line":68,"column":27},"end":{"line":77,"column":17}},"66":{"start":{"line":78,"column":16},"end":{"line":78,"column":46}},"67":{"start":{"line":79,"column":16},"end":{"line":79,"column":86}},"68":{"start":{"line":82,"column":27},"end":{"line":82,"column":117}},"69":{"start":{"line":83,"column":12},"end":{"line":101,"column":13}},"70":{"start":{"line":84,"column":34},"end":{"line":84,"column":121}},"71":{"start":{"line":85,"column":16},"end":{"line":100,"column":17}},"72":{"start":{"line":86,"column":20},"end":{"line":88,"column":21}},"73":{"start":{"line":87,"column":24},"end":{"line":87,"column":118}},"74":{"start":{"line":92,"column":34},"end":{"line":92,"column":126}},"75":{"start":{"line":93,"column":29},"end":{"line":93,"column":69}},"76":{"start":{"line":94,"column":38},"end":{"line":94,"column":94}},"77":{"start":{"line":95,"column":20},"end":{"line":99,"column":21}},"78":{"start":{"line":96,"column":24},"end":{"line":98,"column":25}},"79":{"start":{"line":97,"column":28},"end":{"line":97,"column":122}},"80":{"start":{"line":104,"column":12},"end":{"line":104,"column":43}},"81":{"start":{"line":105,"column":12},"end":{"line":105,"column":62}},"82":{"start":{"line":109,"column":0},"end":{"line":109,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"handleMarginEnabled","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":28}},"loc":{"start":{"line":40,"column":45},"end":{"line":108,"column":1}},"line":40},"14":{"name":"(anonymous_14)","decl":{"start":{"line":41,"column":43},"end":{"line":41,"column":44}},"loc":{"start":{"line":41,"column":56},"end":{"line":107,"column":5}},"line":41}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":48,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":57,"column":13}},{"start":{"line":48,"column":12},"end":{"line":57,"column":13}}],"line":48},"22":{"loc":{"start":{"line":49,"column":16},"end":{"line":56,"column":17}},"type":"if","locations":[{"start":{"line":49,"column":16},"end":{"line":56,"column":17}},{"start":{"line":49,"column":16},"end":{"line":56,"column":17}}],"line":49},"23":{"loc":{"start":{"line":52,"column":21},"end":{"line":56,"column":17}},"type":"if","locations":[{"start":{"line":52,"column":21},"end":{"line":56,"column":17}},{"start":{"line":52,"column":21},"end":{"line":56,"column":17}}],"line":52},"24":{"loc":{"start":{"line":58,"column":12},"end":{"line":80,"column":13}},"type":"if","locations":[{"start":{"line":58,"column":12},"end":{"line":80,"column":13}},{"start":{"line":58,"column":12},"end":{"line":80,"column":13}}],"line":58},"25":{"loc":{"start":{"line":85,"column":16},"end":{"line":100,"column":17}},"type":"if","locations":[{"start":{"line":85,"column":16},"end":{"line":100,"column":17}},{"start":{"line":85,"column":16},"end":{"line":100,"column":17}}],"line":85},"26":{"loc":{"start":{"line":86,"column":20},"end":{"line":88,"column":21}},"type":"if","locations":[{"start":{"line":86,"column":20},"end":{"line":88,"column":21}},{"start":{"line":86,"column":20},"end":{"line":88,"column":21}}],"line":86},"27":{"loc":{"start":{"line":95,"column":20},"end":{"line":99,"column":21}},"type":"if","locations":[{"start":{"line":95,"column":20},"end":{"line":99,"column":21}},{"start":{"line":95,"column":20},"end":{"line":99,"column":21}}],"line":95},"28":{"loc":{"start":{"line":96,"column":24},"end":{"line":98,"column":25}},"type":"if","locations":[{"start":{"line":96,"column":24},"end":{"line":98,"column":25}},{"start":{"line":96,"column":24},"end":{"line":98,"column":25}}],"line":96}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/marginEnabled.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/handlers/marginEnabled.ts"],"names":[],"mappings":"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","sourcesContent":["import { Pair, Token } from \"../DB/db\";\r\nimport {  getABI, getProvider } from \"../utils/utils\";\r\nimport { ethers } from \"ethers\";\r\nimport * as sentry from \"@sentry/node\";\r\n\r\n\r\n\r\nexport async function handleMarginEnabled(data: string[], argument: any) {\r\n    try {\r\n        \r\n        let token: string = data[0].toLowerCase();\r\n        let cToken = data[1].toLowerCase();\r\n        let chainId = argument.chainId;\r\n        const isTokenExist = await Token.findOne({ id: token, active: true }).lean();\r\n        let symbol:string| undefined;\r\n\r\n        if (isTokenExist) {\r\n            if (isTokenExist.marginEnabled == true) {\r\n                return\r\n            }\r\n            else if (isTokenExist.marginEnabled == false) {\r\n                await Token.findOneAndUpdate({ id: token, active: true }, { $set: { marginEnabled: true, cId: cToken } });\r\n                symbol = isTokenExist.symbol;\r\n                console.log(\"Margin Enabled \", token, chainId, symbol);\r\n            }\r\n        }\r\n\r\n        if (!isTokenExist) {\r\n            let provider = getProvider(chainId);\r\n            let getTokenDetails = new ethers.Contract(token, getABI(\"TestERC20\"), provider);\r\n            let name = getTokenDetails[\"name\"]();\r\n            symbol = getTokenDetails[\"symbol\"]();\r\n            let decimals = getTokenDetails[\"decimals\"]();\r\n            let promise = await Promise.all([name, symbol, decimals]);\r\n            name = promise[0];\r\n            symbol = promise[1];\r\n            decimals = promise[2];\r\n\r\n            let temp = {\r\n                id: token,\r\n                name: name,\r\n                symbol: symbol,\r\n                decimals: decimals,\r\n                price: \"0\",\r\n                chainId: chainId,\r\n                cId: cToken,\r\n                marginEnabled: true\r\n            };\r\n\r\n            await Token.create(temp);\r\n            console.log(\"Token Added from margin enable\", token, chainId, symbol);\r\n        }\r\n\r\n        // creating pair\r\n        let allToken = await Token.find({ marginEnabled: true, id: { $nin: [token] }, active: true }).lean();\r\n\r\n        for (let i in allToken) {\r\n\r\n            let isPairExist = await Pair.findOne({ token0: token, token1: allToken[i].id, active: true }).lean()\r\n\r\n            if (isPairExist) {\r\n               \r\n                if (isPairExist.marginEnabled == false) {\r\n\r\n                    await Pair.findOneAndUpdate(\r\n                        { _id: isPairExist._id },\r\n                        { $set: { marginEnabled: true } }\r\n                    )               \r\n                }\r\n            }\r\n            else {\r\n                // checking opposite pair\r\n                let encoder = new ethers.utils.AbiCoder().encode([\"address\", \"address\"], [allToken[i].id, token]);\r\n                let id = ethers.utils.keccak256(encoder);\r\n\r\n                let isPairExist = await Pair.findOne({ id: id, active: true }).lean();\r\n\r\n                if (isPairExist) {\r\n\r\n                    if (isPairExist.marginEnabled == false) {\r\n                        await Pair.findOneAndUpdate(\r\n                            { _id: isPairExist._id },\r\n                            { $set: { marginEnabled: true } }\r\n                        )              \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ handleMarginEnabled\", error);\r\n    }\r\n\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"43803d3a1a94ef64585a72cf02076a0de60a36f9","contentHash":"7b3bf39969b0bffe496b4122cbb537c1443addbf035e22e687837c9f8f3b300b"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\sync\\sync.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\sync\\sync.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":0},"end":{"line":34,"column":62}},"37":{"start":{"line":35,"column":0},"end":{"line":35,"column":61}},"38":{"start":{"line":36,"column":13},"end":{"line":36,"column":32}},"39":{"start":{"line":37,"column":17},"end":{"line":37,"column":34}},"40":{"start":{"line":38,"column":16},"end":{"line":38,"column":41}},"41":{"start":{"line":39,"column":15},"end":{"line":39,"column":52}},"42":{"start":{"line":40,"column":0},"end":{"line":40,"column":27}},"43":{"start":{"line":49,"column":4},"end":{"line":55,"column":5}},"44":{"start":{"line":50,"column":23},"end":{"line":50,"column":55}},"45":{"start":{"line":51,"column":8},"end":{"line":51,"column":22}},"46":{"start":{"line":54,"column":8},"end":{"line":54,"column":15}},"47":{"start":{"line":67,"column":4},"end":{"line":98,"column":7}},"48":{"start":{"line":68,"column":8},"end":{"line":97,"column":9}},"49":{"start":{"line":69,"column":29},"end":{"line":69,"column":62}},"50":{"start":{"line":70,"column":27},"end":{"line":70,"column":87}},"51":{"start":{"line":71,"column":25},"end":{"line":71,"column":46}},"52":{"start":{"line":72,"column":28},"end":{"line":72,"column":29}},"53":{"start":{"line":73,"column":12},"end":{"line":90,"column":13}},"54":{"start":{"line":73,"column":25},"end":{"line":73,"column":26}},"55":{"start":{"line":74,"column":16},"end":{"line":89,"column":20}},"56":{"start":{"line":74,"column":52},"end":{"line":89,"column":18}},"57":{"start":{"line":75,"column":33},"end":{"line":75,"column":54}},"58":{"start":{"line":76,"column":43},"end":{"line":76,"column":105}},"59":{"start":{"line":77,"column":20},"end":{"line":77,"column":51}},"60":{"start":{"line":78,"column":35},"end":{"line":85,"column":21}},"61":{"start":{"line":87,"column":20},"end":{"line":87,"column":69}},"62":{"start":{"line":88,"column":20},"end":{"line":88,"column":129}},"63":{"start":{"line":93,"column":12},"end":{"line":93,"column":35}},"64":{"start":{"line":94,"column":12},"end":{"line":94,"column":56}},"65":{"start":{"line":96,"column":12},"end":{"line":96,"column":85}},"66":{"start":{"line":100,"column":0},"end":{"line":100,"column":36}},"67":{"start":{"line":110,"column":17},"end":{"line":110,"column":18}},"68":{"start":{"line":112,"column":4},"end":{"line":173,"column":7}},"69":{"start":{"line":113,"column":8},"end":{"line":113,"column":26}},"70":{"start":{"line":116,"column":12},"end":{"line":171,"column":15}},"71":{"start":{"line":117,"column":32},"end":{"line":117,"column":33}},"72":{"start":{"line":118,"column":16},"end":{"line":170,"column":17}},"73":{"start":{"line":119,"column":38},"end":{"line":119,"column":83}},"74":{"start":{"line":120,"column":20},"end":{"line":122,"column":21}},"75":{"start":{"line":121,"column":24},"end":{"line":121,"column":110}},"76":{"start":{"line":123,"column":35},"end":{"line":123,"column":68}},"77":{"start":{"line":124,"column":31},"end":{"line":124,"column":105}},"78":{"start":{"line":125,"column":43},"end":{"line":125,"column":45}},"79":{"start":{"line":126,"column":20},"end":{"line":129,"column":21}},"80":{"start":{"line":126,"column":33},"end":{"line":126,"column":34}},"81":{"start":{"line":127,"column":48},"end":{"line":127,"column":86}},"82":{"start":{"line":128,"column":24},"end":{"line":128,"column":62}},"83":{"start":{"line":130,"column":20},"end":{"line":130,"column":75}},"84":{"start":{"line":131,"column":20},"end":{"line":153,"column":21}},"85":{"start":{"line":132,"column":36},"end":{"line":132,"column":59}},"86":{"start":{"line":133,"column":42},"end":{"line":133,"column":61}},"87":{"start":{"line":134,"column":24},"end":{"line":134,"column":56}},"88":{"start":{"line":135,"column":39},"end":{"line":135,"column":55}},"89":{"start":{"line":136,"column":47},"end":{"line":136,"column":83}},"90":{"start":{"line":137,"column":39},"end":{"line":144,"column":25}},"91":{"start":{"line":145,"column":38},"end":{"line":145,"column":68}},"92":{"start":{"line":146,"column":45},"end":{"line":146,"column":103}},"93":{"start":{"line":147,"column":24},"end":{"line":152,"column":25}},"94":{"start":{"line":149,"column":28},"end":{"line":151,"column":29}},"95":{"start":{"line":150,"column":32},"end":{"line":150,"column":98}},"96":{"start":{"line":154,"column":20},"end":{"line":154,"column":129}},"97":{"start":{"line":155,"column":20},"end":{"line":155,"column":71}},"98":{"start":{"line":156,"column":20},"end":{"line":156,"column":85}},"99":{"start":{"line":159,"column":20},"end":{"line":169,"column":21}},"100":{"start":{"line":160,"column":24},"end":{"line":160,"column":115}},"101":{"start":{"line":161,"column":24},"end":{"line":161,"column":55}},"102":{"start":{"line":162,"column":24},"end":{"line":162,"column":75}},"103":{"start":{"line":163,"column":24},"end":{"line":163,"column":37}},"104":{"start":{"line":164,"column":24},"end":{"line":164,"column":43}},"105":{"start":{"line":167,"column":24},"end":{"line":167,"column":39}},"106":{"start":{"line":168,"column":24},"end":{"line":168,"column":55}},"107":{"start":{"line":175,"column":0},"end":{"line":175,"column":52}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"decode_log_data","decl":{"start":{"line":48,"column":9},"end":{"line":48,"column":24}},"loc":{"start":{"line":48,"column":46},"end":{"line":56,"column":1}},"line":48},"14":{"name":"eventListner","decl":{"start":{"line":66,"column":9},"end":{"line":66,"column":21}},"loc":{"start":{"line":66,"column":67},"end":{"line":99,"column":1}},"line":66},"15":{"name":"(anonymous_15)","decl":{"start":{"line":67,"column":43},"end":{"line":67,"column":44}},"loc":{"start":{"line":67,"column":56},"end":{"line":98,"column":5}},"line":67},"16":{"name":"(anonymous_16)","decl":{"start":{"line":74,"column":39},"end":{"line":74,"column":40}},"loc":{"start":{"line":74,"column":52},"end":{"line":89,"column":18}},"line":74},"17":{"name":"(anonymous_17)","decl":{"start":{"line":74,"column":84},"end":{"line":74,"column":85}},"loc":{"start":{"line":74,"column":97},"end":{"line":89,"column":17}},"line":74},"18":{"name":"historicEventListner","decl":{"start":{"line":111,"column":9},"end":{"line":111,"column":29}},"loc":{"start":{"line":111,"column":75},"end":{"line":174,"column":1}},"line":111},"19":{"name":"(anonymous_19)","decl":{"start":{"line":112,"column":43},"end":{"line":112,"column":44}},"loc":{"start":{"line":112,"column":56},"end":{"line":173,"column":5}},"line":112},"20":{"name":"eventSync","decl":{"start":{"line":114,"column":17},"end":{"line":114,"column":26}},"loc":{"start":{"line":114,"column":29},"end":{"line":172,"column":9}},"line":114},"21":{"name":"(anonymous_21)","decl":{"start":{"line":116,"column":51},"end":{"line":116,"column":52}},"loc":{"start":{"line":116,"column":64},"end":{"line":171,"column":13}},"line":116}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":120,"column":20},"end":{"line":122,"column":21}},"type":"if","locations":[{"start":{"line":120,"column":20},"end":{"line":122,"column":21}},{"start":{"line":120,"column":20},"end":{"line":122,"column":21}}],"line":120},"22":{"loc":{"start":{"line":121,"column":36},"end":{"line":121,"column":109}},"type":"cond-expr","locations":[{"start":{"line":121,"column":103},"end":{"line":121,"column":105}},{"start":{"line":121,"column":108},"end":{"line":121,"column":109}}],"line":121},"23":{"loc":{"start":{"line":121,"column":36},"end":{"line":121,"column":100}},"type":"binary-expr","locations":[{"start":{"line":121,"column":36},"end":{"line":121,"column":83}},{"start":{"line":121,"column":87},"end":{"line":121,"column":100}}],"line":121},"24":{"loc":{"start":{"line":147,"column":24},"end":{"line":152,"column":25}},"type":"if","locations":[{"start":{"line":147,"column":24},"end":{"line":152,"column":25}},{"start":{"line":147,"column":24},"end":{"line":152,"column":25}}],"line":147},"25":{"loc":{"start":{"line":147,"column":28},"end":{"line":147,"column":74}},"type":"binary-expr","locations":[{"start":{"line":147,"column":28},"end":{"line":147,"column":40}},{"start":{"line":147,"column":44},"end":{"line":147,"column":74}}],"line":147},"26":{"loc":{"start":{"line":149,"column":28},"end":{"line":151,"column":29}},"type":"if","locations":[{"start":{"line":149,"column":28},"end":{"line":151,"column":29}},{"start":{"line":149,"column":28},"end":{"line":151,"column":29}}],"line":149},"27":{"loc":{"start":{"line":159,"column":20},"end":{"line":169,"column":21}},"type":"if","locations":[{"start":{"line":159,"column":20},"end":{"line":169,"column":21}},{"start":{"line":159,"column":20},"end":{"line":169,"column":21}}],"line":159}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":22,"26":8,"27":8,"28":22,"29":22,"30":0,"31":0,"32":0,"33":0,"34":30,"35":8,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":0,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":5,"56":5,"57":5,"58":5,"59":5,"60":5,"61":5,"62":5,"63":0,"64":0,"65":0,"66":1,"67":1,"68":1,"69":1,"70":1,"71":1,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1,"78":1,"79":1,"80":1,"81":1,"82":1,"83":1,"84":1,"85":1,"86":1,"87":1,"88":1,"89":1,"90":1,"91":1,"92":1,"93":1,"94":1,"95":1,"96":1,"97":1,"98":1,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":8,"7":22,"8":8,"9":8,"10":22,"11":0,"12":30,"13":1,"14":1,"15":1,"16":5,"17":5,"18":1,"19":1,"20":1,"21":1},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[14,8],"18":[8,8],"19":[8,22],"20":[8,8],"21":[1,0],"22":[1,0],"23":[1,1],"24":[1,0],"25":[1,1],"26":[1,0],"27":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/sync/sync.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/sync/sync.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,iCAAgC;AAChC,mCAAgC;AAChC,0CAA2D;AAE3D,qDAAuC;AACvC,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAC;AAI3B;;;;;;GAMG;AACH,SAAS,eAAe,CAAC,IAAY,EAAE,MAAgB,EAAE,KAAU;IAC/D,IAAI;QAEA,MAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC;QAChD,OAAO,MAAM,CAAC;KACjB;IACD,OAAO,KAAK,EAAE;QACV,OAAO;KACV;AACL,CAAC;AAID;;;;;;;;GAQG;AACH,SAAe,YAAY,CAAC,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAkB;;QACnF,IAAI;YAEA,MAAM,QAAQ,GAAqC,IAAA,mBAAW,EAAC,OAAO,CAAC,CAAC;YACxE,IAAI,QAAQ,GAAoB,IAAI,eAAM,CAAC,QAAQ,CAAC,eAAe,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;YACpF,IAAI,MAAM,GAAa,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC7C,IAAI,SAAS,GAAW,CAAC,CAAC;YAE1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAEpC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAO,GAAG,IAAI,EAAE,EAAE;oBACrC,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBACnC,MAAM,cAAc,GAAW,CAAC,MAAM,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;oBAC9F,SAAS,GAAG,MAAM,CAAC,WAAW,CAAC;oBAC/B,IAAI,QAAQ,GAAG;wBACX,KAAK,EAAE,MAAM,CAAC,eAAe;wBAC7B,cAAc,EAAE,cAAc;wBAC9B,WAAW,EAAE,MAAM,CAAC,WAAW;wBAC/B,OAAO,EAAE,MAAM,CAAC,OAAO;wBACvB,OAAO,EAAE,OAAO;wBAChB,QAAQ,EAAE,MAAM,CAAC,QAAQ;qBAC5B,CAAC;oBACF,yBAAyB;oBACzB,MAAM,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;oBAEjD,MAAM,SAAI,CAAC,gBAAgB,CACvB,EAAC,OAAO,EAAE,OAAO,EAAC,EAClB,EAAE,mBAAmB,EAAE,SAAS,EAAE,EAClC,EAAE,MAAM,EAAE,IAAI,EAAE,CACnB,CAAC;gBACN,CAAC,CAAA,CAAC,CAAC;aACN;SAEJ;QACD,OAAO,KAAK,EAAE;YAEV,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;YAC5C,iCAAiC;YACjC,OAAO,oBAAoB,CAAC,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC;SAC5E;IAEL,CAAC;CAAA;AAoGQ,oCAAY;AAjGrB;;;;;;;;GAQG;AAEH,IAAI,UAAU,GAAG,CAAC,CAAC;AACnB,SAAe,oBAAoB,CAAC,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAkB;;QAG3F,MAAM,SAAS,EAAE,CAAC;QAClB,SAAe,SAAS;;;gBACpB,IAAI,SAAS,GAAW,CAAC,CAAC;gBAC1B,IAAI;oBAEA,IAAI,WAAW,GAAkB,MAAM,SAAI,CAAC,OAAO,CAAC,EAAC,OAAO,EAAC,OAAO,EAAC,CAAC,CAAC;oBAEvE,IAAI,WAAW,EAAE;wBACb,SAAS,GAAG,MAAA,WAAW,CAAC,mBAAmB,mCAAI,CAAC,CAAC;qBACpD;oBAED,IAAI,QAAQ,GAAG,IAAA,mBAAW,EAAC,OAAO,CAAC,CAAC;oBAEpC,IAAI,IAAI,GAA2B,MAAM,QAAQ,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,eAAe,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC,CAAC;oBAE9G,IAAI,gBAAgB,GAAQ,EAAE,CAAC;oBAC/B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBAClC,MAAM,cAAc,GAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;wBAChE,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;qBACzC;oBAED,gBAAgB,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;oBACvD,KAAK,IAAI,CAAC,IAAI,IAAI,EAAE;wBAChB,IAAI,KAAK,GAAW,IAAI,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC;wBAC5C,IAAI,WAAW,GAAW,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;wBAC9C,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC;wBAChC,IAAI,QAAQ,GAAW,IAAI,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;wBACxC,MAAM,cAAc,GAAW,gBAAgB,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;wBACpE,IAAI,QAAQ,GAAG;4BACX,KAAK,EAAE,KAAK;4BACZ,WAAW,EAAE,WAAW;4BACxB,cAAc,EAAE,cAAc;4BAC9B,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO;4BACxB,OAAO,EAAE,OAAO;4BAChB,QAAQ,EAAE,QAAQ;yBACrB,CAAC;wBAEF,MAAM,KAAK,GAA2B,IAAA,oBAAY,EAAC,GAAG,CAAC,CAAC;wBACxD,MAAM,YAAY,GAAQ,MAAM,eAAe,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;wBAErF,IAAI,YAAY,IAAI,YAAY,CAAC,IAAI,IAAI,SAAS,EAAE;4BAChD,4BAA4B;4BAC5B,IAAI,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE;gCAChC,MAAM,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;6BACrE;yBACJ;qBAEJ;oBACD,MAAM,SAAI,CAAC,gBAAgB,CACvB,EAAC,OAAO,EAAE,OAAO,EAAC,EAClB,EAAE,mBAAmB,EAAE,SAAS,EAAE,EAClC,EAAE,MAAM,EAAE,IAAI,EAAE,CACnB,CAAC;oBAGF,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,eAAe,EAAE,OAAO,CAAC,CAAC;oBACnD,OAAO,YAAY,CAAC,EAAE,eAAe,EAAE,GAAG,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC;iBACpE;gBACD,OAAO,KAAK,EAAE;oBACV,IAAI,UAAU,GAAG,CAAC,EAAE;wBAChB,MAAM,SAAI,CAAC,gBAAgB,CACvB,EAAE,EACF,EAAE,mBAAmB,EAAE,SAAS,EAAE,EAClC,EAAE,MAAM,EAAE,IAAI,EAAE,CACnB,CAAC;wBACF,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;wBAC9B,OAAO,CAAC,GAAG,CAAC,8BAA8B,EAAE,KAAK,CAAC,CAAC;wBACnD,UAAU,EAAE,CAAA;wBACZ,OAAO,SAAS,EAAE,CAAC;qBAEtB;yBACG;wBACA,UAAU,GAAG,CAAC,CAAC;wBACf,MAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;qBACjC;iBACJ;;SACJ;IAGL,CAAC;CAAA;AAIsB,oDAAoB","sourcesContent":["\r\nimport { Sync } from \"../DB/db\";\r\nimport { ethers } from \"ethers\";\r\nimport { getInterface, getProvider } from \"../utils/utils\";\r\nimport { ifEventListner, ifSync } from \"../helper/interface\";\r\nimport * as sentry from \"@sentry/node\";\r\nrequire(\"dotenv\").config();\r\n\r\n\r\n\r\n/**\r\n * @dev this function is use to decode, encoded event logs\r\n * @param {*} data (string) from log\r\n * @param {*} topics (array) \r\n * @param {*} iface (interface)\r\n * @returns decode event data\r\n */\r\nfunction decode_log_data(data: string, topics: string[], iface: any) {\r\n    try {\r\n\r\n        const result = iface.parseLog({ data, topics });\r\n        return result;\r\n    }\r\n    catch (error) {\r\n        return;\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * @dev this function is use to listen current events and call the respective handler function with respective its events data, this fuction is called by historicEventListner() function\r\n * @notice sync current logs , call the handler fuction, store current block to DB. \r\n * @param {*}\r\n * @param {*} contractAddress (string) address of exchange\r\n * @param {*} abi (array of objects)\r\n * @param {*}  handlers (object) this will call respective handler function as per the event name\r\n * @param {*} chainId (string) numeric chainId\r\n */\r\nasync function eventListner({ contractAddress, abi, handlers, chainId }: ifEventListner) {\r\n    try {\r\n\r\n        const provider: ethers.providers.JsonRpcProvider = getProvider(chainId);\r\n        let Contract: ethers.Contract = new ethers.Contract(contractAddress, abi, provider);\r\n        let events: string[] = Object.keys(handlers);\r\n        let fromBlock: number = 0;\r\n\r\n        for (let i = 0; i < events.length; i++) {\r\n\r\n            Contract.on(events[i], async (...args) => {\r\n                let result = args[args.length - 1];\r\n                const blockTimestamp: number = (await provider.getBlock(result.blockNumber)).timestamp * 1000;\r\n                fromBlock = result.blockNumber;\r\n                let argument = {\r\n                    txnId: result.transactionHash,\r\n                    blockTimestamp: blockTimestamp,\r\n                    blockNumber: result.blockNumber,\r\n                    address: result.address,\r\n                    chainId: chainId,\r\n                    logIndex: result.logIndex\r\n                };\r\n                // console.log(events[i])\r\n                await handlers[events[i]](result.args, argument);\r\n\r\n                await Sync.findOneAndUpdate(\r\n                    {chainId: chainId},\r\n                    { blockNumberExchange: fromBlock },\r\n                    { upsert: true }\r\n                );\r\n            });\r\n        }\r\n\r\n    }\r\n    catch (error) {\r\n\r\n        console.log(\"to sync\");\r\n        console.log(\"Error at eventListner\", error);\r\n        // sentry.captureException(error)\r\n        return historicEventListner({ contractAddress, abi, handlers, chainId });\r\n    }\r\n\r\n}\r\n\r\n\r\n/**\r\n * @dev this function is use to get historical log then decode that and call the respective handler function with decoded logs, if all logs synced then it will call the eventLisner function\r\n * @notice sync logs start from 0 if first time it is running, next time the last block will get from data base and then start sync from that block, \r\n * @param {*}\r\n * @param {*} contractAddress (string) address of exchange\r\n * @param {*} abi (array of objects)\r\n * @param {*}  handlers (object) this will call respective handler function as per the event name\r\n * @param {*} chainId (string) numeric chainId\r\n */\r\n\r\nlet errorCount = 0;\r\nasync function historicEventListner({ contractAddress, abi, handlers, chainId }: ifEventListner) {\r\n\r\n\r\n    await eventSync();\r\n    async function eventSync(): Promise<any> {\r\n        let fromBlock: number = 0;\r\n        try {\r\n\r\n            let syncDetails: ifSync | null = await Sync.findOne({chainId:chainId});\r\n\r\n            if (syncDetails) {\r\n                fromBlock = syncDetails.blockNumberExchange ?? 0;\r\n            }\r\n\r\n            let provider = getProvider(chainId);\r\n\r\n            let logs: ethers.providers.Log[] = await provider.getLogs({ address: contractAddress, fromBlock: fromBlock });\r\n\r\n            let promiseTimestamp: any = [];\r\n            for (let i = 0; i < logs.length; i++) {\r\n                const blockTimestamp = (provider.getBlock(logs[i].blockNumber));\r\n                promiseTimestamp.push(blockTimestamp);\r\n            }\r\n\r\n            promiseTimestamp = await Promise.all(promiseTimestamp);\r\n            for (let i in logs) {\r\n                let txnId: string = logs[i].transactionHash;\r\n                let blockNumber: number = logs[i].blockNumber;\r\n                fromBlock = logs[i].blockNumber;\r\n                let logIndex: number = logs[i].logIndex;\r\n                const blockTimestamp: number = promiseTimestamp[i].timestamp * 1000;\r\n                let argument = {\r\n                    txnId: txnId,\r\n                    blockNumber: blockNumber,\r\n                    blockTimestamp: blockTimestamp,\r\n                    address: logs[i].address,\r\n                    chainId: chainId,\r\n                    logIndex: logIndex\r\n                };\r\n\r\n                const iface: ethers.utils.Interface = getInterface(abi);\r\n                const decoded_data: any = await decode_log_data(logs[i].data, logs[i].topics, iface);\r\n\r\n                if (decoded_data && decoded_data.args != undefined) {\r\n                    // console.log(decoded_data)\r\n                    if (handlers[decoded_data[\"name\"]]) {\r\n                        await handlers[decoded_data[\"name\"]](decoded_data.args, argument);\r\n                    }\r\n                }\r\n\r\n            }\r\n            await Sync.findOneAndUpdate(\r\n                {chainId: chainId},\r\n                { blockNumberExchange: fromBlock },\r\n                { upsert: true }\r\n            );\r\n\r\n\r\n            console.log(\"to listen\", contractAddress, chainId);\r\n            return eventListner({ contractAddress, abi, handlers, chainId });\r\n        }\r\n        catch (error) {\r\n            if (errorCount < 5) {\r\n                await Sync.findOneAndUpdate(\r\n                    {},\r\n                    { blockNumberExchange: fromBlock },\r\n                    { upsert: true }\r\n                );\r\n                sentry.captureException(error)\r\n                console.log(\"Error @ historicEventListner\", error);\r\n                errorCount++\r\n                return eventSync();\r\n                \r\n            }\r\n            else{\r\n                errorCount = 0;\r\n                sentry.captureException(error)\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nexport { eventListner, historicEventListner };\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"07d6941583aed0c8695ec290a508fc8ea9fc9f1c","contentHash":"02e4fe7ac0f4c4a7d8a824c47f5c457ccbbe09cd96d653252343e6e9782fc7cd"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\updateOrderStatus.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\muticall\\updateOrderStatus.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"2":{"start":{"line":3,"column":26},"end":{"line":3,"column":33}},"3":{"start":{"line":4,"column":15},"end":{"line":4,"column":52}},"4":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"5":{"start":{"line":6,"column":6},"end":{"line":6,"column":68}},"6":{"start":{"line":6,"column":51},"end":{"line":6,"column":63}},"7":{"start":{"line":8,"column":4},"end":{"line":8,"column":39}},"8":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"9":{"start":{"line":10,"column":26},"end":{"line":10,"column":33}},"10":{"start":{"line":11,"column":4},"end":{"line":11,"column":17}},"11":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"12":{"start":{"line":14,"column":4},"end":{"line":14,"column":72}},"13":{"start":{"line":16,"column":4},"end":{"line":16,"column":21}},"14":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"15":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"16":{"start":{"line":19,"column":31},"end":{"line":19,"column":42}},"17":{"start":{"line":20,"column":17},"end":{"line":20,"column":19}},"18":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"19":{"start":{"line":21,"column":21},"end":{"line":21,"column":141}},"20":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"21":{"start":{"line":21,"column":109},"end":{"line":21,"column":141}},"22":{"start":{"line":22,"column":4},"end":{"line":22,"column":36}},"23":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"24":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"25":{"start":{"line":26,"column":28},"end":{"line":26,"column":110}},"26":{"start":{"line":26,"column":91},"end":{"line":26,"column":106}},"27":{"start":{"line":27,"column":4},"end":{"line":32,"column":7}},"28":{"start":{"line":28,"column":36},"end":{"line":28,"column":97}},"29":{"start":{"line":28,"column":42},"end":{"line":28,"column":70}},"30":{"start":{"line":28,"column":85},"end":{"line":28,"column":95}},"31":{"start":{"line":29,"column":35},"end":{"line":29,"column":100}},"32":{"start":{"line":29,"column":41},"end":{"line":29,"column":73}},"33":{"start":{"line":29,"column":88},"end":{"line":29,"column":98}},"34":{"start":{"line":30,"column":32},"end":{"line":30,"column":116}},"35":{"start":{"line":31,"column":8},"end":{"line":31,"column":78}},"36":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"37":{"start":{"line":35,"column":4},"end":{"line":35,"column":62}},"38":{"start":{"line":37,"column":0},"end":{"line":37,"column":62}},"39":{"start":{"line":38,"column":0},"end":{"line":38,"column":34}},"40":{"start":{"line":39,"column":17},"end":{"line":39,"column":34}},"41":{"start":{"line":40,"column":13},"end":{"line":40,"column":32}},"42":{"start":{"line":41,"column":17},"end":{"line":41,"column":51}},"43":{"start":{"line":42,"column":16},"end":{"line":42,"column":41}},"44":{"start":{"line":43,"column":15},"end":{"line":43,"column":52}},"45":{"start":{"line":44,"column":16},"end":{"line":44,"column":42}},"46":{"start":{"line":50,"column":4},"end":{"line":121,"column":7}},"47":{"start":{"line":51,"column":8},"end":{"line":120,"column":9}},"48":{"start":{"line":52,"column":30},"end":{"line":52,"column":171}},"49":{"start":{"line":53,"column":24},"end":{"line":53,"column":83}},"50":{"start":{"line":54,"column":27},"end":{"line":54,"column":31}},"51":{"start":{"line":55,"column":23},"end":{"line":55,"column":24}},"52":{"start":{"line":56,"column":27},"end":{"line":56,"column":29}},"53":{"start":{"line":57,"column":12},"end":{"line":115,"column":13}},"54":{"start":{"line":58,"column":40},"end":{"line":58,"column":158}},"55":{"start":{"line":59,"column":16},"end":{"line":62,"column":17}},"56":{"start":{"line":60,"column":20},"end":{"line":60,"column":37}},"57":{"start":{"line":61,"column":20},"end":{"line":61,"column":26}},"58":{"start":{"line":63,"column":16},"end":{"line":63,"column":23}},"59":{"start":{"line":64,"column":28},"end":{"line":64,"column":30}},"60":{"start":{"line":66,"column":16},"end":{"line":73,"column":17}},"61":{"start":{"line":67,"column":20},"end":{"line":72,"column":21}},"62":{"start":{"line":68,"column":24},"end":{"line":68,"column":129}},"63":{"start":{"line":70,"column":25},"end":{"line":72,"column":21}},"64":{"start":{"line":71,"column":24},"end":{"line":71,"column":129}},"65":{"start":{"line":74,"column":27},"end":{"line":74,"column":70}},"66":{"start":{"line":75,"column":16},"end":{"line":114,"column":17}},"67":{"start":{"line":75,"column":29},"end":{"line":75,"column":30}},"68":{"start":{"line":76,"column":34},"end":{"line":76,"column":80}},"69":{"start":{"line":77,"column":32},"end":{"line":77,"column":34}},"70":{"start":{"line":78,"column":33},"end":{"line":78,"column":57}},"71":{"start":{"line":79,"column":29},"end":{"line":79,"column":53}},"72":{"start":{"line":80,"column":20},"end":{"line":93,"column":21}},"73":{"start":{"line":81,"column":24},"end":{"line":81,"column":58}},"74":{"start":{"line":82,"column":24},"end":{"line":82,"column":89}},"75":{"start":{"line":83,"column":24},"end":{"line":85,"column":25}},"76":{"start":{"line":84,"column":28},"end":{"line":84,"column":86}},"77":{"start":{"line":87,"column":25},"end":{"line":93,"column":21}},"78":{"start":{"line":88,"column":24},"end":{"line":88,"column":58}},"79":{"start":{"line":89,"column":24},"end":{"line":89,"column":167}},"80":{"start":{"line":90,"column":24},"end":{"line":92,"column":25}},"81":{"start":{"line":91,"column":28},"end":{"line":91,"column":164}},"82":{"start":{"line":94,"column":20},"end":{"line":113,"column":21}},"83":{"start":{"line":95,"column":43},"end":{"line":95,"column":117}},"84":{"start":{"line":96,"column":45},"end":{"line":96,"column":93}},"85":{"start":{"line":97,"column":24},"end":{"line":103,"column":25}},"86":{"start":{"line":98,"column":56},"end":{"line":98,"column":118}},"87":{"start":{"line":100,"column":28},"end":{"line":101,"column":139}},"88":{"start":{"line":102,"column":28},"end":{"line":102,"column":90}},"89":{"start":{"line":105,"column":25},"end":{"line":113,"column":21}},"90":{"start":{"line":106,"column":43},"end":{"line":106,"column":158}},"91":{"start":{"line":107,"column":45},"end":{"line":107,"column":117}},"92":{"start":{"line":108,"column":24},"end":{"line":112,"column":25}},"93":{"start":{"line":109,"column":28},"end":{"line":110,"column":132}},"94":{"start":{"line":111,"column":28},"end":{"line":111,"column":88}},"95":{"start":{"line":118,"column":12},"end":{"line":118,"column":43}},"96":{"start":{"line":119,"column":12},"end":{"line":119,"column":54}},"97":{"start":{"line":124,"column":4},"end":{"line":128,"column":24}},"98":{"start":{"line":124,"column":22},"end":{"line":128,"column":6}},"99":{"start":{"line":125,"column":8},"end":{"line":125,"column":50}},"100":{"start":{"line":126,"column":8},"end":{"line":126,"column":35}},"101":{"start":{"line":127,"column":8},"end":{"line":127,"column":50}},"102":{"start":{"line":130,"column":0},"end":{"line":130,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":74},"end":{"line":2,"column":75}},"loc":{"start":{"line":2,"column":96},"end":{"line":9,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":38},"end":{"line":6,"column":39}},"loc":{"start":{"line":6,"column":49},"end":{"line":6,"column":65}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":6},"end":{"line":9,"column":7}},"loc":{"start":{"line":9,"column":28},"end":{"line":12,"column":1}},"line":9},"3":{"name":"(anonymous_3)","decl":{"start":{"line":13,"column":80},"end":{"line":13,"column":81}},"loc":{"start":{"line":13,"column":95},"end":{"line":15,"column":1}},"line":13},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":5},"end":{"line":15,"column":6}},"loc":{"start":{"line":15,"column":20},"end":{"line":17,"column":1}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":18,"column":50},"end":{"line":18,"column":51}},"loc":{"start":{"line":18,"column":65},"end":{"line":24,"column":1}},"line":18},"6":{"name":"(anonymous_6)","decl":{"start":{"line":25,"column":44},"end":{"line":25,"column":45}},"loc":{"start":{"line":25,"column":89},"end":{"line":33,"column":1}},"line":25},"7":{"name":"adopt","decl":{"start":{"line":26,"column":13},"end":{"line":26,"column":18}},"loc":{"start":{"line":26,"column":26},"end":{"line":26,"column":112}},"line":26},"8":{"name":"(anonymous_8)","decl":{"start":{"line":26,"column":70},"end":{"line":26,"column":71}},"loc":{"start":{"line":26,"column":89},"end":{"line":26,"column":108}},"line":26},"9":{"name":"(anonymous_9)","decl":{"start":{"line":27,"column":36},"end":{"line":27,"column":37}},"loc":{"start":{"line":27,"column":63},"end":{"line":32,"column":5}},"line":27},"10":{"name":"fulfilled","decl":{"start":{"line":28,"column":17},"end":{"line":28,"column":26}},"loc":{"start":{"line":28,"column":34},"end":{"line":28,"column":99}},"line":28},"11":{"name":"rejected","decl":{"start":{"line":29,"column":17},"end":{"line":29,"column":25}},"loc":{"start":{"line":29,"column":33},"end":{"line":29,"column":102}},"line":29},"12":{"name":"step","decl":{"start":{"line":30,"column":17},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":30},"end":{"line":30,"column":118}},"line":30},"13":{"name":"(anonymous_13)","decl":{"start":{"line":34,"column":56},"end":{"line":34,"column":57}},"loc":{"start":{"line":34,"column":71},"end":{"line":36,"column":1}},"line":34},"14":{"name":"orderStatus","decl":{"start":{"line":49,"column":9},"end":{"line":49,"column":20}},"loc":{"start":{"line":49,"column":30},"end":{"line":122,"column":1}},"line":49},"15":{"name":"(anonymous_15)","decl":{"start":{"line":50,"column":43},"end":{"line":50,"column":44}},"loc":{"start":{"line":50,"column":56},"end":{"line":121,"column":5}},"line":50},"16":{"name":"startOrderStatus","decl":{"start":{"line":123,"column":9},"end":{"line":123,"column":25}},"loc":{"start":{"line":123,"column":35},"end":{"line":129,"column":1}},"line":123},"17":{"name":"(anonymous_17)","decl":{"start":{"line":124,"column":16},"end":{"line":124,"column":17}},"loc":{"start":{"line":124,"column":22},"end":{"line":128,"column":6}},"line":124},"18":{"name":"(anonymous_18)","decl":{"start":{"line":124,"column":54},"end":{"line":124,"column":55}},"loc":{"start":{"line":124,"column":67},"end":{"line":128,"column":5}},"line":124}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":12,"column":3}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":57},"end":{"line":12,"column":2}}],"line":2},"1":{"loc":{"start":{"line":2,"column":57},"end":{"line":12,"column":2}},"type":"cond-expr","locations":[{"start":{"line":2,"column":74},"end":{"line":9,"column":1}},{"start":{"line":9,"column":6},"end":{"line":12,"column":1}}],"line":2},"2":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":33}},{"start":{"line":3,"column":4},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":7,"column":5}},{"start":{"line":5,"column":4},"end":{"line":7,"column":5}}],"line":5},"4":{"loc":{"start":{"line":5,"column":8},"end":{"line":5,"column":85}},"type":"binary-expr","locations":[{"start":{"line":5,"column":8},"end":{"line":5,"column":13}},{"start":{"line":5,"column":18},"end":{"line":5,"column":84}}],"line":5},"5":{"loc":{"start":{"line":5,"column":18},"end":{"line":5,"column":84}},"type":"cond-expr","locations":[{"start":{"line":5,"column":34},"end":{"line":5,"column":47}},{"start":{"line":5,"column":50},"end":{"line":5,"column":84}}],"line":5},"6":{"loc":{"start":{"line":5,"column":50},"end":{"line":5,"column":84}},"type":"binary-expr","locations":[{"start":{"line":5,"column":50},"end":{"line":5,"column":63}},{"start":{"line":5,"column":67},"end":{"line":5,"column":84}}],"line":5},"7":{"loc":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"type":"if","locations":[{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},{"start":{"line":10,"column":4},"end":{"line":10,"column":33}}],"line":10},"8":{"loc":{"start":{"line":13,"column":25},"end":{"line":17,"column":2}},"type":"binary-expr","locations":[{"start":{"line":13,"column":26},"end":{"line":13,"column":30}},{"start":{"line":13,"column":34},"end":{"line":13,"column":57}},{"start":{"line":13,"column":63},"end":{"line":17,"column":1}}],"line":13},"9":{"loc":{"start":{"line":13,"column":63},"end":{"line":17,"column":1}},"type":"cond-expr","locations":[{"start":{"line":13,"column":80},"end":{"line":15,"column":1}},{"start":{"line":15,"column":5},"end":{"line":17,"column":1}}],"line":13},"10":{"loc":{"start":{"line":18,"column":19},"end":{"line":24,"column":1}},"type":"binary-expr","locations":[{"start":{"line":18,"column":20},"end":{"line":18,"column":24}},{"start":{"line":18,"column":28},"end":{"line":18,"column":45}},{"start":{"line":18,"column":50},"end":{"line":24,"column":1}}],"line":18},"11":{"loc":{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":42}},{"start":{"line":19,"column":4},"end":{"line":19,"column":42}}],"line":19},"12":{"loc":{"start":{"line":19,"column":8},"end":{"line":19,"column":29}},"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":11}},{"start":{"line":19,"column":15},"end":{"line":19,"column":29}}],"line":19},"13":{"loc":{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":141}},{"start":{"line":21,"column":4},"end":{"line":21,"column":141}}],"line":21},"14":{"loc":{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},"type":"if","locations":[{"start":{"line":21,"column":40},"end":{"line":21,"column":141}},{"start":{"line":21,"column":40},"end":{"line":21,"column":141}}],"line":21},"15":{"loc":{"start":{"line":21,"column":44},"end":{"line":21,"column":107}},"type":"binary-expr","locations":[{"start":{"line":21,"column":44},"end":{"line":21,"column":59}},{"start":{"line":21,"column":63},"end":{"line":21,"column":107}}],"line":21},"16":{"loc":{"start":{"line":25,"column":16},"end":{"line":33,"column":1}},"type":"binary-expr","locations":[{"start":{"line":25,"column":17},"end":{"line":25,"column":21}},{"start":{"line":25,"column":25},"end":{"line":25,"column":39}},{"start":{"line":25,"column":44},"end":{"line":33,"column":1}}],"line":25},"17":{"loc":{"start":{"line":26,"column":35},"end":{"line":26,"column":109}},"type":"cond-expr","locations":[{"start":{"line":26,"column":56},"end":{"line":26,"column":61}},{"start":{"line":26,"column":64},"end":{"line":26,"column":109}}],"line":26},"18":{"loc":{"start":{"line":27,"column":16},"end":{"line":27,"column":34}},"type":"binary-expr","locations":[{"start":{"line":27,"column":16},"end":{"line":27,"column":17}},{"start":{"line":27,"column":22},"end":{"line":27,"column":33}}],"line":27},"19":{"loc":{"start":{"line":30,"column":32},"end":{"line":30,"column":115}},"type":"cond-expr","locations":[{"start":{"line":30,"column":46},"end":{"line":30,"column":67}},{"start":{"line":30,"column":70},"end":{"line":30,"column":115}}],"line":30},"20":{"loc":{"start":{"line":31,"column":51},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":51},"end":{"line":31,"column":61}},{"start":{"line":31,"column":65},"end":{"line":31,"column":67}}],"line":31},"21":{"loc":{"start":{"line":34,"column":22},"end":{"line":36,"column":1}},"type":"binary-expr","locations":[{"start":{"line":34,"column":23},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}},{"start":{"line":34,"column":56},"end":{"line":36,"column":1}}],"line":34},"22":{"loc":{"start":{"line":35,"column":11},"end":{"line":35,"column":61}},"type":"cond-expr","locations":[{"start":{"line":35,"column":37},"end":{"line":35,"column":40}},{"start":{"line":35,"column":43},"end":{"line":35,"column":61}}],"line":35},"23":{"loc":{"start":{"line":35,"column":12},"end":{"line":35,"column":33}},"type":"binary-expr","locations":[{"start":{"line":35,"column":12},"end":{"line":35,"column":15}},{"start":{"line":35,"column":19},"end":{"line":35,"column":33}}],"line":35},"24":{"loc":{"start":{"line":59,"column":16},"end":{"line":62,"column":17}},"type":"if","locations":[{"start":{"line":59,"column":16},"end":{"line":62,"column":17}},{"start":{"line":59,"column":16},"end":{"line":62,"column":17}}],"line":59},"25":{"loc":{"start":{"line":67,"column":20},"end":{"line":72,"column":21}},"type":"if","locations":[{"start":{"line":67,"column":20},"end":{"line":72,"column":21}},{"start":{"line":67,"column":20},"end":{"line":72,"column":21}}],"line":67},"26":{"loc":{"start":{"line":67,"column":24},"end":{"line":67,"column":94}},"type":"binary-expr","locations":[{"start":{"line":67,"column":24},"end":{"line":67,"column":57}},{"start":{"line":67,"column":61},"end":{"line":67,"column":94}}],"line":67},"27":{"loc":{"start":{"line":70,"column":25},"end":{"line":72,"column":21}},"type":"if","locations":[{"start":{"line":70,"column":25},"end":{"line":72,"column":21}},{"start":{"line":70,"column":25},"end":{"line":72,"column":21}}],"line":70},"28":{"loc":{"start":{"line":70,"column":29},"end":{"line":70,"column":99}},"type":"binary-expr","locations":[{"start":{"line":70,"column":29},"end":{"line":70,"column":62}},{"start":{"line":70,"column":66},"end":{"line":70,"column":99}}],"line":70},"29":{"loc":{"start":{"line":80,"column":20},"end":{"line":93,"column":21}},"type":"if","locations":[{"start":{"line":80,"column":20},"end":{"line":93,"column":21}},{"start":{"line":80,"column":20},"end":{"line":93,"column":21}}],"line":80},"30":{"loc":{"start":{"line":80,"column":24},"end":{"line":80,"column":94}},"type":"binary-expr","locations":[{"start":{"line":80,"column":24},"end":{"line":80,"column":57}},{"start":{"line":80,"column":61},"end":{"line":80,"column":94}}],"line":80},"31":{"loc":{"start":{"line":83,"column":24},"end":{"line":85,"column":25}},"type":"if","locations":[{"start":{"line":83,"column":24},"end":{"line":85,"column":25}},{"start":{"line":83,"column":24},"end":{"line":85,"column":25}}],"line":83},"32":{"loc":{"start":{"line":87,"column":25},"end":{"line":93,"column":21}},"type":"if","locations":[{"start":{"line":87,"column":25},"end":{"line":93,"column":21}},{"start":{"line":87,"column":25},"end":{"line":93,"column":21}}],"line":87},"33":{"loc":{"start":{"line":87,"column":29},"end":{"line":87,"column":99}},"type":"binary-expr","locations":[{"start":{"line":87,"column":29},"end":{"line":87,"column":62}},{"start":{"line":87,"column":66},"end":{"line":87,"column":99}}],"line":87},"34":{"loc":{"start":{"line":90,"column":24},"end":{"line":92,"column":25}},"type":"if","locations":[{"start":{"line":90,"column":24},"end":{"line":92,"column":25}},{"start":{"line":90,"column":24},"end":{"line":92,"column":25}}],"line":90},"35":{"loc":{"start":{"line":94,"column":20},"end":{"line":113,"column":21}},"type":"if","locations":[{"start":{"line":94,"column":20},"end":{"line":113,"column":21}},{"start":{"line":94,"column":20},"end":{"line":113,"column":21}}],"line":94},"36":{"loc":{"start":{"line":97,"column":24},"end":{"line":103,"column":25}},"type":"if","locations":[{"start":{"line":97,"column":24},"end":{"line":103,"column":25}},{"start":{"line":97,"column":24},"end":{"line":103,"column":25}}],"line":97},"37":{"loc":{"start":{"line":105,"column":25},"end":{"line":113,"column":21}},"type":"if","locations":[{"start":{"line":105,"column":25},"end":{"line":113,"column":21}},{"start":{"line":105,"column":25},"end":{"line":113,"column":21}}],"line":105},"38":{"loc":{"start":{"line":108,"column":24},"end":{"line":112,"column":25}},"type":"if","locations":[{"start":{"line":108,"column":24},"end":{"line":112,"column":25}},{"start":{"line":108,"column":24},"end":{"line":112,"column":25}}],"line":108}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":0,"13":0,"14":1,"15":1,"16":1,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":1,"98":0,"99":0,"100":0,"101":0,"102":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":1,"17":0,"18":0},"b":{"0":[1,1,1],"1":[1,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[1,1,1],"9":[1,0],"10":[1,1,1],"11":[1,0],"12":[1,1],"13":[0,0],"14":[0,0],"15":[0,0],"16":[1,1,1],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[1,1,1],"22":[0,1],"23":[1,1],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/updateOrderStatus.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/muticall/updateOrderStatus.ts"],"names":[],"mappings":"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","sourcesContent":["import { BigNumber, ethers } from \"ethers\";\r\nimport { User, Order } from \"../DB/db\";\r\nimport Big from \"big.js\";\r\nimport { getABI, getProvider, getInterface} from \"../utils/utils\";\r\nimport { ifOrderCreated, ifUserPosition } from \"../helper/interface\";\r\nimport * as sentry from \"@sentry/node\";\r\nimport { getMulticallAddress } from \"../helper/chain\";\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @dev this function will run periodically e.g 30 min etc, it will check all the orders, for there maker balance and order amount, if order is active = false and now the user have sufficient balance then it will change its status to true, if order is active but now user does not have sufficient token then it will change its status to false \r\n * @param {*} chainId (string) numeric chainId\r\n */\r\nasync function orderStatus(chainId: string) {\r\n    try {\r\n\r\n        const multicall: ethers.Contract = new ethers.Contract(\r\n            getMulticallAddress(chainId),\r\n            getABI(\"Multicall2\"),\r\n            getProvider(chainId)\r\n        );\r\n\r\n        const itf: ethers.utils.Interface = getInterface(getABI(\"TestERC20\"));\r\n        let hasOrder: boolean = true;\r\n        let page: number = 0;\r\n        const _limit = 20;\r\n\r\n        while (hasOrder == true) {\r\n            const getOrderCreated: ifOrderCreated[] = await Order.find({ deleted: false, cancelled: false, chainId: chainId }).skip(page * _limit).limit(_limit).lean();\r\n            if (getOrderCreated.length == 0) {\r\n                hasOrder = false;\r\n                break;\r\n            }\r\n            page++;\r\n\r\n            let input: any = [];\r\n\r\n            // creating input for multicall\r\n            for (let k in getOrderCreated) {\r\n\r\n                if (getOrderCreated[k].orderType == 1 || getOrderCreated[k].orderType == 3) {\r\n\r\n                    input.push([getOrderCreated[k].token0, itf.encodeFunctionData(\"balanceOf\", [getOrderCreated[k].maker])]);\r\n\r\n                }\r\n                else if (getOrderCreated[k].orderType == 0 || getOrderCreated[k].orderType == 2) {\r\n\r\n                    input.push([getOrderCreated[k].token1, itf.encodeFunctionData(\"balanceOf\", [getOrderCreated[k].maker])]);\r\n                }\r\n            }\r\n\r\n            let resp: any = await multicall.callStatic.aggregate(input);\r\n\r\n            for (let i = 0; i < resp[1].length; i++) {\r\n\r\n                let balance: string = BigNumber.from(resp[1][i]).toString();\r\n\r\n                let token: string = '';\r\n                let amount: Big = Big(0);\r\n                let id = getOrderCreated[i].maker;\r\n\r\n                if (getOrderCreated[i].orderType == 1 || getOrderCreated[i].orderType == 3) {\r\n                    token = getOrderCreated[i].token0;\r\n                    amount = Big(getOrderCreated[i].balanceAmount);\r\n                    if (getOrderCreated[i].orderType == 3) {\r\n                        amount = Big(getOrderCreated[i].amount);\r\n                    }\r\n                }\r\n                else if (getOrderCreated[i].orderType == 0 || getOrderCreated[i].orderType == 2) {\r\n                    token = getOrderCreated[i].token1;\r\n                    amount = Big(getOrderCreated[i].balanceAmount).times(getOrderCreated[i].exchangeRate).div(Big(10).pow(18));\r\n                    if (getOrderCreated[i].orderType == 2) {\r\n                        amount = Big(getOrderCreated[i].amount).times(getOrderCreated[i].exchangeRate).div(Big(10).pow(18));\r\n                    }\r\n                }\r\n\r\n                if (getOrderCreated[i].active == true) {\r\n\r\n                    const getUserPos: ifUserPosition = await User.findOne({ token: token, id: id, chainId: chainId }).lean();\r\n\r\n                    let inOrderBalance = Big(getUserPos.inOrderBalance);\r\n\r\n                    if (Number(inOrderBalance) > Number(balance)) {\r\n                        let currentInOrderBalance = Big(inOrderBalance).minus(amount).toString();\r\n                        // updating inOrderBalance and active\r\n                        await Promise.all([Order.findOneAndUpdate({ _id: getOrderCreated[i]._id }, { $set: { active: false } }),\r\n                        User.findOneAndUpdate({ _id: getUserPos._id }, { $set: { inOrderBalance: currentInOrderBalance } })]);\r\n                        console.log(\"inactive\", getOrderCreated[i].id, getUserPos.id);\r\n                    }\r\n                }\r\n                else if (getOrderCreated[i].active == false) {\r\n\r\n                    const getUserPos: ifUserPosition = await User.findOne({ token: token, id: getOrderCreated[i].maker, chainId: getOrderCreated[i].chainId }).lean();\r\n\r\n                    let inOrderBalance = Big(getUserPos.inOrderBalance).plus(amount).toString();\r\n\r\n                    if (Number(inOrderBalance) < Number(balance)) {\r\n\r\n                        await Promise.all([Order.findOneAndUpdate({ _id: getOrderCreated[i]._id }, { $set: { active: true } }),\r\n                        User.findOneAndUpdate({ _id: getUserPos._id }, { $set: { inOrderBalance: inOrderBalance } })]);\r\n                        console.log(\"active\", getOrderCreated[i].id, getUserPos.id);\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n    catch (error) {\r\n        sentry.captureException(error)\r\n        console.log(\"Error @ orderStatus\", error);\r\n    }\r\n}\r\n\r\nexport function startOrderStatus(chainId: string) {\r\n    setInterval(async () => {\r\n        console.log(\"order status start running\");\r\n        await orderStatus(chainId);\r\n        console.log(\"order status done updating\");\r\n    }, 1000 * 60 * 30);\r\n}\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"520a324332f6ec1ad253cba260cdef77d13b3a80","contentHash":"5f3c38d3d928546eb4573013fb2e3c7e80b5ad4fefc5f1d48c33f8f22e81f1d0"},"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\expressMonitorConfig.ts":{"path":"C:\\Users\\mubas\\Desktop\\chainscore\\backend\\zexe-arbitrum.01-ts\\src\\utils\\expressMonitorConfig.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":42}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":27}},"4":{"start":{"line":6,"column":14},"end":{"line":6,"column":59}},"5":{"start":{"line":7,"column":0},"end":{"line":50,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/expressMonitorConfig.ts","sources":["C:/Users/mubas/Desktop/chainscore/backend/zexe-arbitrum.01-ts/src/utils/expressMonitorConfig.ts"],"names":[],"mappings":";;;AAAA,2CAA6C;AAG7C,OAAO,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,CAAA;AAE1B,IAAI,OAAO,GAAG,IAAA,kBAAU,EAAC,OAAO,CAAC,GAAG,CAAC,QAAS,CAAC,CAAC;AAEnC,QAAA,oBAAoB,GAAG;IAEhC,KAAK,EAAE,gBAAgB;IACvB,KAAK,EAAE,aAAa;IACpB,IAAI,EAAE,SAAS;IACf,UAAU,EAAE,YAAY;IACxB,uCAAuC;IACvC,KAAK,EAAE,CAAC;YACJ,QAAQ,EAAE,CAAC;YACX,SAAS,EAAE,EAAE,CAAW,+BAA+B;SAC1D,EAAE;YACC,QAAQ,EAAE,CAAC;YACX,SAAS,EAAE,EAAE;SAChB,EAAE;YACC,QAAQ,EAAE,EAAE;YACZ,SAAS,EAAE,EAAE;SAChB,CAAC;IACF,eAAe,EAAE;QACb,GAAG,EAAE,IAAI;QACT,GAAG,EAAE,IAAI;QACT,IAAI,EAAE,IAAI;QACV,SAAS,EAAE,IAAI;QACf,IAAI,EAAE,IAAI;QACV,YAAY,EAAE,IAAI;QAClB,GAAG,EAAE,IAAI;QACT,WAAW,EAAE,IAAI;KACpB;IACD,YAAY,EAAE;QACV;YACI,QAAQ,EAAE,MAAM;YAChB,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,MAAM,OAAO,YAAY;YAC/B,OAAO,EAAE,EAAE;SACd;QACD;YACI,QAAQ,EAAE,MAAM;YAChB,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,IAAI;YACV,IAAI,EAAE,MAAM,OAAO,kBAAkB;YACrC,OAAO,EAAE,EAAE;SACd;KAEJ;IACD,4BAA4B;CAC/B,CAAA","sourcesContent":["import { getVersion } from \"../helper/chain\";\r\n\r\n\r\nrequire(\"dotenv\").config()\r\n\r\nlet version = getVersion(process.env.NODE_ENV!);\r\n\r\nexport const expressMonitorConfig = {\r\n\r\n    title: 'Express Status',  // Default title\r\n    theme: 'default.css',     // Default styles\r\n    path: '/status',\r\n    socketPath: '/socket.io', // In case you use a custom path\r\n    // websocket: existingSocketIoInstance,\r\n    spans: [{\r\n        interval: 1,            // Every second\r\n        retention: 60           // Keep 60 datapoints in memory\r\n    }, {\r\n        interval: 5,            // Every 5 seconds\r\n        retention: 60\r\n    }, {\r\n        interval: 15,           // Every 15 seconds\r\n        retention: 60\r\n    }],\r\n    chartVisibility: {\r\n        cpu: true,\r\n        mem: true,\r\n        load: true,\r\n        eventLoop: true,\r\n        heap: true,\r\n        responseTime: true,\r\n        rps: true,\r\n        statusCodes: true\r\n    },\r\n    healthChecks: [\r\n        {\r\n            protocol: 'http',\r\n            host: 'localhost',\r\n            port: 3010,\r\n            path: `/v/${version}/DB/status`,\r\n            headers: {},\r\n        },\r\n        {\r\n            protocol: 'http',\r\n            host: 'localhost',\r\n            port: 3010,\r\n            path: `/v/${version}/DB/fetch/record`,\r\n            headers: {},\r\n        },\r\n\r\n    ],\r\n    // ignoreStartsWith: '/pair'\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"90e7e380d608826296baedde4ee5d28311c025fd","contentHash":"0d643aaffcf5e63d15890dcd29de5b9a3afb6fbf2e79489bf919ef63ef263e58"}}